//	Playerjs.com 20.7.5
//	27.08.2025 22:33:52
//	API - https://playerjs.com/docs/q=api

function Playerjs(options) {

    window.playlist = options.file;
	
    var o = {
        play: !1,
        audiosrc: [],
        audioctx: [],
        acted: !1,
        playerid: "q8werpusgvph",
        default_w: 640,
        default_h: 360,
        version: "20.7.5",
        compilation: ["HLS", "VASTP"],
        compilations: "",
        fullscreen: !1,
        realfullscreen: !1,
        nativecontrols: !1,
        fullwheel: !1,
        fullscreen_start: !1,
        airplay: !1,
        pipwebkit: !1,
        ispipkit: !1,
        u: "#1fZxnM3xmaK5kc2YWdjw6wkoXAroXAqwTwOFWc2YjMLwjCOTjM29Tc3wjCjwYMHtiAKsjzqxPbKFmwkPYzqxUMLxObK4jCjwUAHdhAHohAHohCrAjzqxOdNtlbKJVeqw6AqXjMK5QcKt0bK9VwkPjcN9VaGwTwNsjCjwYwjXjbqw6AkITwOxWeK5lbK5OwkPXzqxUdNeVd21Tcqw6wj0YBjoYAqoYAqo4AZwTwNiQauJlc3eVwkPXzqxTaKa0MK5ldNmObvFXMKFlbK5OwkP4CqXjM2YQM2UidNJiwkPXzqxOdNF0wkPXzqxPbKFmcuJieNJ0bK1mc3J0wkPZzqxVc2ild3F0wkPYzqxPbKFmbOJneua1cuXjCkt9zqxkc250dN9TL3FQeuYmwkQ7wN9ZauJZwkPYzqxWcjw6AqXjMKB0bK9VwkPjeum0cuIjzqx0fLpmwkPjeuJ4eqwTwOpWd2m0bK9VwkPjeu9XzKYmaOEjzqxkcumkbZw6AqXjbutVaqw6AqXjeuJ4eqw6wjwTwOaidjw6wOFQeuYmwjXjbumlaGw6AGXjbumlaK9VduYifGw6AGXjMK5QcKt0bK9VwkPjdu9nbLFQc24jzqxjaZw6AGXjMNeiwkPXzkETwNxOdutlaumVaZw6wkMhBjo2wrMjgGXjM29VevxWct9TbK5mwkQ7wN9ZauJZwkP5zqxWcjw6AGXjevmXaGw6wOBPMLpmwjXjMKB0bK9VwkPjcumVaGwTwNhjCkdTwOxWeK5lbK5OwkPjAqwTwOdjCksXAqXjMGw6wksjzqxiMNdjCjwXzkAjzqxicu9iaqw6wkoVBjwTwNtWeNJZwkPjAq44wjXjM29Tc3wjCjwZMKsYMnwjzqxkc2YWdNxOwkPjMHaiBNs2wjXjM29Tc3xTc2tlwkPjaNaNaNaNwjXjM29Tc3xWeNJZwkPjaNaNaNaNwjXjMOJNaNJZwkQ7wN9VwkPXzqxkc2YWdjw6wNaNaNaNajwTwNsjCkoVBL0TwOpWd2m0bK9VwkPjMN90eu9UwjXjcKtZa2mVwkPjAqoYAqo0Bj41wrhnwjXjbutVauYmwkPXzqxja3piauFQcNdjCjw1wrohBGoXwjXjeumXwkPYzqxPbKFmwkPYzqxPbKFmc25TbLamwkPYzqxmfvpicNEjCjwUAGwTwNB1d3FWcLeQavFPwkPXzqx2MKY1aGw6AqXjdN91cNFWeLEjCkoTwNhZwkPUAL0TwNBWcOFZc2YgduYifGw6fZxWdNFmdjw6AjXjc24jCksTwNmkc24jCjw8d3aOwveQavFPDGdZAqdhbuJQa2i0DGdZAqd#DudhaNmTcq1ZeKYmDGeVc256aLxWxZp0dNtVd2aWdN09x3FZMK5ncut0aGh1zqonyGd#Dvpieuhhar0OHHsYzkE0BkA0BkwTBj4YBHd4AHw1wsXYzks0Ars5AkAYzroVAHs2BkM2BkdhEnsVArs0Anw2CHwTAq4XBrA3BGoXzkh4Brd1CHMZzrohAq43AnM2Crw2CGXXwsAXzkAnAns3Ano4zrohAq4XArA3Ars5AjXXzkAZCrsZBGoXzkoXAndXAHlZzroVBnw5AHM2BkdhHroTAq43AklYBkM2BZpAAqXYAZ4ZBno4AnAnwsXXzkoXAndXAHlZzrsnzkw3ArhnAnAhEnoVAronBnoYCHwTAHAVBkdYCrd1wroVAnAnAHdnArhTAHEhAq43AnM2Crw2CGXYBqprAq44Crh0Bks1BqXYBqoYzkoYBrAZBklZzrsnzkl0Crl1CrAhAG4YBHsZCHhXCqXYAZ44BnMXBrs3wsXYAG40BrMnBrMZzrdVCrEZAHh3BGprAHsVBklXBkdnAGX3zkM0AHM2BkdhAHsVCrE2AHInCqX3zkAnCHo2AkIhAHsVCrE2AHInCqX3wsAYAG44BrMYBHA4zrMVBkMXCHA3BGoYAG42CHo2BnAYzrMVAnMYCHd5AHdhAHsVBrE2AnE2AjX2zks1BnhYAkIhHrsYzkE0BkA0BkwTBj4YBHd4AHw1wtPOwuaQcuX9xZBNaNaNaNMOLq8#DtXWan48Lq9neNd#wjXjbKBWckwjCjw8d3aOwveQavFPDGdZAqdhbuJQa2i0DGdZAqd#DudhaNmTcr0OwnoXAroXAqdhevxicOBNc3xUDGe0dNtVd2YieuIPBqXhAZlODkYXMLFPwuE9x003zkdXBnM5Akw4zroVBnd3Bnd4ArM3wsX3zkdXBnM5Akw4zrsnzkwZAkwZAkwhEndVBno3BklZAkhTAHAVBkIYBnd3wrhVArlYAHwXAksTAHEhCq41BkEYArw1AZXYBqpAAHsVAHAnAnAnAZXYBqprAHsVBko2Ans1BjXYBqoYAG45Crl3BrA1zrsnzkM1AHd3BZoYAG45Crl3BrA1zrsnzkwZAkwZAkwhHrsYzkl4CHd0AnITAq43Bnd3Bnd3BnhhEnsYzkl4CHd0AnITAq4nBrhZAkw5BnwhAHsVBko2Ans1BjXXwrsYzksnAnAnAnATAqpACq41BkEYArw1AZXXwsA4zko5AHsZArwYzrohBZ43Ard2CHwZCqXXzkA0CrwZAkl3Ajo3zkdXBnM5Akw4zroVBnd3Bnd3Bnd4wtPhHHAVBrw1BkEYArsTAHEhHroVCrI2BrsXAkInzrs0wsAXzkA4AnEZBnlnAGXYBqoXzrsnzkM1AHd3BZoXzrsnzkwZAkwZAkwhHroTAq43Bnd3Bnd5AHAhEnoTAq4nBrhZAkw5BnwhAq4nCrA0Akd5AnsTAqoXzkh1BkEYArw1AZXXwsXnzkEZBHM0AHoYzrohEnAVCrl4BkwnAnETAqo0zkw4Ako1AHw3zroVAnE4AkwZCHdZwrEVAkhZArIYAkdTAq43Bnd3Bnd3BnhhHrEVAkhZArIYAkdTAHAVAkwZAkwZAjprBq4ZCrwXBHsZBZXYAZ42BHs3BndhAZ44CHh2AkAnBqXYBqonzkEZBHM0AHoYzrs0wtPOwuaQcuX9xZBNaNaNaNMOLq8#DtXWan48Lq9neNd#wjXjbKBWckAjCjw8d3aOwveQavFPDGdZAqdhbuJQa2i0DGdZAqd#DudhevxicOBNc3xUDGe0dNtVd2YieuIPAjXhAZlODkYXMLFPwuE9x00YBjX3zksnBkMYAHAZwsXYBjX3zksXCHs2CHE1wsXYBG4ZArhYBnh1zrdVAHo5AHM5BrIhHrs0zkw3BHo5AZX3zksXCHs2CHE1wsAYBq4ZBnIXCHATAZ4YCHlYAkMZBGoYAG4XBkAYCHdTAqo3zksnBnI0BkE1zrohEnAVAksYCrl1CHsTAqoXzrAVAHl5AHw2AkIhAqX3zksXCHs2CHE1wsAXzrsYzkoYCHwYAkMhAZ4ZAHs4CHI5AGXYBq4ZAHhnAnh5wrdVAHA3BHE2BrITAHEVAks4AnA4CGpABZ4YAnd1BrM0BGXYAj40BrsXBrM1wsA0zks5AnAXCrI1zrsZzkE0AHo0BkIhAG43CrEnCrM2AjXYAq4XBrs3Ars4wrsVBnh0Anh2BkwTBZ4YArlYBkl0BGprAG43CrEnCrM2AjX0zks3BkMnBno1wrEVAHlnAno4BHITAG43BndZCHwnBjo3zksnBnI0BkE1zrsVBnd3AklZAnMhEnsXzko4AHd4BrETAG43BndZCHwnBjoYAj40CHo3ArMnzrEVAHd2BkA3ArIhAHwVBrlXBno2AZX3zksXCHs2CHE1wsXYAq42BrE1AHM3zrdVAHo5AHM5BrIhHrsnzkA4Akh5CHMTAHsVBHIZBroXBqpAAHMTBZ4YAnM2AHsnAjpbxZpNbKYTDGdkaNaNaNaNxn48Lq9XMLFPDkYdz2d#DtXWd3aODjwTwNtkeumWcjw6wOpTMLljzqxiM3FQc24ZwkPjdut1d2Ijzqx0fLpmwkPjd3aOwjXjd2BicuIjCjwYzkEjzqxnM2tTaK92aLwjCjwUAGwTwN1idNeQcjw6wkohAqoYBjoYCGwTwOpWd2m0bK9VwkPjMN90eu9UzKYmaOEjzqxjaZw6AGXjMNekc2YWdjw6wktiAKsYMGwTwNxOMGw6wksjzqxja3piauFQcNdjCjw2wrs0wrMhAHEjzqxja28jCjwXwjXjMNekc2YWdN92aLwjCjwZMKsYMnwjzqxja2tWeNJZwkPjAGwTwNiQauIjCksTwNiQauJWcOeQavFPwkPXzqxPbKFmc253bKF0buYQcKm0wkP2AroTwNmkc25nM29Tc3xWeNJZwkPjzHsjgGXjM29VevxWct9UeLFmwkQ7wN9ZauJZwkPYAGXjc24jCksTwNmkc24jCjw8d3aOwveQavFPDGdZAqdhbuJQa2i0DGdZAqd#DudhevxicOBNc3xUDGe0dNtVd2YieuIPAZXhAjlODkYXc2Y5a29VwuaQcuXUdOJTaH0OcN9VfNJZcZdhdu9QcOFnDGd4zkh4AHd4BrxmzHs2wrEVAnd0Bjo4zkh4AHd4BrxmzHs2wrsXzkMZBHA5wrAVAHoXAklhAHoVBkw1AnlhBZ43Brs0AZoYBGo3zkd0Brs5wrohAZ4YArwnBZo0zkA3BrMYwrsVBnd2AnI2CrFmzHs1wrEVAnd0BkshAG43BnMnBHM4BuIUAHIhBq4nBnE2xZpNbKYTDGdkaNaNaNaNx1XWDkYXMLFPwuE9x00YAq40Brs2BZXnzkMZAHh1wsAYAq4YBnEXBGXnzkAYBrs5wrlVBnE0AnETAZ4nAHEYCGo5zkE3Cro4zrAVBkwnBrAhEnlVAksZBHsTAZ45Anw2Cqo5zkwYAkIYzrEVBrAnAnwhCG40Bnl0BqX0zkd0AnA1wsX5zkE3CHE0zrEVBnEYBnhhEnsXzko2BnsnzrIVBrw1AHwhAHoVBrw5BrsTBj4nBkwnBqoYAq40Akl0AGX3zkEXAnl2wsAYAq40Akl0AGX4zkE0Brd5wrsXzko2BnhYzrlVAnd4CrIhCG40Cro4zrsXzko2Aks5wsA5zkwYAkITAHoVAnM5CrIhCG4ZAHw1zrsXzkh3ArE5wrlVBrd5BrETAHsVAHhYAnshEnlVBksZAkATAHsVAnA1BHEhCG43CrM1BZXYAG40AHAXBqo5zkl2ArlTAHsVBrsnArEhEnsXzksnBHlYzrsYzkEYAno0wrsXzkAYArw0zrsYzkAnBHI0wrsXzkE0AnonzrsYzks4AHAYwsAYAG4ZBnIYCGXYAq4ZAHM0AGoYAG43CHsnCqX4zkh3BHhnwrsYzkd5ArdTBZ40ArA5BjprAHsVBnlYAnhTBG45Akh5AjoYAG4ZBnAYBGX0zkI4Bkd2wrsXzkE0AHM3zrAVBkwYCrMhHrsXzkE0AHM3zrAVBkwYCrIhKjdhbKE9x3pRd192c2Y1cKJgaKYmcKJVersOwuaQcuX9xZBNaNaNaNMOLq8#Dvpieuhhar0OHHsYzkl5BrsnzrsVCrMZBnhhEnsYzkdZAkh5zrwVAHdZBHdhAHsVBnwZCrlTAj42BnE4CGoYAG45CHEYAZXZzkl4Ano5wsAYAj45CHd0BZX0zksnAkdYwrsnzkMYBko4zrIVBns0AHAhAHAVBks2ArhTBZ40BkhZCGprAHAVBks2ArhTCG4ZAko4BGoYAj45CHd0BZXYAq44Ars0CGoYAG45CHI1AjXYAG45BHs5wsAYAG43AkEZBZXYAj4ZBko4CGoYAG43AkEZBZXYAj43Bkw0AZoYAG45CHI1AjXYAZ4XBnwZAGprAHwVAHAXBrITAHAVAkw2BnshAHwVAno3BjXYAZ4nArEnBGoYAj40CrI0AZXYAZ4nArEnBGprAHwVBkMZBHMTAHAVAno0AnIhAHwVCrA5BnsTAHAVAkw2BnshAHwVCHd0BkETAHAVArdZAkshEns0zkwZBHM5zrsYzkMnCrl0wrs1zkoXAHA4zrlVBkInBrIhAHITBZ40BkhZCGprAHIVAroXBklTBG4ZCrs1BqoYBq4ZAkITAZ4ZCHE0BjoYAj45Bns4BZXYzkh2Akd4wsAYAj42CHl5AZXYzkI1Akl5wrsZzkw2AnATAG41BHw5CGoYAG45CHEYAZXYzkh2Akd4wsXYAG45CHEYAZXYzkh2Akd4wtPOwumlDGeXbOBgeN9TeK1mL2JTaK1mcOEZxZpNbKYTDGdkaNaNaNaNx1XWDkYdz2d#DtXWd3aODjwTwNmkc24ZwkPjDvB2aZp3bKF0br0OAkoOwuimbKePer0OAkoODkYOwuaQcuXUdOJTaH0OcN9VfNJZcZdhevxicOBNc3xUDGe0dNtVd2YieuIPAZXhAjlODkYXc2Y5a29VwvpWbK50dn0OCq44Crs3CrEZaG0YBjo0zkA3BrMhCq44Crs3CrEZaG0YBjoYAq42AkInCGonzksXArw5wrsXzkMZBHA5wrdVBnEYBrAhAHIhBZ43BrEYCGoXwrAVAHoZAndhBq4nBnE2AGoYzkd3BkA1Bkh0aG0YBGo0zkA3BrMYwrsVBnd2AnI2CrFmzHs1wrEVAnd0BjdhaNmTcr0Ow2aNaNaNajedzn48dut0bqplDGeBAHsVCHw2Bnd2BZX2zkM0BnE0BnlYwsX5zkh3CHAZBnw2zrEVBHl5CHl4BrdhHrlTBG40BnlnAkI3AZpAAHsVArE3BrE5BqX3zkIZBkd3BHs3wsX5zrlVBHd0Akw0BkshHrlVCrd5Anw3AkMTAHoVBrInBHIYCGpAAHsVCHw2Bnd2BZX4zkEXBksXAkEnwsXYAZ45BnEZAkMYzrsXzkE1AnI1AHlhHrs0zkh1AnI1AnETCG41BnEZAkE2AGpAAHwVCro2AHo0zrdVBHw2Bnd1AHdhHrs0zkh1AnI1AnETBG40BnlnAkI3AZpAAHAVCHd0Akw2AGX0zkI5CHl5CrE3wsXYAG45AkM3BnM3zrMVBkE3BrE3CHshKjdhaNmTcr0Ow2aNaNaNajedzn48Lq9ODkYdz3B2an4jzqxiM3FQc24jCjxUeLFmwjXjMKB0bK9VAjw6wOJVcLJ0aGwTwOF5duIjCjxneNdjzqxXc3BQeumWcjw6wNBWcOFZc2YnzLxQa2i0wjXjcKtZa2mVwkPjAqoXwrsZwrs1wjXjbumlaGw6AGXjbumlaK9Ve2mleuhjCksTwNiQauJWcOeQavFPcumUbLEjCkMXAqXjeumXwkPYzqx0bLpUMLxObK4jCjwXwrohAqonCGx9zqxkc250dN9TL3aWcvJUaGw6fZxWdNFmdjw6AHwTwN9VwkPYzqx0fLpmwkPjd2iiduIjzqxiM3FQc24jCjx2c2Y1cKIjzqxPwkP0zqxZc3JVaumVaZw6wksjzqxkeLB0c213bKF0bqw6AGXjeZw6BkITwNsjCksTwNtjaZw6wkoVAZwTwNtWeNJZwkPjAqwTwNBWcu9ZwkPjaNaNaNaNwjXjM29Tc3xjaZw6wNaNaNaNajwTwNBWcu9Zc3amdjw6wNaNaNaNajwTwNiQauIjCksTwNiQauJWeLFUeLFmwkPXzqxZc3FieumWcjw6AqXjMNeXMKFlbK5OwkPjBGoXwrIhAqwTwNxOwkPXzqxPMK5lcuIjCksTwOpWd2m0bK9VwkPjM29VevxWcvAUdNmObvEjzqxUMLxObK4jCjwXwrEhAHAhCGwTwNiQauJWcOeQavFPwkPYzqxPbKFmc253bKF0buYQcKm0wkP2AroTwOFQdqw6AL0TwNBWcOFZc2YgeumUaGw6fZxWdNFmdjw6BZXjc24jCksTwNtkeumWcjw6wOFQcKIjzqx0fLpmwkPjeuJ4eqwTwOFmfvEjCjwXCkoXCkoXwjXjaN9VevBQfNIjCksYzqxUMLxObK4jCjwXwq0YwrsnwrwjzqxkcumkbZw6AqXjd2JXMLxieu9ZwkPjLq8jzqxXc3BQeumWcjw6wNBWcOFZc2YnwjXjMNdjCkoTwNaWcOFnbLQmd21icuXjCksYgGXjM29VevxWct9leLxieumWcjw6fZxWdNFmdjw6CqXjc24jCksTwNtkeumWcjw6wNF1dNt0bK9VwjXjevmXaGw6wOFmfvEjzqx0aLi0wkPjLq8hArPXArPXAqwTwNaWcOFnbLQmwkPYAGXjcKtZa2mVwkPjAqoYBGoYAZoXwjXjM2YQM2TjCkoTwNxOAjw6AqXjMN9Taqw6AqXjdu9nbLFQc24jCjxkc250dN9TdZx9zqxkc250dN9TL2x1aNamdjw6fZxWdNFmdjw6AHATwN9VwkPYzqxQM29VwkPjDvpRd2FQejpkcutndn0Ocu9iauJZdjiZMK5lyGd#DtXWduQnaum2DOY8gq5Tc2tlaLxZyvxicNEQzqoVcu9iauJZdjiZMK5lyHQiaOFmdjp7aumnduYifHQjcu9kbnUjc3xlaLwUdNtlbLJnCjo1AqI7wveQavFPCjo1aK07wuimbKePerPhBKJUCZp9wq5Tc2tlaLxZyvxicNEQfZpUMLxObK46wuBicuAPzHAXdvidzZinM2XQyGoXwrohM2tTMZhUAnpXftXWyvBkcqlQCZpNc250zLBQfNI6wrsXdvh7wvpWd2m0bK9VCjpZaKYieum2aHTheuJ4eq1QcNFmcOE6wq05CHl5aK07wuxWdNFmdj10c3o6wroVCuJUwvBWcumlwvxOMNsPAkI1zqoZBHITwrw1BGXhAq4nyHThMN9ZauJZzLxQa2i0CjoXzkimcGpnc2YQaqpZa2xiyrw1BGXhAkI1zqoZBHITwroVAZl7wuxWdNFmdj1jc3F0c206wroVCuJUwvBWcumlwvxOMNsPAkI1zqoZBHITwrw1BGXhAq4nyHThMN9ZauJZzKYmaOE6wroVCuJUwvBWcumlwqikc2YWdjl7wvFZMK5naN9ZcHPhevxicOBTMLFmKjhXyHThMK5QcKt0bK9VCjpicNmUyvxicNEQwrsVALAhbK5NbK5QeuIhcumVaKtZCZp9wspSaLmNdNtUaLAhMK5QcGiZMK5lyGp7wromwvThevxicOBNc3xUCjpZc3FieuIPAuFmaZl7wv0hAHoXxGp7wvFZMK5naN9ZcHPhdN90MLFmyrA2AuFmaZl7wv0hgGwTwNtkeumWcjw6wNx1aNamdjwTwOF5duIjCjxkd3AjzqxXc3BQeumWcjw6wNBmcOFmdjwTwOBkMKYmwkPjAGwTwNBTbKBSwkPXzqxPbKFmwkPYzqxVbKBVwkPjAHdjzqxiwkPjAq41wjXjcKtZa2mVwkPjzHEhAqoXwq0nwO0TwNBWcOFZc2Ygd2J0eumVa3AjCOTjc3xlaLwjCks3zqxWcjw6AGXjbKBWcjw6wkYneNdhe2mleuh9xnwXxZpPaKmObvE9xnwXxn48aZpNbKYTzLx1cuI9x25WcOQmdN8OwuaQcuX9xZAXAroXAroOwvFZMK5naN9ZcH0OevxicOBTMLFmyrsTwrsQxn48dut0bqplDGeBCG45BHlZAHMnBjXXwsXYAG4XBnA0AnIZzrwVBrwZCHhXBnIhHrsZzko4Brw3CqXZzkl3BkhnBkd1wsXYBq41BkI0AkMnzrsVCrM5AHw0BnIhHrs2zkoXAHA1BHATAZ4nBHd2BkM4CGpAAHIVAHl3AkM0BZX1zkh0AHEYBno5wsXYBG40AHI0BnI2zrMVCrAXBkh0AnIhHrs3zkh3AndXBkATBZ43CrhnCHsYwsXYCqX5zkh0Akw5CHI0wsXYBG41BHAnBHs0zrsXzkhXAroXBkAhHrs1zko3Arh0BndTAHsVCrA4Bro4CGpAAHMVArhYBklXBGXYBq4nBrwZArlnwsXYBq42BHM2ArEZzrs1zkhYAnI0BnlhHrsZzks1Ans1BrATAHEVBnM5Ako0BGpAAHsVArw3Brd2BjXYBG4ZBrwZBro4wsXYAq4XCrI1AHoYzrs3zkMXBnM3wsX4zko2AnhZBrI0zrs3zkdhHrMVCHh0AHo1BrdTAHIVAkh4Bro1CqpABG44AHw0BklZzrs0zkd4ArdYBrhhHrAVBrE2AHI1BnETAHIVCrInBndZAGpAAG45BkEZBkhYAGXYBq40AnE1AnlnwsXZzklZCHw3BHIYzrsYzkh4BrI3AnlhHrwVAnM2AnsnBrITAHoVCrwnArw2CGpAAqX5zkh5CHl3BrhnwsXXzkoZAno0ArlXBklTBZ44AkAXBrI3CqpAAj40BrM3Bns4AGX2zkh0AkAYCrEZwsXZzkl0ArdnBrA1zrIVCrEYBrs3ArlhHrsVCrhnCHAZCHdTAZ4nBHd2BkM4CGpAAZ4nAnsnAko4BGXYzkh5Akw2CHsnwsX1zkh2CHh4BkM0zrwVCrl2AHEXCrMhHrMVCHdZBkE2BkwTAj40Cro3Bnl4wsX3zklnBnInArhTAq4XBrMXBrsZAHA2wsX5zkl1CHwYBkA2zrohKjpBCq44Brl5Anh3AZX2wsA3zkw3BkonAnE1zrMhBjX3zkw3BkoYAnw4wrMTCq44Brl5Anl3BqprBjXYAq40AkA5CrM3wrdVAkd2ArAnBrITAHsVBZo4zkh0CHlnCrdnzrsYzkdhEnsXzkEZAnl2BkMTAHsVBZoYAG43zrsXzkEZAnl4BkdhAHsVBZX4zkh0CHlnCHd0wsAYAG43zrdVAkd2ArsnAkhhAHoVBrwnCHM2BjX2wrhVCrE5CHA4BnATBjpbxZpNbKYTDGdkaNaNaNaNx1XWDkYdz2d#DtXWd3aODjwTwNtkeumWcjw6wOBmevFQcNenwjXjdu9nbLFQc24jCjxkc250dN9TdZ1ZbKePeqwTwN1idNeQcjw6wkohAqoYAjoYBGwTwOF5duIjCjxneNdjzqxPaumkc24jCksTwNmkc25nM29Tc3xWeNJZwkPjzHsjzqxPaumkc25kcvwjCjxNakoXArojzqxPaumkc24ZwkPXzqxPaumkc25TbLB0wkPjBnwXCliszqoYArhXClawFqXhAks2ArP0GZwTwNFWcGw6wOpTzLBmevFQcNenwjXjMK92aLwjCjwXzkdjzqx0bLojCksTwOFQdu1idNeQcjw6wkohAqoXwrwXwO0TwNBWcOFZc2YgduYifKYQd3EjCOTjc3xlaLwjCks4zqxWcjw6AqXjbKBWcjw6wkYneNdhe2mleuh9xnwXxZpPaKmObvE9xnwXxn48aZp0dNtVd2aWdN09x3FZMK5ncut0aGhZzqonyGd#Dvpieuhhar0OHHoTAqpAAHMTAqpAAHMTAjpAAqXZwsXXzrohKjpBAqX2wsXYBjX2wsXYBjX4wsXXzrhhHroTBjpbws0XzrsZwsXYBjXYAjpAAHMTAHEhHroTAHEhHroTAHwhKjdhaNmTcr0Ow2aNaNaNajedzn48Lq9ODkYdz3B2an4jzqxiM3FQc24jCjxXcut5cumneqwTwOpWd2m0bK9VwkPjcuJNeqwTwN1idNeQcjw6wkohAqoXwrMjzqxjaZw6AGXjd2BicuIjCksVBGXjevmXaGw6wOB2aZwTwNtVbK1ieumWcjw6wOpWd2m0bK9VwjXjMNeXMKFlbK5OwkPjAZonwrAhAZwTwNxOMGw6Aq40zqxja2tWeNJZwkPXzkhTwOFQdqw6Av0TwNBWcOFZc2YgaOJTcqw6fZxWdNFmdjw6AHlTwN9VwkPYzqxQM29VwkPjDvB2aZp3bKF0br0OAkoOwuimbKePer0OAkoODkYOwuaQcuXUdOJTaH0OcN9VfNJZcZdhevxicOBNc3xUDGe0dNtVd2YieuIPAGXhAGlODkYXMLFPwuE9x00YAq43CroYBrw5zroVBGpAAHMVBko5CHw4BjXXzkIXBrh1Bns0AZprAHMVCrA1Bnh1BZXXzkIXBrh1Bns0AZoYBZ4XBkM1zroVBHlYArdYBrw5wrs3zkwnBndYBrATAq43BkwZCrI3AHEhEns3zkEXCrlZCrMTAq45Bro3CrI3AHEhAHdVBrl1AHEZCGXYzks2BrwYBrw5wrs3zkE5BHs0AklTAG4nCHE5Akh1BZpAAHdVBGX3zkwYCHh1Bns0wsAYBZ41zrdVBno4wrs3zko5Cro3AHETCq4YArd1wrs2zkMXCHlZCrMTCq4YArd1wsAYBj4YAHhYBrw5zrhVAHo3BGoYBG43AksXBns0zrdVBno4wrs1zkdZAHo3AHETBZ4ZAHl4BHdYBqpAAHIVBnwYArdYBqXnzkInCHA1Bns0wsXYAq41AkoZCrI3zrhVBnA3Bns0AklhEnsXzks3AHd4BHdTCG4XCrd0Akh1BZo5zkMXCrA1Bns0zrlVArh3Brw4BHdhCG4ZBkwZCrI3AGX4zkdnBndYBrw5wsA4zklYAkI3AHEnzrhVAnl0ArdYBrAhCq45AHw1Bns0AZX3zkhZCrwYBrw5wrlVAkMZAkh1BnsTBZ40CrE1Bns0AZpAAHEVBrMXBkEZCGXZzkw4AHA1Bns0wsXYAq43CroYBrw5zrwVAkhYAnI3AHEhEnsXzkw5AjXZzkw4AHA1Bns0wrlVCrl0CHw4BHdTAG44Crs4BHdYBqo5zkh5BrlZCrI3zrsVAnlXArdYBrAhEnlVCrl0CHw4BHdTAq44CHdXBns0AklhAHoVAklZzroVBGoYAq43CroYBrw5zroVBGpbws03zkwYCHh1Bns0zrs3zkIhHrsVAnlXArdYBrATAHdVBrl1AHEZCGprAG4YBkEZAHEZCGXYBZ40CHIYBrw5wroVCHAnBGXYBZ40Arh5Akh2wroVBnMZAkh1Bns0zrs3zkwnBndYBrAhEnoVBHlYArdYBrw5zrs3zko1CHwYBrAhAq41ArE4BHdYBrATAHMVCrA1Bnh1BZoXzkIXBrh1Bns0AZXYBj42ArIXBns0wsXXzkITAHoVBnhXAHEZCGprAq41zrsXzkw5AjoXzklXAHlZCrI3AGX5zkh5AkIhAG4nCHoXBns0AZX5zkh5AkIhEnsVCrhYCrI3AHETCG44CHw1wrwVAkd4CHw4BHdTAHoVAklZwrwVAkd4CHw4BHdTAHoVBnhXAHEZCGpAAj4ZBnh5Akh1BZXYBq40Bko2Brw5wsX3zkE3CHdYBrw5zrlVAkMZAkh1BnshEndVCrw4Aks0AklTCq45AHw1Bns0AZo4zkA5AHM0Akh2zrhVCHsZBHdYBrAhCq43And3AHEZCGX5zkw2Akw4BHdYwsA5zko4BnEZCrI3zrlVBko1CHw4BHdhCG4XCrd0Akh1BZXYAq4YBns3CrI3wrhVBnA3Bns0AklTAHoVBHs1Brw4BjpAAZ41AnlnBHdYBqXYBG43AHh2Brw5wsX3zkwYCHh1Bns0zrs1zkdYCrM0AklhEndVBno4zrs1zkdYCrM0AklhCq4YArIXBns0AZXYBj4YAHhYBrw5wrhVAHo1ArdYBrATAHMVBko5CHw4BjprCq4YArIXBns0AZXYBZ4YArw5Akh2wrdVBno4zrs3zkIhBZ4ZAHl4BHdYBqXYBZ41wtPOwuaQcuX9xZBNaNaNaNMOLq8#DtXWan48Lq9neNd#wjXjbKBWckwjCjw8d3aOwveQavFPDGdZAqdhbuJQa2i0DGdZAqd#DudhaNmTcq1ZeKYmDGeVc256aLxWxZpNbKYTDGdkAroXAroXxZp0dNtVd2aWdN09x3FZMK5ncut0aGhYzqoYyGd#Dvpieuhhar0OHHs1zkdYCHh0AkhTCG4XArs5BnA2BZpACG44Crd4ArsnCGX4zkl5BnsYBHEhEnlVBkMnAHs4BrsTCq45CHdYAHI0wrlVBrAZAnMZCHwTCq45AHo4CrsYwrlVAkMYAHs4ArMTCq43Anl2AkdXBjprCG4XCrl4BnAYCGX4zkI1CHh3AHo0wrlVAronBkEnBHsTCq4nAnd2ArIYBjo5zkoXAnM0AnIYzrhVAHo2CrA3AZpACq45CHh3CrI1zrwVAkhXBHI2AjprCq45CHh3CrI1zrsVBnlZAZo5zkEXArd4BHh1zrsVAnlZBno3AkEhCG44Crd4ArsnCGXYzkA5AkdXBnw0wsAYAq4nCro4Crl0zrsVAnlZBno3AkEhAHoVBnd4ArAYCqXYzkd5AkAhAHoVBnd4ArAYCqXZzkw4ArI1BkwhHrsXzkd3CronAHhTBG45Bks5AHo4wsXYBG45Bnl3BrM0zroVBnMZAnE2Bks2wsAYBj4nAkhnArh2zroVBrsZBHIYAHw4wrs2zkh5AHhnBnhTAq40AHw1BHsYAkhhAHdVAkA2BnI2BjXXzkd2AkA0BkMYBjprAHdVBHh3BnE3CqXYzksXBko2CHw3wrs3zkI4Bnd0BnhTAG42BnwXBHd4wrs3zkwnBkd1BkMTAj4XAHI3Cro0BGpAAHwVArA4Bkh1BGX3zkwYCrl4CrA0wsXYBG43AHl4Brw4zrdVAks4CHh4AnEhEns2zkwXCro3AklTBZ4ZAHh5CrhnBqoYBj42ArIZAHIZzrdVBks4BHhYAGoYBj42ArIZAHIZzrhVAHsYBkl1BHdhEns2zkMXBHwYBHwTCq42ArE4AHoXBGoYBj4ZArhXBnw5zrlVAroYCHdnBkdhAHIVBns5CrEZCqX5zkoXAHl3AnM3wtPhHHwVAkhXAHI3AHdTCq45CHhnAkl5BZpACq4YAHwYCHh2AGX5zkoXAns4Crw0wsA4zkAnCro5Bko5zrlVAronAHh4AkEhCq41Bkd2AndXCqX5zko4CrwXBnl4wrhVBnEXArl2BrITCG4ZBko2BnM1CGprCq45AHsnBrsnAGX5zkEnCHwYCronwrhVCHl3BHdXCHlTCG42Bkw2CHh0Cqo4zkl5BnI3Arl5zrlVCrlZAkIYBndhHrlVAroZBrw5ArsTAHIVBns5BnE3BqprCG4XArw0AklXAGXYBj4ZArM3CrlYwrhVBkoXBrw4BkITAHMVBko2AnhYCqo4zksYAks5CrMYzrs2zkMXBkA4AHhhEndVBks5AHsXBHMTAHMVBko2AnhYCqo3zkwZAHl2CrwYzrs2zkwXBkd4CHshBZ4ZAks5BkhZAGXYBG43AHl3Brd0wsX3zkwZAHl2CrwYzrsZzkonBns3CrAhHrwVArwXAkInBkwTAHdVAkA2BnEZBGprAG42Bnw5ArI4CqXYBZ41Crd3BHw1wrsVAHo5And2BkdTAHdVBHh3BnIZBGoXzkd2Anw0AnEnBjXYBZ4ZAnM3Brw1wsAXzkEYAkw1Aks4CqXYBj44CHEZAnE0wroVBrsZAkIZAHh4zrs2zkAZBnonAHAhAq43BkAZBrA0AnMTAHIVCHh0BHwnAjpABG45Bkw1AklXAjXYAq43CroYAro3wsXZzkw4Ars1Bns3zrsXzkd4ArsXArdhEnsVBnlnAHEYBkATAHoVBnhXAHoXBZoYzkA5BHl5CHw5zrsXzkA4ArIXCqoYzkA5BHl5CHw5zrlVCrh3AnlnBGprAG4nCHI5CHlZCGX5zkA5BHE5AnMhAG43CHAYBrs2AZX4zkl5CrAZCHl3wrwVAkhXAHI3AHdTCq45CHhnAkl5BZpbxZpNbKYTDGdkaNaNaNaNx1XWDkYdz2d#DtXWd3aODjwTwNtkeumWcjw6wNa1cuYnM3xmaK4jzqxiM3FQc24ZwkPjcN9ZcKtTd2BZaKJVwjXjevmXaGw6wOB2aZwTwOpWd2m0bK9VwkPjM29VevxWcvAUdNmObvEjzqxUMLxObK4jCjwXwq02CGoYAj41wrs2wjXjd2BicuJWeNJZwkPjAGwTwOBkMKYmwkPjAq45wjXjMK5QcKt0bK9VwkPjcN9VaGwTwOFQdqw6AGXjeumXcKtZa2mVwkPjAqoXwrohAHEjgGXjM29VevxWct9neutZeqw6fZxWdNFmdjw6AkoTwOpWd2m0bK9VwkPjM2JVeuJZwjXjd2BicuIjCjwnzkwjzqxWcjw6AGXjbKBWcjw6wkYneNdhe2mleuh9xnwXxZpPaKmObvE9xnwXxn48aZpNbKYTzLx1cuI9x25WcOQmdN8OwvFZMK5naN9ZcH0OevxicOBTMLFmyroTwrwQxn48dut0bqplDGeBAHlVAro1Anh1CqXYzkMZAkI1BkI5wsAYCq4ZBrE1BHw5zroVBndXCHwXBklhAHdVAnlZAnM3AjXXzkd2BHh3ArEYBGoYBZ4XArs2Brl1zroVBns3Bkw2CHl1wsAYBq4ZArw2Anw2zroVBGoYAq4XArE0Anh1zroVBGoYAq4XArE0Anh1zroVBGpACG45CHIXAns2zroVBGprCG45CHIXAns2zroVBGo1zkd5Bkd3AHs5zroVBGoZzkl5CrEYBkdnzroVBns3Bkw2CHl1wsAZzkMXBnM5CHo5zroVBnM1CHA2CrM2wrsVBnI2AHd1BnMTAq43Bno5Ako2CGoXzkl5BrM4ArE2BZXYzkMZAkI1BkI5wsAXzkA5BHd1AkAZAGXZzkw3Akw0BnlnwroVAkoXArMZAkdYzrAVBnE3CHw1ArlhAq4ZAroXBkwZBnsTAZ43Brd5AkIXCGprAq4ZAroXBkwZBnsTAZ43Brd5AkIXCGoXzrIVBrd5BrA4BHMhAqX3zkwYAHoYCrE4wsXXzrhVCrA0Ars3BrhhEnoTAHoVBHM2BnlnBGoXzkwXAro2Akw3AGXYAj4ZCHd3Arh5wroVAkoXArMZAkdYzrsZzkw5BndXCrlhEnoVAkoXArMZAkdYzrsZzkw5BndXCrlhAq4nCHIYBHMYArlTAHAVBndZBnwYBjoXzkl5BrM4ArE2BZXYBq40AksYBHo0wsAYzkd1Bks3BHd2zrs1zkw3Akd4BkAhAj43BHE1BkI5CGXYBG4ZBrdXBkl3wrAVAHl5BnA3BkdTAHIVAnA2AHs0wsA0zkd5CHMnCHMnzrs1zkIXArIYAnhhAHoTAHIVBHIYAkhZBqoYAqXYBG41BHsZCrw0wsAYAqXYBG41BHsZCrw0wrs0zkwXAkMnAkMTAHIVBHEnBndnBqoYBZ4XArs1CrAnzrs1zkAZCrM3AHIhEns3zkA5AkAXArlTAHIVAkd4BHoYwrs4zkw0BrE4BkdTAHIVAkdnBHs3AjoYCG4XArInAHl1zrs0zkEZAHhYBrlhEns5zkMXBrw0BndTAHAVBndnAnh2AGoYCG43CHl5And3zrsZzkw5CrA3AnEhAHlVBnl5CHA3BZXYAj4ZCHhnBnA0wsAYCG43CHl5And3zrsZzkw5CrA3AnEhAkoTAHoVBHM2CrMhAkoTCq44AnE2Crs5CGpAAkoTBZ4ZAHs2AHM1BqprAkoTBG40Bnl1ArIXAGoYCG43CHl5And3zrAVBnE3CHw1ArlhAHlVBnl5CHA3BZXnzkd0BnlZBHo5wsAYCG43CHl5And3zrAVBnE3CHw1ArlhAHlVBko0CHd2BqXZzkw3AkAYBrA4wrs5zkoXBHA4BHhTAG42Akw1BHM1CGpbws03zkIXAkAnBHs5zrsYzkd4CrE5BGpABZ41ArwnAnIYCGX0zkw2Akh1AnhYwsXYAZ43BHEnBrd0zrhVArw1Bno3BkAhHrdVBHoZAnA1AHlTAHsVBnh4Brl1wtPOwuaQcuX9xZBNaNaNaNMODkYdz3pieuh#DtXWan48Lq9neNd#wjXjbKBWckAjCjw8d3aOwveQavFPDGdZAqdhbuJQa2i0DGdZAqd#DudhevxicOBNc3xUDGe0dNtVd2YieuIPAjXhAZlODkYXMLFPwuE9x00YBjX3zksnBkMYAHAZwsXYBjX3zksXCHs2CHE1wsXYBG4ZArhYBnh1zrdVAHo5AHM5BrIhHrs0zkw3BHo5AZX3zksXCHs2CHE1wsAYBq4ZBnIXCHATAZ4YCHlYAkMZBGoYAG4XBkAYCHdTAqo3zksnBnI0BkE1zrohEnAVAksYCrl1CHsTAqoXzrAVAHl5AHw2AkIhAqX3zksXCHs2CHE1wsAXzrsYzkoYCHwYAkMhAZ4ZAHs4CHI5AGXYBq4ZAHhnAnh5wrdVAHA3BHE2BrITAHEVAks4AnA4CGpABZ4YAnd1BrM0BGXYAj40BrsXBrM1wsA0zks5AnAXCrI1zrsZzkE0AHo0BkIhAG43CrEnCrM2AjXYAq4XBrs3Ars4wrsVBnh0Anh2BkwTBZ4YArlYBkl0BGprAG43CrEnCrM2AjX0zks3BkMnBno1wrEVAHlnAno4BHITAG43BndZCHwnBjo3zksnBnI0BkE1zrsVBnd3AklZAnMhEnsXzko4AHd4BrETAG43BndZCHwnBjoYAj40CHo3ArMnzrEVAHd2BkA3ArIhAHwVBrlXBno2AZX3zksXCHs2CHE1wsXYAq42BrE1AHM3zrdVAHo5AHM5BrIhHrsnzkA4Akh5CHMTAHsVBHIZBroXBqpAAHMTBZ4YAnM2AHsnAjpbxZpNbKYTDGdkaNaNaNaNxn48Lq9XMLFPDkYdz2d#DtXWd3aODjwTwNtkeumWcjw6wOpTMLljzqx0fLpmwkPjd3aOwjXjMNdjCksTwNxOM29Tc3wjCjxNaNaNaNMjzqxja28jCjwXzkEjzqxja3piauFQcNdjCjwUBqoUAjoUAjoUAjwTwNmkc25UMLxObK4jCjwXwrohAqo0wjXjMNeiwkPjAGwTwNxOMK92aLwjCjwYwjXjd2BicuJWeNJZwkPjAZ40wjXjbumlaGw6AGXjbumlaK9VduYifGw6AGXjbumlaK9VfK91evJjaGw6AGXjd2BicuJncKtTcqw6wj0YwjXjbKBWcOBZaLpTMLljCkoTwNmkc25nM29Tc3wjCjwZMKsYMnwjgGXjM29VevxWct9TbLamwkQ7wN9ZauJZwkPZAGXjc24jCkoTwOFmfvEjCjxTbLamwjXjcuJ0euJZd3piM2mVaZw6AjXjMKB0bK9VwkPjcum2aGwTwOF5duIjCjx0aLi0wjXjbutVaqw6AqXjM2YQM2TjCkoTwNaWcOFnbLQmwkPYAqXjcKtZa2mVwkPjAqoXwrohAHIjzqxPbKFmwkPYzqxPbKFmc252c2EjCkt9zqxkc250dN9TL3B0c3ojCOTjc3xlaLwjCkwZzqxWcjw6AqXjbKBWcjw6wkYneNdhe2mleuh9xnwXxZpPaKmObvE9xnwXxn48aZp0dNtVd2aWdN09x3FZMK5ncut0aGh0zqo0yGd#DvxmM3Ehfr0OAqdhfH0OAqdhe2mleuh9xnsZxZpPaKmObvE9xnsZxZpNbKYTDGdkaNaNaNaNx1XWDkYdz2d#DtXWd3aODjwTwNtkeumWcjw6wOB0c3ojzqx0fLpmwkPjd3aOwjXjMNdjCkp9zqxkc250dN9TL3pZaLMjCOTjc3xlaLwjCkATwN9VwkPXzqxQM29VwkPjDvB2aZp3bKF0br0OAkoOwuimbKePer0OAkoODkYOwvFZMK5naN9ZcH0OevxicOBTMLFmyrIVBGXhBGlODkYXMLFPwuE9x004zkl5CHl5zrsXzkEnBnE5wsX4zkl5CHl5zrsXzkEnBnIhHrwTBG4ZAHh3BGpACq45CHl5CGXXwsX4zkl5CHl5zrsXzkEnBnE5wtPhHHoTAqpAAjXXwsXZzrsXzkw0CHhnwsXXzrsXzkw0CHhnwsXXzrohKjdhaNmTcr0Ow2aNaNaNajedzn48Lq9ODkYdz3B2an4jzqxiM3FQc24jCjxXdNJ2wjXjevmXaGw6wOB2aZwTwOBkMKYmwkPYzkwTwOpWd2m0bK9VwkPjM29VevxWcvAjzqxUMLxObK4jCjwXwrsZwrsnwrojzqxPbKFmwkPYzqxPbKFme2m0bu91evpTMLmTbLB0wkPYzqxPbKFmc25TaKt2aKtVavpTMLljCksTwNmkc25nM29Tc3xWeNJZwkPjAKFiaKJkwjXjau9UwkPjduXUdvxmejwTwNiQauJWcOaidjw6AqXjbumlaLeWeNtZwkPYzqxPbKFmeNtZAjw6wOBmdNmicqwTwNiQauJ2MLwjCjwjzqxPbKFmMNJNc3xmAjw6AqXjbumlaK9Ve2mleuhjCksTwNiQauJWcOeQavFPcumUbLEjCkMXAv0TwNBWcOFZc2YgcNJ4eqw6fZxWdNFmdjw6BjXjc24jCkoTwNmkc24jCjw8d3aOwveQavFPDGdZAqdhbuJQa2i0DGdZAqd#DudhevxicOBNc3xUDGe0dNtVd2YieuIPBGXhBGlODkYXMLFPwuE9x00XzkE2CHE4zrtmzHo1wsXXzkE2CHE4zrtmzHo1wsXXzkE2CHE4zrohHrdVBrM5BrdTBG4ZAHh3BGpAAq40Bkl0CqXYAq40And1wsXXzkE2CHE4zrtmzHo1wtPhHHdVBHAXBHwTAqpACG41Ano1AjXXwsX5zkInArIZzrsXzkMZBrhZwsX3zkInArIZzrsXzkMZBrhZwsX3zkInArIZzrohKjdhaNmTcr0Ow2aNaNaNajedzn48Lq9ODkYdz3B2an4jzqxiM3FQc24jCjxVaLi0wjXjevmXaGw6wOB2aZwTwOBkMKYmwkPYzkwTwOpWd2m0bK9VwkPjM29VevxWcvAUdNmObvEjzqxUMLxObK4jCjwXwrohAHIhAqwTwNmkc25nM29Tc3xWeNJZwkPjAKFiaKJkwjXjau9UwkPjduXUcNJ4eqwTwNiQauIjCksTwNiQauJ1cOFQcvB0MLx0aKEjCkoTwNiQauJWcOeQavFPwkPYzqxPbKFmc253bKF0buYQcKm0wkP2AroTwNiQauJWcOaidjw6AqXjbumlaLaidjw6wjwTwNiQauJ3c3aidjw6AGXjbumlaLaidkwjCjxnaLxQMKXjzqx0bLojCksTwOFQdvFmfvEjCjxdeHo0AktdeHo0A2xdeHo0AnJdeHo0AnFdeHo0BrBdeHo0BuJdeHo0BrmdeHo0AnpdeHo0BuMhLvIXBrEYLvIXBrA1LvIXBrEXLvIXBrA4LvIXBrFNwjXjeumXcKtZa2mVwkPjAqoUBrohAqoXwO0TwNBWcOFZc2Ygd2iidNIjCOTjc3xlaLwjCkwnzqxWcjw6AqXjbKBWcjw6wkYneNdhe2mleuh9xnwXxZpPaKmObvE9xnwXxn48aZpNbKYTzLx1cuI9x25WcOQmdN8OwuaQcuX9xZAXAroXAroOwvFZMK5naN9ZcH0OevxicOBTMLFmyrwTwrwQxn48dut0bqplDGeBBG41BkMZCrE1zrhVAkMZBrhnBkMhEnIVBHM2Akh0BGX4zkAYBnEZBHAZwrIVBHI0AHoXAHdTCq4nBklYBHMYAGo1zkI1Arl2Bno1zrhVBrwnBnEYwsXYAG4YBkA5BroZzrsYzkw5CHo4ArAhEnsYzkM0BrIZBHsTAHoVCrhZArwnAjoYAj4ZBHlnAHs2zrsXzkMZAHd2AnhhAHwVCHA4BHoYzrsXzkMZAHd2AnhhEns0zkE2BHI0BHhTAHoVBkwZAkl5wrs1zkdXAkl1AHdTAHsVCrlXBrs2BjoYBG43Arw5BHs3zrsnzkE1BHoXBGprAHIVBnoZCHIYBZXYBG4XAks1BHI2wrs0zkE2BHI0BHhTAHMVAkh5BkdnAjoYAj45Anh1ArsTAHMVAkh5BkdnAjprAHsVBrsXAkA3CqXYBj4ZCrl2BnAZwrsXzks3Bro1ArETAHIVArwYBHI1BjoYAq4YBnEXBHo0zrsnzkE1BHoXBGprAHoVAHd0ArIXBqXYAZ4nCHh2AnMnwrsXzks4BkwnBrdTAHAVAnE4AHI0AjoYAq4YCrlnBkd5zrsnzkw5AnI2CHAhHrEVBHd2Anl0BkATAHoVBrs4AkAhEnEVArl0Brs3AZXYAq44AnA2Crs2wrAVBrhYArwnAkdTAHsVArlnCHEYwrwVCroYCrAnCrETAHsVArlnCHEYwsAYzkw3Brl2Ano5zrsYzko5Anl0AGoXzkonBnA4Ans3BnMTCG44AkdXBnwXCqoXzkonBnA4Ans3BnMTCq4ZBkw0CrA2BjprAq4XAndnCrAYBnd2zrMVBkl2Akh5BnlhAG4ZBnE5BkAXCGX1zkEZBnhYBHE2wrwVCroYCrAnCrETBG40Akd4AHI0BjprAZ40CrsXAkAZBZX1zkEZBnhYBHE2wrEVArl0BHlYAndTBG42Crl2CroZAjo0zkI3BkA5BrMnzrMVAHo1AHAYCrhhHrsXzks4CHA2BnlTAZ4ZAkl3CHw1CqprAHoVAHh2AkA0BZXnzks3Brh1ArlnwrsXzks3Bro1ArETAZ4YAkAYAkoYBGoYAq4YBnEXBHo0zrAVArM2BnIYBrEhEnsXzks3Bro1ArETAG41ArA1CHoXBZoYAG40AHoZAnd4zroVAkA1Akl0AHs4wrsZzklnCrIXAGXXzkwnBHw5BrsYCqprAHEVBrM1BHE1CqXXzkwnBHw5BrsYCqoYBG43Arw5BHs3zrsVBHonBHlXArdhAHIVBnoZCHIYBZXnzko2Bkd1AHE0wsAYBG43Arw5BHs3zrEVBkAZCHE1AnshAHEVBrM1BHE1CqX1zklXAHEYCHM0wrsZzklnCrIXAGX1zklXAHEYCHM0wsAYAj4ZBHd3BrIYzrIVCHoYBrs5BkEhAHsVBkE0AroZCGX1zkMnCHI1Brh4wrsYzks2Anl0ArwTBG4ZAkw0CHd3CGpABG41BHo5BkdXBGX4zko5CHE0AkIZwsA1zkI1AnlZBksYzrhVAHI0Anh0AHhhBG41BkMZCrE1zrhVAko2AHs0CHlhBG41BkMZCrE1zrhVAkMZBrhnBkMOwuaQcuX9xZBNaNaNaNMOLq8#DtXWan48Lq9neNd#wjXjMKB0bK9VwkPjd2iidNIjzqx0fLpmwkPjd3aOwjXjdu9nbLFQc24jCjx0c3oUdNmObvEjzqxUMLxObK4jCjw0BGoYBGoXwrojzqxjaZw6AqXjMNeWwkPYzqxnM2tTaGw6AGXjMNeXMKFlbK5OwkPjBjo2wrMhBjwTwNxOMGw6Aq4nzqxja2tWeNJZwkPXzkMTwNtVbK1ieumWcjw6wOpWd2m0bK9VwjXjaKtnaGw6wNJTMLB0bKAjzqxQM29Vd2BWcu9Zc3amdjw6wktlMKJmMZwTwNFWcGw6wOpTzLBPMLxmwO0TwNYicNdjCjxZeGwTwNBWcOFZc2YgFumzCudjCOTjc24jCksTwN9ZauJZwkP0zqxiM3FQc24jCjxkeLB0c20jzqxQM29VwkPjDvB2aZp3bKF0br0OAkoOwuimbKePer0OAkoODkYOwuaQcuX9xZBNaNaNaNMOwuBTbLoUdut0br0OeLxTyqBiyGd#Dvpieuhhar0OHHsXzkAZBZoYAZ4XBHekAG4YBkMhAqoYzklnAZ0VBkE0wrsVCHAnzHsVBkdYwroUzkl3Cq0VBnAUAG41BkEUAG41BrdUAG41BkEUzkE0AZoXzG44AnAVAHd0zHsVArM1zkEXBLMUAG4YCuhZzkw4B3MUzklXBsh4zkMZALMZzkd3ANXVBns3zks4CuAVAklUzkw3BG42AHIUzkA5wrsVArsnzG4nCG41BGoXwq44BkhVAkh5zkh2Cq43AHMhAqoVAnlUzkAZBG43AHMUzkh5Cq43AHaiAG43BqoYzkd0wrohAqoYzHsVAkhYzG41AkiTzG41BZ43AHekzkEYAj40BrlhAG4XAj43AkAhAG44Bj43AkBPzG4XArBbcG0VBrlUCq42BkJKAsX2zkonCqoZzks5BNXnzkd5BZoZzks5BmPOLq8#Dvpieuhhar0OHHwVBrdnwrsXzkA5MHdVBHw4wrdVBHw4wrohAGoXwrdVBHw4zHdVBHw4zkd2zkd2wrohAGoYwroUAG41Ajo5zko0Cqo5zko0CqoXwrshAG02zkA5CGoZzkM1zkd2zkd2wrohAGoYwrsVArIhAG4YArwhBZ40CHMhBZ40CHMhAqoXwroUAj4YBnlhBG4ZCHJbx1XWDkYdz2d#DuFmaOA#DuBTbLpEMLFPwumlDGeixn48dut0bqpNbKYTDGdkaNaNaNaNxZplDGeBAqoXbrwXekwXGrp6x1XWDkYdz2BTbLpEMLFPDkYdz2FmaOA#DtXWd3aODjwTwOF5duIjCjxneNdjzqxXc3BQeumWcjw6wNBmcOFmdjwTwN1idNeQcjw6wkohCrohAqoXwjXjbumlaGw6AGXjbumlaK9VcuJieNJicNFXcut5wkPYzqxTbK5SwkPYzqxTbK5SeLxTwkPjMLpQCOBmaKTTzHIjzqxQM29Vd2BWcu9Zc3amdjw6wj0YwjXjau9UwkPjduXUdNJ3bK5lwjXjbumlaK9Ve2mleuhjCkoTwNiQauJWcOeQavFPcumUbLEjCkMXAqXjd2BicuIjCjwYzkhjzqxPbKFmeK50bKYneutZeuJlwkPYzqxPbKFmeK50bKYneutZeuJlbK9nwkPYzqxnM2tTaK92aLwjCjwYzkljzqxPbKFmcutXwkPYzqxPbKFmc25TaKt2aGw6AGXjbumlaK9VaOJTcvBkdNJmcjw6Av0TwNBWcOFZc2YgHOmlH3wjCOTjc24jCksTwN9ZauJZwkP1zqxiM3FQc24jCjxkeLB0c20jzqxQM29VwkPjDvB2aZp3bKF0br0OAkoOwuimbKePer0OAkoOwuaQcuX9x25WcNIODkYOwuaQcuX9xZBNaNaNaNMOwuBTbLoUdut0br0OeLxTyqBiyGd#Dvpieuhhar0OHHsXzkAZBjoYAZ4XBHekAG4YBkMhAqoYzklnAZ0VBkE0wrsVCHAnzHsVBkdYwroUzkl3Cq0VBnAUAG41BkEUAG41BrdUAG41BkEUzkE0BqoXzG44AnAVAHd0zHsVArM1zkEXBLMUAG4YCuhZzkw4B3MUzklXBsh4zkMZekwVBndZcq43AHMVAHh4MZ4ZCG0VAkd1zkMYBj0VAnlhAG4XAHEUzkA5zkI0CGoXwq44BkhVAkh5zkh2Cq43AHMhAqoVAnlUzkAZBG43AHMUzkh5Cq43AHaiAG43BqoYzkd0wrohAqoYzHsVAkhYzG41AkiTzG41BZ43AHekzkEYAG40BrlhAG4XAj43AkAhAG44BHlVBnwnbq0VAroZKN0Uzkw4Cq04zkM2BJMXcrAVBnl3wrwVAHl2zHAVBnl3wrwVAHl2Kjedzn48dut0bqplDGeBAHdVBHAhAHoVAnmiBZ41AkhhBZ41AkhhAqoYwrsUBZ41AkdUBZ41AkhVBnMVBnMhAqoYwrohAq0YzkIZwrlVArE4wrlVArE4wrohAGoXwrMVAnl5wrwVBkIVBnMVBnMhAqoYwroUAG4XBGoYzksXAjo3zkE5Bjo3zkE5BjoXwrohAGoZzks3CGo1zkw5BJPOLq8#DtXWan48auJNdn48M2YQdtpieuhhbKE9x2sODkYXMLFPwuaQcuX9xZBNaNaNaNMOwuE9x00XwrpPAkp2AkpwAvPOLq8#DtXWM2YQdtpieuh#DtXWauJNdn48Lq9neNd#wjXjevmXaGw6wOB2aZwTwOpWd2m0bK9VwkPjM2JVeuJZwjXjcKtZa2mVwkPjAqoXwrohCrojzqxPbKFmwkPYzqxPbKFmc25TaKt2aKtVavpTMLljCksTwNYQcNTjCksTwNYQcNU1dNXjCjxidul6d2JmbZXSBGwTwNmkc25nM29Tc3xWeNJZwkPjzHsjzqxlc20jCjxXcq1Nc3x3MLxlwjXjbumlaK9Ve2mleuhjCkoTwNiQauJWcOeQavFPcumUbLEjCkMXAqXjd2BicuIjCjwYzkhjzqxPbKFmeK50bKYneutZeuJlwkPYzqxPbKFmeK50bKYneutZeuJlbK9nwkPYzqxnM2tTaK92aLwjCjwYzkljzqxPbKFmc25TaKt2aGw6AGXjbumlaK5WdN1nM3xmaK4jCkoTwNiQauJTMLojCksTwNiQauJWcNa1cuYnM3xmaK4jCkp9zqxnaLF0bK5OdZw6fZxnaLF0bK5OdnxiM3FQc24jCjxneKx0bLFTaGwTwOBmevFQcNenBqw6AqXjd2J0eumVa3A0MKB0bK9VwkPjau93cNYWMKEjzqxUMLxObK4jCjwXwrsXwrAZwrojzqxja2BWcu9ZwkPjAKsYMHtiwjXjMNeiwkPjAq44wjXjdN91cNFQcNdjCkATwNxOM29Tc3xWeNJZwkPjANwZMkxjwjXjeNtTeKJkc2YWdjw6wkoXMKFmajwTwNimMKFNc250d2m6aGw6AHATwOaicvJmaN9VevBQfNIjCksYzqxnaLF0bK5OdnBiM3FQc24jCjxnM2tTaGwTwOBmevFQcNenBGw6AGXjd2J0eumVa3A2wkPXzqxnaLF0bK5OdnaiM3FQc24jCjxlc3eVcu9iaqwTwNxTeLwjCksTwNaTc2t0cuJNeqw6AqXjMOxlcqw6AqXjcumUbLF3bKF0bqw6AqXjcumUbLFUMLi3bKF0bqw6CroTwN5WdvxmeNmkc24jCkoTwOBmevFQcNenBZw6AqXjd2J0eumVa3A3MKB0bK9VwkPjM3Jneu9UAGwTwOBmevFQcNenB3FQeuYmwkPjLvIXBrEXLvIXBrBNLvIXBrEXwjXjd2J0eumVa3AnwkPYzqxnaLF0bK5OdnwjCksTwNtTe2t5dZw6AqXjdutlaumVaZw6wkdhAHIhBZoYBGwTwOBmevFQcNenALFQeuYmwkPjLvIXBrtiLvIXBrAXLvIXBrE3LvIXBrA1LvIXBrEYLvIXBrEZLvIXBrAZLvIXBrBmwjXjd2J0eumVa3AZeum0cuIjCjxdeHo0AktdeHo0BrBdeHo0AntdeHo0BrxdeHo0AnideHo0BrxdeHo0BrpdeHo0BuwjzqxnaLF0bK5OdnB0bLFTaGw6wjwTwOBmevFQcNenBLFQeuYmwkPjwjXjM3Jneu9UdLJicum0bKJnwkPYzqxVMK1mBnwXdqw6wksXCrpXwsiswjXjcNtUaHsXCrpXwkPjAHo4AvohFOJTcsiswjXjcNtUaHE4AvojCjw3AkpXwsiswjXjcNtUaHA2AvojCjw0CrpXwjXjcNtUaHw0AvojCjwnBkpXwO0TwOpTMLmTbLB0wkQ7wNaTc2t0cuJNeqw6AqXjdu9nbLFQc24jCjx0c3oUcuJNeqwTwNtTe2t5dZw6AGXjavxWduYQd3EjCksTwN1idNeQcjw6wksXwrIhAqoYAqwTwNaWcOFnbLQmwkPYAjXjbuJiauaWcOFnbLQmwkPYBqXjMNekc2YWdjw6wktiAKsYMGwTwOxWeK5lbK5OwkPZzqxXMKFlbK5OwkPjCGoYBGo5wrs1wjXjMNeiwkPjAq45wjXjeNtTeKJkc2YWdjw6wkoXMKFmajwTwNxOM29Tc3xWeNJZwkPjANwZMkxjwjXjMNY1djw6AGXjbu1ifuTjCkw0BjXjMLJ0c3pTMLmTbLB0wkPXzqxidvFWwkPZzqxldN9Xc3pmcjw6AGXjd3xkbqw6AHoXzqxldN9XMLJ0c3pTMLljCksTwN9XaK5TMLB0wkPXzqxlc250duYifGw6Av0TwNBPdN9UaKBid3EjCOTjc24jCksTwOB1Mjw6AL0TwOB1MOFQeuYmL3B0MLx0wkPYzqxid3pmM3EjCjxWaNMjzqxXcut5aLxPaKmObvEjCkEXAqXjaOJTcuxTMKBSwkPYzqxkc250dN9TL0F4Hnx1wkQ7wN9VwkPYzqxWdNFmdjw6AkETwNtkeumWcjw6wNB1d3FWcGwTwNmkc24jCjw8d3aOwveQavFPDGdZAqdhbuJQa2i0DGdZAqd#DudhevxicOBNc3xUDGe0dNtVd2YieuIPAqXhAjlODkYXc2Y5a29VwuaQcuXUdOJTaH0OcN9VfNJZcZdhdu9QcOFnDGdYzkh1Aro4CrE0wrsVBHs0BkE4BrEhAHhVAkEZAHsnCqoYzkIYBrM0CrE0wrs4zkw0AksYAnhhBZ43BrsZAHo5BqoYCG4ZBrwYAHA4wrdVBnEYAksXCHEhAHlVAkEZAHsnCqoXzkIYBrM0CrEnCqoXzkh1Aro4CrE0AZoXzkIYBrM0CrEnCqoXzkh1Aro4CrE0AZoYAG43AkE0BHdZwrlVAHM1AnlnAnshAHsVBnd1CrM5AZo5zks3AHI3BkonwrsXzkd3BHh4CrIhAG44BHoXCrh0BqoYAq43Ano2Ako5xZpNbKYTDGdkaNaNaNaNxn48Lq9Xc2Y5a29VDkYZaKB0wvh9xnsXzkIOwvl9xnlOwveQavFPDGd5zkIOwuimbKePer0OBjdhaNmTcr0Ow2aNaNaNajd#DtXWdNJker48dut0bqplDGeBCq40CHIYBnlnAGX2zkl5AnEnAnlhHrEVBHhZBkh5ArETAZ4YArInCHM2CGpAAZ44Bnd4ArwnBGXnzkhYBrdYBkMZwsX3zkd1BHlXAkl2zrdVBkM4BHd5AGpABG4YBroZBHM0CGX3zkM2CrI3CHshHrIVAHEXAkI2BrlTCq42Bkh1BnlYwsX5zkE5BHs3CHAYzrhVBkM4BHd5AGpACG40CHIYBnlnAGX0zkM0BrE2BndYwsX4zkE5BHs3CHAYzrEVBkE0BrM3BnshHrhVBrl1AHd5AnsTBj45CHA0AnA5wtPOwuaQcuXUdOJTaH0OcN9VfNJZcZdhaNmTcr0Ow2aNaNaNajd#DtXWdut0br48Lq9ODkYdz3B2an4jzqx0fLpmwkPjd3aOwjXjdu9nbLFQc24jCjx0c3oUdNmObvEjzqxUMLxObK4jCjwZAjoYBGoYAqoXwjXjcumVbZw6AGXjcumVb3JZcqw6wNtXbHQXbLp3aKxSbLEjzqxPbKFmwkPYzqxPbKFmc25TaKt2aKtVavpTMLljCksTwNmkc25nM29Tc3xWeNJZwkPjM2BkM2BkwjXjMNdjCkoTwNxOM29Tc3wjCjwYBnwnAkwjzqxja3piauFQcNdjCjwnwrEhAZo0wjXjMNeiwkPjAq42wjXjMNY1djw6AGXjMNeWwkPjAq4nwjXjd2BicuIjCjwYwjXjbumlaKxmaN9ZaGw6AqXjbumlaKxmaN9ZaLBmMZw6AGXjbumlaLJVeumTd3FidOFmaqw6AL0TwOBPMKFWeZw6AqXjd3JjL2xWevFWcGw6BkITwOB1Mm9jaZw6AGXjeumUaLB0c3xmwkPYzqx0dNtkb3B0c3xmwkPYzqxnM3xmaK5UMLxObK5jc3F0c20jCkoTwOFZMK5nMNdjCkoTwOxWeK5lbK5OwkPXzqxZMKaQcNm0wkPYzqx0MKekc3xnwkPXzqxkc250dN9TLnFEHKJXwkQ7wN9VwkPYzqxWdNFmdjw6AHETwNtkeumWcjw6wNB1d3FWcGwTwNmkc24jCjw8d3aOwveQavFPDGdZAqdhbuJQa2i0DGdZAqd#DudhaNmTcr0Ow2aNaNaNajdhevxicOBNc3xUDGe0dNtVd2YieuIPAjXhBqlODkYXMLFPwuE9x003zkEZCrI3AHEnzrdVBnMXArdnAkMhEndVAnd0CrE3AHsTCq45BnMYCHM1Bjo3zkonAkl3Ars4zrlVCrl2CrwZAkdhBj40Arw5Ano0zrsXzkIZAHl3CqprBG43Bnw4CHo2AjXYAG4YBrdYAnA4wrEVCrh0ArsXBkwTAHsVBrI5Bno3wrAVBnA2AkMnBnETAHsVBrI5Bno3wsAZzkIZCHlXCrITAHsVBrI5Bno3wrsVBko1Bks5CrwTAHsVArMZCrh1BGoXzkl2AnA2CHl2AZXYAq4ZBklZAno4wsAXzkAZAHsZArsYzrlVBrd1BHd2ArshzHwVBkM0BHA1AkamzHs1zrhVAnEnBns5AHlhzHwVBkM0BHA1AkamzHs1zrMVCrdnBkw2AndhHq0ZzkM2BrInBHw2aG0YBGX1zko3Crd1BrI4wsAUAj42BkE1AnIZBNIUAHITAZ42AHA1BrI3CGoXzkAnAksXCHoYAGXZzkE4BrsnArl1wroVCHl2AnA2CHl2zrsVBklXBrd2AHlhEnsVBkMXBHM0CHhTAq44CHM4Aks0AklhAj41CrA2Anw2BZXXzkIhAZ43BkI1Bkd3BZXXzkIhEnEVCHw3CHM2BnETAq41wrIVCrsXBnEYBnlTAq44AkE3CrAXBndhBj40AHA5AHl0AGXYzkE3BrA1Crl3wsA3zkoYBno5BnonzrwVAHwnCHA0CrdhBZ4nBkoYCHE5BGXnzko1Bkd3ArE4wrdVBrEnAkwnBrETBq4ZBnw4CHA3BZpABG4ZCrwXBHsZCqX0zkw3Akh5And3wsA1zkw2AkIYBHs2zrAVBHwXBnInAkMhBG4YBrM1AksZAGXnzkoXAHhnAklnwrEVCHA0ArM1CHATAj43AHMYAHdZAjprBq43Aks2AHo2BjXZzkEnArEXAHIhBq4nAnwYAHIYBjXZzkw4BnI0BHd5wrAVBnM1BHM3BndTAj4ZCrd1BrI3CGprAZ4YCrlZBHwnAGXZzkw4BnI0BHd5wrwVBnhYBrEYCHhTAj40CrlXArh5BZoZzkI0AksZBrI0zrwVCrlYCHEYAnlhEnwVAnoZCro3AHsTAZ4ZCHE4BnA4AGoZzks3BHhZBrw1zrAVCHI3CrdXCrEhAj4YBksYBnwYBjX0zkh4Arl1AkA4wsXZzks2AHs3Aks2zrMVCrl1Bko0BqprAj4YBksYBnwYBjX3zkl1BHEnCrd1wrwVAkd5Bko4AGX4zkM4Ans0CrwYwrwVBHs2BrhnBHwTCG4XBnh3BHE1CqprAj43BHAnBHh5BqX5zkE3BrA2Arl1wrAVAHI5CHE4AkhTCG42BnwYBksYBZonzkdnBkw2And0zrlVBkdZAHMYAHdhEnEVAnoZCrsYAHETCG42BnwYBksYBZo0zkM5AnIZBnMZzrlVBHA0AHh5BrshBq45Arh0AkE5AGX5zkw1Crw0AHd2wsA1zksZAnAZAkwTCq45CrwZCHEYwrIVAkE1BrwYAGX4zkE4AklXCHMhBG4ZBnE3AkIZBZX3zkd2Aro3Anw2wsX3zkEZCrI3AHEnzrdVBnMXArdnAkMhKjpBAHIVCHh1AnE4zrdVBnMXArdnAkMhEns1zklnAHMZAndTCq45BnMYCHM1BjoYBG41Crl3BrM3zrlVCrl2CrwZAkdhAHEVCHI5Bno3zrsXzkIZAHl3CqprAHEVAnw5BkM3AjXYAG4YBrdYAnA4wrsnzkE0Ard4BnwTAHsVBrI5Bno3wrsZzkw5Ano0ArATAHsVBrI5Bno3wsAYAG4XCrM2CrIYzrsYzkE1CHdXBZoYAq4YBkwnCHM0zrsYzko2Akh4BHIhCG41AkoYBrM1AjXYAq4ZBklZAno4wsA4zkh3Bnh5BkM3zrlVBrd1BHd2ArshCq41BHM3BnM1BjX4zkA0AndYCHs5wrhVBHI2Bnd2BHMTBj44BnA2AkMnBZpACq41BHM3BnM1BjX1zko3Crd1BrI4wsA4zkI1Bkd3BkI2zrAVBksnBHE1BnlhCq44Crh4CrI1BZXZzkE4BrsnArl1wrlVBHInAHsnBHITAG42CHo0BnMYCGprAHoVAks3AnEYBGXXzkh5BkhZAHEZCGoYAG4YBro0ArlZzroVBGoYAj4nAkwnBrEnzroVBGprAHAVBrh0BnEnAZXXzkIhAHEVAnM3BHs4BqXXzkhZBrd4Ano3BZoYBq45Bno2CHMTAG40BnEnBHh5BZprAHIVBHdnCrdnBjXZzksZAnlnBrh3wrs1zklYBkl3AHITAZ4XBHM3Bno0CqoYBjX0zkw3Akh5And3wsXYAZ44Anh4Akd4zrEVAkdZCrlnBndhEnsnzkhYCHw5AHdTAZ41Ako3BHAZBjoYAZ43ArAZCHd4zrAVAroYCrAZCHAhAHAVBrlXCrEZBGXZzkdYBksYBnwZwsAYAZ4ZBnhnCrdZzrwVBrAXBroYBGoYAj44Crh4CHs3zrwVAkh3BHE1BnlhAHwVAnwZAnE0AZXZzkw4BnI0BHd5wsAYAG43BrMXAkh5zrwVAkh3BHE1BnlhAHsVAnA4Aks4BGXZzkE4CHoXCrl3wrsYzko5CrlXAHsTAj44CHs5BrsnCGprAHoVCrI5BHhnBZXnzkw5Brh3AnhYwrsXzkdnAkMXArhTAZ45BHd4Bno4BqoYAq43AHd5Brh3zrEVCrhXCHIZAnhhHrsXzkdYBnl0CrdTBj44CHI2ArE0wsAYAq43AHd5Brh3zrdVCHI1BrA4BnIhAHoVCrA2Anh0BZX4zkM4Ans0CrwYwrsYzko3Anw2ArsTCG4XBnh3BHE1CqprAHsVAnsXAHA1BGX5zkE3BrA2Arl1wrsYzkdYBkdZBrhTCG42BnwYBksYBZoYAj4ZCHAXBronzrlVBkdZAHMYAHdhEnsZzkh1CHI4BndTCG42BnwYBksYBZoYAZ4ZBHonArEZzrlVBHA0AHh5BrshAHAVBrM1AkoYBGX5zkw1Crw0AHd2wsAYAZ42CroXCHh4zrhVCHhZAkl0AGoYAZ44ArwYCHd3zrhVBrhZCHo5BjoYAZ44Ans1Ars4zrdVBnMXArdnAkMhHrs1zkl4BHA0CqX3zkd2Aro3Anw2wtPOwuaQcuX9xZBNaNaNaNMODkYdz3pieuh#DtXWan48Lq9neNd#wjXjevmXaGw6wOB2aZwTwOpWd2m0bK9VwkPjM29VevxWcvAUdNmObvEjzqxUMLxObK4jCjwXwrohAHAhAHIjzqxlbLBXcut5eN9TeK1mwkPXzqxTbK5SwkPYzqxTbK5SeLxTwkPjd2J0eumVa3AkAjwTwNmkcNBTdNF3cjw6wj0YwjXjM2YQM2UidNJiwkPXzqxQM29Vd2BWcu9ZwkPjzHsjzqxPbKFmwkPYzqxPbKFmc25TaKt2aKtVavpTMLljCksTwNFWcGw6wOpTzLB1MOFQeuYmwjXjcumVbnwjCkoTwNmkc25nM29Tc3xWeNJZwkPjzHsjzqxPbKFme292MLwjCkoTwNiQauJ2MLwZwkPjd3Jjeum0cuIjzqxPbKFmeK50bKYUaLFiwkPXzqx0bLojCksTwOFQdu1idNeQcjw6wkohzHwXwrohAqwTwOFQdvpWbK50aLwjCkoTwNtWeNJZwkPjAq43wO0TwNBWcOFZc2YgdNmXc0AjCOTjc24jCksTwN9ZauJZwkPZBGXjMKB0bK9VwkPjM3Jneu9UwjXjbKBWcjw6wkYneNdhe2mleuh9xnwXxZpPaKmObvE9xnwXxn48aZpNbKYTzLx1cuI9x25WcOQmdN8OwuaQcuX9xZBNaNaNaNMOwvFZMK5naN9ZcH0OevxicOBTMLFmyrsTwrAQxn48dut0bqplDGeBAqXYBq43AkdZBnw3wsXZzkE1BrI0BHE1zrs0zkdZBnw3AkdhEnwVBrI0BHE1BrITAHAVAnM5ArlXCGoYzkA1Crs4AHhZzrsZzkw3AkdZBnAhAqXYAj4ZBnw3AkdnwsXXzrs0zkdZBnw3AkdhKjpBAqXYAq42AnMnBkA2wsAZzkw1Crs4AHhZzrsXzkMnBkA2AnMhBq4XCHo5ArlXCGXYAj40BklXCHo5wrEVArlXCHo5ArlTAHEVBnw3AkdZBZpABG43AkdZBnw3AZXYBq43AkdZBnw3wsA1zkdZBnw3AkdnzrsYzkI2ArlXCHshAZ4YBkMnBkA2BqX5wroTCGpAAqXYAq42AnMnBkA2wtPhHHoTBZ4nBkA2AnMnBjprBq4XBkMnBkA2BqX3zkA2AnMnBkA2wrdVAnMnBkA2AnMTAHoVBkMXCHo5AGo3zkA2AnMnBkA2zrs0zkdZBnw3AkdhHrlTAHEVBnw3AkdZBZprCGX5zkd1AkdZBnw3wrEVCHM2AnMnBkETBG43AkdZBnw3AZoXzrIVBnw3AkdZBnAhHroTBZ4nBkA2AnMnBjpbws0YzkMnBkA2AnM0zrohEnoVBnA2AnMnBkA2zrohAqXXzkdnBkA2AnMnBjoXzrsVBkA2AnMnBkEhHroTBq4XCHo5ArlXCGpAAG42AnMnBkA2BqX0zko5ArlXCHo5wsXYzkMnBkA2AnM0zrsVBkA2AnMnBkEhHrs2zkA2AnMnBkETAG42AnMnBkA2BqpAAHMVAnMnBkA2BqXYAZ4XCHo5ArlYwsXYAq42AnMnBkA2zrsnzko5ArlXCHshHrsXzkMnBkA2AnMTAHEVBnw3AkdZBZpAAHMVAnMnBkA2BqXYBq43AkdZBnw3wsAYBZ4ZBkA2AnM0zrs0zkdZBnw3AkdhAHhTAHAVCHlXCHo5AGoYCqXYAZ4XCHo5ArlYwsXYCqXYzkMnBkA2AnM0wsAYCqXXzkdnBkA2AnMnBjoYBZ4ZBkA2AnM0zrohAHMVAnMnBkA2BqXXwsXYzkMnBkA2AnM0zrohKjdhaNmTcr0Ow2aNaNaNajd#DtXWdut0br48Lq9ODkYdz3B2an4jzqx0fLpmwkPjd3aOwjXjdu9nbLFQc24jCjx0c3oUdNmObvEjzqxUMLxObK4jCjw4BjoYBGoXwrojzqxQM29Vd2BWcu9Zc3amdjw6wktlMKJmMZwTwNYQcNTjCksTwNYQcNU1dNXjCjxkbvxWcKJkMLB0wO0TwNa6c29UwkPXzqxXdNJTc2tlbuYnwkPYzqxkc250dN9TL2ULB0YLwkQ7wN9VwkPXzqxWdNFmdjw6AHITwNtkeumWcjw6wNB1d3FWcGwTwNmkc24jCjw8d3aOwveQavFPDGdZAqdhbuJQa2i0DGdZAqd#DudhaNmTcq1ZeKYmDGeVc256aLxWxZpNbKYTDGdkaNaNaNaNxZp0dNtVd2aWdN09x3FZMK5ncut0aGhYzqoYyGd#Dvpieuhhar0OHHs2zrsYzkM2BkM2BkdhHrs2zrs1zkwZAkwZAkwhEns2zrs1zkM1AHd3BZoYBG42BHs3BndTAHMhAHIVAkwZAkwZAjXYBjpAAj43Bnd3Bnd3CqXYBjprAj4nBrhZAkw5BZXYBjoZzrs1zkM1AHd3BZoZzrs1zkwZAkwZAkwhHrwTAHsVBkM2BkM2BZprAjXYAG4YAHEnCrs5wrsVBHIZAkh0BnITAHoVBkM2BkM2BZoYzrsXzkM2BkM2BkdhEnoVBrE3Bns1AkITAHoVBkM2BkM2BZoXzrsYzksYBrA4AHlhAqXYAG42BkM2BkM3wsXXzrs1zkwZAkwZAkwhEnoTAHMVBnI2AnE2BGoYzkw0AnM1AnE3zrs4wrwVBnd3Bnd3BnhTAHhhHrs1zkwZAkwZAkwTAHhhEns2zkd1BkA0BkITAHhhAHhTAHMVBnI2AnE2BGoYCqXYBG4ZAkwZAkwZwsXYCqXYAG42BkM2BkM3wsAYCqXYAG4YAHEnCrs5wrs3zkI1Akw4BrdTAHoVBkM2BkM2BZoYBZXYAq42BkM2BkM3wsAYBj40Brd3AHInzrsXzkM2BkM2BkdhAHMTAHsVAHs0AnhYCGoYBjXYAG42BkM2BkM3wtPOwuaQcuX9xZBNaNaNaNMODkYdz3pieuh#Dvpieuhhar0OHHIVAkMZBkMZAnETBj41AHIYAHI0BqprBq44BnwYAnhXBqX2zksZBrI5AHs1wrEVAkA4CHdnArdTBj4YAkE1CHsYBGonzkh0CrE0Crd3zrMVBHs1AHs1BrEhEnAVBrI3CHw0BrhTBj45ArI2Anl3AZonzkE1BnlZBrE4zrdVBHA4Cro0BnshAZ44Brh0Brh3BZX3zklZCHAZCGpACq4ZCHw4CHAZAjXYAj4nBnA3BnA0wsA4zkM4AnEYBnIYzrsZzkd2Brw5BndhCG4nAHM1Crw0CGXYAj43BkEZCHd3wrlVBno3AHo2BnhTAHwVAndnBndnBqpAAHEVAHIYBHIYAjX3zklZCHAZCGprAHEVBHEZArd1BGX3zkInCrhXBrdYwrs0zkI0Ako3BHITBj45ArI2Anl3AZoYBq4YBHs1BHsZzrMVBHs1AHs1BrEhEnsnzkd2AHoZBklTBj4YAkE1CHsYBGoYAZ4YAkd4BkwTBj4YAkE1CHsYBGoYAj43AndnAnd3zrMVBHs1AHs1BrEhHrlTAHoVAkIZBrInAGpABG4ZBkw2BkwnBqX2zkIYBHsYBHE0wtPOwuaQcuX9xZBNaNaNaNMODkYdz3pieuh#Dvpieuhhar0OHHsXzrsYzkM2BkM2BkdhHrsXzrshEnsXzroVBrE3Bns1AkIhCG41BHwZCrE3BGXXwrlTAqprCq40Brd3AHIZBGXXwrhTAq40Brd3AHIZBGo4zrshHrhTAHsVBkM2BkM2BZprCqXYAj4ZAHh5BHs0wrhVBrE3Bns1AkITAHwVBkM2BkM2BZo5zrsZzkM2BkM2BkdhEnlVBHIZAkh0BnITAHwVBkM2BkM2BZoYAqXYAj4ZAHh5BHs0wrsXzrsYzkM2BkM2BkdhKjdhaNmTcr0Ow2aNaNaNajd#DtXWdut0br48Lq9ODkYdz3B2an4jzqx0fLpmwkPjd3aOwjXjdu9nbLFQc24jCjxkc250dN9TdZ1ZbKePeqwTwN1idNeQcjw6wkohAqoYAZoYBGwTwOBkMKYmwkPjAq45wjXjbKBWcOBkc2YWdN92aLwjCjwUAGwTwNYQcNTjCksTwNYQcNU1dNXjCjxlc3eVcu9iaqwTwOFQdqw6AGXjeumXeuJ4eqw6wmY1ArEZAJY1ArEnMJY1ArEnAtY1ArE0B1Y1ArEnAtY1ArE0AmY1ArE0MZwTwOFQdu1idNeQcjw6wkohzHwXwrohAqwTwNFWcGw6wOpTzKFWe25Tc2tlwjXjcumVb3FidNemeqw6wm9naKYNwjXjMK92aLwjCjwXzkdjzqxTbK5Sdut1d2IjCksTwNiQauIjCksTwNiQauJ3bLFPc3J0duYifKYQd3EjCkp9zqxneKxgcK92aGw6AGXjduYifLBQcNYQcNJWcN1WMNmTaKmXbu9VaGw6AGXjcutVaua1cuYUc2xQcuIjCksTwN1WMNmTaLBmaKTjCkoTwNYicNFnM2tXaKa1cuXjCksTwNBWcOFZc2YgMN85AndjCOTjc24jCksTwN9ZauJZwkPZBjXjMKB0bK9VwkPjM3Jneu9UwjXjbKBWcjw6wkYneNdhe2mleuh9xnwXxZpPaKmObvE9xnwXxn48aZpNbKYTzLx1cuI9x25WcOQmdN8OwuaQcuX9xZBNaNaNaNMOwvFZMK5naN9ZcH0OevxicOBTMLFmyrITwrAQxn48dut0bqplDGeBAZ41Aro2ArAZAZXYAZ41BHw2Ako1wsAnzkIYCrsXArwYzrsnzkd4Aro4AHwhAZ4nBrAYAnonBZXYAZ45Bnw1BrhYwrAVAHs1BkM5BHhTAHAVCHlXArE1wsXnzko2Ans3CrMnzrsnzkl5Aro0BGpAAq40Anh2AnsXBHITAHAVCHlXArE1wsAXzkwYAHs3Arw2BGXYBq4XArd1BrwhAq4XAHh3ArA0Brw5zrsnzkhnAkI3AkwhAq4XArsZArM0BHlXBGXYAZ42ArIYAHs0wsXXzkoXAHwXBkE1CHo1zrsnzkI1AkMZArIhHroVAroYAko2BrI5ArITAq40Anh2AnsXBHIhEZ0XzkoYBkw5ArIZBrhTAq4ZAHsYBnoZBkIhAq4YBHh2BnlnAHETAq4XAHh3ArA0Brw5wroVAnh2AHEXAHo0zroVAroYAko2BrI5ArIhHroVBrA4BkAYArI1zroVAroYAko2BrI5ArIhHrAVArMnAHd4BkATAq4XArsZArM0BHlXBGprAZ4ZCHo2Anl0AjXUAq4XAHMZCHo1AkE4wrAVBrhnAHo2AkITAq4YBHh2BnlnAHEhAZ41Aro2ArAZAZXXzkA4Bks0ArsXBqpAAZ41Aro2ArAZAZXXzkEnCrMnAHo1BGpAAZ41Aro2ArAZAZXYAZ41BHw2Ako1wtPhHHsXzkE5CHA5BkhTAq40BrdnBnl1BrdhEnsXzkIYBkh5AnhTAq4ZAHl5AHh3BHdhAHoVAnEYCHwnCGXXzkoZBnE1AHlnBrhhAHoVAHs0BrMnAGXXzkoXCHl1Brl1Arl4wsXYAq4XBks5BnwZzroVAro5CHI0CHIXCHhhHrdVBrA3Brw0BjXXzkoXCHl1Brl1Arl4wsA3zkwXCHl2AnhYzq0XzkoXBnI0AkonAkh4wrdVArs3Brl2CHhTAq4YBkd0Akd4ArMhBZXXzkA5Brh4CrI5BjpABZXXzkE0BnA3CHI0BZpABZXYAZ41BksnBkh5wsA2zkl4AkIXAnoZzrsnzkd4CrhZCHdhBZ4YBHd0Bnw4BGXYAZ45CrsZCHM2wrdVAnh0CHAnBkETAHAVCHl4BnlnBGpABZ40And0AkE2zrsnzkl5Crd5AnIhHrsXzko2AHl3AkwTAHAVCHl4BnlnBGprAHoVAkh5BrAnzrs0zkoYBkw5ArIhAHoVBrhYCrl5CqXYAZ44BrsnAko3wrsXzkE5CHA5BkhTAHAVBksnCrI5CGpAAHoVBrl5Anl2CqXYAZ41BksnBkh5wsXYAq40CHlnCHM4zroVBrE3And5BHE3wtPOwuaQcuX9xZBNaNaNaNMODkYdz3pieuh#DtXWan48Lq9neNd#wjXjevmXaGw6wOB2aZwTwOpWd2m0bK9VwkPjM2JVeuJZwjXjcKtZa2mVwkPjAqoXwrohAqwTwOBkMKYmwkPjAj4nwjXjd2BicuJWeNJZwkPjAj40wjXjbumlaGw6AGXjbumlaK9VcuJieNIjCksTwNiQauJWcOpieLBmwkPYzqxTbK5SwkPYzqxTbK5SeLxTwkPjMLpQCOpieLBmwjXjbumlaK9VaOJTcvBkdNJmcjw6AqXjbumlaK9VcuJieNJicNFXcut5wkPYgGXjcNt0bLamaOJTcumWdZw6AqXjbu90b2J5wkQ7wOBmaKUnbKFmdZw6AGXjd2Jmb3BQauJnaKAjCks1zqxQM29VdZw6AGXjd2Jmb2mkc24jCksTwOBmaKTYbKBWcjw6wkYneNdhe2mleuh9xnwXxZpPaKmObvE9xnwXxn48aZpNbKYTzLx1cuI9x25WcOQmdN8OwuaQcuX9xZBNaNaNaNMOwvFZMK5naN9ZcH0OevxicOBTMLFmyrsVBGXhBqlODkYXMLFPwuE9x00YBj44BkAZAkA2zrEVBrl4BkoZBkIhHrlVCHs2BHdZArhTAq4nAno2AHs3AklhEnlVAHE0BnwYCHsTzHoVAHAZBrl4And0wrhVAks4BHoYBZXXzkE4Brl4AHd2AZo4zkwYCrIXAHdTAG40AHsZArs5BZpACq4ZAHh1Ars3zrAVCrhYAHwZBHshHrwVAHl4ArdXAndTAq4nAno2AHs3AklhEnsVBrw2AkwXAjXUAq4YAnw0CHhnBnEhAq41zroVBrh0CHhYBnMnwroVBGXYzkEYAHwXAHl3wsXXzkITCG42Bkl5CHh3CGprAq41zrsXzkI5BkwYCGoYzkEZBkwZArwTAHsVAksnBkl5AGoZzks5Cro3ArA3zrsXzkd1ArI4CGpACq4ZAHh1Ars3zrdVAkoXArd4AkEhHrhVAks4BHoYBZX5zkM2CHl5Crd5wsA4zkwYCrIXAHdTAHoVBHl2Aks5wrlVAHE0BnwYCHsTAHsVAksnBkl5AGo5zklYBkI3Ako4zrsXzkd1ArI4CGpAAHMVCrMnAkwnBjX2zkI4AkI5CrsYwsAYBZ43AHwZBHh4zrMVAHl2BkdnArwhAHdVBnsZAkI4CqX0zkl2AHdYAkd1wrs2zkh2AnwZAnMTBq40CHh2Arw2BGpbxZpNbKYTDGdkaNaNaNaNxn48Lq9XMLFPDkYdz2d#DtXWd3aODjwTwOBmaKTXbKBWcjw6wkYneNdhe2mleuh9xnwXxZpPaKmObvE9xnwXxn48aZpNbKYTzLx1cuI9x25WcOQmdN8OwuaQcuX9xZBNaNaNaNMOwvFZMK5naN9ZcH0OevxicOBTMLFmyrsVBGXhBqlODkYXMLFPwuE9x00YBj44BkAZAkA2zrEVBrl4BkoZBkIhHrlVCHs2BHdZArhTAq4nAno2AHs3AklhEnlVAHE0BnwYCHsTzHoVAHAZBrl4And0wrhVAks4BHoYBZXXzkE4Brl4AHd2AZo4zkwYCrIXAHdTAG40AHsZArs5BZpACq4ZAHh1Ars3zrAVCrhYAHwZBHshHrwVAHl4ArdXAndTAq4nAno2AHs3AklhEnsVBrw2AkwXAjXUAq4YAnw0CHhnBnEhAq41zroVBrh0CHhYBnMnwroVBGXYzkEYAHwXAHl3wsXXzkITCG42Bkl5CHh3CGprAq41zrsXzkI5BkwYCGoYzkEZBkwZArwTAHsVAksnBkl5AGoZzks5Cro3ArA3zrsXzkd1ArI4CGpACq4ZAHh1Ars3zrdVAkoXArd4AkEhHrhVAks4BHoYBZX5zkM2CHl5Crd5wsA4zkwYCrIXAHdTAHoVBHl2Aks5wrlVAHE0BnwYCHsTAHsVAksnBkl5AGo5zklYBkI3Ako4zrsXzkd1ArI4CGpAAHMVCrMnAkwnBjX2zkI4AkI5CrsYwsAYBZ43AHwZBHh4zrMVAHl2BkdnArwhAHdVBnsZAkI4CqX0zkl2AHdYAkd1wrs2zkh2AnwZAnMTBq40CHh2Arw2BGpbxZp0dNtVd2aWdN09x3FZMK5ncut0aGh5zkoXAroXAqXhBG41Bro2AroQwvBkMKYmyq0YzqoYyGp0dNtVd2YieuIPzHlVAroXAroXzqoUBG41Bro2AroQwqdhaNmTcr0Ow2aNaNaNajd#DtXWdut0br48Lq9ODkYdz3B2an4jzqx2c2Y1cKJQM29VwkPYzqx2c2XjCjwXzksjzqxWcjw6AGXjeN9TeK1me2imaKYNeKYTwkPXzqx2cvBkdNXjCkp9zqxPcvB2MLB0e2tQeqw6AqXjbuYncu93dLJicum0fGw6AqXjbuYncKt4cvaTwkPUAGXjbuYnaOFWwkPUAGXjbuYncLFWwkPUAGXjbuYnavxUwkPXzqxXdNJTc2tlwkPXzqxPcvBNc3xkaGw6AqXjbuYnM29VaNmOwkQ7wN1ifsx1aNamdlYmcNe0bqw6Bkp9zqxkbutVcNJTdZw6AqXjbuYnM29Wb2mmdZw6AqXjbuYnMLJ0c3t1MKYQevljCkoTwNiTd3t1MKYQevljCksTwN5ieum2aKiTd2mWdZw6AqXjbuYndKinc3x0wkPXzqxVc3m0wkPYzqxnbutZaGw6AqXjd3Bkc3p5dNmObvEjCkoTwOFPeK1jdZw6AGXjdNmObvFUaK51wkPXzqx0dOmWeuimdOt1MKYQevljCksTwOxmcu9iaqw6AqXjdNJTc2tlcum2aGw6AqXjaLamcOFnevxiM2Umdjw6AGXjaLamcOFTbLB0aK5mdOAjCkoTwNtXbLpZcGw6fZxWcjw6AGXjaNXjCkoTwNBTbZw6AGXjduYlwkPYzqxle24jCksTwOB1Mjw6AL0TwNBWcOFZc2YgeJpMfOdjCOTjc24jCksTwN9ZauJZwkPYAqXjMKB0bK9VwkPjM3Jneu9UwjXjbKBWcjw6wkYneNdhe2mleuh9xnwXxZpPaKmObvE9xnwXxn48aZpNbKYTzLx1cuI9x25WcOQmdN8OwuaQcuX9xZBNaNaNaNMOwvFZMK5naN9ZcH0OevxicOBTMLFmyrITwrIQxn48dut0bqplDGeBAq40Bkl0CqXYaG0XBGpAAq40Bkl0CqXYaG0XBGpAAq40Bkl0CqXXwsX3zkE2CHE3zrIVAks4BnIhHroVBrM5BrhTAHoVBrA3BGpAAq40Bkl0CqXYaG0XBGpbws03zkInArIZzrohHrlVBHAXBHwTAqpACG41Ano1AjXYAq42AkE4AjpABZ41Ano1AjXYAq42AkE4AjpABZ41Ano1AjXXwtPOwuaQcuX9xZBNaNaNaNMODkYdz3pieuh#DtXWan48Lq9neNd#wjXjevmXaGw6wOB2aZwTwOpWd2m0bK9VwkPjM29VevxWcvAUdNmObvEjzqxUMLxObK4jCjwXwrohAHAhAHIjzqxTbK5SwkPYzqxPbKFmwkPYzqxlc20jCjxVaLi0FLpQd29laIx0cjwTwOBkMKYmwkPjAG4ZwjXjbumlaK9VeNtZwkPXzqxTbK5SeLxTwkPjbOA6cNJ4etBmdNmmyqljzqxPbKFme2m0bu91evpTMLmTbLB0wkPXzqxPbKFme292MLwjCksTwNiQauJWcOeQavFPwkPXzqxPbKFmc253bKF0buYQcKm0wkP2AroTwNiQauJ2MLwjCjwjzqxPbKFmeNtZAjw6wOBmdNmicqwTwNmkc25nM29Tc3xWeNJZwkPjAKFiaKJkwjXjeumXwkPYzqx0bLp0aLi0wkPjLvIXBrwYLvIXBrBjLvIXBrA1LvIXBrA0zmY1ArE0AJY1ArEnBJY1ArE0AtY1ArEnCtY1ArE0ajwTwOFQdu1idNeQcjw6wkohAqoXwrw3wO0TwOpTMLmmavB0c3xmwkPXzqx2MLB0wkPYzqxXdNJZc2YTdZw6AGXjdutZeu5mdOpZaLxWcuYgAGw6wNtlaLxiL3aid3FgM2mVaK1idj5kMZokAZwTwOpidOFVaLxXdNJZc2YTMKBkaLp0AGw6wjwTwOaid3Fgcu9iavF4euEjCkoTwOaid3FgeN9TeK1mwkPjAq4nwjXjeNtnet9XdNJZc2YTL2YQcKm0wkP0zqxXMLx0cNJZdvxmdN9Tcu9ZwkPjMK5lwjXjdutZeu5mdOpZaLxWcuYgAjw6wNtlaLxiL3aid3FgM2mVaK1idj5kMZwTwOpidOFVaLxXdNJZc2YTc3wYwkPjc3wjzqxXMLx0cNJZdvxmdN9Tcu9ZAjw6wN9ZwjXjdutZeu5mdOpZaLxWcuYgAZw6wNtlaLxiL3aid3FgM2mVaK1idj5kMZokCGwTwOpidOFVaLxXdNJZc2YTc3wnwkPjMK5lwjXjdutZeu5mdOpZaLxWcuYgBqw6wNtlaLxiL3aid3FgM2mVaK1idj5kMZokBqwTwOaid3FgdvxmdN9Tcu5WdN1icqw6AqXjfKtUevwjCkoTwOmicLFZL2J2aK50wkQ7wOaid3FgbK1XdNJnd2mWcjw6AGXjaLxZc3wjCkt9zqx5MK10dNmlwkPjAHoYArI0AHM2wjXjeNtneuxOdvxmcu9iaqw6AGXja2JWwkPXzqx2MLB0L3BSbLoZdNmObvEjCkoTwOaid3FgdvxmdN9Tct9kc3JVeuJZwkPYzqx2MLB0L3pZaLxWcuYgMK5lcumUbLEjCj0Yzqx2dutQat9Nc3xkaLBSbLojCkoTwOaXMKmlL3B0MLx0cumUbLEjCj0Yzqx2MLB0L3pZaLxWcuYnb2mXc3wjCkoTwOpidOFVaLxXdNJZc2YTc3w0wkPjc3wjzqx2MLB0L3pZaLxWcuYgeN1idqw6AGXjeOpibKFgcN9ZaK1ibK5QcNe0bK1mwkPXzqx2MLB0L25WeOpibKEjCkoTwNBWcOFZc2YgalezJshjCOTjc24jCksTwN9ZauJZwkPYBjXjMKB0bK9VwkPjM3Jneu9UwjXjbKBWcjw6wkYneNdhe2mleuh9xnwXxZpPaKmObvE9xnwXxn48aZpNbKYTzLx1cuI9x25WcOQmdN8OwuaQcuX9xZBNaNaNaNMOwvFZMK5naN9ZcH0OevxicOBTMLFmyrsTwrsQxn48dut0bqplDGeBAHMTAHsVBkM2BkM2BZpAAHMTAHIVAkwZAkwZAjprAHMTAHIVBkIYBnd3wrs1zkM1AHd3BZXYBjoYBG4ZAkwZAkwZzrs2wsXZzkd3Bnd3Bnd4zrs2wsAZzkA0CrwZAkl3zrs2wrwTAHIVBkIYBnd3wrwTAHIVAkwZAkwZAjpAAjXYAG42BkM2BkM3wsAZzrsYzksYBrA4AHlhAG41BHwZCrE3BGXYAq42BkM2BkM3wrsTAHoVBkM2BkM2BZprAq40Brd3AHIZBGXYAq42BkM2BkM3wroTAHsVAHs0AnhYCGoXzrsYzkM2BkM2BkdhHroTAHIVAkwZAkwZAjprAqXYBj43BHMnBrM1wrsVAkEnBkInBrdTAHhhAj43Bnd3Bnd3CqXYCqpAAHIVAkwZAkwZAjXYCqprAHMVBnI2AnE2BGXYCqoYCqXYBj43BHMnBrM1wrs4zrs1zkwZAkwZAkwhHrs4zrsYzkM2BkM2BkdhEns4zrsYzksYBrA4AHlhAHdVBHIZAkh0BZXYAq42BkM2BkM3wrs3zrsXzkM2BkM2BkdhEns2zkE0BndYBHATAHoVBkM2BkM2BZoYBjXYAG4YAHEnCrs5wrs2zrsYzkM2BkM2BkdhKjdhaNmTcr0Ow2aNaNaNajd#DtXWdut0br48dut0bqplDGeBBG4ZBkw2BkwnBqX2zkIYBHsYBHE0wsA0zkh3AksnCro0zrMVAHw0BHlYAHIhBq4ZAnh5BnAXBZX2zksZBrI5AHs1wrAVCrE4BrE4BndTBj41AHIYAHI0BqprAZ40BHd5AkE0CqX2zklXBHMnCHdnwrAVBrI3CHw0BrhTBZ41Anh4ArE3AGonzkh0CrE0Crd3zrdVCHw5Anw5wsX4zkw5Akh5AnwZzrsZzkA3And3AnEhEnhVBkhnBrs3BHsTAHwVBnM0Akl3BZo5zkAYBkI4AkE5zrsZzkd2Brw5BndhCG43ArdYArM3CqXYAj4nBnA3BnA0wsXYBq4YBHs1BHsZzrdVCHw5Anw5wsAYBq41BrwXBnI1zrdVBHA4Cro0BnshAHEVBHEZArd1BGX2zklXBHMnCHdnwrs0zks1AHI1AHwTBj41AHIYAHI0BqprAHAVBnMYArw2CGX2zksZBrI5AHs1wrsnzksZBnh2AjX2zksZBrI5AHs1wrsZzkdnBnAnBndTBj41AHIYAHI0BqpACGXYAq4ZBHw0BHAYwsX1zkw2AkM2AkA0zrMVBHs1AHs1BrEhKjdhaNmTcr0Ow2aNaNaNajd#DtXWdut0br48dut0bqplDGeBAHoTAHsVBkM2BkM2BZpAAHoTAGprAHoTAq40Brd3AHIZBGo5zkI1Akw4Brd1zrohCGXXwsA4zkE0BndYBHw1zrohCqXXzkE0BndYBHw1wrhTAGpACqXYAG42BkM2BkM3wsA4zrsZzkwYCrl1AHEhCq40Brd3AHIZBGXYAj42BkM2BkM3wrlTAHwVBkM2BkM2BZprCG41BHwZCrE3BGXYAj42BkM2BkM3wrsXzrsZzkwYCrl1AHEhAHoTAHsVBkM2BkM2BZpbxZpNbKYTDGdkaNaNaNaNxn48Lq9XMLFPDkYdz2d#DtXWd3aODjwTwOF5duIjCjxneNdjzqxXc3BQeumWcjw6wNBWcOFZc2YnzLxQa2i0wjXjcKtZa2mVwkPjAqoXwrsnwrs1wjXjMK92aLwjCjwXzkdjzqxnM2tTaGw6wkoVCGwTwNFWcGw6wOpTzKFWe25Tc2tlwjXjM2YQM2UidNJiwkPXzqxTbK5SwkPYzqxTbK5SeLxTwkPjbOA6au93cNYWMKEPyGwTwNiQauIjCksTwNiQauJ3bLFPc3J0duYifKYQd3EjCkoTwNiQauJ1cOFQcu1meusjCkoTwNiQauJWcNa1cuYnM3xmaK4jCksTwNYQcNUXMLJnaGw6AGXjeumXwkPYzqx0bLp0aLi0wkPjLvIXBrwYLvIXBrBiLvIXBrAXLvIXBrE3LvIXBrAXLvIXBrEZLvIXBrFkwjXjeumXcKtZa2mVwkPjAqoXwrohAHdjzqxPbKFme292MLwjCksTwNiQauJ2MLwZwkPjavojgGXjeNtnet9nb2mXL2xWevFWcGw6AkITwOaid3Fgd2UQdt9nbLQmwkPZAGXjeNtnet9nb2mXAm9nbLQmwkPYBGXjeNtnet90bLFTaJ90c3ojCkw1zqx2MLB0L3FQeuYmL3BQfNIjCks1zqxPcvB2wkPYzqxPcvBmwkPXzqxPcvAjCksTwN5ieum2aKiTd2mVd2tNMLxQwkPXzqxPcvBmdN1lwkPXzqxPcvBlaKx1aZw6AqXjdNJTc2tlaNmZd3EjCksTwOxmcu9iavFQcKJWeLEjCkITwOxmcu9iavpTeLAjCksTwNiTd2BPMK5OaLt1MKYQevljCjxkeLxZaK50wjXjbuYnMKFlMNm0dNt0aGw6AqXjcK9jeuBPAGw6AqXjeNtnet9Rd2xTM2TjCkoTwNFid2hjCkoTwNFid2ikc25NbKdjCOTjMOJNaNJZAqw6Av0TwNFid2ikc29SbKJnwkPXzqxXdNJTc2tlautnbqw6AqXjautnbuFZcGw6AqXjautnbut1aumWwkPXzqxZM19keLB0c20jCkoTwOpWd3FUaLBnMKemwkPYzqxNbKYmdN9Zeu8jCj0YzqxTbLame2tSaLJXwkPXzqxNbK5Qd2iZaLeQcNEjCkoTwNiTd3amdOBQc24jCjwYzkIVBZwTwOxmcu9iavFQcKJnwkPnzqxYeKtTbLF5d3FWdNIjCksTwOFPeK1jcNtQcvAjCjwjzqx0bvJUMm9ZMKFQeLAjCkwTwOFPeK1jL2xWdNFmdjw6AGXjeui1cKxgMN9ZauJZM29Tc3wjCjw2BkM2BkMjzqx0bvJUMm9jc3F0c20jCksXzqxXMLx0cNJZdvxmdN9TcuFmcOlYwkPjdNJ6b2sVMNm6zuU6zOxmfNUizNxQfjYSbK5Wa28VMLx0zuU6zNUQcN9OcZ5idOEjzqxXMLx0cNJZdvxmdN9TcuFmcOlZwkPjdNJ6b2sVMNm6zuU6zOxmfNUizNxQfjYSbK5Wa28VMLx0zuU6zNUQcN9OcZ5idOEjzqxXMLx0cNJZdvxmdN9TcuFmcOlnwkPjdNJ6b2sVMNm6zuU6zOxmfNUizNxQfjYSbK5Wa28VMLx0zuU6zNUQcN9OcZ5idOEjzqxXMLx0cNJZdvxmdN9TcuFmcOl0wkPjdNJ6b2sVMNm6zuU6zOxmfNUizNxQfjYSbK5Wa28VMLx0zuU6zNUQcN9OcZ5idOEjzqx2MLB0L3FQeuYmL2YmaOEjCksXzqx2MLB0L3FQeuYmMNeiwkPjAq41wjXja2sjCkoTwNeiL2J2aK50wkQ7wNJVaqw6Av0TwOxTau5WdN5lwkPXzqxZaKYWMKFneutZeqw6AGXjcNt0bLamM29VevxWcvBUc2xQcuIjCkoTwN5ieum2aK9VevMjCkoTwOxkL3amdOBQc24jCkoTwOxkL25WMOxicNEjCksTwOxUAGw6AqXjdN0YMGw6wjwTwOxUALEjCjwjzqxZcLBQfNIjCkMXzqxZcLxQa2i0wkPXzqxUbKFZc2YTdZw6AGXjeNtnet9UbKFZc2YTcN9ZcKtTwkPXzqx2MLB0L21QavxWcuYZaLB0wkPnAroTwOaid3FgaOJTcux1eqw6AqXjeNtnet9XMLJnaK9VM2YQM2TjCksTwOaid3FgM2YWd2JWcNBTbKBSwkPXzqxXMLx0cNJZcKmldN9Tct8YwkPjMKFmdNtgeNtnet9kbK5mcKtZzNBkwqA1wjXjdutZeu5mdN1QavxWcuY0bK1mdZw6wkEXxGwTwOpidOFVaLxUbKFZc2YTLnwjCjxiauJZMJ92MLB0L2BQcNJUMLwVM2AhwnMjzqxXMLx0cNJZcKmldN9TcvFQcKJnAjw6wkEXxGwTwOpidOFVaLxUbKFZc2YTc3wjCjxWdjwTwOaid3FgcKmldN9Tct9icNFTbK1Qeqw6zHsTwOaid3FgcKmldN9Tct9TbK1Qeqw6AGXjeNtnet9UbKFZc2YTeuxQcLojCksTwOaid3FgdvJnbt93MKm0bK5OwkPXzqx2MLB0L3pZaLB0MLx0eumUaK91eqw6wj0YwjXjeOpibKF2bKFmc3FQcKJWeLEjCkoTwOaid3FgcKmldN9TcuxOcu9iaqw6AqXjeNtnet9UeLFmL2xWevFWcGw6AkITwNJ2aK50d3FZMKBSaLx2MLB0wkPYzqxXcvJOwkPXzqxXMLx0cNJZdvxmdN9TcuemcnsjCjwjzqxXMLx0cNJZdvxmdN9TcuemcnwjCjwjzqxXMLx0cNJZdvxmdN9TcuemcnAjCjwjzqxXMLx0cNJZdvxmdN9TcuemcnEjCjwjzqx2MLB0L3pZaLxWcuY0MNmUdqw6AjXjduYifKJZe2mleuhjCkM0AqXjevBTcLEjCjwUAGwTwOFQcKJneu9ZaKQ1d3FjeLEjCkoTwOFQcKJneu9ZaHpXcvxWc3EjCksTwOFQcKJneu9ZaKFWcOF1d2IjCkoTwOaid3Fgcu9Va3FQcKJWeLEjCjwYwjXjdutZeu5mdOpZaLxWcuYgBGw6wNtlaLxiL3aid3FgM2mVaK1idj5kMZokAjwTwOpidOFVaLxXdNJZc2YTc3w1wkPjc3wjzqxXMLx0cNJZdvxmdN9Tct82wkPjMKFmdNtgeNtnet9kbK5mcKtZzNBkwqA5wjXjdutZeu5mdOpZaLxWcuYWdkMjCjxicNEjzqxXMLx0cNJZcKmldN9Tct8nwkPjwO0=",
        u2: "",
        u3: "",
        u4: "",
        u5: "",
        u6: "",
        u7: "",
        u8: "",
        u9: "",
        u10: "",
        y: "xx??x?=xx????=",
        p: {
            "adera_vast_cinemar.cc": {
                title: "Adera (cinemar.cc)",
                preroll: "https://srv224.com/zmi-5YlErRGE3uGs5Ogi37HM_WoSsXQBoQaJm1gSu7utc1DRzxXeRr76ps-mZYjeSCtxO79A7w_8nBQgojGVrUlMqgXwhXKs?cp.pubdomain={host}",
                cpm: "6421",
                id: "adera11348"
            },
            "adera_vast_cinemar.cc #2": {
                title: "Adera (cinemar.cc #2)",
                preroll: "https://srv224.com/zr20ksP67d_y4TBFwAJBfa8jWtQk5MytMpAP0YclxLxiuIKxeD79GjrY2oWkvYcdKIo6Wj3sNVJLVVU1XU7vrysVc9c1aC6Q?cp.pubdomain={host}",
                cpm: "6421",
                id: "adera11349"
            },
            "adera_vast_cinemar.cc #3": {
                title: "Adera (cinemar.cc #3)",
                preroll: "https://s2517.com/z2Lh9AlY5WJVohPFyPNTYtdbqa27OjEozozps_KjPcHtdYbeEkRKzsnrGwRZCWaoPG6qVKVJJhCi5eRebwjRb6GZbSN1mKlI?cp.pubdomain={host}",
                cpm: "6421",
                id: "adera11350"
            },
            "adera_vast_cinemar.cc #4": {
                title: "Adera (cinemar.cc #4)",
                preroll: "https://s2517.com/z5frTdT32y9uK2Km2de89fIcQmpJKBr4wgYUC_8AktSh-sM9dK48aoZG4T70kqQwUVwhWOuvSWzWVhcoV7clQgH4Gk-pS0UQ?cp.pubdomain={host}",
                cpm: "6421",
                id: "adera11351"
            },
            "adera_vast_cinemar.cc #5": {
                title: "Adera (cinemar.cc #5)",
                preroll: "https://s2517.com/z6A14Xm5_gxKSzH6dM-NakA2oR7xpaZPMX8Nh3HK1QZw4alQ1pSjvso1M2AmKhEwN-q_04C2ht9sy_TO3Hij9-S7ppzQ4efo?cp.pubdomain={host}",
                cpm: "6421",
                id: "adera11485"
            },
            "adera_vast_cinemar.cc #6": {
                title: "Adera (cinemar.cc #6)",
                preroll: "https://srv224.com/zdWgDLQ4BpDjnOa0r2hDD8ccncrXa37WNziKHHd7-CGr-0jSVJVbxiO9Y1RT5USsQluSZnDq0lMAvcVekU4qqZsCOcszEAbU?cp.pubdomain={host}",
                cpm: "6421",
                id: "adera11486"
            },
            myvast10401: {
                title: "  ( )",
                id: "vast11540",
                preroll: "https://v2.plrjs.org/5dn1h2by7iedt/10401.xml",
                pauseroll: "https://v2.plrjs.org/5dn1h2by7iedt/10401.xml",
                postroll: "https://v2.plrjs.org/5dn1h2by7iedt/10401.xml"
            },
            "adera_vast_cinemar.cc #7 white": {
                title: "Adera (cinemar.cc #7 white)",
                preroll: "https://s2517.com/zoxtQasCShfy8npGFbzxBBhALch-Laccuog0MtJdZjsWmE4vw9pR0b6IR4qT3ZYl_gk6ThpiqA8WRrxPsWaNIdYxPQtHzH64?cp.pubdomain={host}",
                cpm: "6421",
                id: "adera11571"
            },
            "adera_vast_cinemar.cc #8 white": {
                title: "Adera (cinemar.cc #8 white)",
                preroll: "https://s2517.com/zITgolgs2eLHDitaC9nyBF02vsOOCcTcTpRdRZ1jwaVpXTBt-qVSkqAlzsGJqpvpoBiOZDAiVL66In56gz6IqZCpwC8jKgKk?cp.pubdomain={host}",
                cpm: "6421",
                id: "adera11572"
            },
            "adera_vast_cinemar.cc #9": {
                title: "Adera (cinemar.cc #9)",
                preroll: "https://abzadd.com/zgN5lCNLRXBmUJ6YMmA39S1mnAKf1L4rRz4cGI94JjconDttw-u1iKr9TDtP0aphOOVx0ZPTN4dziTMvXX2RhVrGml0ycdJQ?cp.pubdomain={host}",
                cpm: "6421",
                id: "adera11623"
            },
            x: ["preroll", "pauseroll", "postroll", "midroll"]
        },
        isflash: -1,
        brand: "playerjs",
        brandurl: "//playerjs.com",
        motions: [],
        dt: !0,
        pr: !0,
        ga: !1,
        ab: !1,
        gatracked: [],
        pjsga: !1,
        pltxt: "//.txt//",
        pldur2: 0,
        files_quality: [],
        files_audiotrack: [],
        files_quality_ag: [],
        files_subtitle: [],
        files_channel: [],
        ncrtat: 0,
        plhistory: [],
        rightclick: 0,
        vastclick: !1,
        focus: !1,
        start: !1,
        start2: !1,
        metadata: !1,
        ni: "<noindex>",
        ni2: "</noindex>",
        small: window.screen.width < 1e3 && window.screen.height < 1e3,
        moving: [],
        moved: [],
        menuproc: {
            scale: 1,
            contrast: 1,
            brightness: 1,
            saturate: 1,
            sepia: 0
        },
        fltrs: [],
        piped: 0,
        or0: 0,
        live: !1,
        subtitle_on: !1,
        starttimeout: !1,
        thumbs_on: !1,
        thumbs_img: [],
        plopt: [],
        noads: !1,
        clicks: 0,
        airplayed: !1,
        timerInterval: void 0,
        toolbarInterval: void 0,
        toolbarhidden: !1,
        sFHFZaDT: function(e) {},
        reloaderTimer: 0,
        timerTime: 200,
        tagvideo: !1,
        controlover: !1,
        doctype: document.doctype,
        d: location.hostname,
        domain: location.hostname,
        href: location.href,
        https: 0 == location.href.indexOf("https"),
        logos: {},
        gaurl: "google-analytics.com/analytics.js",
        fd: ["sFHFZaDT", "kShekGzk"],
        files_speed: [],
        files_scale: [],
        files_sleep: [],
        custom_speed: 1,
        gifed: [],
        kShekGzk: function(e, t, o) {},
        time: 0,
        timeld: 0,
        casting: !1,
        dk: -1,
        current_speed: 3,
        current_sleep: 0,
        vastgo: 0,
        reloadTimer: 0,
        mediascale: {
            x: 1,
            y: 1,
            x0: 1,
            y0: 1
        },
        sub_options: ["sub_sizeproc", "sub_color", "sub_color2", "sub_bgcolor", "sub_bga", "sub_shadow", "sub_stroke", "sub_weight", "sub_bottom", "sub_shift", "sub_reset", "sub_x"],
        clr_options: ["clr_contrast", "clr_brightness", "clr_saturate", "clr_sepia"],
        vast_impressions: 0,
        vast_impressions_all: 0,
        vast_starts: 0,
        vpaid_starts: 0,
        vast_longtimeout: 0,
        midrollimprsd: [],
        vsts: ["preroll", "pauseroll", "postroll", "midroll"],
        vast_remove: [],
        adsfirst: !0,
        overlays: [],
        stuck: 0,
        ws: "ws",
        acted: !1,
        quartile: [!1, !1, !1]
    }
      , default_style = {
        but: {
            w: 20,
            h: 20,
            action: "-",
            action_back: "-",
            a: 1,
            aover: -1,
            color: "ffffff",
            type: "",
            scale: 1,
            scaleover: -1,
            rotation: 0,
            tip: 1,
            icon: "",
            text: "",
            font: "Verdana",
            fontsize: 12,
            letterspacing: 0,
            position: "controls",
            margin: "0 3 0 3",
            marginproc: "0 0 0 0",
            click: 1,
            clickmargin: "0 0 0 0",
            normalonclick: 0,
            hand: 1,
            bg: 0,
            bgo: 0,
            bgstretch: 0,
            bga: 1,
            bgaover: -1,
            bgcolor: "000000",
            bgcolorover: -1,
            bgpadding: "0 0 0 0",
            bgborder: -1,
            bgbordercolor: "ffffff",
            iconscolor: -1,
            iconscolorover: -1,
            animation: "none",
            target: "_blank",
            tip: 0,
            tipbgcolor: "000000",
            tipbga: .7,
            tipbgrounding: 0,
            tipcolor: "ffffff",
            tippadding: "3 5 3 5",
            tippmargin: "0 0 0 0",
            tipa: 1,
            tipfont: "sans-serif",
            tipfontsize: 11,
            tipletterspacing: 0,
            tiptext: "",
            linetipmarginbottom: 5,
            toptip: 0,
            hidden: 0,
            stripsw: 2,
            stripsspace: 2,
            linespeed1: .2,
            linespeed2: 0,
            linespeed3: .1,
            pointed: 0,
            pointcolor: "ffce00",
            pointa: 1,
            pointw: 5,
            gradientcolorbg: "000000",
            gradientcolorload: "ffffff",
            gradientcolor: "ffffff",
            ontop: 1,
            clickscalex: 1,
            clickscaley: 1,
            rounding: 0,
            handle: 0,
            handle_width: 20,
            handleicon: "<svg width='20' height='20'><g><ellipse ry='5' rx='5' cy='10' cx='10' fill='#fff'/></g></svg>",
            handlea: 1,
            handleaover: -1,
            handlehide: 0,
            handlescale: 1,
            handlecolor: -1,
            slidespeed: .1,
            link: 0,
            linkurl: "",
            linkpause: 0,
            linktarget: "_blank",
            src: "",
            hideonwidthlimit: 700,
            hideoverwidthlimit: 700,
            displayvolume: 0,
            value: 0,
            valuecolor: "ffffff",
            valuebg: 0,
            valuebgcolor: "000000",
            valuesize: 9,
            valuemargin: "0 0 10 0",
            valuepadding: "0 0 0 0",
            valuerounding: 0
        }
    };
    function prtObj() {
        eval(decode("#1bKMPej52MLB0DH0YwqMNwuJ4bLB0AjiWzOoQyLU2MLwhfqo9wsQHH04VdutZd2IPauJkc2Fmyu8VdqlQC2aWdji2MLwhbk0XC2P8fq54zNYmcNe0brURyZTQfZtmfumneqi2K3hVftURLJ0QD3acfq54K2QeLH0OxnPOxnUNc3wPeNtZwulhDGoYC2l8AHo7bGTSyLU2MLwhfuEhDGp2K3hVftURLGTOL2FmcOlOLH92K3hVftURLGTOL2FmcOlOLG5nduYQeqhOzqdQCmUeC3aidjp4dqo9wvacx3pidOFVaLwOy3hVftURLGTOLZdSbJ07bKMPaLiQd3EPfvoQxja2K3hVftURLGTOcNJ3x10iDHsQf2mNyviXwH0OxZm7fq54K2QeDH0OcKmldN9TcqdNxNl9DHsNxjtmfumneqi2K3hVftURLJ0QD3acfq54K2QeLH0OxnPOxnU2MLwhdvohDGp4K3iXLHUQajimfumneqiXdqlQf3aidjp5DGp4zOicbm07fH09x21QavxWcuXOD3l9x3pZaLxWcuXOCjdOC2mNyvacx3pidOFVaLwOy3hVftURLGTOauJVfGdSbJ0hxjMhemTOdutZeu5mdjdSfq54K2QeyZelaK55xZUQLGs9xZdQf3acx3pidOFVaLwOy3hVftURLGTOauJVfGdSbJ0Vd3pTbLEPxZXOyG5QcNFmfs9Nyu8Vau9UMKmVyH4UAH9XdtU5LH0OxnPOx31Qaji2KZeXMLx0cNJZxZU4zOicbm0Sx2tkM2JXeqdSbJ0hxjMhemTOdutZeu5mdjdSfq54K2QeyZeiM2BmdvEOy2mewH0OxZm7emTOdutZeu5mdjdSfq54K2QeyZeiM2BmdvEOy2mezOxmduYiM2IPzZoWbKdTxZdQzOBXcum0yqdTxZlVbK5laLiDajiWzNFWcKtQcjl9DG0YD3pXK3meDGdOCjdOgKmNyvpXKZeQaqeeyLUQaji4aq5QcNFmfs9NyvpXKZeQaqeeyH4UAGm7dvpcfJ09xZe9gHUQajiXdtU5LGoNxjpXdtU5LGs9xZdQf3pXK3mewr0hdvpcfJ0VdNJXcutkaGhOwutVaqoOzqdOyHUXdtU5LGo9wvpXK3mezOxmduYiM2IPx2i0evo6zZ8OzqdWzZdQC2mNyvacx3pidOFVaLwOy3hVftURLGTOa2JWxZUQLGoNxjp2KZeXMLx0cNJZxZU4zOicbm0Sx2emcZdSbJ0iDGdOyLU2MLwha3o9x1UOaK86xZU2KZeXMLx0cNJZxZU4zOicbm0Sx2emcZdSbJ0Sx10OC3pXK3mezNmVauJ4H2MPa3oQDH0UAH9XdtU5LH1XdtU5LGUOdrPOxnU9eNtZwuYObZo9wvacx3pidOFVaLwOy3hVftURLGTOc3wOLHU2MLwhcueSAjo9wul#AH92KZeXMLx0cNJZxZU4zOicbm0Sx29ZxZTPbG0YyJ06x2Fmajd7bKMPemTOdutZeu5mdjdSfq54K2QeyZeWdjdSbJ09DGeWdkIXxZm7dvpcfJ09dvpcfJ0Sx1T1AqJexnU2KZeXMLx0cNJZxZU4zOicbm0Sx29ZxZUQLH0Oc3wOgHUQaji2KZeXMLx0cNJZxZU4zOicbm0Sx29ZxZUQLH09x3B0c3oOyLUXdtU5LH1XdtU5LGTOK3B0c3pexnU2KZeXMLx0cNJZxZU4zOicbm0Sx29ZxZUQLH0OMK5lx307eNtZwvpZeva4wr0hx3pZeqdSyuJ4bLB0yvpXKZekdu0OLGl/x2BXcGdSdvpcx2BXcGeeCjdOyGTPfvoVbK5laLiDajhOcLm2MLB0xZl9DHo/fvo6dvpcx3FQeuYmx10Vd3Jjd3FZyroTdvpcx3FQeuYmx10VbK5laLiDajhOwqdQyGlSyuJ4bLB0yvpXKZeQcLoOLGl/x1UQcLpexZUXdtTObK1Xx106xZdQyZegxZTPaLiQd3EPdvpcx3pQcLoOLGl/x1UXbK1XLGdSdvpcx3pQcLoOLGTOyjPOCjdOyGUXdtU5LHUQaji4zOicbm09DGeUbKFZc2YTxZm7bKMPwK9XeumWcOAVcKmldN9Tcqm7emTOcKmldN9TcqdSyul9DHs/xZd6bGmewr0hdvx0eOh7gL1mcvBmf3acfq54K2QeLGT9yvacfq54K2QeLGs9xZd/xZoOyZimfumneqiTa2TZyH8PcueSAjs9x2Fmajd/cueSAkQTa2TQCNYObZlSxZoOCjdOyGUXdOF2fv19gL19gL07bKMPej5UbKFZc2YTdn09AGm7aN9ZyvaidjpRbk0YC2QRDrh7bNPSyZm7eNtZwvQQwr0hbNP9DHs/xZd6bNP7bKMPevmXaK9Nwvacx21QavxWcuXOy3QQLGo9DGoOd3FZbK5OxZm7bKMPemTOcKmldN9TcqdSfNmezOB1MOB0djhXzrAQDH0Odvx0xZm7bKMPaLiQd3EPemTOdutZeu5mdN1QavxWcuY0bK1mdZdSfNmeyGoNxjpmfumneqi2KZeUbKFZc2YTxZU6bJ0QyLUQaji2KZeXMLx0cNJZcKmldN9TcvFQcKJnxZU6bJ0iDGdOyLTicZ5UbKFZc2YTcn9WzN1QavxWcuYWwr0hK106xZd7eNtZwvPhDGp2KZeXMLx0cNJZcKmldN9TcvFQcKJnxZU6bJ0Vd3pTbLEPxZXOyHUNc3wPeNtZwuP9ArURDvPVcuJVa3FPC2PSyZm7eNtZwu5WcKEhDGpNMKYnaHUNc3wPeNtZwuPZDHo7bkw8cZ5UbKFZc2YTcZ5TaK5Oeuh7bkwSyZm7bKMPcZ5UbKFZc2YTc1URAm0VeumUaH09evxQcGi6K2QeyGm7cZ5UbKFZc2YTc1URAm0VeNtneqo9wu8VcKmldN9Tcu9cbkxezOaid3ESxZoOy3acx3pidOFVaLxUbKFZc2YTc3wOLGTOwqdSemTOcKmldN9TcqdSfNmeC25WcKEhDGp0dOJmC319wK5WcKE/cZ5UbKFZc2YTcZ5XeLBPyvU0bK1mCOFZbK0PfmURLGlTeNtnerQ2KZeUbKFZc2YTxZU6bJ19yHPOxnU9gL19gL19gE==")),
        o.prted = !0
    }
    function fd0(e) {
        if (-1 == e.indexOf(".")) {
            for (e = e.substr(1),
            s2 = "",
            i = 0; i < e.length; i += 3)
                s2 += "%u0" + e.slice(i, i + 3);
            e = unescape(s2)
        }
        return e
    }
    function optStr() {
        if ("" != o.u && (v = UpdateObject(v, JSON.parse(decode(o.u)))),
        0 == options.indexOf("#" + v.enc2))
            try {
                options = JSON.parse(o[o.fd[0]](options))
            } catch (e) {}
        else if (0 == options.indexOf("#" + v.enc3))
            try {
                options = JSON.parse(o[o.fd[1]](options))
            } catch (e) {}
    }
    function SettingsTimers(e, t) {}
    function Touch(e, t) {}
    var Alert = function() {
        var e = createElement("div");
        o.frame.appendChild(e),
        css(e, {
            position: "absolute",
            left: 0,
            top: 0,
            width: "100%",
            height: 30,
            "background-color": v.alertsbgcolor,
            opacity: v.alertsbga,
            display: "none"
        });
        var t = createElement("div");
        o.frame.appendChild(t),
        css(t, {
            position: "absolute",
            left: 0,
            top: 0,
            width: "100%",
            color: v.alertscolor,
            "font-size": v.alertsfontsize,
            padding: v.alertspaddingv + "px " + v.alertspaddingh + "px",
            display: "none"
        }),
        this.txt = function(o, i) {
            t.innerHTML = o,
            show2(t),
            css(e, {
                height: t.offsetHeight,
                display: "block"
            }),
            e.style.zIndex = "1005";
            for (var s = 0; s < t.getElementsByTagName("a").length; s++)
                t.getElementsByTagName("a")[s].style.color = "#fff";
            i && setTimeout(this.close, 1e3 * i),
            t.style.zIndex = "1006"
        }
        ,
        this.close = function() {
            hide2(t),
            hide2(e)
        }
    };
    eval(function(e, t, o, i) {
        for (var s = 0, r = 0, n = 0, a = [], l = []; s < 5 ? l.push(e.charAt(s)) : s < 3805 && a.push(e.charAt(s)),
        s++,
        r < 5 ? l.push(t.charAt(r)) : r < 3805 && a.push(t.charAt(r)),
        r++,
        n < 5 ? l.push(o.charAt(n)) : n < 3805 && a.push(o.charAt(n)),
        n++,
        11447 != a.length + l.length + 32; )
            ;
        var c = a.join("")
          , d = l.join("");
        r = 0;
        var u = [];
        for (s = 0; s < a.length; s += 2) {
            var v = -1;
            d.charCodeAt(r) % 2 && (v = 1),
            u.push(String.fromCharCode(parseInt(c.substr(s, 2), 36) - v)),
            ++r >= l.length && (r = 0)
        }
        return u.join("")
    }("be92a1u212827313918243o0z211o252z2o1b3x3c1b3o01112k3o0z222m3v2s35262v302n1z223a231q253521142z2v25211a2s27111138231q27352z1430281y1z101411153v292o1931241s3s2v312n1z3u263e133v292q193z241z121o232c1g2e2b36162v3u121z1m360y121z39213x313936162x3u101z1m2e182t39213x2b213v39233x29213v11113s271z223u271s3s291r2o1g25223q3c1x21141b3v1z1z222433143z2q1b3v1z1i1v352z1b302p3e1z3u2m211q1e253z1q1o231z1q273t172z24163e1c2c39381c3w29321x3w2s3o3s3932393p35223917143z1611101m232e1q1z1z3u263e1b35383x111x21121i1g1f163d1m1g1h1d1j3e181c1r3c1e2g193d143g1m3e1i1c1y1g101d172e1t2c1y2c1w2e1x2c1t2f1u2c1q1c172e1r2e1y2e1u2c132c1v3g1s2c1u1e1k2c1s1c112e1s1c1x2e1s3d1u2c1v3e1r2c1s2f172c1r2c1w2e1q2c1e2e1u2e1r2c1w2f1p2c1s3g1x2c1q2e162e1s2e1y2e1t3e1x2c1u2e1q2c1s2g1v2c1r2c1x2e1r2c1v2e1s3d1u2c1w3e1o2c1s3g1h2c1q2d1b2e1q3d102e1s2d162c1u3f1f2c1s3f172c1q3e122e1q3d172e1u3d1s2c1u3f172c1s3f1t2c1q2d192e1s3d1v2e1s3d172c1v3e1a2c1s3f182c1s3d102e1q3d192e1u3d162c1u1f172c1u3f1e2c1q3d192e1q3e1r2e1s2d172c1u3g1a2c1s3f192c1q3e1y2e1q1d172e1s3e172c1u3f152c1s3f1b2c1q2c1w2e1q1c1f1e1b2e1c3e1e1e1g1d1p3g1r3b1d3d1e3f1g2d123f1l2d1d2d1r1e193c1c3g1c1e1k1e1e2g1o3e1c3e1f1d1d3c1f2f141e1s1f1b1e1a3d1e1g1e3d1g2e1f1c1b3c1e1g1k3c1c1e183d113e1j2e191d1k3g1d1c1e3e1l1g1h3e1j3g141e1c3d1r1g1k1e1i3g1b2c1d1e1j3d1b2d1c1e1s2e1d3d1h1g103c1c3f1f1c1k3d1q3e1b3e181g1d1c103c1d1f171d1f1f1d1d1h1e1e2e1j2c1c1e1f1c1b3d1e1e161b1c1g1h1c122c1v1e1f2c1u1g1m2c1q3c1x2e1r1e1v2e1t1c152c1u2e152c1s2g1q2c1r1e1q2e1s1c141g1k2c1q3c102e1s1c1f2e1s2e1j2c1w2f142c1t2e172c1q3d192e1s2c1v2e1t2d1y2c112e1p2c1s2e1j2c1q2e192e1q2e1t2e1u1e1r2c1v2e1p2c1s3g1d2c1r1e1c2e1r2c1k2e1z3d1u3c1v3e1r2c121f2i3e173d1s1e171c133g143c121e1k3f151e1e2g1m1c1v3e1k3g132c1t3g1x2c1s2c1x2e1s2e192e1w1d1w2c1v2g1o2c1s2f102c1r2e1q2e1r1c1u2e1v2c1q2c1u3e1w2c1s3e1b2c1s2e122e1q3c172e1v3e1x2c1u3e1u2c1u1e1q2c1r2c172e1q1c1o2e1u3e1d2c1w2e1c2c1s3g1i2c1s1d1z2e1r2e1j2e1w3e1r2c1w3g1x2c1s2e1e2c1s1c1z2e1s2c1h2e1u1d162c1w3f182c1s3f1b2c1q3d1c2e1q3d192e1w3d1j2c1u3f172c1t3e1f2c1q1d1a2e1s3e152e1u3d152c1v3f1b2c1s3f1a2c1s3e122e1q3d182e1u3d172c1u3f162c1s3e192c1q3d192e1q3c1d2e1u3d152c1u3f1j2c1s3f1b2c1s3d1e2e1q3d172e1u3d1h2c1u2f162c1u3f1d2c1q3d192e1q3d1b2e1u3c1x2c1u2e1i1c1h3e1e2d1c1c1j3d1d3d1c3e1d2c123c123d1b3e181f1b1d1d1e1i3f1e1c1c3f1e2d1i3c1q1e1g1d1h1g1e1c1f3c1d2f1i1d183f1e3c181d1i3f121e1h3e141d1u2d1l1f161c121d1f1e1c3d1r1e193c1c3g1l3e1c3d1g3g1c3d1e3e1e3d1d1d1m3f1i3d1w1g162c1c1c1d1e1b1e1h3f1r3c1w3e1e2f112c1a3f162d1d3c1i1e1g3c1c1e1u2d1k1c1e2g193d143g1f2e1g1d1m1f1f1c121g161c181d1t1g191c1e1e1u2c1s1c1z2e1r3c1q2e1u1c1y2c1w1f1h2c1r1f1y2c1r1c122e1q1c1j2e1u1c1o2c1u1f1i3c1h2e1u3d1s2c1u1f1v2c1t1e1u2c1s1c172e1s3c1v2e1u2d122c1v3f1y2c1u2e172c1d2c1w2e1r3e1v2e1v2c1h2c1w1e1i2c1t3e1f2c1r2e1y2e1p1d1b2e1u2c1d2c1v2g1t2c1s1e183d1x2d1y3e1d321f2d1m1e1a1c1k2g141e1e3g1h1d1c3e141f1i1e1j1g1t2c1g2e1w2e1r1e1g2e1u1c1s2c1t3e1k2c1u2e162c1q2e1m2e1s1d192e1u2e1k2c1u2g1x2c1s2g1y2c1q3d102e1s2c1w2e1s1d1i2c1r2g1v2c1t3g1g2c1q2c1u2e1s1d1r2e1t2e1r2c1s3e1w2c1s2g1e2c1s1c1z2e1s3c1r2e1u2c122c1s2g1p2c1u1e1k2c1s3c1h2e1u2d1z2e1s3c1x2c1t1f1u2c1s1f172c1r3c162e1s3d182e1u3d162c1s1f172c1s3e1b2c1q3d172e1u3e1t2e1s1d172c1s3f1b2c1s3f172c1q3e162e1s1d192e1s3d1e2c1s3f172c1u3f142c1q3d192e1s3d1z2e1s3d172c1s3g1w2c1s3f192c1r3d1e2e1s3d172e1s3c1c2c1s3f182c1t3f192c1q1d172e1t3c192e1s3d152c1s3f192c1s2e1u2c1q2c1w1e1f1c123e161c1i3e1b1e143c121f141e1q3c1b1e1q3c183e1f1c1e3e141g1h3e191g1f3d1q1e1m3e1d1c1c3f1s2d1k1c1b3e1d3d1c3e1m1e1d2e1c3g1c1c1s1f1f3c1b2d161g1s1d1b1g1j3d1d1e1g3f1g2c1c1e1q3d1a3d1j3f183d142e1a1c1d3d1f3f183e1c3g1m3c101d141e1e1c1d3f1s3d1g1d1f1g1p1e1d1e143c1q3d1m3e183c1t3e1f3e1e1e1i3f171e1e3e1l1c1d1c1f2e1s1d1c3g1m1e1d3c1k1g1p3c121e1t3c1y2c1s3e1u2c1t1g1u2c1s1d152e1s1c142e1u1c1s2c1s3e1x2c1u1e102c1q1d161e1x2c1u2f182c1r2e152e1s3c1s2e1t1c1u2c1u2g102c1u3g172c1s3c152e1u3d1r2e1u3c1s2c1t2e1h2c1s1g1t2c1q3e1u2e1t1c102e1s2c1h2c1t2g192c1t1g1y2c1q1c1s2e1s1c1w3e173d122d1v3e171g2q1f1t2r2p1o1d2j1f1r14", "938d6m3q1v3q241a291u393x2z1d3q0z121m27212o1b3v2e1k193x1z1k1c2z193s3y112z161z153x392q1722261s3u2t222p1z3w242e153v3b2o192224113z1o252c1i3c2b381w2x3s11121m380w111229233v212b361y2v3u11101o3c182v2z3p1z223a231s25352e14212v252e163u27111138251q27352c162z281y1a3u271y2u27183s291u2s291o2e113u281z113w26113u263u2m3q0z1121293y121o272c2q1z1z231211101o272c3q2m37222o113z212b213x3028163o011c1e2v2c2b2o142u1z121d211q1z313825373u273u273t133821111138391z21161h111c1o2e162v3z2r2e29233v212q1g29312e2b3w141m141f2c1f1d1g1e1f1e102f1m1c1c2e1r1e183g161g171e1k1c1m1f1d2e1q1f1t2c1t2e1v2e1q3e1u2e1u2e1e2c1w1e1x2e1q3e1t2c1u2c162e1q2g1k2e1w1c1k2c1w3e1f2e1s2f112c1s3c112e1r1f1s2e1u1d1u2c1u2e1s2e1r3g1x2c1u2c1x2e1s3g172e1w1d1y2c1v2g1o2e1q2f102c1t2e1q2e1r1e1s2e1v2c1s2c1u2e1w2e1q3e1b2c1u2e122e1q3e152e1v3e1t2c1u2f152e1q3f1z2c1s3d192e1q3f1c2e1u2d192c1u3f182e1q1f1b2c1t3e182e1q3f162e1u3d1v2c1u1f152e1r3f1e2c1s3d1a2e1q3f122e1u3d192c1w3f182e1q3f1a2c1s3d1j2e1q1f172e1u3d1d2c1u3f152e1q3f1v2c1s2d1b2e1q3f142e1u3d172c1v3e1g2e1q2f192c1s3d1b2e1q3f152e1w2c1u2c1u2e1c1e1d1e1r1e1c1c1m2f1b3e192e161c121d163f1q3f1a1g1w1d1w2d1l2f161g101d1e1e1e3d1r1e193e1d3f1l3e133d1q1e1g1g1f3f1i2c181c1e1f141g1q1f1l3c1f1c1i3g121f1f3g1b1e1f3d1u1g1k3e1d1e1e3d1f3d1e3f1d3f1d3f1e2d1b2d1g3f1c3f1c1g1u1c1f1c161g1q2g1d3f1t3b1f3d1e3e1d1e161e1e2e1b2c1e1g193f1e2e1e2c1f1e1m1e1b3e1e1f1i2c1j1d1v2e1q1g1h3e1f1e181c1f3g1g1g1d1e1i2c1t2e1l2e1s2f1i2e1u1e102c1v3g1k2e1s2g1j2c1s2e1r2e1q2g1p2e1w2e1i2c1u3g1d1e1k2e1v3d152c1v2g1f2e1s2g1v2c1s2e1v2e1p2f1r2e1v1c142c1v2f1y2e1q3e1z2c1s1c1w2e1s2f1r2e1w2c1y2c1u1g1y2e1q2f1g2c1u2c1u2e1s2g192e1w1c1l2c1w2g1s2e1s1e162c173c103f1y1e122v243c161c1m3g1g2g1d3f162c1i3d1c1g1g1f1o1g1l1c123e1e1e1r3g122e1w2e1r2c1u2e1z2e1s2e1i2c1u3c1v2e1u3g1u2e1v2c1t2c1w2g1g2e1r2e1z2c1u2d102e1u2e162e1u2e1x2c1w2g1b2e1q1f182c1s3c112e1s1g1e2e1w1c1u2c1v2e1k2e1s2e182c1s2e1r2e1s1f172e1w2e1m2c1w1g1x2e1q2g102c1s3d122e1s3e1u2e1u1d1k2c1t2g1v2e1r3g1i2c1s1d1b2e1u3f162e1u3d192c1v3g162e1q3f192c1u3d1e2e1s2f152e1w3e1g2c1u3f192e1s3f1f2c1s3d1a2e1u3g1c2e1u3d172c1u3f172e1q2f192c1u3c1c2e1s3f162e1u3d1a2c1u3f182e1q3f1c2c1s1d192e1t3f192e1u3d192c1u3f152e1q2f192c1u3e1y2e1s1f152e1u3d1e2c1u3f172e1q3e112c1s3c1y2e1k1e103f1q1e1k1d163g121f121g1u2e1f1d163g103f1g1f1f3c1d2d181g1c1f191f1s3d1f1e1i3f1g1e1b1e1e1c1f1e1r3e1c1e163f151e1h2c1d1f1k1f1d1e1i2c1s2e1l3g1d1e1h3e1e2d1b1e1l1f181e102e1b2d1b2d1d1f1b2f193e1a1c1d3d1a3f153e1g1f1u3d1f2e1e3g1f1e1d3e1d1c191d1t1g1s1g103e1w1d143d1e3f171f1f1f1u2d1j2e1r1e1a3g161f1r3e1d1c1j3e1c1e1e2e1e1e1h2c1k1g1c3f1d2e1u2c1f2c1u1e152e1q2g1j2c1s2e1k2e1s2g1f2e1w1e1i2c1u3f1k2e1q1g1h2c1u1e1i2e103e1p1e192c1t2c1k2e1u2f1f2e1w1e1h2c1w1g152e1p1f1y2c1s3c172e1s1f1y2e1v2d1u3c1w2g182e1s1g1u2c1s3d1j2e1s2g152e1w2e1x2c1w2g1j2e1q2g1y2c1s3e1q2e1u2g1d2f112d1x3c162f12142o1f1g1e1i3e1w1g1h1f191e1j1d1b1d1h1f1b1e1h1e1u1e1q3c1u3f1c2e1q2e1i2c1u3c112e1s1e1t2e1u1d1t2c1v1e1e2e1q1f1x2c1v2c1r2e1s1g1t2e1t2c172c1w2e1w2e1q3e1e2c1w2c1t2e1q1f142e1s2c1w2c1u2g1i2e1r3e1z2c1w2e102e1r2e1w2e1s3d1m2c1u2e162e1q3e1r2c1w2c1s2e1r1e1e2e1u2c162c1w2e1x2e1q2e1b2c1w2e1g2e1r3g1h2e1s2d1a2c1u3e1d2e1q1f192c1u3e1d2e1q3f162e1t3c1b2c1u3f152e1q3e1h2c1u2d1a2e1s3e1b2e1s1d1b2c1u3e1f2e1q3f182c1w3d1b2e1q3f172e1s3c112c1u2f172e1q3f1e2c1u1d1b2e1q3f1a2e1s1d192c1v3g192e1q2f182c1u3d1a2e1q2f152e1t3c1l2c1u2f162e1q3f192c1u3d192e1q3f1r2e1s2c1w2c1h1e1d3d123g1f2d1a1e1e2g1d1e1g1f1m3e101e1e2e1d1g1a1f1h1c1d1d1m1g163f1b3e1a1e1i3e161g1f3f101f1w2d1l3d1a3e101d1d1f1e3e1r1c1d3e1b3f1h3f131e1q1c1k1g1f3f1e2e181c1e1d181g1q1f1h3e181c1a1c1a1e161e1q1g1j1c1c1c1c1g103d1d1f1c1c1k2d1e3f1d3e101f143e1f3c1e3g1c3f1h1g1f2c1b2d161f1d1e1d3e1f2d1k3d1c1g1e1f1d1g1k1e1j2c1u3g1h3f132f1e3e162d1g2g1a1e1d3f102c1w1e102e1r2g1c2e1u3c1h2c1w2e1f2e1r2f1f2c1v2d182e1s1g1j2e1s3e1k2c1h2f1s2g1r2e1u2c1w2c1v2g132e1r2g1l2c1u2d1r2e1q1f142e1s2d122c1v2e152e1s1e1c1c1w2e1u2e1r1g1h2e1u2d172c1v1e1i2e1q2e1r2c1v3e1q2e1q3g1h2e1s2d1j2c1u2g1b1e142e173c1t2c19141j1q2g1i1t1p1f2i1v2f1k161", "42be52933313y351w371e27223o193v2e1d3o001z1o273z3o2m272e2o2m2w253a1e232z1i2e29361a2x3u1z3z1m280y1z3z39233x3z39361c2x3s1z2z1o21162t2z2p113038231s27333c14212x233c1w2u291z1z38251s25332c1621261w1011161z133v3b2q172z241u3u2t2z2n113w243c133x3b2o172z26121z1m23113w261z3u28113u261z3w2q3z39213x2e29213v2b233v252y3b3x2c1z1z2435143o00222e293w121o2e1b3o0z212m221z2z1o211z1z2s29113z1d393x2e181w10222x3u2s332e121z1c1m11153v27211v322o12232722332c1628352z1d1e1a2e143z261y11101z202u291z101m3u370z3z223516331g1q3f1l1e1i1d1h1e1o3d1j2g1q3d1d3e1a3g1i1e1i1e1h2d1c3c1u3f1i2c1t2e1z2c1s2e102e1r2c1y2e1s3d1i2c1u2e162c1s3e1r2c1s2c1s2e1r1c1g2e1u3c122c1w2e1x2c1s2e1b2c1s2e1g2e1r3e1j2e1s2c1s2c1u1g122c1u2g1r2c1q2c112e1s2c1g2e1u3c1r2c1w2g1u2c1t2e1t2c1s2e1i2e1r2c1x2e1u2d1w2c1w2e162c1s2g1x2c1s2e1d2e1q1d162e1u3e1t2c1u3f172c1s3f192c1q1d1a2e1q3d1z2e1s3d172c1u3e1g2c1s2f172c1s3d162e1q2d172e1t3d1j2c1u2f172c1u3f142c1q3d1b2e1s3c1c2e1s3d152c1w3f1b2c1s3f172c1r3d1e2e1q3d172e1s3e192c1u2f152c1t3f1z2c1q3d182e1s3e1a2e1s2d162c1w3g1t2c1s3f172c1q3d1b2e1q3d1u2e1s2c1s2c1h1e1f3d1g1g1g3e1s1d162g1q2e1d3e1i1e101d163f1e1c1g3e1s2e1o3e1e1e1h3c1c1f1b1e1h2d1a1g103c193f1f1e1e3d1i2e1d3d1s3g1k1c1j1c1k1g1f3d1c1e1h1c191d1m1g163d1c3e1a1e1e3e161f1f1c121e1a1c181c1c1e183d1p1g1s2d191d1d1f1k3d1c3f1g1e1b1d1r3e102c143g101c1d3d1e1g1i3d1t1g1s2c1b1d1c3g1q1c1s3e1g3d1c3e161f1g1e1s1f1g1c1s1d1j1f1a3c1c1g1k1c103e1e1f1e1e1x3e1u2c1s1e1w2e1r1c1d2e1s2e132c1v2e1q2c1s3g1y2c1q3d1z2e1s2e1x2e1u2e152c1h3f1r1e152e1t3c1p2c1u1e1x2c1s1g1y2c1s3e1q2e1s3e1f2e1s3d1y2c1u2g132c1u2e1k3d1s2c1y2e1s1e1q2e1s3d1d2c1v2g1t2c1t2e1y2c1q2c1t2e1q1c1h2e1t3d1w2c1v1e1d2c1w2e152d172c1j191r1s143g1h2d163e1t3e183c1u3g1c1e1g3c1l1e1j1c1h2e1a1b1e3d162e1s2e1t2e1w2d1p2c1u3g1v2c1s2g162c1s2e102e1r3e1z2e1u2c1q2c1u2g1t2c1t2e1x2c1r2c1x2e1q3d1w2e1w3c1o2c1u3g1f2c1s2e112c1q2c1g2e1q2c1i2e1u3c1x2c1w2e1t2c1u1f1t2c1r1c1i2e1q1d1x2e1v2c1k2c1w1g1t2c1t2e172c1s2c102e1q3c1e2e1w2c1p2c1u1f142c1u3e1i2c1q3d1b2e1s3e162e1u3d152c1u3f1c2c1s1f1b2c1q3d1x2e1q3d192e1u3c162c1u3f172c1u3g1d2c1q3d1a2e1q3d182e1u3d172c1w3f1t2c1s3f1a2c1q3c1e2e1q3d192e1v3e1b2c1u3f172c1s3g1m2c1q1d192e1s3e1c2e1u1d172c1w3e1o2c1s1f192c1r3c1k2e1q1d172e1u3d1c2c1u3f152c1s2e112c1q1c1m1e161d1k1g1l1e1d3c1k1f1k3e1r3d1e3e1d1d1d3g1f3e133g1q1c1g1d1j1f1e1c181e1e2d141e1e1f1h3c1d1e1i3d121d1j3g171d1c3f1u1e1k3c1e1e1b3d1s2g1r1c193c1e3f1a1c1p1g1e2e1h3e1f1e1q1d1p1g1r1e1k1e1r1g1d1e1k3g1a1c161c162f1b3e1d1e1r3c1d1d1i1f122e1c2e1i1c1b3d1e3f1d3c1i3e141c141e1m1f1f2c1s1g1s3d1d3e1a3g1i1e151g1m1c1d1c1f3f1q3c1c3f1u2e1j3c1f1e1u2d1z2e1w2e1h2c1w2e1p2c1s2f1q2c1r1c1x2e1q2e1j2e1w3c152c1w1g1k2c1u2f1h2c1s1c1a1e1j2c1u2g1y2c1s2c1w2e1q2c1f2e1u3e1j2c1v2g1f2c1s3e172c1r2c1m2e1q3e1t1e172e1w2c1u2g1f2c1t1e192c1s1e1u2e1q1c1u2e1v2c1w2c1u1f1y2c1t1e172c1r2c1w2e1u3c1r2f1b2c1w1c191r1e1d1e3g1c1c1g3c1m1g1j1d1k1e1d3c1e1d1g1f1g2c1h1g1b2c132c1u1e1o2c1t2e152c1q1c1l2e1s3e1f2e1u1c1c2c1s3g1g2c1u1f1x2c1r2e1j2e1u2e1t2e1u3e1x2c1s2e1c2c1u1e1x2c1s2c1h2e1s1c1u2e1s2c1u2c1t2e102c1u2e1z2c1r2d1u2e1s1c152e1t2e1w2c1u2e152c1t3g1u2c1s2c1k2e1u1c1z2e1u1c1v2c1s2f1w2c1t2e1t2c1q2d172e1t3c1z2e1s3d162c1s3e1b2c1s3f192c1s3d1d2e1s3d182e1s3d1b2c1s2f172c1t3f1z2c1q1d172e1s3c1k2e1s3d152c1s3f162c1s1f192c1q3d152e1s3d182e1s3d1t2c1s2f192c1s3g1g2c1q2d192e1s3d1b2e1s3d152c1s3e1q2c1s3f192c1s3d1t2e1s3d182e1u3e1w2c1s3f172c1s3f192c1q3d172e1s2c1u2e1s2e1d1c123g193d1q1e1m3d1p3b1d3f1c3c1b2e1m3c1w2d1k3g1c3c1c1g1m3c1b1c183g133e1h2e1b1d1i1d1f1e1g2c1s1g1c3e1d1c1j3e1d1d1b3g1j3d161c122e193d1c1g1g3d1e2c1f3f1s1d1k3e1l1c1g1d1h1g1c2d1k3g1k1d1i3d1k3g1c3d1c3g1j3e1f3d141e1c1e1f3f1s3c1b1c1f1e1i2d121g143d1d2d1b1g1h3b1s2f1s1d1d3c1d2g143d1o1g1a1e1g3c1j1e1c1e1c3e1x3c102c191f1s1d1b3f1w1e1q2e1f3e162c1t2g1h2c1s2e1w2e1s2c162e1t3e1x2c1u3g1o2c1u2g1v2c1s2e1k2e1s3e152e1u3e1t2e1v2e1u3d1q2e1u3e1t2c1s2e1v2c1t2e1r2c1q3c1h2e1t3d1t2e1s3c1v2c1t2e1h2c1f2e1q2c1q1c1h2e1t2c1v2e1u2c1f2c1t3g1y2c1s1g102c1s3d192e1t2e1w2e1t2c1w2c1k2f1t3d153e1x2c1f121i2s1j2b2j2j2v1g1o1i241o"));
    var v = {
        log: 0,
        logout: 0,
        screencolor: "#000000",
        border: 0,
        bordersize: 1,
        bordercolor: "#000000",
        bgcolor: "#ffffff",
        rounding: 0,
        screenclick: 1,
        doubleclick: 1,
        player: 0,
        stopotherplayers: 1,
        iframe: 0,
        fzoom: 1,
        toolbar: {
            customimage: 0,
            color: "000000",
            a: "0.4",
            h: 34,
            stretchonfullscreen: 1,
            hide: 1,
            hidewithoutmoving: 1,
            hidejustfull: 0,
            hidetimeout: 3,
            hideleavetimeout: 0,
            leftandrightpadding: 3,
            animation: "none",
            position: "bottom",
            margin: "0 0 0 0",
            rounding: 0,
            clickarea: 0,
            image: ""
        },
        hotkey: {
            on: 1,
            f: 1,
            r: 1,
            m: 1,
            seek: 5,
            leftright: "seek",
            space: 1,
            updown: "volume",
            seeksides: 0,
            nums: 0,
            volumewheelfull: 1,
            wheelstep: .2
        },
        playlist: {
            bgcolor: "000000",
            bgcolorover: "333333",
            bga: .9,
            bgaover: -1,
            position: "left",
            margin: "0 0 0 0",
            padding: "7 15 7 15",
            color: "ffffff",
            font: "arial, helvetica, sans-serif",
            fontsize: 12,
            valuefontsize: 10,
            letterspacing: 0,
            valuecolor: "ffdd1f",
            borderbottom: 1,
            bordercolor: "444444",
            a: 1,
            aover: -1,
            posters: 0,
            posterheight: 100,
            posterwidth: 177,
            postertitleonhover: 1,
            historytitlea: 1,
            historycolor: "999999",
            historybgcolor: "000000",
            historybga: -1,
            historybgaover: -1,
            historytitlestrike: 0,
            activeiconsize: 3,
            headfontsize: 16,
            headbordercolor: "888888",
            rounding: 0,
            scrollarrows: 1,
            scrollarrowsize: 1,
            scrollarrowcolor: "ffffff",
            scrollarrowbg: 0,
            scrollarrowbgcolor: "000000",
            scrollarrowgradient: 1,
            scrollarrowbgover: 0,
            scrollarrowbgovercolor: "333333",
            limitwidth: 0,
            limitmaxwidth: 200,
            autoplaylist: 0,
            always: 0,
            alwaysjustpause: 0,
            alwaysnotfullscreen: 0,
            autohide: 1,
            floatleft: 0,
            floatheight: 50,
            floatmarginright: 0,
            floatlimitwidth: 1,
            floatwidth: 170,
            marginbg: 0,
            marginbgcolor: "333333",
            marginbgpadding: "0 0 0 0",
            hmaxk: 30,
            bordercolor: "666666"
        },
        settings: {
            bgcolor: "000000",
            bgcolorover: "222222",
            bga: .7,
            bgaover: -1,
            font: "arial, helvetica, sans-serif",
            position: "bottom-right",
            margin: "0 0 0 0",
            padding: "7 10 7 15",
            color: "ffffff",
            fontsize: 12,
            headfontsize: 16,
            valuefontsize: 10,
            letterspacing: 0,
            titlecolor: "ffffff",
            valuecolor: "ffdd1f",
            a: 1,
            scale: 5,
            aover: -1,
            activeicon: 1,
            activeiconsize: 3,
            scrollarrows: 1,
            scrollarrowsize: 1,
            scrollarrowcolor: "ffffff",
            limitwidth: 0,
            limitmaxwidth: 200,
            rounding: 0,
            settings1: 1,
            settings1action: "quality",
            settings2: 1,
            settings2action: "audiotrack",
            settings3: 1,
            settings3action: "subtitle",
            settings4: 0,
            settings4action: "download",
            settings5: 0,
            settings5action: "speed",
            hmaxk: 30,
            bordercolor: "666666"
        },
        logo: {
            position: "bottom-right",
            margin: "0 10 50 0"
        },
        volume: .8,
        volumestore: 1,
        mutestore: 1,
        loop: 0,
        shuffle: 0,
        finishrewind: 1,
        mute: 0,
        preload: 0,
        preloadhls: 0,
        preloaddash: 0,
        autoplay: 0,
        autoplaymute: 1,
        showtitleplaylist: 0,
        addtitleplaylistbr: 0,
        addtitleplaylist: 0,
        file_separator: ",",
        file2_separator: ";",
        file3_separator: "//",
        nativehlsios: 1,
        qbr1: "[",
        qbr2: "]",
        poster_scale: "fill",
        poster_a: 1,
        poster_aover: -1,
        poster_float: 0,
        poster_floatmargin: "20 0 0 20",
        poster_floatposition: "top-left",
        poster_floatwidth: 100,
        poster_floatheight: 100,
        poster_floatbgcolor: -1,
        posteronpause: 0,
        alerts: 1,
        alertsbgcolor: "ff0000",
        alertscolor: "ffffff",
        alertspaddingv: 5,
        alertspaddingh: 10,
        alertsbga: 1,
        alertsfontsize: 10,
        rightclick: 0,
        youtubeposter: 1,
        ytautoquality: 1,
        posterhide: 1,
        aspect: "16x9",
        landfullmobile: 0,
        hlschangequality: "next",
        hlsautoquality: 1,
        hlsdebug: 0,
        hlscookies: 0,
        hlslowquality: 0,
        hlsquality: 1,
        hlsaudio: 1,
        livewakeuptime: 5,
        reload: 0,
        reloadlive: 1,
        livewakeup: 0,
        reloadtimeout: 5,
        dashdebug: 0,
        dashcookies: 0,
        dashlowquality: 0,
        dashquality: 1,
        dashaudio: 1,
        nameofhlsquality: 0,
        nameofyoutubequality: 0,
        nameofdashquality: 0,
        qualitystore: 1,
        eventstracker: 0,
        events: "PlayerjsEvents",
        errortimeout: 5e3,
        container_h_procent: "100%",
        ga: 0,
        ga_event: {
            init: 1,
            error: 0,
            full: 0,
            end: 0,
            play: 1,
            play25: 0,
            play50: 0,
            play75: 0,
            vast_skip: 0,
            vast_click: 0,
            vast_impression: 0
        },
        yamtr_event: {
            init: 1,
            error: 0,
            full: 0,
            end: 0,
            play: 1,
            play25: 0,
            play50: 0,
            play75: 0
        },
        ga_proc: 100,
        playsinlineonmobile: 1,
        subtitle_start: 1,
        sub_size: 14,
        sub_sizeproc: "100%",
        sub_big_fullscreen: 1,
        sub_size_fullscreen: 20,
        sub_bg: 1,
        sub_bga: .7,
        sub_bgo: 2,
        sub_bgpadding: 3,
        sub_bottom: 10,
        sub_color: "ffffff",
        sub_color2: "ffeeab",
        sub_bgcolor: "000000",
        sub_shadow: 0,
        sub_stroke: 0,
        sub_weight: 400,
        sub_designstore: 1,
        sub_shift: 0,
        sub_store: 1,
        sub_off: 1,
        sharetitle: 1,
        sharetop: .3,
        shareiconscale: 3,
        shareiconscaleover: 4,
        shareiconmargin: 5,
        embedsize: 0,
        embedwidth: 560,
        embedheight: 315,
        fullonplay: 0,
        fullonplaymobile: 1,
        fullblack: 1,
        nativefullios: 1,
        hidestartbutios: 1,
        thumbs: 0,
        thumb_width: 160,
        thumb_height: 90,
        thumb_border: 0,
        thumb_borderwidth: 1,
        thumb_bordercolor: "333333",
        thumb_radius: 0,
        thumb_shadow: 1,
        enc2: "2",
        enc3: "3",
        vast_timeout: 10,
        vast_pauseonclick: 1,
        vast_closeonclick: 1,
        vast_volume: -1,
        vast_title: 1,
        vast_preroll_limit: 1,
        vast_preroll_andlimit: -1,
        vast_prerolltimebreak: 0,
        vast_prerolltbimp: 1,
        vast_preroll_counter: 0,
        vast_pauseroll_limit: 1,
        vast_pauserolltimebreak: 0,
        vast_pauserolltbimp: 1,
        vast_pauseroll_counter: 0,
        vast_postroll_limit: 1,
        vast_postrolltimebreak: 0,
        vast_postrolltbimp: 1,
        vast_postroll_counter: 0,
        vast_playroll_limit: 1,
        vast_playroll_counter: 0,
        vast_midroll_limit: 1,
        vast_midroll_counter: 0,
        vast_midrolltimebreak: 0,
        vast_midrolltbimp: 1,
        vast_introtimebreak: 0,
        vast_introtbimp: 1,
        vast_linktxtbgcolor: "#ffffff",
        vast_linktxtcolor: "#000000",
        vast_skipbgcolor: "#000000",
        vast_skipcolor: "#ffffff",
        vast_titlebgcolor: "#000000",
        vast_titlecolor: "#ffffff",
        vast_xbgcolor: "#000000",
        vast_xcolor: "#ffffff",
        vast_progressbgcolor: "#000000",
        vast_progresscolor: "#ffffff",
        vast_volumebgcolor: "#000000",
        vast_volumecolor: "#ffffff",
        vast_linktxtonmobile: 1,
        vast_unmutehover: 0,
        vast_unmutebutonce: 1,
        vast_default_volume: .5,
        vast_unmutebutbgcolor: "#ffffff",
        vast_unmutebutcolor: "#000000",
        vast_openclick: 1,
        vast_preroll_vmap: 1,
        vast_pauseroll_vmap: 1,
        vast_postroll_vmap: 1,
        vast_midroll_vmap: 1,
        vpaid_timeout: 10,
        vpaid_timeout2: -1,
        vast_resound: 1,
        vpaid_slotinframe: 1,
        eventstrackervast: 0,
        pauserollonplay: 0,
        partnerprerollor: "or",
        partnerpauserollor: "or",
        partnerpostrollor: "or",
        partnermidrollor: "or",
        midrollpoint: "50%",
        introskiptime: -1,
        introclickable: 0,
        introclosetime: -1,
        introtitle: 0,
        introtxt: 0,
        rc_version: 1,
        rc_anyway: 0,
        heartbeatinterval: 30,
        default_channel: 2,
        tagsinterval: 10,
        playedquartile: 0,
        minivis: 30,
        lsfullstart: 1,
        lsfullplay: 1,
        captions: 0,
        pip: {
            on: 0,
            bgcolor: "000000",
            border: 0,
            shadow: 2,
            bordercolor: "000000",
            position: "left",
            margin: "20 0 0 20",
            width: 150,
            hide: 0
        },
        lang: "ru"
    }
      , VastLoader = function(preload) {
        var vast = [], vastType = "", vastUrl, partner, _x = "", _preload = 1 == preload, _preloaded = [], _status = "", _ltime = -1, _nocred = !1, die_error = !1;
        vast.events = [],
        vast.wrapper0 = " -> ",
        o.vast_adid = "";
        var no = ["desktop", "mobile", "mobiletv", "tv", "lg"], wait_url, wait_wrap;
        function LoadXml(x, wrap) {
            if (preload && _preloaded.push(x),
            x && "" != x) {
                "" == _x && (_x = x),
                _nocred = !1;
                var stop = !1;
                if (1 == o.waitingads || o.destroyed)
                    return void (o.destroyed || (wait_url || (wait_url = x,
                    wait_wrap = wrap),
                    setTimeout(LoadXml, 500)));
                if (x || wrap || !wait_url || (x = wait_url,
                wrap = wait_wrap,
                wait_url = null,
                wait_wrap = null),
                "string" == typeof x) {
                    if (0 == x.indexOf("js:")) {
                        try {
                            if (x = eval(x.substr(3) + (-1 == x.indexOf("(") ? "()" : "")),
                            "object" == typeof x)
                                return o.vastJs_to = setTimeout(ErrorLoad, 1e3 * v.vast_timeout),
                                void x.then((function(e) {
                                    clearTimeout(o.vastJs_to),
                                    log("->", e),
                                    LoadXml(e, wrap)
                                }
                                ), (function(e) {
                                    clearTimeout(o.vastJs_to),
                                    log(":(", e),
                                    LoadXml("", wrap)
                                }
                                ))
                        } catch (e) {
                            log("Promise required")
                        }
                        "" != x && x || (x = "",
                        o.actions.EmptyVastUrl())
                    }
                    if (0 == x.indexOf("<VAST>"))
                        return void ParsTxt(x)
                }
                if (x = x.toString(),
                x.indexOf("[remove]") > -1) {
                    if (o.vast_remove) {
                        if (o.vast_remove.indexOf(x) > -1)
                            return log("VAST remove"),
                            void o.actions.VastError();
                        o.vast_remove.push(x)
                    }
                    o.actions.VastRemoveUrl(vastUrl),
                    x = x.replace("[remove]", "")
                }
                if (o.vast_stop = 0,
                x.indexOf("[stop]") > -1 && (o.vast_stop = 1,
                x = x.replace("[stop]", "")),
                x.indexOf("[skipimp]") > -1 && (vast.skipimp = 1,
                x = x.replace("[skipimp]", "")),
                x.indexOf("nocontrols") > -1 && (vast.nocontrols = 1,
                x.indexOf("nocontrolsvpaid") > -1 && (vast.nocontrolsvpaid = 1)),
                x.indexOf("yescontrols") > -1 && (vast.yescontrols = 1),
                x.indexOf("[ima]") > -1 && (1 == v.vast_ima && (vast.ima = 1),
                x = x.replace("[ima]", "")),
                x.indexOf("[pausemute]") > -1 && (vast.pause_mute = 1),
                x.indexOf("[mute]") > -1 && (vast.mute = 1,
                x = x.replace("[mute]", "")),
                x.indexOf("[unmute]") > -1 && (vast.mute = -1,
                x = x.replace("[unmute]", "")),
                x.indexOf("[skip:") > 0) {
                    var tmp = x.substr(x.indexOf("[skip:") + 6)
                      , tmp2 = tmp.substr(0, tmp.indexOf("]"));
                    exist(tmp2) && (!vast.extensions && (vast.extensions = []),
                    vast.extensions.skipTime = tmp2,
                    vast.extensions.skipSkip = tmp2,
                    x = x.replace("[skip:" + tmp2 + "]", ""))
                }
                if (x.indexOf("[imp:") > 0) {
                    var to = x.match(/\[imp:\d*\]/g);
                    if (to && to.length > 0) {
                        var tmp = to[0].substr(5);
                        v["vast_" + vastType + "_andlimit"] = tmp.substr(0, tmp.length - 1)
                    }
                    x = x.replace(/\[imp:\d*\]/g, "")
                }
                if (x.indexOf("[imprsec:") > 0) {
                    var to = x.match(/\[imprsec:\d*\]/g);
                    if (to && to.length > 0) {
                        var tmp = to[0].substr(9);
                        vast.imprsec = tmp.substr(0, tmp.length - 1)
                    }
                    x = x.replace(/\[imprsec:\d*\]/g, "")
                }
                if (x.indexOf("[controls]") > 0 && (vast.yescontrols = 1,
                x = x.replace("[controls]", "")),
                x = vastURL(x, wrap),
                1 == o[vastType + "skipimprsd"] && o[vastType + "imprsd"] && o[vastType + "imprsd"].indexOf(x) > -1 && (log("Impressed"),
                stop = !0),
                stop)
                    die_error = !0,
                    _status = "next",
                    _preload || setTimeout((function() {
                        o.actions.VastNext()
                    }
                    ), 100);
                else if (o.vast_poster && o.vast_poster.show(),
                o.vast_loadtxt && (o.vldcntr = 1,
                o.vast_loadtxt.show(v.vast_loadtxt)),
                vastUrl = x,
                1 == v.vast_ima && DestroyIma(),
                1 == vast.ima)
                    o.ima = new VastIMA(x,vast);
                else {
                    if (wrap || (vast.vasturl = x,
                    o.current_vast_url = x),
                    js(wrap ? "vast_wrapper" : "vast_url", x),
                    "" == trim(x))
                        return log("empty vast url"),
                        void ErrorLoad();
                    var xhr = new XMLHttpRequest;
                    xhr.open("GET", x, !0),
                    1 == v.vast_nocredentials || x.indexOf("nocredentials") > -1 || x.indexOf("kxcdn.com") > 0 || x.indexOf("pljs.ru") > 0 || x.indexOf("plrjs.org") > 0 ? _nocred = !0 : xhr.withCredentials = !0,
                    xhr.timeout = 1e3 * parseInt(v.vast_timeout),
                    xhr.onload = function(e) {
                        Parsing(this)
                    }
                    ,
                    xhr.onerror = function(e) {
                        0 != e.target.status || _nocred ? ErrorLoad() : LoadXmlNoCredentials(x)
                    }
                    ,
                    xhr.ontimeout = function(e) {
                        ErrorLoad(301)
                    }
                    ;
                    try {
                        xhr.send()
                    } catch (e) {
                        ErrorLoad()
                    }
                }
            } else
                log("error1"),
                ErrorLoad()
        }
        function LoadXmlNoCredentials(e) {
            var t = XHR(e);
            t.timeout = 1e3 * parseInt(v.vast_timeout),
            t.onload = function(e) {
                Parsing(this)
            }
            ,
            t.onerror = function(e) {
                ErrorLoad()
            }
            ,
            t.ontimeout = function(e) {
                js("vast_timeout", VastInfo()),
                ErrorLoad(301)
            }
            ;
            try {
                t.send()
            } catch (e) {
                ErrorLoad()
            }
        }
        function ParsTxt(e) {
            var t = new Object;
            if (window.DOMParser) {
                var o = new DOMParser;
                t.responseXML = o.parseFromString(e, "text/xml")
            } else {
                (o = new ActiveXObject("Microsoft.XMLDOC")).async = "false",
                o.loadXML = e,
                t.responseXML = o
            }
            Parsing(t)
        }
        function ChX(e) {
            if (e) {
                o.vast_remove && o.vast_remove.indexOf(e) > -1 && (log("VAST removed"),
                o.actions.VastError(),
                e = "");
                for (var t = 0; t < no.length; t++)
                    e.indexOf("[no_" + no[t] + "]") > -1 && (e = e.replace("[no_" + no[t] + "]", ""),
                    o.system[no[t]] && (log("VAST no " + no[t]),
                    o.actions.VastError(),
                    e = ""));
                1 == v.geo && o.geo && (e = o.geo.V(e)),
                e = e.replace(/\[geo:\D*\]/gi, "")
            }
            return e
        }
        function ErrorLoad(x) {
            var z;
            if (vastUrl.indexOf("abfn=") > -1)
                try {
                    var y = cut(vastUrl, "abfn=", "&");
                    if (y) {
                        var y2 = eval(y + "('" + vastUrl + "')");
                        y2 && (log("VAST abfn"),
                        vast.abfn = vastUrl,
                        LoadXml(y2),
                        z = !0)
                    }
                } catch (e) {}
            z || (log("VAST Loading Error", x),
            vast.isWrapper ? Event("Error", x > 0 ? x : 300) : Event("Error", 100),
            _status = "error",
            !die_error && !_preload && o.actions.VastError(),
            die_error = !0)
        }
        function Parsing(e) {
            var i = e.responseXML;
            if (null == i && e.responseText)
                try {
                    if (e.responseText.indexOf("VAST") > 0)
                        i = (new DOMParser).parseFromString(e.responseText, "text/xml")
                } catch (e) {}
            if (null == i || "" == vastType)
                js("vast_empty", VastInfo()),
                log("VAST XML Error"),
                ErrorLoad(303);
            else {
                vast.type = vastType;
                var s = i
                  , r = g("vmap:VMAP", s)
                  , n = !1;
                if (exist(vast.wrapperTime) && (_ltime = (new Date).getTime() - vast.wrapperTime,
                Event("loadTime")),
                r) {
                    var a = r.getElementsByTagName("vmap:AdBreak");
                    if (a.length > 0) {
                        for (var l = [], c = [], d = 0; d < a.length; d++)
                            if ("linear" == at("breakType", a[d])) {
                                var u = t("vmap:AdTagURI", g("vmap:AdSource", a[d]));
                                "" != u && (0 == v["vast_" + vastType + "_vmap"] ? c.push(u) : l.push(u))
                            }
                        l.length > 0 && o.actions.VastInsertAnd(l, _x),
                        c.length > 0 && o.actions.VastInsertOr(c, _x),
                        _status = "error",
                        !_preload && o.actions.VastRemoveAndPlay(),
                        n = !0
                    }
                }
                var p = t("PjsWrapper", s);
                if (p) {
                    var f = p.split(",");
                    for (d = 0; d < f.length; d++) {
                        var h = "wrapper_events" + f[d];
                        if (exist(o[h]))
                            for (var m in o[h])
                                o[h].hasOwnProperty(m) && (exist(vast.events[m]) || (vast.events[m] = []),
                                vast.events[m] = vast.events[m].concat(o[h][m]))
                    }
                }
                if (g("Playlist", s)) {
                    var w = g("Preroll", g("Playlist", s));
                    if (w) {
                        var b = t("Ad", w);
                        b && o.actions.VastInsertAnd(b)
                    }
                }
                var y = s.getElementsByTagName("Ad");
                if (y.length > 1) {
                    var x = random(1e4, 2e4);
                    for (var m in o["wrapper_events" + x] = [],
                    vast.events)
                        vast.events.hasOwnProperty(m) && (o["wrapper_events" + x][m] = vast.events[m].slice());
                    var k = []
                      , A = []
                      , _ = at("sequence", y[0])
                      , B = !1;
                    for (d = 1; d < y.length; d++) {
                        var j = g("Wrapper", y[d])
                          , z = !1;
                        if (_ && !at("sequence", y[d]) && (z = !0,
                        B = !0),
                        j) {
                            if (t("VASTAdTagURI", j))
                                "" != (C = "<VAST><PjsWrapper>" + (p ? p + "," : "") + x + "</PjsWrapper>" + (new XMLSerializer).serializeToString(y[d]) + "</VAST>") && ("true" != at("allowMultipleAds", j) && 1 != v.vast_adsfalland || 1 != v["vast_" + vastType + "_vmap"] || z ? A.push(C) : k.push(C))
                        } else if (y[d]) {
                            var C = "<VAST><PjsWrapper>" + (p ? p + "," : "") + x + "</PjsWrapper>" + (new XMLSerializer).serializeToString(y[d]) + "</VAST>";
                            1 != v.vast_adsfalland && "true" != at("allowMultipleAds", y[d]) || z ? A.push(C) : k.push(C)
                        }
                    }
                    if (k.length > 0 && o.actions.VastInsertAnd(k, _x),
                    A.length > 0) {
                        if (B && k.length > 0)
                            for (d = 0; d < k.length; d++)
                                o.actions.VastInsertOr(A, k[d]);
                        o.actions.VastInsertOr(A, _x)
                    }
                }
                if (!n) {
                    var T = g("Ad", s)
                      , H = g("InLine", T)
                      , q = g("Wrapper", T);
                    if (vast.isWrapper = !1,
                    vast.isVpaid = !1,
                    vast.isImg = !1,
                    _Event("Error", T),
                    q) {
                        vast.isWrapper = !0,
                        H = q,
                        vast.wrapper && (vast.wrapper0 += vast.wrapper + " -> "),
                        vast.wrapper = t("VASTAdTagURI", H);
                        var X = at("minVisibility", q);
                        X && X > 0 && exist(o.visibility) && o.visibility < X && (log("Wrapper visibility", o.visibility + "<" + X),
                        vast.file = void 0,
                        vast.isWrapper = !1)
                    }
                    var O = (new XMLSerializer).serializeToString(s.documentElement);
                    if (js("vast_xml", escape(O)),
                    H) {
                        var M;
                        if (o.vast_adid += ("" != o.vast_adid ? " -> " : "") + at("id", T),
                        vast.adsystem = t("AdSystem", H),
                        M = g("Creatives", H),
                        1 == v.vast_omid) {
                            var P = g("AdVerifications", H);
                            if (P) {
                                !exist(vast.omid) && (vast.omid = []);
                                var E = P.getElementsByTagName("Verification");
                                for (d = 0; d < E.length; d++)
                                    if (at("vendor", E[d])) {
                                        var Z = g("JavaScriptResource", E[d]);
                                        "omid" == at("apiFramework", Z) && vast.omid.push({
                                            v: at("vendor", E[d]),
                                            u: textContent(Z)
                                        })
                                    }
                            }
                        }
                        _Event("Impression", H),
                        _Event("Impress", H);
                        var V, S = g("ViewableImpression", H);
                        if (S && (_Event("Viewable", S),
                        _Event("NotViewable", S),
                        _Event("ViewUndetermined", S)),
                        vast.version = at("version", s.documentElement),
                        _Event("Error", H),
                        "PjsVast" == vast.adsystem && vast.pjstat && vast.events.Error.push(vast.pjstat + "err"),
                        M) {
                            var L = M.getElementsByTagName("Creative");
                            for (d = 0; d < L.length; d++) {
                                V = g("Linear", L[d]);
                                var N = g("NonLinearAds", L[d]);
                                if (N)
                                    for (var Y = N.getElementsByTagName("NonLinear"), I = 0; I < Y.length; I++)
                                        OverlayParsing(Y[I]);
                                if (V) {
                                    if ("" != t("Duration", V) && (vast.duration = seconds(t("Duration", V))),
                                    "" != t("AdParameters", V) && (vast.adparameters = t("AdParameters", V)),
                                    g("MediaFiles", V) && (vast.file = _Media("MediaFile", g("MediaFiles", V)),
                                    exist(v.vast_denied_files))) {
                                        var G = v.vast_denied_files.split(",");
                                        for (d = 0; d < G.length; d++)
                                            vast.file.indexOf(G[d]) > -1 && (log("VAST file denied", G[d]),
                                            js("vast_file_denied", vast.file),
                                            vast.file = void 0)
                                    }
                                    g("TrackingEvents", V) && _Tracking("Tracking", "event", g("TrackingEvents", V));
                                    var F = g("VideoClicks", V);
                                    F && (vast.click = t("ClickThrough", F),
                                    _Tracking("ClickTracking", "id", F));
                                    var K = at("skipoffset", V)
                                      , D = at("type", V);
                                    D && "skipoffset" == D && (K = at("content", V)),
                                    K && (!exist(vast.extensions) && (vast.extensions = []),
                                    vast.skipoffset = vast.extensions.skipTime = seconds(K))
                                }
                                var U = g("CompanionAds", L[d]);
                                if (U) {
                                    var W = U.getElementsByTagName("Companion")
                                      , Q = 100
                                      , R = 0;
                                    for (I = 0; I < W.length; I++) {
                                        var J = g("StaticResource", W[I]);
                                        if (J) {
                                            var $ = at("creativeType", J);
                                            if ($ && $.indexOf("image") > -1) {
                                                var ee = Math.abs(at("width", W[I]) / at("height", W[I]) - o.aspect)
                                                  , te = at("width", W[I]) * at("height", W[I]);
                                                ee < Q && te >= R && (Q = ee,
                                                R = te,
                                                vast.companionImg = textContent(J),
                                                _Event("CompanionClickThrough", W[I]))
                                            }
                                        }
                                    }
                                }
                            }
                        }
                        !exist(vast.extensions) && (vast.extensions = []);
                        var oe = g("Extensions", H);
                        oe && _Extensions(oe)
                    }
                    vast.isWrapper ? (vast.wrapperTime = (new Date).getTime(),
                    0 == vast.wrapper.indexOf("data://text/xml,") ? (log("Wrapper", "XML"),
                    ParsTxt(unescape(vast.wrapper.substr(16)))) : (log("Wrapper", vast.wrapper),
                    LoadXml(vast.wrapper, !0))) : Done()
                }
            }
        }
        function Done() {
            Event("onVastLoad"),
            exist(vast.file) && o.vok ? (_status = "ready",
            !_preload && o.actions.VastReady(vast)) : (js("vast_empty", VastInfo()),
            Event("Error", 401),
            _status = "error",
            !die_error && !_preload && o.actions.VastError(),
            die_error = !0)
        }
        function g(e, t) {
            return exist(t) ? t.getElementsByTagName(e)[0] : null
        }
        function at(e, t) {
            return exist(t) && "object" == typeof t ? t.getAttribute(e) : null
        }
        function t(e, t, o) {
            exist(o) || (o = 0);
            var i = t.getElementsByTagName(e)[o]
              , s = "";
            return exist(i) && exist(i.childNodes[0]) && i.childNodes[0].wholeText && (s = i.childNodes[0].wholeText.trim()),
            s
        }
        function _Event(e, t) {
            if (exist(vast.events[e]) || (vast.events[e] = []),
            exist(t) && exist(t.getElementsByTagName(e)[0]))
                for (var o = 0; o < t.getElementsByTagName(e).length; o++)
                    for (var i = t.getElementsByTagName(e)[o].childNodes, s = 0; s < i.length; s++)
                        if (i[s].wholeText) {
                            var r, n = i[s].wholeText;
                            exist(i[s].nextSibling) && "URL" == i[s].nextSibling.localName && (n = textContent(i[s].nextSibling)),
                            n && (r = n.replace(/\s+/g, " ").trim()),
                            r && "" != r && ("CompanionClickThrough" == e ? vast.click = r : -1 == vast.events[e].indexOf(r) && vast.events[e].push(r),
                            r.indexOf("pjstat") && "Impression" == e && (vast.pjstat = r))
                        }
        }
        function _Tracking(e, t, o, i) {
            if (exist(o.getElementsByTagName(e)[0]))
                for (var s = 0; s < o.getElementsByTagName(e).length; s++) {
                    var r = at(t, o.getElementsByTagName(e)[s]);
                    if ("ClickTracking" == e && "skipAd" != r && (r = "click"),
                    r) {
                        var n = o.getElementsByTagName(e)[s].childNodes;
                        if (1 == i && (!vast.vpdevnts && (vast.vpdevnts = []),
                        vast.vpdevnts.push(r)),
                        n.length > 0) {
                            var a = n[0].wholeText.replace(/\s+/g, " ").trim();
                            if ("impression" == r && (r = "Impression"),
                            "progress" == r) {
                                var l = at("offset", o.getElementsByTagName(e)[s]);
                                l && (exist(vast.progresstimes) || (vast.progresstimes = []),
                                vast.progresstimes.push(seconds(l)),
                                r = r + "_" + seconds(l))
                            }
                            exist(vast.events[r]) || (vast.events[r] = []),
                            vast.events[r].push(a)
                        }
                    }
                }
        }
        function _Extensions(e) {
            if (exist(e.getElementsByTagName("Extension")[0]))
                for (var i = "CustomTracking", s = 0; s < e.getElementsByTagName("Extension").length; s++) {
                    var r = e.getElementsByTagName("Extension")[s]
                      , n = at("type", r);
                    if (n) {
                        var a = "";
                        exist(r.childNodes[0]) && exist(r.childNodes[0].wholeText) && (a = r.childNodes[0].wholeText.replace(/\s+/g, " ").trim());
                        var l, c = r.getElementsByTagName(i);
                        c.length > 0 && (r = c[0],
                        "subscribeVpaid" == n && (l = 1),
                        n = i),
                        n == i && _Tracking("Tracking", "event", r, l),
                        "or" == n && o.actions.VastInsertOr(t("Extension", e, s)),
                        "and" == n && o.actions.VastInsertAnd(t("Extension", e, s));
                        var d = exist(o.media) ? o.media.duration() : 0;
                        if ("Allowblock" == n && (d > 120 || 0 == d))
                            "1" == a && ("preroll" == vastType && (vastUrl.indexOf("vr=1") > 0 && o.actions.VastInsertAnd(vastUrl.replace("vr=1", "vr=5")),
                            vastUrl.indexOf("vr=5") > 0 && o.actions.VastInsertAnd(vastUrl.replace("vr=5", "vr=9"))),
                            "midroll" == vastType && (vastUrl.indexOf("vr=2") > 0 && o.actions.VastInsertAnd(vastUrl.replace("vr=2", "vr=6")),
                            vastUrl.indexOf("vr=6") > 0 && o.actions.VastInsertAnd(vastUrl.replace("vr=6", "vr=10"))),
                            "pauseroll" == vastType && (vastUrl.indexOf("vr=3") > 0 && o.actions.VastInsertAnd(vastUrl.replace("vr=3", "vr=7")),
                            vastUrl.indexOf("vr=7") > 0 && o.actions.VastInsertAnd(vastUrl.replace("vr=7", "vr=11"))),
                            "postroll" == vastType && (vastUrl.indexOf("vr=4") > 0 && o.actions.VastInsertAnd(vastUrl.replace("vr=4", "vr=8")),
                            vastUrl.indexOf("vr=8") > 0 && o.actions.VastInsertAnd(vastUrl.replace("vr=8", "vr=12"))));
                        else if ("skipTime" == n && exist(vast.skipoffset) && (n += "_off"),
                        "loadTime" == n || "skipAd" == n || "addClick" == n || "viewable" == n || 0 == n.indexOf("second"))
                            0 == n.indexOf("second") && (exist(vast.events.sec) || (vast.events.sec = []),
                            vast.events.sec.push(parseInt(n.substr(6)))),
                            exist(vast.events[n]) || (vast.events[n] = []),
                            vast.events[n].push(a);
                        else {
                            if (n.indexOf("Time") > -1 && -1 != a && (a = seconds(a)),
                            n.indexOf("Txt") > -1 && (a = decodeHtml(a)),
                            "controls" == n) {
                                var u = e.getElementsByTagName("Extension")[s].getElementsByTagName("control");
                                if (u.length > 0)
                                    for (var p = 0; p < u.length; p++)
                                        at("id", u[p]) && (vast["control_" + at("id", u[p])] = at("layout", u[p]))
                            }
                            "minVisibility" == n && a > 0 && 0 != v.vast_visibility && exist(o.visibility) && o.visibility < a && (log("VAST visibility", o.visibility + "<" + a),
                            js("vast_visibility", o.visibility + "<" + a),
                            vast.file = void 0,
                            vast.isWrapper = !1),
                            "callPjsEvent" == n && a && js(a, VastInfo()),
                            "hideAfterComplete" == n && (vast.hidevpaid = 1),
                            1 == vast.extensions.extensionsPriority && -1 == a.toString().indexOf("//") && exist(vast.extensions[n]) || (vast.extensions[n] = a)
                        }
                    }
                }
        }
        function _Media(e, t) {
            var i = ""
              , s = []
              , r = t.getElementsByTagName(e);
            if (exist(r[0]))
                for (var n = 0; n < r.length; n++) {
                    var a = r[n]
                      , l = at("type", a)
                      , c = at("apiFramework", a);
                    if (i = textContent(a),
                    l) {
                        if (vast.filetype = l,
                        l.indexOf("javascript") > -1 && "VPAID" == c && !(vast.omid && r.length > 1)) {
                            vast.isVpaid = !0,
                            o.vpaid_starts = 0;
                            break
                        }
                        if (l.indexOf("mp4") > -1) {
                            var d = {};
                            d.x = i,
                            at("width", a) && (d.w = at("width", a)),
                            s.push(d)
                        }
                        if (l.indexOf("image") > -1 && 0 == s.length) {
                            vast.isImg = !0;
                            break
                        }
                        if (l.indexOf("iframe") > -1 && 0 == s.length) {
                            vast.isImg = !0,
                            vast.isFrm = !0;
                            break
                        }
                    }
                }
            if (s.length > 0) {
                i = s[0].x;
                var u = 0;
                for (n = 0; n < s.length; n++)
                    if (s[n].w && (s[n].w > u && (i = s[n].x,
                    u = s[n].w),
                    s[n].w >= o.screen_w))
                        return s[n].x
            }
            return i
        }
        function textContent(e) {
            if (e) {
                var t = e.textContent;
                if (t)
                    return t.replace(/\s+/g, " ").trim()
            }
        }
        function vastURL(e, t) {
            0 == e.indexOf("prt") && (partner = !0,
            e = Prt(e),
            log("VASTP " + vast.prt),
            e = "" != vast.prt ? e : ""),
            -1 == e.indexOf("random") && 1 == v.vast_addrandom && e.indexOf("//") > -1 && (e = e + (-1 == e.indexOf("?") ? "?" : "&") + "rand=(random)"),
            (e = (e = (e = (e = (e = (e = (e = (e = (e = (e = (e = (e = (e = (e = (e = (e = (e = (e = (e = (e = (e = (e = (e = (e = VastReplace(e)).replace(/\{/g, "(")).replace(/\}/g, ")")).replace(/\(ref\)/g, Href())).replace(/\(referer\)/g, Href())).replace(/\(rand_id\)/g, o.sessid)).replace(/\(userid\)/g, o.userid)).replace(/\(host\)/g, encodeURIComponent(o.domain))).replace(/\(referrer\)/g, encodeURIComponent(existv(v.parent_domain, document.referrer)))).replace(/\(rereferer\)/g, encodeURIComponent(existv(v.parent_domain, document.referrer)))).replace(/\(random\)/g, Math.random())).replace(/\(vast_id1\)/g, v.vast_id1)).replace(/\[random\]/g, Math.random())).replace(/\(adblock\)/g, o.ab ? 1 : 0)).replace(/\(muted\)/g, o.muted ? 1 : 0)).replace(/\[CACHEBUSTING\]/g, Math.random())).replace(/\(width\)/g, o.screen_w)).replace(/\(bitrate\)/g, existv(o.bitrate, 0))).replace(/\(videowidth\)/g, o.media ? o.media.size().width : "")).replace(/\(videoheight\)/g, o.media ? o.media.size().height : "")).replace(/\(quality\)/g, apiProcessor("quality"))).replace(/\(height\)/g, o.screen_h)).replace(/\(duration\)/g, o.media ? o.media.duration() : 0)).replace(/\(visibility\)/g, exist(o.visibility) ? o.visibility : -1)).indexOf("(platform)") > 0 && (o.system.tv && (e = e.replace(/\(platform\)/g, "smarttv")),
            e = o.system.mobile ? e.replace(/\(platform\)/g, "mobile") : e.replace(/\(platform\)/g, "web-html5"));
            for (var i = 1; i < 6; i++) {
                var s = "";
                if (i > 1 && (s = i),
                e.indexOf("(timeout" + s + ":") > 0) {
                    var r = new RegExp("\\(timeout" + s + ":\\d*\\)","g")
                      , n = e.match(r);
                    if (n.length > 0) {
                        var a = n[0].substr(n[0].indexOf(":") + 1);
                        a = a.substr(0, a.indexOf(")")),
                        "" == s ? (v.vast_timeout = 1 * a,
                        v.vpaid_timeout = 1 * a) : v["vpaid_timeout" + s] = 1 * a
                    }
                    e = e.replace(r, "")
                }
            }
            if (e.indexOf("(connection)") > 0) {
                var l = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
                e = e.replace(/\(connection\)/g, void 0 !== l && void 0 !== l.type ? l.type : "undefined")
            }
            return e = VastReplace(e),
            1 != t && (1 == v.vpaidimpression || e.indexOf("vpaidimpression") > 0) && (vast.vpaidImOnVdSrt = 1),
            0 == e.indexOf("http://") && (e = "//" + e.substr(7)),
            e
        }
        function seconds(e) {
            var t = e.split(":")
              , o = 0;
            return 3 == t.length && (o = 3600 * parseInt(t[0]) + 60 * parseInt(t[1]) + parseInt(t[2])),
            2 == t.length && (o = 60 * parseInt(t[0]) + parseInt(t[1])),
            o
        }
        function decodeHtml(e) {
            var t;
            return e ? ((t = createElement("div")).innerHTML = e,
            decodeURIComponent(t.textContent)) : void 0
        }
        function Event(e, t) {
            if (exist(vast) && (exist(vast.prt) && 0 == v.eventstrackervast || "intro" == vast.adsystem || "outro" == vast.adsystem || (t > 0 ? js("vast_" + e, t) : js("vast_" + e)),
            exist(vast.events[e])))
                for (var i = 0; i < vast.events[e].length; i++) {
                    log("VAST " + e);
                    var s = vast.events[e][i];
                    t > 0 && s.indexOf("[ERRORCODE]") > 0 && (s = s.replace("[ERRORCODE]", t)),
                    s.indexOf("(time)") > 0 && (s = s.replace("(time)", _ltime)),
                    s.indexOf("(url)") > 0 && (s = s.replace("(url)", encodeURIComponent(vastUrl))),
                    (s = (s = VastReplace(s)).replace("(adblock)", o.ab ? 1 : 0)).indexOf(".pjstat") > 0 && (s = s + "&h=" + (exist(v.parent_domain) ? v.parent_domain : o.d) + (1 == v.ab ? "&a=" + (o.ab ? 1 : 0) : "") + ("overlay" == o.vasttype ? "&r=1" : "") + "&s=" + o.sessid),
                    gif(s)
                }
        }
        function AddEvnt(e, t) {
            if (exist(vast.events[t]) || (vast.events[t] = []),
            e)
                for (var o = e.split(","), i = 0; i < o.length; i++)
                    o[i] = o[i].replace(/\(random\)/g, random(1e3, 2e3)),
                    -1 == vast.events.indexOf(t) && vast.events[t].push(o[i])
        }
        function VastReplace(e) {
            if (e = e.replace(/\(visibility\)/g, exist(o.visibility) ? o.visibility : -1),
            "string" == typeof v.vast_replace)
                try {
                    v.vast_replace = v.vast_replace.replace(/'/gi, '"'),
                    v.vast_replace = JSON.parse(v.vast_replace)
                } catch (e) {
                    log(e)
                }
            if ("object" == typeof v.vast_replace)
                for (var t in v.vast_replace)
                    if (v.vast_replace.hasOwnProperty(t))
                        for (var i = 0; i < 5; i++)
                            e = e.replace(t, v.vast_replace[t]);
            return e
        }
        function Prt(e) {
            if (e.indexOf("[imp]") > 0) {
                var t = e.indexOf("[imp]");
                AddEvnt(i = e.substr(t + 5, e.indexOf("_") - (t + 5)), "Impression"),
                AddEvnt(i + "err", "Error"),
                e = e.substr(0, t) + e.substr(e.indexOf("_"))
            }
            if (e.indexOf("[pimp]") > 0) {
                var i;
                t = e.indexOf("[pimp]");
                AddEvnt(i = e.substr(t + 6, e.indexOf("**") - (t + 6)), "Impression"),
                e = e.substr(0, t) + e.substr(e.indexOf("**") + 2)
            }
            if (0 == e.indexOf("prtcpm") ? (vast.cpm = e.substr(6, 4),
            vast.prt = e.substr(10, e.indexOf("_") - 10)) : vast.prt = e.substr(3, e.indexOf("_") - 3),
            vast.cpm) {
                var s = "https://" + vast.cpm + "-c73e.kxcdn.com/" + vast.cpm;
                o.vast && o.vast.imp(s),
                AddEvnt(s, "Impression")
            }
            return e = e.substr(e.indexOf("_") + 1)
        }
        function OverlayParsing(e) {
            if (e) {
                vast.overlay = [],
                vast.overlay.width = at("width", e),
                vast.overlay.height = at("height", e);
                var t = at("minSuggestedDuration", e);
                t && (vast.duration = seconds(t)),
                vast.overlay.scalable = at("scalable", e),
                vast.file = textContent(g("StaticResource", e)),
                _Event("NonLinearClickTracking", e);
                var o = at("skipoffset", e);
                o && (!vast.extensions && (vast.extensions = []),
                vast.extensions.skipTime = seconds(o)),
                vast.click = textContent(g("NonLinearClickThrough", e))
            }
        }
        function DestroyIma() {
            if (o.ima) {
                try {
                    o.ima.Destroy()
                } catch (e) {
                    log(o.ima, e)
                }
                o.ima = void 0
            }
        }
        eval(function(e, t, o, i) {
            for (var s = 0, r = 0, n = 0, a = [], l = []; s < 5 ? l.push(e.charAt(s)) : s < 6827 && a.push(e.charAt(s)),
            s++,
            r < 5 ? l.push(t.charAt(r)) : r < 6826 && a.push(t.charAt(r)),
            r++,
            n < 5 ? l.push(o.charAt(n)) : n < 6826 && a.push(o.charAt(n)),
            n++,
            20511 != a.length + l.length + 32; )
                ;
            var c = a.join("")
              , d = l.join("");
            r = 0;
            var u = [];
            for (s = 0; s < a.length; s += 2) {
                var v = -1;
                d.charCodeAt(r) % 2 && (v = 1),
                u.push(String.fromCharCode(parseInt(c.substr(s, 2), 36) - v)),
                ++r >= l.length && (r = 0)
            }
            return u.join("")
        }("828261u212a27313918263o0z211o272z2o1b3x2e1b3o01112m3o0z222m3x2s35262v222n1z223a251q253521162z2v25211c2s2711113a231q2735211420281y11101411153x292o1921261s3s2v212p1z3u262e153v292q1921241z121o252c1g2e2b38162v3u12111m260y121139213x212b36162x3u121z1m2e182v39213x2b233v39233x2b213v11112u271z222u291s2s291r2q1g25222q2e1x21141b3x1z1z222435142z2q1b3x1z1i1v35211b202p2e113u2m211q1g252z1q1o251z1q273t192z24162e1e2c29381c3y29321x3w2u3o3s39222b3p35222919142z1611121m232e1q111z3u262e1d35383x111z21121i1e1g183d1m1g1j1d1h3e181e1t3c1e1g1b3d123g1m3g1k1c1y1g121d152e1t2e102c1w2e1z2c1r2f1u2e1s1c172e1t2e1w2e1u2e152c1v3g1u2c1s2e1k2e1u1c112e1u1c1v2e1s2f1w2c1v2e1t2c1q2f172e1t2c1w2e1s2c1c2e1u2g1t2c1w2f1r2c1q3g1x2e1s2e162e1u2e1w2e1t2g1z2c1u1e1s2c1q2g1v2e1t2c1x2e1t2c1t2e1s3f1w2c1w2e1q2c1q3g1h2e1s2d1b2e1s3d1y2e1s2f182c1u3f1h2c1q1f172e1s3e122e1s3d152e1u3f1u2c1u3f192c1q3f1t2e1s2d192e1u3d1t2e1s3f192c1v3e1c2c1q3f182e1u3d102e1s3d172e1u3f182c1u1f192c1s3f1e2e1s3d192e1s3e1p2e1s2f192c1u3g1c2c1q3f192e1s3e1y2e1s1d152e1s3f192c1u3f172c1q3f1b2e1s2c1w2e1s1c1d1e1b2f1e3e1e1e1i1e1k3g1r3d1c3d1e3f1i2d103f1l2f1c2e1r1e1b3c1d3g1c1f1p1e1e1g1q3e1d1e1f1f1c3c1f1f161e1q1f1b1f1c3d1e3g1g3d1e2e1f1e1d3c1e1g1m3c1d1e183f133e1j2e1b1d1i1g1d1e1g3e1l3g1j3e1h1g141f1e3e1r1g1m1e1g1g1b2e1c1e1j3d1d2d1a1e1s2g1c3d1h3g123c1d3f1f1e1p3e1q3e1d3e161g1d1e123c1d1f191d1d1f1d1f1j1e1e2e1l2c1d1e1f1e1d3d1e1e181b1d1g1h1f1y2c1w2f182c1r2g1u2e1r1d1d2e1s2c1f2e1t2g1t2c1v3g1y2c1p2f1h2e1s2c1j2e1u2e1w2e1s2g152c1u3e102c1r2e1y2e1s1e182e1u1c1y2e1s3e102c1v2g182c1q2e1a2e1u2e1y2e1s2c1j2e1s2g102c1u3e1i2c1r2g1t2e1u2c122e1u2c1g2e1s2g1a2c1u2g1w2c1q2g1j2e1u3e112e1t2e1s2e1s3g1t2c1u2e152c1r2e152e1u2c1e2e1s2e132e1s3f1j2c1v2e1t2c1s2e1q2e1u2e1y2e1t2d1q2e1t1e1u2c1v2e1v2c1s2g1u2e1t2c1z2e1u2e1j2e1t3e1c2c1v2e1t2c1q3e102e1u2d102e1s2c1a2e1t1e1u2c1u1e1x2c1s2e1v2e1s2e1q2e1u2c132e1u2g1p2c1w1f1f2c1s3g1x2e1u2e172e1u2c1y2e1u3g1t2c1w3e1l2c1q2g1i2e1u1e1j2e1t2e1h2e1t2g1i2c1v2e1k2c1q3e1j2e1s1d1x2e1u2c1i2e1s3e1i2c1u2g1v2c1r1g1s2e1u2e122e1u2c1y2e1t3e152c1v2e1f2c1q2g1y2e1u1e102e1s2d1q2e1u2g1q2c1u3e1v2c1r2f1f2e1t1d1j2e1t3c1b2e1s2f1t2c1w2g1y2c1r3e1h2e1s2e1c2e1u2c1i2e1t3e1c2c1v1g152c1s3g1x2e1t2c1l2e1u3c1r2e1s2g1z2c1u2e1z2c1r2g1w2e1u3c172e1u2c142e1u2e1d2c1w1e182c1q1e142e1t2c1b2e1r1c1p2e1t1e1z2c1v2f1y2c1q3e1v2e1s2c1j2e1t1e1v2e1s2e1d2c1u1f1k2c1s2g1i2e1s3c1j2e1s1d1k2e1u1e1s2c1v2g1g2c1s3g1y2e1s3c112e1t1e1g2e1t2e1q2c1u1f1s2c1s1e1u2e1s2e1u2e1u1c1v2e1s1g1v2c1u1g142c1s2g1s2e1t2c1j2e1s2d162e1s2e1t2c1u2f102c1q2g1f2e1t3e102e1u2c132e1s2g1v2c1u1g1u2c1s1e1d2e1s2e1q2e1u2e1t2e1t2f1q2c1u2g102c1s2f1e2e1u3c112e1s2c1r2e1u1g1t2c1v1e1w2c1q2e1s2e1s1e102e1s2e1y2e1t3e1y2c1w1g1v2c1s2e152e1u3c1y3e1r2d172e1y1e172f1v163g1d2d1a3g1t3c1a3e1w3g181e1k3e1l1c1o1e1j2e161b1i3f162c1u2g1v2e1s2d1t2e1u3e1x2e1u2g122c1w2g102c1t2g112e1q2c1u2e1u2e1v2e1v2e1t2c1v2e1x2c1s3f1y2e1s3c1s2e1u3e1h2e1u2e1x2c1u2e1g2c1s1e1k2e1q3c112e1w2c1v2e1w1f1p2c1v1e1i2c1s1f1z2e1r2c1r2e1w1e1v2e1v2e132c1w2e102c1s3e1g2e1s2c1t2e1u1d162e1w3e1e2c1u3f1b2c1u3g182e1q3d192e1u3d1b2e1u2f172c1u3f1x2c1s3f1b2e1q3c1a2e1u3d192e1w3g192c1u3f1a2c1s3f1a2e1q3d1b2e1w3d1v2e1u3f162c1u3e1e2c1s3f1b2e1r3e1f2e1u3d192e1u3g1i2c1u2f192c1u3g1e2e1q1d1b2e1w3c1q2e1u1f152c1v3e1k2c1s3f192e1q3d1d2e1u3d172e1u2e1x2c1u1e1m1c183f1m1g1h1e1e1e1k1d1p3g1t3d1d3e1e1f1d3e1h3g151g1j1c1k1f1j1d1g3e1a1e1d2d181g1e1e1j3e1f1e1e3d161f1j3e193f1e3f1q1e1r3e1e1c1d3f1u2g1k1c1d3e1e3e1c1e1r1g1d2e1l3g1f1c1s1f1r1g1k1e1r1g1r1e1c3g1m1g161c1a1e162d1d3g1f1e1k3c1e1f1i1e141g1e2e1e1c1f3f1e3d1c3e1k1e101c181g1m1d1h2e1u2g1o3d1h3g1a3e1k1g171g1i1c1e1e1f3d1s3e1e3f1q2e1q3e1f1c1w3f1t2e1r3c1y2e1u2e102e1w3f152c1v2g1y2c1t2e122e1r1c1l2e1u3e1y2e1v2e1j2c1w1e1l2c1u1e1y2e1q2c1i2e1v2e1i2e1w1g1d2c1u2f1d2c1u2f1m2e1q1e1q2e1u2e1t2e1w1g1o2c1u3g1r2c1s1g1z2e1q2c1z2e1u1c1s2e1u2e1w2c1w2g1v2c1u1e1h2e1s1e1e2e1v1c1w2e1u1g1d2c1w2f192c1u1e1r2e1q2c112e1v2e1z2e1w2e132c1u2f1z2c1u3e102e1q2e1w2e1t2d1x2e1w2f1o2c1w3e1u2c1t2g102e1q2e1f2e1w1e1b2e1v2g1v2c1w1e1e2c1u2e1z2e1s2e1v2e1u2e1y2e1u3e1t2c1w2e112c1t2e1h2e1q1d102e1w2d1h2e1v2f1b2c1v2f1a2c1u1g1l2e1q3e1k2e1w1e1z2e1u1e1p2c1w2e1t2c1s1f1h2e1q2e1m2e1u1e142e1t1f1s2c1u2e1t2c1s1e1b2e1q2c1u2e1u2e1v2e1v3e1b2c1v2g172c1s2f1z2e1r1c1x2e1u1e172e1u1g1q2c1v2g112c1t2f102e1s2c1x2e1w1e1o2e1v1e1x2c1u3e1b2c1u1e1l2e1q2c1s2e1v3c1z2e1v3e1v2c1v2e1j2c1t3e1x2e1r2c112e1v2c1o2e1w2e1s2c1v2e192c1s2g122e1r1d1l2e1v1c1x2e1w3g1r2c1v2f1a2c1t2g1c2e1r2e1d2e1u2e1r2e1w2f1v2c1u3g1y2c1t2e1v2e1s3c1x2e1w1c1v2e1v2e1y2c1w3e1z2c1s2f112e1r3c102e1w2c102e1w2f1y2c1w2g1x2c1u2e1y2e1s3d1s2e1v1d1x2e1u3g1v2c1w3g1q2c1s2e1r2e1r2e1u2e1v1c1q2e1w2f1r2c1u1g1e2c1s2e1k2e1q3e172e1u2d1t2e1u2e1h2c1u2g1z2c1s2e1l2e1r2e1g2e1w1c1a2e1w2f1x2c1u3e122c1u2g122e1s3e1k2e1u1c1d2e1u1f1y2c1w2e172c1t1f172e1r2c1w2e1v2c1y2e1v1g1g2c1v2g1r2c1u3e1l2e1q2e1d2e1v3d1w2e1v2e1u2c1v2g1v2c1t1e1z2e1s2e1f2e1w2c162e1t1e1u2c1u1g1j2c1u2f1v2e1r2c1l2e1w2e1j2e1w1e142c193e1t2c17141e2h1p1e1c1e1m2e141g1g3g1h1d1e3g161d1i1g1l1g1t2c1i2g1y2c1r1g1i2e1u1c1u2e1v2c1k2e1w2e162c1s2g1r2c1s1f1b2e1u2e1m2e1w2e1x2e1u2g1y2c1s3f122c1s2e1y2e1s1d1k2e1t2e1v2e1v3g1g2c1s2e1w2c1s1f1t2e1t2e1t2e1u2c1w2e1u2g1e2c1u1e112c1s3e1t2e1u2c142e1u2e1p2e1w1e1k2c1u3e1j2c1u2f112e1s3c1z2e1v1d1u2e1u1f172c1t3e182c1s1f1a2e1u3d182e1u1d172e1u3e1b2c1s3f192c1u3g1v2e1s1d192e1u3d1b2e1u3f172c1s3g182c1s1f1b2e1s3d1g2e1u3d172e1w3f142c1s2f1b2c1s3f112e1s1d192e1u3e1w2e1u3f192c1t3f1d2c1s3f192e1s3c1e2e1u3d182e1v3f192c1s1f192c1t3e1b2e1s3d172e1u3d192e1u2e1u2c1s2e1y1c1f1e143e161c1k3g1d1c141e141f142e1s2e1d1c1q1e1a3e1c1c1g3g161e1h3g1b1f1c3d1s1g1r3c1d1e1e3f1s2d1m1e1d3c1d3f1e3e1p1e1f2g1e3e1c1e1u1f1c3c1d2f181e1s1f1d1f1j3d1f1g1i3d1g2e1e1e1q3d1c3f1l3d183f162e1a1c1f3f1e3d183g1e3f1p3c121f161c1e1e1f3f1s3d1i1g1e1e1p1g1f1e141c1s3f1r3c181e1v3e1c1e1g1g1k3d171g1g3e1o1c1f1e1e2c1s1f1e3f1p1e1f3e1m1e1p3e141e1u3e1h2e1v2c1y2e1u1e1p2c1s1e1j2c1t3f122e1t1c1x2e1w2d172e1w2g1x2c1r1g1t2c1t1g1m2e1t2e1g2e1w2d1w2e1u2e1v2c1s2g1q2c1u1g1m2e1u2c1y2e1w2e1d2e1u1g102c1s1g1z2c1t3g122e1s3e1t2e1w2c1f2e1u1f1u2c1u3f1m2c1t2f122e1s2e1u2e1v1e1d2e1w1e1t2c1t2e122c1t2g192e1t3e1t2e1w3d152e1w2f1i2c1s2e1u2c1s3e1b2e1u3e1x2e1v2e1f2e1u1e1u2c1u2f1z2c1s3e1m2e1t2e1t2e1u2c1q2e1u2e1t2c1u2e102c1u3e192e1t2c1m2e1t3c1d2e1w1g1x2c1s3e1b2c1t2e1u2e1s1c1a1f1t2c1u2e1w2g1f2c1s2g1t2c1s2g1r2e1u2e1i2e1u3e1h2e1u2g1p2c1u1e172c1u1e1v2e1s2c1u2e1v1c1x2e1w2e1f2c1t2g1y2c1r1f1t2e1u3e1f2e1v3c1k2e1v2e1v2c1u1e1w2c1t1e1v2e1u1c152e1u1e1e2e1v2e1i2c1s2g1y2c1t2e1u2e1s2e1f2e1w3e1v2e1w2g1v2c1u3g1w2c1s2f1l2e1t2e1f2e1u3c1w2e1u2e1j2c1s2e1w2c1u2e1f2e1u2e102e1w3c162e1v2e102c1t3e1x2c1t2f1k2e1t2c1f2e1w2e1b2e1w1e152c1u1e1d2c1s1e1w2e1s3e1j2e1w3e172e1w2e1v2c1t3e1w2c1t2g122e1t3c1d2e1v2d1f1e1v2e1z2c1u2f1t2c1s1f162e1s2d1y2e1v2c152e1w1e102c1u1g102c1t2g192e1t1e102e1w2d1s2e1w2e1t2c1s2e172c1u2g1l2e1u3c1q2e1w2c1i2e1u1g1t2c1u2f1x2c1u3g1v2e1s2d1w2e1v2c1u2e1u2f1i2c1t1e1d2c1s2f172e1u2e1q2e1u2e1o2e1w3e1u2c1u2f192c1t2g1v2e1u2e1w2e1w2c1f2e1u2g1k2c1u1e1m2c1u1e1s2e1u3e1v2e1u3e1x2e1v2g1s2c1u2e1y2c1t3g1y2e1s2c1q2e1w1c1d2e1w2g102c1u3e1q2c1u2g122e1s2c102e1v3e1s2e1v2e142c1u2g1a2c1u1e1v2e1u1e1x2e1w1c1y2e1w2g1v1c142e193c1y3f121e121g2s1l2d2j2h2v1i1q1i221o", "79a60m3o1t3q221a271s393v2z1b3o0z101m252z2o193v2c1i193v1z1i1a2z173s3w1z2z141z133v392o1720241s3s2t202n1z3u242c133v392o1720241z2z1m232c1g2c29361w2v3s1z101m260w1z1029213v2z29361w2v3s1z101m2c162t2z2n1z2038231q25332c142z2v232c162s271z1z38231q25332c142z261w1a2s271w2s27162s271s2s271o2c1z3u261z1z3u261z3u243s2m3o0z1z2z293w121m252c2o1z1x21121z101m252c2o2m35202o1z2z2z29213v2026143o0z1c1c2t2c292o122s1z101d2z1o1z2z3823353u253u253r1336211z1z38371z2z141h1z1c1m2c162t2z2p2c29213v2z2o1g27312c293w121m121e1c1d1d1c1c1f1c122e1k1c1a2e1k1c183e181e151e1i1c1i1d1d2c1s1d1r2c1r2e1r2c1q2c1w2c1s2e1c2c1s1c1x2c1s3c1r2c1s2c122c1q2e1p2c1u1c1i2c1s3c1f2c1u2d1z2c1q3c1x2c1r1d1u2c1s1d1s2c1q2c1s2c1t3e1v2c1s2c1t2c1s2e192c1u1d1w2c1r2e1o2c1s2d1y2c1r2e1j2c1r1c1u2c1t2c1q2c1q2c1w2c1s3c192c1s2e1y2c1q3c172c1t3e1r2c1q2d152c1s3d1x2c1q3d152c1q3d1b2c1s2d172c1q3d182c1s1d192c1r3e142c1q3d182c1s3d1t2c1q2d152c1t3e1c2c1q3d162c1q3d142c1s3d172c1s3d182c1s3d182c1q3d1f2c1q1d192c1s3d1b2c1q3d152c1s3d1t2c1q2d172c1q3d162c1s3d152c1r3c1g2c1s2d172c1q3e172c1q3d172c1u2c1s2c1q2c1c1c1f1c1p1e1a1c1i2d1b3c1b2c141c101e123d1q3d1c1e1u1d1u2d1h2d161d121b1c3e1c3e1k1c193c1c3d1j3e113e1j1c1g1d1h3d1g2c161c1d2d141e1s1e1j3c1d1c1e3e121d1h3e193e1d3d1q1e1k3c1c1c1c3d1d3d1d3d1d3d1c3d1c1d192d1c3d1c3d1b1e1s3c1d1c121e1q2e1f3e1r3b1d2d1d1c1d1c181c1c2e192c1a1e193d1g2c1c2c1d1e1i1c1b3c1g1d1g2c1h1d1r2c1q1d1j3c1d3e161c1b3e1g1d1f1c1g2d1s1e1t2c1s2e1v2c1u2e1h2c1q2e1s2c1s3e1o2c1s2e162c1s3e1u2c1s2e1o2c1r1d1u2c1s1c1s2c1r1d182c1s3e1y2c1s2c1d2c1r2d1b2c1s1d142c1s2c1t2c1q2e1t2c1t1e1v2c1r1d1t2c1t1c1s2c1q1c1a2c1q2d1t2c1u3e1r2c1s3d1v2c1s3d1o2c1q1e1t2c1q2c1u2c1u2e162c1s2e1q2c1t1c152c1s1c1v2c1s3c1u2c1u3d1v2c1s2d1o2c1u2c102c1s1e1u2c1q1c1t2c1s2c1w2c1s3d1o2c1s2c1h2c1r1c1u2c1q3c1u2c1s2c1r2c1r3e1r2c1u2c102c1s2e1r2c1s2c172c1s1e1p2c1s2c1w2c1u2c1k2c1s2d1d3c1r2e1q2c1r1d1u2c1r1c1w2c1s1c1o2c1q1c1j2c1q1d152c1t1d1t2c1q2d1r2c1s2c102c1r2e162c1q2d1v2c1u2c1i2c1s1e1y2c1u3c1x2c1s2c1v2c1r2c152c1s2e1f2c1q2c1r2c1u2c172c1q2c1y2c1q1c1d2c1t2d1t2c1q2e1v2c1s2d172c1s1c1x2c1s1c1y2c1s1d1k2c1s1e1t2c1u3c1y2c1r2c162c1q2d1t2c1t2e1k2c1r2d132c1s2c1w2c1s1c1v2c1s2c102c1u2c1p2c1s2c1u2c1u3e1a2c1r2c1g2c1s2c102c1u2c1y2c1q2c1a2c1s2e1y2c1s1e1v2c1q2d1t2c1s2c132c1q3c1o2c1s1c1z2c1r2e1d2c1r3c1d1c1t2e1w2c1s3e1h2c1u3e1h2c1q3c1w2c1q2e102c1u2c1w2c1r1e1d2c1s1d1w2c1r2e1d2c1r3c1v2c1s2c132c1r2d1k2c1t1d1f2c1r2e1s2c1s2d102c1t1e152c1r3c1g2c1u2e1r2c1r3c1e2c1r2c1i2c1s3e1r2c1r3e1d2c1s3e1k2c1s1d1h2c1r1c1w2c1s2d1u2c1q3e1o2c1u2d1v2c1r1c1x2c1s2d1v2c1t2e1a2c1s2c1v2c1u2c1o2c1s1c1i2c1q1e1f2c1u1c1u2c1q2e1u2c1u1d1o2c1r2e1t2c1r2e1q2c1u1d1c2c1q2c1v2c1t1c1d2c1q2d1h2c1s2e1q2c1s2c1k2c1q1e1y2c1u2e152c1q1e1d2c1s2c1t2c1s1c181c142d1x2d1w3c1f321o2i3e193d1q1c191c131e103c141e1i3d171e1e2e1i1c1x3e1i3e152c1t3e1t2c1u2c1v2c1u2e192c1s1d1y2c1t2e1q2c1s2d1w2c1t2e1o2c1t1c1u2c1r2c1s2c1s2c1y2c1s3c172c1u2e102c1s3c172c1r3e1z2c1s2c1w2c1u1c1j2c1t2c152c1s1c1o2c1q3e1f2c1u2c1e2c1s3e1e2c1u2d1x2c1t2e1j2c1s2e1t2c1u3e1z2c1s2c1a2c1u1c1x2c1u2c1h2c1q1d182c1u3d1a2c1s3d172c1s3d1a2c1s3d192c1s3d1o2c1s3d192c1t3c1b2c1s1d182c1u3e152c1q3d172c1t3d1d2c1s1d162c1u3e102c1s3d182c1q3d192c1s3d182c1s3c152c1s3d172c1s3c1d2c1q3d172c1s3e1o2c1s3d172c1u3d1c2c1s3d172c1q3d1j2c1s2d182c1u3d1c2c1s1d172c1s3d1b2c1q2c1z2c1s2c1k1c1h3c1d2d1e1c1h3b1c3d1c3c192c141c103b1d2e181d171e1c1e1g3d1g3c1c3d1d2e1k1c1o1c1i1d1h1e1a1c1h1c1b2d1k3d183d1d3c1a1d1g3d141e1h1c101e1w2d1j1d181c121b1b1e1e3d1p1c1b3c1c3e1h3e1e3d1e3e1e3d1e3c1d3d1c1d1k3e1k3d1w1e122c1e1c1b1c1d1e1h1d1k3c1y3e1c2e132c1a3d122d1c3c1g1c1i3c1c1c1q2e1p1c1c2e1b3d143e1b2e1i1d1k1e1h3c121e121c1a1d1r1e1b3c1e1c133c1u1e172c1s1c1o2c1r2e172c1t2e1y2c1s1c1o2c1s1c1h2c1s1d182c1s1c1t2c1u3c1d2c1u2e1g2c1s3e1y2c1s1c1u2c1r2c1i2c1s3e1u2c1r3e1w2c1s2c1f2c1u1e1w2c1s2c1f2c1t3c102c1u2c1h2c1s3c1w2c1s3e1h2c1p2c1y2c1s3e1t2c1s3c1h2c1t1c1h2c1s2e1h2c1r1c1f2c1u1c1q2c1t2d1k2c1u2c1x2c1s2d1v2c1q3e1t2c1u3e1q2c1t2d132c1u1c1z2c1s2e1u2c1s3c1t2c1u3c152c1s2e1v2c1s2e1y2c1u2e1b2c1s2e1r2c1u1c1d2c1t2d1s2c1t1e1u2c1s2e1u2c1q2c162c1t2d1w2c1s2c1y2c1t3d1f2c1t1c1u2c1s3e1o2c1u2e1v2c1u2e1g2c1s3e172c1u3e1j2c1r3e1f2c1t3d1w2c1t2c1h2c1u2c1w2c1s3c1f2c1q2e1f2c1t2c1r2c1s2c1i2c1u2e1z2c1t2e1v2c1s2c152c1t2c1u2c1u2c1r2c1u3d1k2c1s2e1k2c1q3e1h2c1u2c1v2c1t3c1s2c1s2e1y2c1u2c1f2c1s3c1f2c1t1c152c1t2e1b2c1s2e1y2c1t3c152c1s2e1c2c1u3c1w2c1t2e132c1t2c1o2c1t2d1w2c1q2c1q2c1t2c1w2c1u1e1s2c1u2e1f2c1s2e1j2c1s2d102c1t2e1w2c1s2c1r2c1t2e1v2c1u3d1q2c1r2c1r2c1u2c102c1t2c1u2c1u1e102c1t2e1k2c1q1c1s2c1u1e102c1r1d1s2c1s3c172c1s1d1y2c1r2c1u2c1u1c1t2c1u3d1w2c1t1c142c1t2c1k2c1q3c102c1u3d172c1s3e1u2c1s1e1s2c1t3e1g2c1r1c1v2c1t2c1j2c1s1c1w2c1t2c1a2c1s2c1s2c1q1e1q2c1s1d1t2c1t1d1r2c1s3e1p2c1s2e1d2c1r3c1v2c1s2d152c1s3c1r2c1t2c1c2c1s3e1f2c1q2e1g2c1u3e1t2c1u2e1i2c1u2c1o2c1s2c1w2c1s2c1f2c1u1c1p2c1t3c142c1s2e1p2c1u1e152c1s3c1w2c1s2e1x2c1s2c1f2c1s3c1s2c1u2c1u2c1s2d1f2c1s2d1i2c1s1c1s2c1s2c1s2c1t2c1t2c1r2c1k2d1t3d153c1x2c1f122o2d1g1e1g3e1u1e1j2d191c1j1d191d1f1d1d1c1h1c1u1e1o3c1s3d1e2c1q2c1i2c1s3c1z2c1u2c1t2c1u1d1r2c1t1c1g2c1q1d1x2c1t2c1p2c1u1e1t2c1t2c152c1u2c1y2c1q3c1e2c1u2c1r2c1s1d142c1s2c1u2c1s2e1k2c1r3c1z2c1u2e1y2c1t2c1w2c1s3d1k2c1s2c182c1q3c1r2c1u2c1q2c1t1c1e2c1u2c142c1u2c1z2c1q2c1b2c1u2e1e2c1t3e1h2c1s2d182c1s3c1c2c1q1d192c1s3e1b2c1s3d162c1t3c192c1s3d172c1q3c1h2c1s2d182c1u3c1b2c1s1d192c1s3c1h2c1q3d182c1u3d192c1s3d172c1s3c1z2c1s2d192c1q3d1b2c1s1d192c1s3d1a2c1s1d172c1t3e1b2c1q2d182c1s3d182c1s2d152c1t3c1j2c1s2d182c1q3d192c1s3d172c1s3d1r2c1s2c1u2c1f1c1f3b123e1f2d182e1c2e1c1c1g1e1p3e1y2e1c2c1c1e1a1e1h1c1b2d1k1d183d1b3c1a1e1g3e141d1h1d101e1w2d1j3d183c121b1d1d1e3e1p1c1b3c1d3d1h3d131e1o1c1i1d1h1d1e2c181c1c2d161e1s1d1h3c181c181c181c181c1q1e1j1c1a1c1a1e123b1d1e1c1c1i2d1c3d1f1c101e143e1d3c1c3d1e3d1h1e1c2c192d141d1c1c1d3c1c2d1i3d1a1e1g1d1d1e1k1e1h2c1s3d1j3d132d1e3e142d1e2d1c1c1d3c152c1s2d1v2c1t2c1k2c1s3e1d2c1t1e182c1r2c1k2c1t3c1u2c1t2e1y2c1s2e1f2c1t2c1k2c1q2d1v2c1t2c1y2c1s2c1y2c1r1d1u2c1t3c1i2c1s3c1z2c1s2d1o2c1u2d1d2c1u1c1j2c1u2e102c1r1c142c1t3e1v2c1t2c1h2c1s2c102c1s1e1v2c1s2d1s2c1s2c1f2c1s2e1b2c1s2c1w2c1s3c1u2c1s2c152c1s2d102c1t1d1w2c1s2d1z2c1u3d102c1r2e152c1u1c1w2c1t3e1k2c1s3c1u2c1s2c182c1q2c1s2c1t2c1v2c1u1c1r2c1u1c1t2c1t2e1a2c1s2d1s2c1t2c152c1u1c1b2c1u2c102c1u2d1r2c1q2c1h2c1k3c1x2c1u3c1q2c1s3e1y2c1s3d1v2c1s2e1z2c1u1e152c1u1c1r2c1t2d1f2c1u2c1k2c1s3c1w2c1t2e1d2c1u1e1w2c1s3e1x2c1u2e1j2c1r3e152c1t2e152c1s2e1r2c1t2c1k2c1u1e1i2c1s3e1k2c1u2c1g2c1t1c1s2c1u2c1u2c1r2c1t2c1r3d1v2c1s2e102c1s1c1r2c1u2c1c2c1u2c1y2c1s2e1p2c1t2c152c1s2e1v2c1s2e1z2c1t2e1x2c1r3c1v2c1t2c1a2c1t2e1y2c1r2d152c1u2e1y2c1r1d1x2c1u3d1t2c1u2c1d2c1u1e1j2c1t3c1d2c1s1c1c2c1s2c182c1t2c1r2c1t3d172c1u1d1t2c1q2e1a2c1s2d1t2c1f2d1o2c1u2d1p2c1s2c1f2c1r3c1v2c1s3c1v2c1t2c1d2c1u3e1h2c1u1c1t2c1r2e1h2c1u3e1p2c1t3e1r2c1u2e1x2c1u1e1y2c1r2c102c1s1e1t2c1u2c1h2c1s3c1u2c1s2e102c1s2e1u2c1s1c1u2c1t3c1t2c1u2e1k2c1t2c1u2c1q2c1w2c1t1d1x2c1t3c132c1s3e1t2c1s2d1s2c1s1c1z2c1u1c1x2c1u2e1s2c1s3c1g2c1s2d1g2c1r3c152c1r2c182c1u3e1q2c1u1e1t2c1t1c102c1s2e1z2c1t1c1i2c1s3d1r2c1u2c152c1s2c1v2c1q2c1v2c1u2c1a2c1u3c1t2c1u2c1x2c1u1c1f2c1s3c1f2c1u2c1j2c1t1d1s2c1f2c1w2c152d192c1f171g2q1d1r2r2p1o1b2h1f1r14", "f6d282933313w331w371e25203o193v2c1b3o001z1m253z3o2m252c2o2m2w23381e232z1g2c29361a2v3s1z3z1m260w1z3z39213v3z39361a2v3s1z3z1m2z162t3z2n1z3038231q25333c142z2v233c1w2s271z1z38231q25333c142z261w101z141z133v392o172z341s3s2t2z3n1z3u243c133v392o172z24101z1m231z3u261z3u261z3u261z3u2o3z39213v2c29213v29213v252y393v2c1z1z2233143o00202c293w121m2c1b3o0z2z2k221z3z1m2z1z1z3s271z3z1d393v2c181w10202v3u2s332c101z1c1m1z133v27211t302o12232520332c1626332z1d1e182c143z261w1z101z302s271z101m3s350z3z223314331e1d3d1j1e1k1d1f1c1o3d1h2e1o3d1f3e183e1i1e1g1c1f2d1e3c1s3d1i2c1r3c1x2c1u2e1y2c1r2c1w2c1q3d1k2c1s2c162c1q3c1p2c1u2c1q2c1r1c1e2c1s3c142c1u2c1x2c1q2c192c1u2e1e2c1r3e1h2c1q2c1u2c1s1e122c1s2e1p2c1s2c1z2c1s2c1e2c1s3c1t2c1u2e1u2c1r2c1r2c1u2e1g2c1r2c1v2c1s2d1y2c1u2c162c1q2e1v2c1u2e1b2c1q1d142c1s3e1v2c1s2d172c1q3d172c1s1d182c1q3e1x2c1q3d192c1s3c1g2c1q2d152c1u3d142c1q2d152c1r3d1o2c1s2d172c1s3d122c1s3d192c1s3c1a2c1q3d172c1u3d1b2c1q3d152c1t3d1c2c1q3d152c1q3e1b2c1s2d152c1r3d1x2c1s3d162c1s3e182c1q2d182c1u3e1t2c1q3d152c1s3e192c1q3d1s2c1q2c1u2c1f1c1f3d1e1e1e3e1u1e141e1q2e1b1c1g1d121e143d1e1c1e1c1q2e1q3e1c3c1h3c1d2d191d1j2d183e103c171d1d1e1g3d1g2c1d3d1q3e1i1c1o1c1i1e1f3d1a1c1f1c1b1d1k3e163d1d3c181d1g3e141d1f1c101c181c1a1c1a1c183e1k1e1q2d1b1d1b1d1k3d1d1d1e1e1d1e1p3c102c121e1y1c1c3d1c3e1i3e1r2e1q2c1d1d1a3e1q1c1q3c1e3d1e3e141d1g1e1q1d1e1c1u1e1h3d1a3c1d1e1i1c123e1c3d1e1e1t2e1d2c1u3c1u2c1r2c1y2c1q1d1y2c1t1c132c1r2c1q2c1s2e192c1s1c1p2c1q1e1j2c1u2e1f2c1r3c1g2c1t3e182c1s2e1y2c1s3e1o2c1u2d1d2c1q3e1r2c1t3e1s2c1s3c1h2c1r2e1k2c1s1e1e2c1r3c1g2c1t1c1x2c1r2c132c1r3c192c1t1e132c1s3e1h2c1s2e1q2c1q1c1u2c1s3e1y2c1s2d1g2c1s2e1g2c1u3c172c1q3c152c1q3d1y2c1u3c1w2c1q1c1k2c1s2c1f2c1s2c1x2c1q2e1c2c1s2e1y2c1r2c1k2c1u2e102c1r2e1r2c1r2c102c1s1d1s2c1r3c1s2c1r2c1v2c1s3c1f2c1r3c1y2c1u3c1r2c1s2e1p2c142c1v2c1q2e1d2c1s2e1i2c1s3d1i2c1q2e1b2c1u1e1i2c1s2c1d2c1r3c1w2c1s2e1x2c1s2e1q2c1s1e1v2c1p1d1x2c1r1c1j2c1u1e132c1r1d1o2c1u1c1w2c1s1c1s2c1r2e1t2c1u1d1x2c1r1c1x2c1u2c1j2c1q2d1r2c1r3c1p2c1s2c1v2c1q3c1d2c1u1c1k2c1q2e1d2c1q3c1k2c1t2d152c1r2e1o2c1u2e1u2c1s1c1s2c1q1c1u2c1t1e1x2c1s2c1f2c1u2c1y2c1r1e1t2c1p3c1x2c1s1d132c1q3c1y2c1u3e1q2c1s2c1u2c1r1c1u2c1s2d1x2c1r2d1i2c1u2e1q2c1s2e1v2c1q3c102c1t3c1h2c1s1e1s2c1t3c1b2c1d3c1s2c1s3c142c1t2c132c1q2c132c1u2c1x2c1r2c1w2c1q1c1i2c1u2c1d2c1q1c1r2c1s1e142c1r1c1v2c1s1c1u2c1u1e1j2c1r2e1t2c1s1c1r2c1s2e1i2c1q3e152c1u1d1r2c1r2e132c1s2d1z2c1r2c142c1q2e102c1t2c122c1q2e1g2c1s3e1h2c1r2d1q2c1q1c152c1s3c1o2c1r2c1h2c1t3e1v2c1p1e1o2c1q3c1w2c1s3d1u2c1q2d1e2c1t2c1h2c1s1c1d2c1s2e1v2c1u2e1d2c1r2e1v2c1u3e1v2c1s3c1d2c1s3c1u2c1t2c1f2c1s2c1v2c1s2e1s2c1s2d1r2c1s3c1i2c1u2e1r2c1s2e1d2c1u2e1z2c1s3e1g2c1d2d1z2d1x3c122d10121p223c161c1k3e1e2e1c3d142c1i3d1a1e1e1d1q2e1j1c123e1c1c1p3e142c1u2e1r2c1s2c1x2c1u2c1g2c1u3c1t2c1s3e1w2c1t3c1t2c1u2e1e2c1t2c1x2c1u2d1y2c1s2c182c1s2e1x2c1u2e192c1s1d162c1s2c1z2c1q1e1g2c1u1c1u2c1t3c1i2c1u2c162c1s2e1p2c1q1d192c1u2e1p2c1u2e1v2c1s2e1y2c1s3d102c1q3c1w2c1s1d1k2c1r2e1t2c1t3e1g2c1s1d192c1s3e182c1s3d192c1t3e142c1s1d172c1u3d1c2c1q2d172c1u3e1g2c1s3d172c1u3d1d2c1s3d182c1s3e1b2c1s3d172c1s3d152c1s2d172c1u3c1a2c1q3d182c1s3e1a2c1s3d162c1s3d1a2c1s1d172c1r3d1b2c1s3d192c1s3d132c1s2d172c1u3e1w2c1q1d172c1s3d1b2c1s1d152c1s3c1z2c1s2c1w2c1i1c123d1o1e1k1d141e101e142e1s2e1c3d141e1y3e1i1d1d3c1d1d161e1d1d1b1d1q3d1c3e1g3d1e1c1d1c1c1c1c1e1p3c1d1c183d131e1h2c1b2d1i1d1c1c1g2c1s1e1j3e1b1c1j3c1c2d1b3e1j1d161c122c192d1b1d1b2d192d1b1c181c1d3d183d133c1i1d1s3d1f1e1c1e1d1c1c3c1b1c191d1r1e1q1e121c1u1e143d1c3d151e1h1d1s2e1j2e1p1c183e181d1p3e1d1c1h1c1d1c1g2c1c1e1h2c1i2e1d3d1f2c152d1k2c1s2c1k2c1t3e1o2c1s3e1o2c1q2d1f2c1s3e1d2c1u1c1d2c1s2c1h2c1u1e152c1s1e1t2c1t2c152c1t1c1b2c1t1c1t2c1t1c172c1r3e182c1t1c1x2c1t2e1g2c1s2e1s2c1t2e152c1r2c1w2c1s2d102c1u2c172c1u2e1s2c1s2c152c1r2c182c1s1e1k2c1u1e1s2c1u2e1h2c1u1c1f2c1r3c1v2c1s2d1x2c1s3c1q2c1s2c152c1s3c1a2c1s2c1s2c1u3d1f2c1t2c1u2c1u2e102c1t2c152c1r2d1y2c1s3c1x2c1u1c1s2c1t1c1z2c1s2c1d2c1s3d1s2c1u2c1j2c1u2d1v2c1s2e1s2c1t2c1u2c1q3e1x2c1u1e152c1x3c1d2c1u1c162c1u1c1s2c1q3c1x2c1u1c102c1s1d122c1t2c152c1u2e172c1q2e1t2c1t1c1s2c1t1e152c1s3c1x2c1s2c1q2c1s2e1y2c1s3d1x2c1s2d1r2c1u2c1o2c1t1e1y2c1r3e1t2c1u2e102c1s2e1r2c1t3c172c1u2c1o2c1q3c152c1t3c1x2c1u2c1v2c1s2c1b2c1u2d1f2c1s3c1v2c1s1e1v2c1s2d132c1u2c1s2c1u2c152c1q1c1u2c1s2c1v2c1s3d1y2c1t2c1v2c1s2d1s2c1r3c1b2c1u3c1z2c1t1e1s2c1s2e1z2c1s2e1x2c1q3e1t2c1u3d1q2c1u1d152c1u2c1v2c1u2d1y2c1s2c1t2c1s2d1h2c1t2c1s2c1t2e1k2c1s2e1j2c1r2e1f2c1s3c102c1t3c1g2c1s3e1v2c1u2e1d2c1r2c172c1s2e1d2c1s2e1w2c1u2c102c1u2c152c1p2c152c1s2c1j2c1s2c142c1s2e1f2c1t2c1w2c1r3c1f2c1s1c1u2c1t3c1v2c1t2c1h2c1s1e1g2c1s2c1j2c1s1c192c1s1c1t2c1u3d172c1t2c1p2c1q3c152c1t3c1u2c1u1c1d2c1u1c1o2c1u2e102c1q3e1y2c1s3d1w2c1s2d1o2c1s2c1z2c1t1c1k2c1s2c142c1u1c1t2c1u1e1d2c1t2c1b2c1t2d1t2c1r2c1t2c1s2c1c2c1u1d1o2c1u3c1v2c1s2c1p2c1q1e1h2c1u2e1q2c1s1e1y2c1u1c1s2c1w3c173d122d1v3c171s1s2d1e3e1c1c1g3c1p1e1j1d1k1c1d3c1e1d1g1d1g2c1h1e1b2c132c1u1c1o2c1t2c152c1q1c1o2c1s3e1f2c1u2c1c2c1s3e1g2c1u1d1x2c1r2e1j2c1u2e1t2c1u3e1x2c1s2c1c2c1u1c1x2c1s2c1h2c1s1c1u2c1s2c1u2c1t2c102c1u2c1z2c1r2d1u2c1s1c152c1t3e1w2c1u2c152c1t3e1u2c1s2c1k2c1u1c1z2c1u1c1v2c1s3d1w2c1t2c1t2c1q2d172c1t3c1z2c1s3d162c1s3c1b2c1s3d192c1s3e1d2c1s3d182c1s3d1b2c1s2d172c1t3d1z2c1q1d172c1s3c1k2c1s3d152c1s3d162c1s1d192c1q3d152c1s3d182c1s3d1t2c1s3d192c1s3e1g2c1q2d192c1s3d1b2c1s1d152c1s3c1q2c1s3d192c1s3d1t2c1s3d182c1u3e1w2c1s3d172c1s3d192c1q3d172c1s2c1u2c1s2e1d1c123e193d1q1c1p3d1p3b1d3d1c3c1b2c1p3c1w2d1k3e1c1c1c1e1p3c1b1c183e131e1h2c1b2d1i1e1c1c1g2c1s1e1c3e1d1c1j3c1d2d1b3d1j3d161c122c191d1c1e1g3d1e2c1c3d1s1d1k3c1o1c1g1e1h1e1c2d1k3d1k1d1i3e1k3e1c3d1c3e1j1e1f3e141c1c2e1f3d1s3c1b1c1c1c1i2d121d141d1d2d1b1e1h3b1s2d1s2d1d3c1d2e141d1o1e1a1e1g3c1j1c1c2e1c3c1x1c102c191d1s2d1b3d1w1e1q2e1f3c142c1s1c1y2c1s2c1s2c1u2e1d2c1u1c1h2c1u3e1u2c1u2d102c1s3c1t2c1u2e1x2c1u2c1y2c1t1e1s2c1s1d1y2c1q2c1r2c1t2e1h2c1u2e152c1s1d152c1s2c1t2c1r1c1o2c1u3c1f2c1s2c1o2c1u3e1k2c1u2d102c1q1e1v2c1t2c1v2c1u1c1h2c1s3e1w2c1t2c1o2c1r1c1x2c1s2d1s2c1s3c132c1s3d1w2c1u2c1v2c1r3c1f2c1u1c1x2c1s2e152c1u3c1v2c1u2c1i2c1s1e152c1u2c1a2c1t2e1v2c1u1e1t2c1s2c1t2c1q2c1b2c1s2c1e2c1t3c1w2c1t3c1t2c1t1c1q2c1q1d1f2c1u2c1z2c1u3c1s2c1t2e1y2c1s3c162c1r2e182c1t1c152c1s2c152c1s2e1q2c1t1e1j2c1s1d1f2c1s2c1w2c1u3e1r2c1s2c192c1u2d1q2c1s2c1k2c1s1e142c1t2c1q2c1t2c102c1s1c1u2c1r1d1o2c1u2e1w2c1t2c1h2c1s2d152c1u3c1x2c1q1e1k2c1s1c1p2c1t2c1o2c1u2d192c1s1c1z2c1s2c1j2c1t2e1t2c1u2c1w2c1s1c1w2c1s1d1v2c1r2c1z2c1s1e1v2c1s2d1r2c1u1c102c1t3c1u2c1s3c1w2c1t3e1x2c1u2c1t2c1t1d1h2c1t1e1c2c1r1c1s2c1s3c1b2c1s1d1c2c1t2c1h2c1r1c1q2c1q3c1r2c1r2d172c1t2e1d2c1t3c1y2c1u1e1x2c1s1e1t2c1t2c1y2c1u2e1w2c1u3e152c1u2c102c1s3c1t2c1u3c162c1u3e1h2c1r3c1y2c1t3e172c1r2c152c1t2d1p2c1s3e1h2c1u1e1y2c1t2c1i2c1q1c1y2c1s2d1a2c1t2e1o2c1t2e1r2c1t2e1i2c1r2e172c1t1c1u2c1s3e1r2c1t3e1t2c1u2e1e2c1q2c102c1t2c152c1s3e1r2c1s2c1h2c1u2c1k2c1r1c1z2c1t1d182c1u1c1t2c1s2e1c2c1u2e1x2c1s2e102c1r2c1j2c1s2c1k2c1t2e1v2c1t2c1f2c1s1e152c1t3d1t2c1u2c1r2c1u3e1t2c1u3e1o2c1q2e102c1s3e1x2c1s3c1d2c1t2d172c1u2e1t2c1q2c1h2c1u2d1z3d1w3c1r2c1t3c121j1o2g1g1r1p1d2i1t2d1k141")),
        this.break = function() {
            die_error || ErrorLoad()
        }
        ,
        this.Ready = function() {
            o.actions.VastReady(vast)
        }
        ,
        this.disablePreload = function() {
            _preload = !1
        }
        ,
        this.Status = function() {
            return _status
        }
        ,
        this.info = function(e) {
            return !!vast && vast[e]
        }
        ,
        this.getVolume = function() {}
        ,
        this.preloaded = function(e) {
            return _preloaded.indexOf(e) > -1
        }
    }
      , VastVideo = function() {
        var vast, over = o.mousehere, no = ["desktop", "mobile", "mobiletv", "tv", "lg", "winmob"];
        o.vastcontainer = createElement("div"),
        css(o.vastcontainer, {
            position: "absolute",
            left: 0,
            top: 0,
            width: "100%",
            height: "100%",
            "background-color": exist(v.vast_bgcolor) ? v.vast_bgcolor : "#000000"
        }),
        o.frame.appendChild(o.vastcontainer),
        o.system.mobile || (o.vastcontainer.addEventListener("mouseover", onOver, !1),
        o.vastcontainer.addEventListener("mouseleave", onOut, !1));
        var tag = createElement("video"), duration, paused, controls, uiplay, uiplay2, uibuffer, uiposter, uit, uitxt, uimute, uifull, uinorm, uiunmutebut, uiprogress, uix, uiskip, vpaidframe, vpaidslot, vpaidslot2, vpaid, vpaid_int, vpaidframe_int, vpaid_t, vpaid_stop_t, vpaid_complete_t, vpdimpr_t, vpdskp_t, push_wait_int, video_t;
        o.vastcontainer.appendChild(tag),
        o.vastcontainer.style.zIndex = 3001,
        hide(o.vastcontainer),
        css(tag, {
            width: "100%",
            height: "100%",
            "object-fit": "contain",
            "min-height": "auto",
            "max-height": "none",
            "min-width": "auto",
            "max-width": "none"
        }),
        1 !== v.vpaid_waitstart && css(tag, {
            autoplay: 1
        }),
        attr(tag, {
            preload: "auto",
            "x-webkit-airplay": "deny",
            "webkit-playsinline": !0,
            cursor: "pointer",
            playsinline: "1",
            pip: "false"
        }),
        1 != v.vast_unmutehover && 1 != v.vast_unmutebut || (tag.muted = !0,
        attr(tag, {
            muted: "true"
        }));
        var vpaidvolume = 1, vpaidvolume2, vpaidstopped = !1, vpaidstarted = !1, vaststart = !1, vaststarted = !1, vpaidskipped = !1, vpaidcompleted = !1, vpaidvideostarted = !1, vpaidquartile = !1, vpaid_int2, removed = !1, last_skiptime = 0, last_time = 0, imgtime = 0, img_int, omid, _move = !1, _go = !1, _muted = !1, muteicon = "<svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'><g><path fill='" + v.vast_volumecolor + "' stroke-width='0' d='m2.49931,6.8746l0,6.25079l3.10029,0l4.64114,4.37461l0.00276,-15l-4.64182,4.37461l-3.10237,0l0,-0.00001zm10.44167,-0.75275c-0.26762,-0.30766 -0.69733,-0.30766 -0.96359,0.00158c-0.26557,0.30925 -0.26557,0.80989 0.00136,1.11992l0,-0.00157c0.58769,0.68334 0.94997,1.62056 0.94997,2.66218c0,1.04083 -0.3616,1.97489 -0.94861,2.65823c-0.2683,0.30766 -0.2683,0.8083 -0.00136,1.11912c0.13279,0.15423 0.30713,0.23173 0.48146,0.23173c0.17501,0 0.34934,-0.0775 0.48213,-0.23173c0.83216,-0.9649 1.34835,-2.30548 1.34767,-3.77735c0.00068,-1.47504 -0.51755,-2.8172 -1.34903,-3.7821l0,-0.00001zm1.55246,-1.75907c-0.27124,0.30979 -0.27124,0.81211 0,1.12031c1.00334,1.14962 1.62195,2.73104 1.62195,4.4852c0,1.75256 -0.61861,3.3332 -1.62056,4.48361c-0.27125,0.30899 -0.27125,0.81053 0,1.12031c0.13493,0.1545 0.31208,0.23214 0.48991,0.23214c0.17713,0 0.35428,-0.07764 0.48921,-0.23214c1.25105,-1.43327 2.02674,-3.41876 2.02536,-5.60392c0.00069,-2.18675 -0.775,-4.17383 -2.02813,-5.60551c-0.27194,-0.30979 -0.70857,-0.30979 -0.97774,0z'/></g></svg>", unmuteicon = "<svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'><g><path fill='" + v.vast_volumecolor + "' stroke-width='0' d='m2.49931,6.8746l0,6.25079l3.10029,0l4.64114,4.37461l0.00276,-15l-4.64182,4.37461l-3.10237,0l0,-0.00001z'/><path d='m18.125,12.20836l-2.20816,-2.20816l2.20776,-2.20816l-1.13498,-1.13579l-2.20816,2.20816l-2.20816,-2.20816l-1.13498,1.13579l2.20776,2.20816l-2.20816,2.20816l1.13579,1.13539l2.20776,-2.20816l2.20776,2.20816' fill-opacity='null' stroke-opacity='null' stroke-width='0' fill='" + v.vast_volumecolor + "'/></g></svg>", impression = !1, remainigs = 0, unmute_volume = 0, slow_unmute, js_events, remove_t, complete_t, ytag, youtube = !1, vimeo = !1, mp3 = !1, ytinterval, imps = [], qrts = [], start_timeout = !0, _started = !1;
        if (1 !== v.vpaid_waitstart) {
            var pp = tag.play();
            void 0 !== pp && pp.then((function() {}
            )).catch((function(e) {
                e.message.indexOf("interact") > 0 && (log("play mute"),
                tag.muted = !0,
                attr(tag, {
                    muted: "true"
                }))
            }
            ))
        }
        function CreateUiBut(e, t, i, s, r) {
            css(e, {
                position: "absolute",
                bottom: t,
                right: i,
                "text-align": "center",
                cursor: "pointer",
                transform: "scale(1)",
                "border-radius": 30,
                height: 30,
                width: 30,
                "padding-top": 5,
                "box-sizing": "border-box",
                zIndex: 1,
                transition: "background-color 0.2s linear"
            }),
            e.innerHTML = s,
            o.vastcontainer.appendChild(e),
            PtrNn(e),
            SvgColor(e, "#fff"),
            e.onclick = r,
            e.addEventListener("mouseover", onOverMute),
            e.addEventListener("mouseout", onOutMute),
            onOutMute(null, e)
        }
        function onOutMute(e, t) {
            var o = e ? e.target : t;
            css(o, {
                background: hex2rgb(v.vast_volumebgcolor, existv(v.vast_volumebga, .5))
            })
        }
        function onOverMute(e, t) {
            var o = e ? e.target : t;
            css(o, {
                background: hex2rgb(v.vast_volumebgcolor, existv(v.vast_volumebga, .5) + .3)
            })
        }
        function onOutSkip() {
            css(1 == v.vast_skip2right ? uiskip : uiprogress, {
                "background-color": hex2rgb(v.vast_skipbgcolor, existv(v.vast_skipbga, .5))
            })
        }
        function ImgLoaded() {
            imgtime = 0,
            duration = exist(vast.duration) ? vast.duration : 10,
            img_int = setInterval(onTimeupdate, 100),
            onTimeupdate(),
            Event("start", !0)
        }
        function PlayStart() {
            var e = tag.play();
            void 0 !== e && e.then((function() {}
            )).catch((function(e) {
                (log("playError VAST", e.message),
                1 == vast.pause_mute) ? (Pause(!0),
                o.actions.VastShow()) : die_error || removed || (onMute(),
                tag.play().then((function() {}
                )).catch((function(e) {
                    log("playError2 VAST", e.message),
                    Pause(!0),
                    o.actions.VastShow()
                }
                )))
            }
            )),
            video_t = setTimeout(tagTimeout, 1e3 * v.vast_timeout),
            vaststarted = !0
        }
        function vpaidframeloaded() {
            try {
                if (vpaidframe.contentWindow) {
                    clearInterval(vpaidframe_int),
                    js2("vpaidframeloaded");
                    var e = '<!DOCTYPE html><html><head><meta charset="UTF-8"></head><body style="margin:0;padding:0"><script type="text/javascript" src="' + vast.file + '"><\/script><script type="text/javascript">window.parent.postMessage("PJS_VPAID_LOADED","*");<\/script></body></html>';
                    window.addEventListener("message", waitVpaid),
                    vpaidframe.contentWindow.document.open(),
                    vpaidframe.contentWindow.document.write(e),
                    vpaidframe.contentWindow.document.close()
                }
            } catch (e) {
                log("VPAID frame error"),
                onError(901)
            }
        }
        function waitVpaid(e) {
            "PJS_VPAID_LOADED" == e.data && (window.removeEventListener("message", waitVpaid),
            initVpaid())
        }
        function initVpaid() {
            if (vpaidframe.contentWindow) {
                var e = vpaidframe.contentWindow.getVPAIDAd;
                e && "function" == typeof e && (vpaid = e()) ? Vpaid() : onError(900)
            }
        }
        function CheckMuteStart() {
            (0 == v.vast_volume || o.muted && 1 != v.vast_resound || 1 == vast.mute || 1 == v.vast_unmutehover && !o.mouseHere && !o.system.mobile || tag.muted || 0 == tag.volume) && -1 != vast.mute && onMute()
        }
        function startTimeout() {
            start_timeout = !1
        }
        function onLoadStart() {}
        this.break = function(e) {
            exist(uiplay) && (log("VAST break " + (1 == e ? e : "")),
            js("vast_break", VastInfo()),
            1 == e ? RemoveAndPlay() : onError())
        }
        ,
        this.Go = function(x) {
            if (removed && show(tag),
            tag.volume = .4,
            duration = 0,
            paused = !1,
            controls = !0,
            impression = !1,
            remainigs = 0,
            removed = !1,
            last_time = 0,
            last_skiptime = 0,
            vast = x,
            die_error = !1,
            js_events = [],
            _go = !0,
            vast.omid && !vast.isVpaid && "undefined" != typeof PluginVastOmid && (omid = new PluginVastOmid(vast,tag)),
            show(o.vastcontainer),
            exist(vast.extensions.controls) && (0 !== vast.extensions.controls && "0" !== vast.extensions.controls || (controls = !1)),
            1 != vast.nocontrols && 1 != v.vast_nocontrols || (1 == vast.nocontrolsvpaid ? vast.isVpaid && (controls = !1) : controls = !1),
            1 == vast.yescontrols && (controls = !0),
            o.controls && o.controls.SettingsVisible() && o.controls.Settings(),
            exist(vast.prt) && (vast.prtg = 1),
            vast.isVpaid && 1 == v.vast_novpaid)
                onError("NO VPAID");
            else {
                var stop = !1;
                if (exist(vast.file) && ((vast.file.indexOf("youtube.com/") > -1 || vast.file.indexOf("youtu.be/") > -1) && (youtube = !0),
                1 == v.vimeo && vast.file.indexOf("vimeo.com/") > -1 && (vimeo = !0),
                vast.file.indexOf(".mp3") > -1 && (mp3 = !0),
                "intro" == vast.adsystem))
                    for (var i = 0; i < no.length; i++)
                        if (vast.file.indexOf("[no_" + no[i] + "]") > -1 && (vast.file = vast.file.replace("[no_" + no[i] + "]", ""),
                        o.system[no[i]])) {
                            onError("no " + no[i]),
                            stop = !0;
                            break
                        }
                if (!stop) {
                    if ((vast.isImg || vast.isVpaid || youtube || vimeo) && (vpaidslot = createElement("div"),
                    o.vastcontainer.appendChild(vpaidslot),
                    css(vpaidslot, {
                        position: "absolute",
                        top: "0",
                        left: "0",
                        width: "100%",
                        height: "100%"
                    })),
                    youtube && (ytag = new MediaYoutube("intro" + vast.file,vpaidslot)),
                    vimeo && (ytag = new MediaVimeo("intro" + vast.file,vpaidslot)),
                    !youtube && !vimeo) {
                        var elm = vast.isImg ? vpaidslot : tag;
                        o.system.mobile ? (elm.removeEventListener("touchstart", onTouchStart),
                        elm.removeEventListener("touchmove", onTouchMove),
                        elm.removeEventListener("touchend", onScreenClick)) : elm.removeEventListener("click", onScreenClick);
                        var _clck = !0;
                        exist(vast.extensions.isClickable) && (_clck = 1 == vast.extensions.isClickable),
                        _clck && (o.system.mobile ? (elm.addEventListener("touchend", onScreenClick),
                        elm.addEventListener("touchstart", onTouchStart),
                        elm.addEventListener("touchmove", onTouchMove)) : (elm.addEventListener("click", onScreenClick),
                        css(elm, {
                            cursor: "pointer"
                        })))
                    }
                    if (RemoveInterface(),
                    uiplay = createElement("div"),
                    css(uiplay, {
                        position: "absolute",
                        top: "0",
                        left: "0",
                        width: "100%",
                        height: "100%",
                        display: "none",
                        cursor: "pointer",
                        "z-index": 1
                    }),
                    o.vastcontainer.appendChild(uiplay),
                    uiplay2 = createElement("div"),
                    css(uiplay2, {
                        position: "absolute",
                        top: "50%",
                        left: "50%",
                        "margin-left": -10,
                        "margin-top": -10,
                        cursor: "pointer",
                        background: "rgba(0,0,0,0.5)",
                        "border-radius": 20,
                        width: 20,
                        height: 20,
                        padding: "3px 2px 3px 4px",
                        zIndex: 1
                    }),
                    o.system.safari && o.system.desktop ? css(uiplay2, {
                        zoom: "3"
                    }) : css(uiplay2, {
                        transform: "scale(3)"
                    }),
                    uiplay2.innerHTML = "<svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'><g><path d='m4.59375,3.48438l-0.03125,13.03125l10.875,-6.51563l-10.84375,-6.51562z' fill='#ffffff'/></g></svg>",
                    uiplay.appendChild(uiplay2),
                    uiplay.addEventListener("click", onScreenClick),
                    vast.companionImg && mp3 && (uiposter = createElement("div"),
                    css(uiposter, {
                        position: "absolute",
                        top: "0",
                        left: "0",
                        width: "100%",
                        height: "100%",
                        pointerEvents: "none",
                        background: "url(" + vast.companionImg + ") 50% 50% no-repeat",
                        "background-size": "contain"
                    }),
                    o.vastcontainer.appendChild(uiposter)),
                    uibuffer && RemoveControl("uibuffer"),
                    uibuffer = createElement("div"),
                    css(uibuffer, {
                        position: "absolute",
                        top: "50%",
                        left: "50%",
                        pointerEvents: "none",
                        zIndex: 1
                    }),
                    v.control_buffer.icon && 0 != v.vast_buffering && (controlCSS(v.control_buffer.icon, v.control_buffer.color, uibuffer),
                    o.vastcontainer.appendChild(uibuffer),
                    v.control_buffer.scale && css(uibuffer, {
                        transform: "scale(" + v.control_buffer.scale + ")"
                    }),
                    vast.buffering = !0),
                    (controls || 1 == v.vast_title_important) && (0 == vast.introtitle || 1 == v.vast_title && (uit = createElement("div"),
                    css(uit, {
                        "font-size": existv(v.vast_title_size, 14) * existv(v.globalfs, 1),
                        color: v.vast_titlecolor,
                        position: "absolute",
                        top: existv(v.vast_title_top, 0),
                        left: existv(v.vast_title_left, 0),
                        "background-color": hex2rgb(v.vast_titlebgcolor, existv(v.vast_titlebga, 0)),
                        opacity: existv(v.vast_titlea, 1),
                        padding: "5px 8px 5px 8px",
                        "box-sizing": "border-box",
                        zIndex: 1
                    }),
                    o.vastcontainer.appendChild(uit),
                    Pnt0(uit),
                    vast.uititle = Lang("ads"),
                    exist(v.vast_title_text) && "" != v.vast_title_text && (vast.uititle = v.vast_title_text),
                    o.actions.VstAndLmt(),
                    uit.innerHTML = vast.uititle + (1 == v["vast_" + o.vasttype + "_counter"] && o.adscounter <= o.adsinchain && o.adsinchain > 1 ? " " + o.adscounter + "/" + o.adsinchain : ""))),
                    controls) {
                        if (exist(vast.control_adlabel) && ("0" === vast.control_adlabel || "-1" === vast.control_adlabel ? css(uit, {
                            top: -1e3
                        }) : "1" !== vast.control_adlabel && ("TR" != vast.control_adlabel && "BR" != vast.control_adlabel || css(uit, {
                            right: 0,
                            left: "auto"
                        }),
                        "BR" != vast.control_adlabel && "BL" != vast.control_adlabel || css(uit, {
                            bottom: 0,
                            top: "auto"
                        }))),
                        exist(vast.extensions.linkTxt) ? o.system.mobile && 0 == v.vast_linktxtonmobile || "" == vast.extensions.linkTxt || (exist(uitxt) ? (show2(uitxt),
                        uitxt.innerHTML = vast.extensions.linkTxt) : (uitxt = createElement("div"),
                        css(uitxt, {
                            position: "absolute",
                            bottom: existv(v.vast_txt_bottom, 50),
                            "margin-left": "auto",
                            "margin-right": "auto",
                            left: 0,
                            right: 0,
                            "font-size": existv(v.vast_linktxt_size, o.system.mobile ? 12 : 14) * existv(v.globalfs, 1),
                            color: v.vast_linktxtcolor,
                            display: "table",
                            width: "50%",
                            "text-align": "center",
                            zIndex: 1
                        }),
                        attr(uitxt, {
                            id: "pjsvastinvite_" + v.id
                        }),
                        uitxt.innerHTML = "<pjspan style='background:" + hex2rgb(v.vast_linktxtbgcolor, 1) + ";padding:7px 15px;border-radius:20px;display:inline-block;cursor:pointer'>" + vast.extensions.linkTxt + "</pjspan>",
                        o.vastcontainer.appendChild(uitxt),
                        "" == vast.click && vast.isVpaid ? (PtrNn(uitxt),
                        css(uitxt, {
                            "pointer-events": "none"
                        })) : uitxt.firstElementChild.addEventListener("click", onInvite),
                        1 != v.vast_ltfrv && hide2(uitxt),
                        (o.mouseHere || o.system.mobile) && setTimeout((function() {
                            show2(uitxt)
                        }
                        ), 200))) : exist(uitxt) && hide2(uitxt),
                        uimute = createElement("div"),
                        CreateUiBut(uimute, existv(v.vast_mute_bottom, 10), 10, muteicon, onToggleMute),
                        exist(vast.control_soundbtn)) {
                            var tmp = vast.control_soundbtn;
                            "0" === tmp ? (hide(uimute),
                            css(uimute, {
                                top: -1e3
                            })) : "1" !== tmp && ("TR" == tmp && css(uimute, {
                                bottom: "auto",
                                top: 10,
                                right: 10
                            }),
                            "TL" == tmp && css(uimute, {
                                bottom: "auto",
                                top: 10,
                                right: "auto",
                                left: 10
                            }),
                            "BL" == tmp && css(uimute, {
                                bottom: 10,
                                right: "auto",
                                left: 10
                            }))
                        }
                        function onOutX(e) {
                            css(uix, {
                                "background-color": hex2rgb(v.vast_xbgcolor, existv(v.vast_xbga, .5))
                            })
                        }
                        if (1 == v.vast_nomute && hide2(uimute),
                        uiprogress = createElement("div"),
                        o.vastcontainer.appendChild(uiprogress),
                        uiprogress.innerHTML = '<svg id="pljsvastprogress_' + v.id + '" width="20" height="20" viewPort="0 0 10 10" version="1.1" xmlns="http://www.w3.org/2000/svg" style="transform:rotate(-90deg);float:left"><circle r="9" cx="10" cy="10" fill="transparent" stroke-dasharray="56.48" stroke-dashoffset="0" stroke-width="2" style="stroke:' + v.vast_progresscolor + ';opacity:0.3"></circle><circle id="pljsvastprogressbar_' + v.id + '" r="9" cx="10" cy="10" fill="transparent" stroke-dasharray="56.48" stroke-dashoffset="0" stroke-width="2" style="stroke:' + v.vast_progresscolor + ';opacity:0;-webkit-transform-origin: center center;transform-origin: center center;"></circle></svg>',
                        css(uiprogress, {
                            "border-radius": 30,
                            padding: 5,
                            overflow: "hidden",
                            height: "auto",
                            height: 20,
                            position: "absolute",
                            bottom: existv(v.vast_skip_bottom, 10),
                            left: 10,
                            "transform-origin": "center center",
                            transition: "background-color 0.2s linear",
                            zIndex: 1,
                            "background-color": hex2rgb(v.vast_progressbgcolor, existv(v.vast_progressbga, .5))
                        }),
                        exist(vast.control_logo) && 0 == vast.control_logo && css(uiprogress, {
                            top: -1e3
                        }),
                        uiskip = createElement("div"),
                        css(uiskip, {
                            padding: "3px 10px 0 12px",
                            float: "left",
                            display: "inline-block",
                            "font-size": existv(v.vast_skip_size, 16) * existv(v.globalfs, 1),
                            color: v.vast_skipcolor,
                            visibilty: "hidden",
                            transition: "background-color 0.2s linear,opacity 0.2s linear",
                            display: "none",
                            zIndex: 1
                        }),
                        uiskip.innerHTML = Lang("skip"),
                        exist(vast.extensions.skipSkip) && (vast.extensions.skipTime = vast.extensions.skipSkip),
                        1 == v.vast_skip2right ? (o.vastcontainer.appendChild(uiskip),
                        css(uiskip, {
                            padding: 10,
                            float: "none"
                        }),
                        onOutSkip()) : uiprogress.appendChild(uiskip),
                        uix = createElement("div"),
                        css(uix, {
                            position: "absolute",
                            top: -100,
                            right: 0,
                            width: 40,
                            height: 40,
                            padding: 10,
                            opacity: 0,
                            visibilty: "hidden",
                            transition: "background-color 0.2s linear,opacity 0.2s linear",
                            cursor: "pointer",
                            "box-sizing": "border-box",
                            zIndex: 1
                        }),
                        uix.innerHTML = '<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1 1L19 19" stroke="' + v.vast_xcolor + '" stroke-width="3" stroke-linecap="square"/><path d="M19 1L1 19" stroke="' + v.vast_xcolor + '" stroke-width="3" stroke-linecap="square"/></svg>',
                        onOutX(),
                        o.vastcontainer.appendChild(uix),
                        uix.onclick = onClose,
                        uix.addEventListener("mouseover", (function() {
                            css(uix, {
                                "background-color": hex2rgb(v.vast_xbgcolor, existv(v.vast_xbga, .5) + .3)
                            })
                        }
                        )),
                        uix.addEventListener("mouseout", onOutX),
                        exist(vast.extensions) && exist(vast.extensions.skipTime) && vast.extensions.skipTime > 0 && vast.extensions.skipTime < 100 && (uiskip.innerHTML = Lang("skip_after_") + vast.extensions.skipTime,
                        ShowSkip0()),
                        exist(vast.control_countdown) && 1 != v.vast_skip2right) {
                            var tmp = vast.control_countdown;
                            "0" === tmp || "-1" === tmp ? css(uiskip, {
                                bottom: -100
                            }) : "1" !== tmp && ("TR" == tmp && (css(uiprogress, {
                                bottom: "auto",
                                left: "auto",
                                top: 10,
                                right: 10
                            }),
                            css(uix, {
                                top: 0,
                                left: 0,
                                right: "auto"
                            })),
                            "TL" == tmp && css(uiprogress, {
                                bottom: "auto",
                                top: 10,
                                left: 10
                            }),
                            "BR" == tmp && css(uiprogress, {
                                left: "auto",
                                bottom: 10,
                                right: 10
                            }))
                        }
                        1 == v.vast_skip2right && (css(uimute, {
                            bottom: existv(v.vast_mute_bottom, 10),
                            left: 50,
                            right: "auto"
                        }),
                        css(uiskip, {
                            float: "none",
                            position: "absolute",
                            bottom: v.vast_skip_bottom ? v.vast_skip_bottom : 10,
                            right: 0
                        }))
                    }
                    if (1 == v.vast_unmutebut) {
                        uiunmutebut = createElement("div"),
                        css(uiunmutebut, {
                            background: v.vast_unmutebutbgcolor,
                            padding: "11px 10px 6px 20px",
                            position: "absolute",
                            top: "50%",
                            left: -200,
                            "font-size": 16 * existv(v.globalfs, 1),
                            margin: "-20px 0 0 -5px",
                            color: v.vast_unmutebutcolor,
                            cursor: "pointer"
                        }),
                        uiunmutebut.style.zIndex = 9999,
                        o.vastcontainer.appendChild(uiunmutebut);
                        var unmutebuticon = muteicon
                          , rg = RegExp(v.vast_volumecolor, "g");
                        unmutebuticon = unmutebuticon.replace(rg, v.vast_unmutebutcolor),
                        uiunmutebut.innerHTML = Lang("unmute_video") + ' &nbsp; <span style="float:right;margin-top:-2px">' + unmutebuticon + "</span>",
                        uiunmutebut.onclick = onUnmute
                    }
                    if (1 == v.vast_fullbut && v.control_full && (uifull = createElement("div"),
                    CreateUiBut(uifull, 50, 10, o.fullscreen ? v.control_full.icon2 : v.control_full.icon, onToggleFull)),
                    js3("vast_system", vast.adsystem),
                    js3("vast_url", vast.vasturl),
                    js3("vast_info", VastInfo()),
                    vast.isImg)
                        if (hide2(uimute),
                        vast.isFrm) {
                            var frm = document.createElement("iframe");
                            frm.scrolling = "no",
                            frm.onload = ImgLoaded,
                            frm.src = vast.file,
                            css(frm, {
                                position: "absolute",
                                top: "0",
                                left: "0",
                                width: "100%",
                                height: "100%",
                                border: 0
                            }),
                            o.vastcontainer.appendChild(frm)
                        } else {
                            var image = new Image;
                            image.onload = function() {
                                vpaidslot.style.backgroundImage = "url('" + vast.file + "')",
                                vpaidslot.style.backgroundSize = "cover",
                                ImgLoaded()
                            }
                            ,
                            image.onerror = function() {
                                onError(405)
                            }
                            ,
                            image.src = vast.file
                        }
                    if (vpaidstopped = !1,
                    vpaidskipped = !1,
                    vpaidcompleted = !1,
                    vpaidstarted = !1,
                    vaststarted = !1,
                    vpaidvideostarted = !1,
                    vpaidquartile = !1,
                    vast.isVpaid)
                        if (vast.customVpaid)
                            vpaid = eval("new " + vast.customVpaid + "()"),
                            v.vpaid_slotinframe = 0,
                            Vpaid();
                        else {
                            vpaidframe = document.createElement("iframe"),
                            vpaidframe.id = "pljsvpaid",
                            vpaidframe.allow = "autoplay",
                            vpaidframe.scrolling = "no",
                            vpaidframe.setAttribute("allowFullScreen", ""),
                            1 == v.vpaid_slotinframe ? (css(vpaidframe, {
                                position: "absolute",
                                top: "0",
                                left: "0",
                                width: "100%",
                                height: "100%",
                                border: 0
                            }),
                            hide2(vpaidslot)) : css(vpaidframe, {
                                width: 0,
                                height: 0
                            }),
                            o.vastcontainer.appendChild(vpaidframe);
                            var base = document.createElement("base");
                            base.href = o.href,
                            vpaidframe.contentWindow && vpaidframe.contentWindow.document.getElementsByTagName("head")[0].appendChild(base),
                            vpaidframe_int = setInterval(vpaidframeloaded, 100),
                            js2("vpaidframe"),
                            clearTimeout(vpaid_t),
                            vpaid_t = setTimeout(vpaidLoadTimeout, 1e3 * v.vast_timeout)
                        }
                    vast.isVpaid || vast.isImg || (youtube || vimeo ? CheckMuteStart() : (tag.addEventListener("loadstart", onLoadStart),
                    tag.addEventListener("error", onTagError),
                    tag.addEventListener("ended", onEnded),
                    tag.addEventListener("playing", onPlay),
                    tag.addEventListener("timeupdate", onTimeupdate),
                    tag.addEventListener("seeking", onSeeking),
                    tag.addEventListener("seeked", onSeeked),
                    tag.addEventListener("loadedmetadata", onMeta),
                    tag.addEventListener("volumechange", onVolume),
                    tag.addEventListener("waiting", onWaiting),
                    tag.addEventListener("durationchange", onDuration),
                    tag.addEventListener("progress", onProgress),
                    attr(tag, {
                        src: x.file
                    }),
                    -1 != v.vast_volume ? tag.volume = v.vast_volume : tag.volume = v.volume,
                    CheckMuteStart(),
                    1 != v.vpaid_waitstart ? PlayStart() : js("vast_readystart"))),
                    setTimeout(startTimeout, 500)
                }
            }
        }
        ,
        this.ytReady = function() {
            js3("vast_duration", duration = ytag.duration()),
            StopBuffering(),
            ytinterval = setInterval(this.timeUpdate, 500),
            (0 == v.vast_volume || o.muted || 1 == v.vast_unmutehover && !o.system.mobile) && onMute()
        }
        ,
        this.ytError = function() {
            onError()
        }
        ,
        this.ytWaiting = function() {
            onWaiting()
        }
        ,
        this.ytWaited = function() {
            StopBuffering()
        }
        ,
        this.ytEnded = function() {
            onEnded()
        }
        ;
        var die_error = !1;
        function onOver() {
            over || (uitxt && show2(uitxt),
            1 != v.vast_unmutehover || o.system.mobile || (onUnmute(),
            1 == v.vast_unmuteonce && (v.vast_unmutehover = 0))),
            over = !0
        }
        function onMeta() {
            tag.videoHeight > 0 && 1 == v.changeheight && 1 == v.changevastheight && o.actions.changeAspect(tag.videoWidth / tag.videoHeight, !0)
        }
        function onOut() {
            over && (uitxt && 1 != v.vast_ltfrv && hide2(uitxt),
            1 != v.vast_unmutehover || o.system.mobile || (clearInterval(slow_unmute),
            onMute())),
            over = !1
        }
        function onTagError() {
            onError(4 == tag.error.code ? 403 : 405)
        }
        function onError(e) {
            if (!die_error && !removed) {
                if (die_error = !0,
                log("VAST video playing error " + e),
                vpaid)
                    for (var t in vpaidCallbacks)
                        vpaidCallbacks.hasOwnProperty(t) && vpaid.unsubscribe(vpaidCallbacks[t], t);
                Event("Error", !1, e > 0 ? e : 400),
                clearInterval(vpaid_int),
                clearInterval(vpaidframe_int),
                clearInterval(push_wait_int),
                RemoveTimeouts(),
                o.actions.VastError()
            }
        }
        function RemoveAndPlay() {
            Event("remove"),
            RemoveTimeouts(),
            removed || (removed = !0,
            o.actions.VastRemoveAndPlay())
        }
        function RemoveTimeouts() {
            clearTimeout(vpdimpr_t),
            clearTimeout(vpdskp_t),
            clearTimeout(vpaid_t),
            clearTimeout(vpaid_stop_t),
            clearTimeout(vpaid_complete_t),
            clearTimeout(video_t)
        }
        function onEnded() {
            vpaidcompleted || Event("complete", !0),
            RemoveAndPlay()
        }
        function onClose() {
            Event("close", !0);
            var e = new Date;
            o.clicktime = e.getTime(),
            o.vastclick = !0,
            gTr("vast_skip", "VAST Skip"),
            1 == v["vast_" + o.vasttype + "skipor"] ? o.actions.VastNext() : RemoveAndPlay()
        }
        function onSkip() {
            var e = new Date;
            o.clicktime = e.getTime(),
            o.vastclick = !0,
            log("VAST Skip"),
            gTr("vast_skip", "VAST Skip"),
            !vpaidskipped && vpaid && vast.isVpaid ? (log("VPAID Skip request"),
            1 == v.vpaid_forceskip && (vpdskp_t = setTimeout(VpSkp, 200)),
            vpaid.skipAd()) : (Event("skipAd", !0),
            Event("skip", !0),
            1 == v["vast_" + o.vasttype + "skipor"] ? o.actions.VastNext() : RemoveAndPlay())
        }
        function VpSkp() {
            vpaidskipped || (vpaidSkipAd("force"),
            vpaidStopAd())
        }
        function onInvite() {
            Event("addClick"),
            Event("acceptInvitation", !1),
            onClick()
        }
        function onToggleMute() {
            _muted ? onUnmute() : onMute()
        }
        function onToggleFull() {
            var e;
            o.fullscreen ? (o.actions.Normalscreen(),
            e = v.control_full.icon) : (o.actions.Fullscreen(),
            e = v.control_full.icon2),
            e && (uifull.innerHTML = e,
            PtrNn(uifull)),
            setTimeout(VpaidResize, 500)
        }
        function PtrNn(e) {
            e && css(e.firstElementChild, {
                "pointer-events": "none"
            })
        }
        function onMute() {
            var e = !1;
            log((vast.isVpaid ? "VPAID" : "VAST") + " Mute"),
            youtube || vimeo ? ytag.Mute() : (clearInterval(slow_unmute),
            vast.isVpaid ? vpaid ? (vpaidvolume = vpaid.getAdVolume() > 0 ? vpaid.getAdVolume() : v.vast_volume,
            vpaid.setAdVolume(0),
            tag && (tag.muted = !0)) : e = !0 : (Event("mute"),
            tag.muted = !0)),
            e || (Unmutebut(1),
            MuteIcon(!0))
        }
        function MuteIcon(e) {
            _muted = e,
            exist(uimute) && (uimute.innerHTML = e ? unmuteicon : muteicon)
        }
        function onUnmute() {
            var e = !1;
            youtube || vimeo ? (ytag.Unmute(),
            Event("unmute")) : vast.isVpaid ? vpaid ? (v.vpaid_mute_impression = 0,
            0 == unmute_volume && (unmute_volume = vpaidvolume) < .3 && (unmute_volume = v.vast_default_volume),
            vpaid.setAdVolume(0),
            tag.muted = !1,
            clearInterval(slow_unmute),
            slow_unmute = setInterval(SlowUnMute, 200)) : e = !0 : (tag.muted = !1,
            0 == unmute_volume && (unmute_volume = tag.volume) < .3 && (unmute_volume = v.vast_default_volume),
            tag.volume = 0,
            clearInterval(slow_unmute),
            slow_unmute = setInterval(SlowUnMute, 200)),
            e || (Unmutebut(0),
            MuteIcon(!1))
        }
        function Unmutebut(e) {
            var t = uiunmutebut;
            if (1 == v.vast_unmutebut && t) {
                var o = {
                    mc: t,
                    me: "uiunmutebut",
                    type: "left"
                };
                1 == e ? (show(t),
                o.to = 0) : (o.to = -200,
                o.hide = !0);
                new Motion(o)
            }
        }
        function SlowUnMute() {
            if (v.vast_volume = unmute_volume,
            vast.isVpaid) {
                var e = vpaid.getAdVolume();
                e < unmute_volume && e < .99 ? vpaid.setAdVolume(parseFloat(e) + .1) : (unmute_volume = 0,
                clearInterval(slow_unmute),
                Event("unmute"))
            } else
                tag.volume < unmute_volume && tag.volume < .95 ? tag.volume += .1 : (unmute_volume = 0,
                clearInterval(slow_unmute),
                Event("unmute"))
        }
        function onTouchStart() {
            _move = !1
        }
        function onTouchMove() {
            _move = !0
        }
        function onScreenClick() {
            var e = !1;
            o.system.mobile && _move && (e = !0),
            removed && (e = !0),
            e || (paused ? Resume() : onClick()),
            1 == v.vast_unmuteonclick && onUnmute()
        }
        function onClick(e) {
            if (!start_timeout) {
                var t = new Date;
                o.clicktime = t.getTime(),
                Event("click"),
                (1 == v.vast_addclick || e) && Event("addClick"),
                gTr("vast_click", "VAST Click");
                var i = !1;
                if (exist(vast.click) && "" != vast.click) {
                    for (var s = ["ref", "referer", "host"], r = 0; r < s.length; r++)
                        vast.click = vast.click.replace(new RegExp("\\(" + s[r] + "\\)","gi"), "host" == s[r] ? encodeURIComponent(o.domain) : Href());
                    js2("vast_clickurl", vast.click),
                    1 == v.vast_openclick && window.open(vast.click, "_blank"),
                    i = !0
                }
                1 == v.vast_pauseonclick ? Pause(i) : 1 == v.vast_closeonclick && i && o.actions.VastRemoveAndPlay(1 == v.vast_playonclick ? "" : "dontplay")
            }
        }
        function onPlay() {}
        function onPause() {
            Pause(!0)
        }
        function Pause(e) {
            vast.isVpaid && vpaid && (vpaid.pauseAd(),
            controls && show2(uiplay),
            paused = !0),
            vast.isImg && (clearInterval(img_int),
            controls && show2(uiplay),
            paused = !0),
            vast.isVpaid || vast.isImg || e && (youtube || vimeo ? ytag.Pause() : tag.pause(),
            Event("pause"),
            show2(uiplay),
            paused = !0),
            uitxt && 1 != v.vast_ltfrv && hide2(uitxt),
            StopBuffering(),
            log("VAST pause")
        }
        function Resume() {
            paused && (vast.isVpaid && vpaid && (vpaid.resumeAd(),
            hide2(uiplay),
            paused = !1),
            vast.isImg && (img_int = setInterval(onTimeupdate, 100),
            onTimeupdate(),
            hide2(uiplay),
            paused = !1),
            vast.isVpaid || vast.isImg || (youtube || vimeo ? ytag.Play() : tag.play(),
            Event("resume"),
            hide2(uiplay),
            paused = !1),
            uitxt && show2(uitxt),
            log("VAST resume"))
        }
        function CurrentTime() {
            var e = 0;
            return youtube || vimeo ? e = ytag.time() : vast.isImg ? (e = imgtime,
            imgtime += .1) : e = tag.currentTime,
            e
        }
        function CurrentVolume() {
            if (vast) {
                if (!vast.isVpaid)
                    return tag.muted ? 0 : tag.volume;
                if (vpaid) {
                    var e = -1;
                    try {
                        e = vpaid.getAdVolume()
                    } catch (e) {
                        log(e)
                    }
                    return e
                }
            }
        }
        function onTimeupdate(e) {
            if (tag && !removed) {
                var t = CurrentTime();
                if (!impression && t > existv(vast.imprsec, 0) && (log("VAST Time", t),
                onImpression(),
                impression = !0),
                qrts[0] || t > duration / 4 && (Event("firstQuartile", !0),
                qrts[0] = !0),
                qrts[1] || t > duration / 2 && (Event("midpoint", !0),
                qrts[1] = !0),
                qrts[2] || t > duration / 4 * 3 && (Event("thirdQuartile", !0),
                qrts[2] = !0),
                exist(vast.progresstimes))
                    for (var i = 0; i < vast.progresstimes.length; i++)
                        t >= vast.progresstimes[i] && Event("progress_" + vast.progresstimes[i], !0);
                onTimeupdateExtensions(t),
                t > 0 && t > last_time && StopBuffering(),
                null == o.vasttype && ("intro" == vast.adsystem && (o.vasttype = "preroll"),
                "outro" == vast.adsystem && (o.vasttype = "postroll")),
                vast.isImg && t > duration && onEnded(),
                last_time = t,
                !_started && t > 0 && Event("start", !0)
            }
        }
        this.timeUpdate = function() {
            onTimeupdate()
        }
        ;
        var tu0 = !0;
        function onTimeupdateExtensions(e) {
            if (js3("vast_time", e),
            !(vast.isVpaid && tu0 && (tu0 = !1,
            e < duration - 2 && duration > 0))) {
                if (exist(vast.extensions)) {
                    if (exist(vast.events.sec) && !vpaidcompleted)
                        for (var t = 0; t < vast.events.sec.length; t++)
                            e >= vast.events.sec[t] && vast.events.sec[t] > -1 && (Event("second" + vast.events.sec[t], !0),
                            vast.events.sec[t] -= 1e3);
                    UpdateSkipTimes(e)
                }
                if (controls && duration > 0) {
                    var o = parseInt(e / duration * 100)
                      , i = gebi("pljsvastprogressbar_" + v.id);
                    if (i)
                        if (isNaN(o))
                            o = 100;
                        else {
                            var s = i.getAttribute("r")
                              , r = Math.PI * (2 * s);
                            o < 0 && (o = 0),
                            o > 100 && (o = 100),
                            css(i, {
                                opacity: 1,
                                strokeDashoffset: (100 - o) / 100 * r
                            })
                        }
                }
            }
        }
        function UpdateSkipTimes(e) {
            var t;
            exist(vast.extensions) && controls && e >= last_skiptime && (exist(vast.extensions.skipTime) && uiskip && (vast.extensions.skipTime < 0 && vast.duration > 0 && (vast.extensions.skipTime = 1 * vast.duration + 1 * vast.extensions.skipTime),
            vast.extensions.skipTime > -1 && vast.extensions.skipTime < 100 && (t = !0,
            e > vast.extensions.skipTime ? (js3("vast_skipTime", vast.extensions.skipTime),
            ShowSkip(),
            vast.extensions.skipTime = null) : uiskip.innerHTML = Lang("skip_after_") + Math.round(vast.extensions.skipTime - e),
            ShowSkip0())),
            exist(vast.extensions.skipTime2) && vast.extensions.skipTime2 > -1 && (t && vast.extensions.skipTime2 < vast.extensions.skipTime && (vast.extensions.skipTime2 = vast.extensions.skipTime),
            e > vast.extensions.skipTime2 && (js3("vast_skipTime2", vast.extensions.skipTime2),
            Event("skipTime2"),
            uix && css(uix, {
                top: 0,
                opacity: 1,
                display: "block"
            }),
            vast.extensions.skipTime2 = null)),
            last_skiptime = e)
        }
        function ShowSkip0() {
            vast.uiskp || (css(uiskip, {
                cursor: "default",
                "font-size": existv(v.vast_skip2_size, 12) * existv(v.globalfs, 1),
                display: "block"
            }),
            vast.uiskp = !0)
        }
        function ShowSkip() {
            uiskip && !removed && (uiskip.innerHTML = Lang("skip"),
            css(uiskip, {
                cursor: "pointer",
                "font-size": (v.vast_skip_size ? v.vast_skip_size : 16) * existv(v.globalfs, 1),
                display: "block"
            }),
            1 == v.vast_skip2right ? (uiskip.onclick = onSkip,
            uiskip.addEventListener("mouseover", (function() {
                css(uiskip, {
                    "background-color": hex2rgb(v.vast_skipbgcolor, existv(v.vast_skipbga, .5) + .3)
                })
            }
            )),
            uiskip.addEventListener("mouseout", onOutSkip)) : uiprogress && (css(uiprogress, {
                cursor: "pointer"
            }),
            uiprogress.onclick = onSkip,
            uiprogress.addEventListener("mouseover", (function() {
                css(uiprogress, {
                    "background-color": hex2rgb(v.vast_skipbgcolor, existv(v.vast_skipbga, .5) + .3)
                })
            }
            )),
            onOutSkip(),
            uiprogress.addEventListener("mouseout", onOutSkip)))
        }
        function onSeeking() {}
        function onSeeked() {}
        function onImpression() {
            die_error || removed || (Event("Impression", !0),
            Event("Impress", !0),
            Event("creativeView", !0),
            ImpressionActions())
        }
        function ImpressionActions() {
            var e = "intro" == vast.adsystem || "outro" == vast.adsystem ? "intro" : o.vasttype;
            o.actions.VastImpression(1 == vast.skipimp),
            v["vast_" + e + "timebreak"] > 0 && StoreImpression(e),
            exist(o.visibility) ? o.visibility > 50 ? Event("Viewable") : Event("NotViewable") : Event("ViewUndetermined"),
            o.vast_impressions++,
            o.vast_impressions_all++,
            o.vast_longtomsg && o.vast_longtomsg.remove(),
            _muted && Unmutebut(1),
            impression = !0,
            gTr("vast_impression", "VAST Impression"),
            1 == o.vast_stop && (o.vast_stop = 2),
            o.vast_poster && o.vast_poster.hide(),
            o.vast_loadtxt && o.vast_loadtxt.hide(),
            StopBuffering()
        }
        function onDuration() {
            vast.omid || Event("verificationNotExecuted"),
            Event("AdLoaded", !0),
            js3("vast_duration", duration = tag.duration)
        }
        function onVolume() {
            js3("vast_volume", VastInfo())
        }
        function onProgress(e) {}
        var vpaidCallbacks = {
            AdStarted: vpaidStartAd,
            AdStopped: vpaidStopAd,
            AdSkipped: vpaidSkipAd,
            AdLoaded: vpaidAdLoaded,
            AdLinearChange: vpaidAdLinearChange,
            AdSizeChange: vpaidAdSizeChange,
            AdExpandedChange: vpaidAdExpandedChange,
            AdSkippableStateChange: vpaidAdSkippableStateChange,
            AdDurationChange: vpaidAdDurationChange,
            AdRemainingTimeChange: vpaidAdRemainingTimeChange,
            AdVolumeChange: vpaidAdVolumeChange,
            AdImpression: vpaidAdImpression,
            AdClickThru: vpaidAdClickThru,
            AdInteraction: vpaidAdInteraction,
            AdVideoStart: vpaidAdVideoStart,
            AdVideoFirstQuartile: vpaidAdVideoFirstQuartile,
            AdVideoMidpoint: vpaidAdVideoMidpoint,
            AdVideoThirdQuartile: vpaidAdVideoThirdQuartile,
            AdVideoComplete: vpaidAdVideoComplete,
            AdUserAcceptInvitation: vpaidAdUserAcceptInvitation,
            AdUserMinimize: vpaidAdUserMinimize,
            AdUserClose: vpaidAdUserClose,
            AdPaused: vpaidAdPaused,
            AdPlaying: vpaidAdPlaying,
            AdError: vpaidAdError,
            AdErrorVpaid: vpaidAdErrorVpaid,
            AdLog: vpaidAdLog,
            AdViewable: vpaidAdViewable
        };
        function Vpaid() {
            if ("function" == typeof vpaid.handshakeVersion) {
                for (var e in vpaidCallbacks)
                    vpaidCallbacks.hasOwnProperty(e) && vpaid.subscribe(vpaidCallbacks[e], e, this);
                if (vast.vpdevnts)
                    for (var i = 0; i < vast.vpdevnts.length; i++)
                        "" != vast.vpdevnts[i] && (eval("function pjsvpd_" + vast.vpdevnts[i] + "(){Event('" + vast.vpdevnts[i] + "');}"),
                        vpaid.subscribe(eval("pjsvpd_" + vast.vpdevnts[i]), vast.vpdevnts[i], this));
                1 == v.vpaid_slotinframe && vpaidframe && (vpaidslot2 = document.createElement("div"),
                vpaidframe.contentDocument.body.appendChild(vpaidslot2),
                css(vpaidslot2, {
                    position: "absolute",
                    top: "0",
                    left: "0",
                    width: "100%",
                    height: "100%",
                    cursor: "pointer"
                })),
                vpaid.initAd(o.screen_w, o.screen_h, o.fullscreen ? "fullscreen" : "normal", 720, exist(vast.adparameters) ? {
                    AdParameters: vast.adparameters
                } : "", {
                    slot: 1 == v.vpaid_slotinframe ? vpaidslot2 : vpaidslot,
                    videoSlot: tag,
                    videoSlotCanAutoPlay: !0
                }),
                css(vpaidslot, {
                    cursor: "pointer"
                }),
                vpaidslot.style.zIndex = 0
            } else
                log("VPAID incorrect"),
                onError(901)
        }
        function vpaidAdLog(e) {
            log("VPAID Log: " + e)
        }
        function vpaidAdViewable() {
            Event("viewable", !0)
        }
        function vpaidAdError(e) {
            vpaidcompleted ? (log("VPAID Error but completed", e),
            vpaidStopAd()) : (log("VPAID Error", e),
            "object" == typeof e && 1 == v.log && console.log(e),
            onError(901))
        }
        function vpaidAdErrorVpaid(e) {
            vpaidcompleted || (log("VPAID Error", e),
            Event("Error", !1, e > 0 ? e : 400))
        }
        function vpaidAdLoaded() {
            die_error || (1 == v["vast_" + o.vasttype + "normal"] && o.fullscreen && o.actions.Normalscreen(),
            log("VPAID Loaded, ad " + vpaid.getAdLinear()),
            Event("AdLoaded", !0),
            "nonlinear" != vpaid.getAdLinear() ? (1 != v.vpaid_waitstart ? (StartVpaidVolume(),
            clearTimeout(vpaid_t),
            vpaid_t = setTimeout(vpaidVideoTimeout, 1e3 * v.vpaid_timeout),
            vpaid.startAd()) : js("vast_readystart"),
            clearInterval(vpaid_int2),
            vpaid_int2 = setInterval(vpaidAdRemainingTimeChange, 1e3),
            vpaidAdRemainingTimeChange()) : vpaidAdError("Nonlinear"))
        }
        function StartVpaidVolume() {
            vpaid && (0 == v.vast_volume || 1 == vast.mute || 1 == v.vast_unmutehover && !o.system.mobile && 1 != o.mouseHere ? (log("vpaid mute"),
            onMute()) : exist(vpaid.setAdVolume) && (-1 != v.vast_volume ? vpaid.setAdVolume(parseFloat(v.vast_volume)) : vpaid.setAdVolume(parseFloat(v.volume))))
        }
        function StopBuffering() {
            vast.buffering && (uibuffer && hide2(uibuffer),
            vast.buffering = !1,
            clearInterval(push_wait_int))
        }
        function onWaiting() {
            uibuffer && show2(uibuffer),
            vast.buffering = !0,
            1 == v.vast_push_waiting && (clearInterval(push_wait_int),
            push_wait_int = setInterval(PushWaiting, 1500))
        }
        function PushWaiting() {
            UpdateSkipTimes(last_skiptime += 1)
        }
        function vpaidStartAd() {
            vpaidstarted = !0,
            1 != v.vpaidvideotimeout && (vpaidvideostarted = !0),
            duration = vpaid.getAdDuration();
            var e, t = vpaid.getAdRemainingTime();
            duration > 0 || exist(vast.duration) && vast.duration >= t && (duration = vast.duration),
            duration >= 5e3 && (duration /= 1e3),
            js3("vast_duration", duration),
            o.vast_poster && o.vast_poster.hide(),
            o.vast_loadtxt && o.vast_loadtxt.hide(),
            js_events = [],
            imps = [],
            qrts = [],
            log("VPAID Started"),
            indOf([vast.wrapper, vast.vasturl], "pjsvvs=1") && (e = !0),
            1 == v.vast_visibleonstart && !vast.skipimp && !e && o.actions.VpaidStarted(),
            Event("creativeView", !0),
            StopBuffering()
        }
        function vpaidVideoTimeout() {
            vpaidvideostarted || die_error || (log("VPAID timeout"),
            js3("vpaid_video_timeout", VastInfo()),
            onError(901))
        }
        function vpaidQuartileTimeout() {
            vpaidquartile || die_error || 0 == v.vpaid_mute_impression && paused || (log("VPAID quartile timeout"),
            js3("vpaid_quartile_timeout", VastInfo()),
            onError(901))
        }
        function vpaidStoppedTimeout() {
            vpaidstopped || die_error || (log("VPAID stopped timeout"),
            js3("vpaid_stopped_timeout", VastInfo()),
            removed || (impression ? vpaidStopAd() : onError(901)))
        }
        function tagTimeout() {
            tag && (die_error || 0 != tag.currentTime || 0 != duration || (log("VAST video loading timeout"),
            js3("vast_video_timeout", VastInfo()),
            onError(402)))
        }
        function vpaidLoadTimeout() {
            vpaidvideostarted || die_error || 1 == v.vpaid_waitstart || (log("VPAID loading timeout"),
            js3("vpaid_loading_timeout", VastInfo()),
            onError(901))
        }
        function vpaidStopAd() {
            removed || vpaidstopped || (log("VPAID Stopped"),
            vpaidstopped = !0,
            removed || impression ? vpaidcompleted || vpaidskipped ? RemoveAndPlay() : remove_t = setTimeout(RemoveAndPlay, 200) : (vpaidstarted && duration > 0 && remainigs > 5 && exist(vast.prt) && vpaidImpression(),
            log("VPAID No impression --\x3e Error (" + remainigs + ")"),
            onError(901)))
        }
        function vpaidSkipAd(e) {
            log("VPAID Skipped " + (e || "")),
            vpaidskipped = !0,
            onSkip()
        }
        function vpaidAdSizeChange() {
            log("VPAID SizeChanged: " + vpaid.getAdWidth() + " x " + vpaid.getAdHeight()),
            vpaid.getAdHeight() > 0 && vpaid.getAdWidth() > 0 && 1 == v.changeheight && 1 == v.changevastheight && o.actions.changeAspect(vpaid.getAdWidth() / vpaid.getAdHeight(), !0)
        }
        function vpaidAdExpandedChange() {
            log("VPAID ExpandedChange: " + vpaid.getAdExpanded())
        }
        function vpaidAdSkippableStateChange() {}
        function vpaidAdDurationChange() {
            log("VPAID DurationChanged: " + vpaid.getAdDuration()),
            vpaid.getAdDuration() > 0 && js3("vast_duration", duration = vpaid.getAdDuration())
        }
        function vpaidAdRemainingTimeChange(e) {
            var t = vpaid.getAdDuration();
            e && clearInterval(vpaid_int2);
            var o = vpaid.getAdRemainingTime();
            t > 0 && t != duration && vpaidAdDurationChange(),
            remainigs++,
            (0 == duration || o > duration) && o > 0 && js3("vast_duration", duration = o),
            o > 0 ? duration > 0 && onTimeupdateExtensions(duration - o) : 1 == v.vpaid_noremainingtime && (log("VPAID time", remainigs - 1, o, duration),
            onTimeupdateExtensions(remainigs - 1))
        }
        function vpaidAdVolumeChange() {
            var e;
            null != vpaid.getAdVolume() && (0 == vpaid.getAdVolume() ? (Event("mute"),
            vpaidvolume2 = 0,
            MuteIcon(!0)) : (0 == vpaidvolume2 && (Event("unmute"),
            MuteIcon(!1)),
            vpaidvolume2 = vpaid.getAdVolume(),
            0 == v.vast_volume && (e = !0))),
            log("VPAID VolumeChanged: " + vpaid.getAdVolume()),
            (vpaidvolume2 > 0 && 1 == v.vpaid_mute_impression && !impression || e) && onMute()
        }
        function vpaidAdImpression() {
            impression || 1 == vast.vpaidImOnVdSrt || (vast.imprsec > 0 ? vpdimpr_t = setTimeout(vpaidImpression, 1e3 * vast.imprsec) : vpaidImpression())
        }
        function vpaidImpression() {
            vpaidcompleted = !1,
            log("VPAID Impression", duration),
            Event("Impression"),
            Event("Impress"),
            ImpressionActions(),
            v.vpaid_timeout2 > -1 && (clearTimeout(vpaid_t),
            vpaid_t = setTimeout(vpaidVideoTimeout, 1e3 * v.vpaid_timeout2)),
            1 == v.vpaid_mute_impression && onMute()
        }
        function vpaidAdClickThru(e, t, o) {
            log("VPAID ClickThru"),
            exist(e) && "string" == typeof e && e.indexOf("//") > -1 && 1 == o && (vast.click = e),
            exist(vast.extensions.isClickable) || !1 === o ? 1 == vast.extensions.isClickable ? onClick(!0) : (Event("click"),
            Event("addClick"),
            gTr("vast_click", "VAST Click")) : onClick(!0)
        }
        function vpaidAdInteraction() {}
        function vpaidAdVideoStart() {
            1 != vast.vpaidImOnVdSrt || impression || (vast.imprsec > 0 ? vpdimpr_t = setTimeout(vpaidImpression, 1e3 * vast.imprsec) : vpaidImpression()),
            log("VPAID AdVideoStart"),
            o.actions.VpaidStarted(),
            vpaidvideostarted = !0,
            impression = !1,
            clearTimeout(vpaid_t),
            v.vpaid_timeout3 > -1 && (vpaid_t = setTimeout(vpaidQuartileTimeout, 1e3 * v.vpaid_timeout3)),
            clearTimeout(vpaid_stop_t),
            v.vpaid_timeout4 > -1 && (vpaid_stop_t = setTimeout(vpaidStoppedTimeout, 1e3 * v.vpaid_timeout4)),
            1 == v.vpaid_mute_impression && onMute(),
            Event("start", !1),
            o.vpaid_starts++,
            v.vpaid_startlimit > 0 && o.vpaid_starts > v.vpaid_startlimit && (log("VPAID start limit"),
            onError())
        }
        function vpaidAdVideoFirstQuartile() {
            vpaidquartile = !0,
            log("VPAID firstQuartile"),
            Event("firstQuartile", !1)
        }
        function vpaidAdVideoMidpoint() {
            log("VPAID midpoint"),
            Event("midpoint", !1)
        }
        function vpaidAdVideoThirdQuartile() {
            log("VPAID thirdQuartile"),
            Event("thirdQuartile", !1)
        }
        function vpaidAdVideoComplete() {
            if (!vpaidcompleted) {
                for (var e in Event("complete", !1),
                vpaidcompleted = !0,
                vast.events)
                    vast.events.hasOwnProperty(e) && 0 == e.indexOf("old_") && (vast.events[e.substr(4)] = vast.events[e]);
                if (exist(vast.events.sec))
                    for (var t = 0; t < vast.events.sec.length; t++)
                        vast.events.sec[t] += 1e3;
                v.vpaid_timeout5 > -1 && (clearTimeout(vpaid_complete_t),
                vpaid_complete_t = setTimeout(vpaidStoppedTimeout, 1e3 * v.vpaid_timeout5))
            }
            log("VPAID complete")
        }
        function vpaidAdLinearChange() {
            log("VPAID linear has changed: " + vpaid.getAdLinear())
        }
        function vpaidAdUserAcceptInvitation() {
            Event("acceptInvitation", !1)
        }
        function vpaidAdUserMinimize() {}
        function vpaidAdUserClose() {
            var e = new Date;
            o.clicktime = e.getTime(),
            Event("close", !0),
            o.vastclick = !0,
            gTr("vast_skip", "VAST Skip")
        }
        function vpaidAdPaused() {
            vast.isVpaid && vpaidcompleted || (Event("pause"),
            1 == v.vpaid_nopause ? vpaid.resumeAd() : (controls && 1 == v.vast_pauseonclick && show2(uiplay),
            paused = !0))
        }
        function vpaidAdPlaying() {
            Event("resume"),
            controls && exist(uiplay),
            paused = !1
        }
        function StoreImpression(e) {
            if (v["vast_" + e + "timebreak"] > 0 && o.storage) {
                var t = 1 * localStorage.getItem("pljs" + e + "i_" + o.d)
                  , i = !1;
                if (t ? t + 1 >= v["vast_" + e + "tbimp"] && (i = !0) : t = 0,
                i || o.vast_impressions_all + 1 >= v["vast_" + e + "tbimp"]) {
                    var s = new Date;
                    localStorage.setItem("pljs" + e + "_" + o.d, s.getTime()),
                    localStorage.setItem("pljs" + e + "i_" + o.d, 0),
                    o.actions.EmptyVastUrl()
                } else
                    localStorage.setItem("pljs" + e + "i_" + o.d, t + 1)
            }
        }
        function Event(e, t, i, s) {
            if ("start" == e && (o.vast_started = !0,
            _started = !0,
            1 == v.miniwithvast && o.minify && o.minify.Check()),
            exist(vast.prt) && 0 == v.eventstrackervast && 1 != v.vpaid || (t ? (exist(js_events[e]) || js3("vast_" + e, VastInfo()),
            js_events[e] = !0) : js3("vast_" + e, i > 0 ? i : VastInfo())),
            exist(vast.events) && exist(vast.events[e])) {
                log("VAST Event " + e);
                for (var r = 0; r < vast.events[e].length; r++) {
                    var n = vast.events[e][r]
                      , a = !1;
                    if (exist(n)) {
                        if (imps.indexOf(n) > -1 && (a = !0),
                        "Impression" == e && imps.push(n),
                        i > 0 && (n.indexOf("[ERRORCODE]") > 0 ? n = n.replace("[ERRORCODE]", i) : 1 == s && (a = !0)),
                        n.indexOf("(visibility)") > 0 && exist(o.visibility) && (n = n.replace("(visibility)", o.visibility)),
                        n.indexOf("(volume)") > 0 && (n = n.replace("(volume)", CurrentVolume())),
                        (n = (n = n.replace("(adblock)", o.ab ? 1 : 0)).replace(/\(random\)/g, Math.random())).indexOf(".pjstat") > 0) {
                            n = n + "&m=" + (o.system.tv ? 2 : o.system.mobile ? 1 : 0) + "&h=" + (exist(v.parent_domain) ? v.parent_domain : o.domain) + ("overlay" == o.vasttype || vast.isFrm ? "&r=1" : "") + "&s=" + o.sessid
                        }
                        if ("object" == typeof v.vast_replace)
                            for (var l in v.vast_replace)
                                if (v.vast_replace.hasOwnProperty(l))
                                    for (var c = 0; c < 5; c++)
                                        n = n.replace(l, v.vast_replace[l])
                    } else
                        a = !0;
                    a || gif(n)
                }
                t && (vast.events["old_" + e] = vast.events[e],
                vast.events[e] = void 0)
            }
            "click" == e && 1 == v.vast_addclick && Event("addClick"),
            omid && omid.event(e, i)
        }
        function js2(e) {
            "intro" != vast.adsystem && "outro" != vast.adsystem && js(e)
        }
        function js3(e, t) {
            exist(vast.prt) && 0 == v.eventstrackervast && 1 != v.vpaid || "intro" == vast.adsystem || "outro" == vast.adsystem || js(e, t)
        }
        function gTr(e, t) {
            "intro" == vast.adsystem || "outro" == vast.adsystem || gaTracker(e, t)
        }
        function VpaidResize() {
            vast && vast.isVpaid && vpaid && vpaid.resizeAd(o.screen_w, o.screen_h, o.fullscreen ? "fullscreen" : "normal")
        }
        function RemoveInterface() {
            if (RemoveControl("uiplay"),
            tag && tag.played.length > 0 && tag.pause(),
            controls && o.vastcontainer.contains(uix)) {
                1 == v.vast_title && RemoveControl("uit");
                for (var e = ["uiprogress", "uiskip", "uix", "uitxt", "uitxt", "uimute", "uifull", "uiposter", "uiunmutebut"], t = 0; t < e.length; t++)
                    RemoveControl(e[t])
            }
        }
        function RemoveControl(x) {
            exist(eval(x)) && o.vastcontainer.contains(eval(x)) && ("uitxt" == x && uitxt.removeEventListener("click", onInvite),
            o.vastcontainer.removeChild(eval(x)),
            eval(x + " = null;"))
        }
        function VpaidSetStartAd() {
            vast.isVpaid ? !vpaidstarted && vpaid && vpaid.startAd() : !vaststarted && PlayStart()
        }
        this.config = function(e) {
            return !!vast && vast[e]
        }
        ,
        this.tagLive = function() {
            var e = !1;
            if (tag && tag.parentElement)
                try {
                    "PJSDIV" == tag.parentElement.nodeName && (e = !0)
                } catch (t) {
                    e = !1
                }
            return (!vast || !vast.isVpaid) && e
        }
        ,
        this.info = function(e) {
            return "dur" == e ? duration : !!vast && vast[e]
        }
        ,
        this.active = function() {
            return !removed
        }
        ,
        this.Resize = function() {
            VpaidResize()
        }
        ,
        this.getVolume = function() {
            return CurrentVolume()
        }
        ,
        this.pause = function() {
            return removed || paused || !vast ? !!o.ima && (o.ima.pause(),
            !0) : (Pause(!0),
            !0)
        }
        ,
        this.resume = function() {
            return !removed && paused && vast ? (Resume(),
            !0) : !!o.ima && (o.ima.play(),
            !0)
        }
        ,
        this.VpaidSet = function(e, t) {
            vast && ("setAdVolume" == e && (0 == t ? onMute() : onUnmute()),
            "stopAd" == e && RemoveAndPlay(),
            "startAd" == e && VpaidSetStartAd(),
            "skipAd" == e && onSkip(),
            "pauseAd" == e && onPause(),
            "resumeAd" == e && onPlay())
        }
        ,
        this.startAd = function() {
            1 != v.vpaid_waitstart || vpaidstarted || (vast.isVpaid && vpaid && StartVpaidVolume(),
            VpaidSetStartAd())
        }
        ,
        this.mute = function() {
            onMute()
        }
        ,
        this.imp = function(e) {
            if (impression && !removed)
                for (var t = e.split(","), o = 0; o < t.length; o++)
                    gif(t[o])
        }
        ,
        this.RemoveForNextAd = function() {
            if ((youtube || vimeo) && (clearInterval(ytinterval),
            ytag.Remove()),
            vast) {
                if (RemoveInterface(),
                vast.isVpaid) {
                    if (exist(vpaidslot)) {
                        if (!vpaidstopped && vpaid && vpaidstarted)
                            try {
                                vpaid.stopAd()
                            } catch (e) {
                                log(e)
                            }
                        if (vpaid)
                            for (var e in vpaidCallbacks)
                                vpaidCallbacks.hasOwnProperty(e) && vpaid.unsubscribe(vpaidCallbacks[e], e);
                        o.vastcontainer.contains(vpaidslot) && 1 != vast.hidevpaid && o.vastcontainer.removeChild(vpaidslot)
                    }
                    if (clearInterval(vpaid_int),
                    clearInterval(vpaid_int2),
                    clearInterval(vpaidframe_int),
                    clearInterval(push_wait_int),
                    RemoveTimeouts(),
                    1 != vast.hidevpaid && vpaidframe)
                        try {
                            o.vastcontainer.removeChild(vpaidframe)
                        } catch (e) {}
                } else
                    hide(tag);
                onWaiting()
            }
            exist(vpaidslot) && (clearInterval(img_int),
            o.vastcontainer.contains(vpaidslot) && 1 != vast.hidevpaid && o.vastcontainer.removeChild(vpaidslot)),
            vast && (vast.events = []),
            removed = !0,
            impression = !1,
            remainigs = 0,
            _started = !1,
            mp3 = !1,
            imps = [],
            qrts = []
        }
        ,
        this.waitGo = function(e) {
            vast = e
        }
        ,
        this.Remove = function() {
            try {
                o.vastcontainer.contains(tag) && o.vastcontainer.removeChild(tag)
            } catch (e) {}
            this.RemoveForNextAd(),
            removed = !0;
            try {
                o.frame.contains(o.vastcontainer) && 1 != vast.hidevpaid && o.frame.removeChild(o.vastcontainer),
                1 == vast.hidevpaid && hide2(o.vastcontainer)
            } catch (e) {}
        }
    }
      , Settings = function(is) {
        var i, style = [], f = [], fbg = [], fimg = [], ftitle = [], fvalue = [], faction = [], f2 = [], f2bg = [], f2img = [], f2title = [], f2value = [], f2action = [], stout = [], is_visible = !1, open_action, open_settings = -1, empty = !0, key = is, iset = "settings" == is, playlist, shuffle = [], shuffle_ = [], subopt1, plid = "", plfolder = "", plx = -1, pldly, sub_settings_on = !1, sub_settings = !1, autonextopenfolder = !1, autoprevopenfolder = !1, justshow = !1, removed = !1, showinterval, arrinterval, wheelinterval, hidetimeout, settimer, shr = [], clr = [], iclr = 0, _cstm = 0, srch, evntclk = "click", evntovr = o.system.mobile ? "touchstart" : "mouseover", evntout = o.system.mobile ? "touchend" : "mouseout";
        style = UpdateObject(style, v[is]),
        style = MarginPadding(v[is], "margin", "margin"),
        style = MarginPadding(v[is], "marginproc", "marginproc"),
        style = MarginPadding(v[is], "mrgnprs", "mrgnprs"),
        0 == style.marginbg && (style.marginbgpadding = "0 0 0 0"),
        style = MarginPadding(v[is], "bgpadding", "marginbgpadding"),
        style = MarginPadding(v[is], "padding", "padding");
        var vllft = "left" == style.valuealign
          , icnsz = style.activeiconsize;
        style.scrollwidth = 0;
        var _activeIcon = " width='" + 2 * icnsz + "' height='" + (2 * icnsz > style.valuefontsize ? 2 * icnsz : style.valuefontsize) + "' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>"
          , _xIcon = "<svg width='" + 2 * icnsz + "' height='" + style.valuefontsize + "' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg' ><g><ellipse ry='" + (icnsz - 1) + "' rx='" + (icnsz - 1) + "' cy='" + (style.valuefontsize / 2 + 2) + "' cx='" + icnsz + "' stroke='" + CheckColor(style.valuecolor) + "' stroke='1' fill-opacity='0'/></g></svg>"
          , _iconv = "<svg style='margin:" + style.fontsize / 2 + "px " + (vllft ? "-" + style.paddingleft : existv(style.icnmr, 5)) + "px 0 0'" + _activeIcon + "<polyline stroke='" + CheckColor(style.valuecolor) + "' stroke-width='" + icnsz / 2 + "' fill='none' points='-1 2.38 3.82 7.2 11 -1'></polyline></svg>";
        _activeIcon = 1 == style.icnv ? _iconv : "<svg style='margin-top:3px'" + _activeIcon + "<g><ellipse ry='" + icnsz + "' rx='" + icnsz + "' cy='" + (2 * icnsz > style.valuefontsize ? icnsz : style.valuefontsize / 2) + "' cx='" + icnsz + "' fill='" + CheckColor(style.valuecolor) + "'/></g></svg>";
        var xx = 4
          , _nextIcon = "<pjsdiv style='display:inline-block;'><svg width='" + (xx + 2) + "' height='" + style.valuefontsize + "' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'><g><line x1='1' y1='" + (style.valuefontsize / 2 - xx) + "' x2='" + xx + "' y2='" + style.valuefontsize / 2 + "' stroke='#" + style.color + "' stroke-width='1' stroke-linecap='round'/><line x1='" + xx + "' y1='" + style.valuefontsize / 2 + "' x2='1' y2='" + (style.valuefontsize / 2 + xx) + "' stroke='#" + style.color + "' stroke-width='1' stroke-linecap='round'/></g></svg></pjsdiv>"
          , _prevIcon = "<pjsdiv style='display:inline-block;'><svg width='" + (xx + 10) + "' height='" + (style.valuefontsize + 1) + "' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg' style='float:left'><g><line x1='1' y1='" + (style.valuefontsize / 2 + 2) + "' x2='" + xx + "' y2='" + (style.valuefontsize / 2 - xx + 2) + "' stroke='#" + style.color + "' stroke-width='1' stroke-linecap='round' /><line x1='1' y1='" + (style.valuefontsize / 2 + 2) + "' x2='" + xx + "' y2='" + (style.valuefontsize / 2 + xx + 2) + "' stroke='#" + style.color + "' stroke-width='1' stroke-linecap='round'/></g></svg></pjsdiv>"
          , bordercolor = hex2rgb(existv(style.bordercolor, "ffffff"), existv(style.brda, 1))
          , container = createElement("div");
        o.frame.appendChild(container),
        css(container, {
            overflow: "hidden",
            display: "block",
            opacity: 0,
            "border-radius": style.rounding
        }),
        1 == style.bgborder && css(container, {
            border: "1px solid " + CheckColor(existv(style.bgbordercolor, "ffffff"))
        });
        var mpi = {};
        for (var i in o.menuproc)
            o.menuproc.hasOwnProperty(i) && (mpi[o.menuproc[i]] = -1);
        container.style.zIndex = iset ? 503 : 502;
        var control = createElement("div"), downi, downin;
        if (o.small && (style.smallfontsize > 0 && (style.fontsize = style.smallfontsize),
        style.floatwidthsmall > 0 && (style.floatwidth = style.floatwidthsmall),
        style.floatheightsmall > 0 && (style.floatheight = style.floatheightsmall)),
        css(control, {
            position: "relative",
            top: 0,
            left: 0,
            display: "block",
            width: "100%",
            "padding-top": style.bgpaddingtop,
            "padding-right": style.bgpaddingright + (iset && 1 == style.floatleft ? 0 : 20),
            "padding-bottom": style.bgpaddingbottom,
            "padding-left": style.bgpaddingleft,
            color: style.color,
            "font-size": style.fontsize * existv(v.globalfs, 1),
            "font-family": checkFont(style.font),
            "letter-spacing": style.letterspacing + "px"
        }),
        o.system.safari && css(control, {
            "min-width": 220
        }),
        "playlist" !== is && css(control, {
            "overflow-y": iset && 1 == style.floatleft ? "hidden" : "scroll"
        }),
        container.appendChild(control),
        1 != style.floatleft) {
            var control2 = createElement("div");
            css(control2, {
                display: "block",
                overflow: "hidden",
                "border-radius": style.rounding
            }),
            1 != style.floatleft && o.system.safari && css(control2, {
                "min-width": 220
            }),
            control.appendChild(control2)
        }
        if (attr(control, {
            id: v.id + "_" + is
        }),
        "playlist" == is && (1 == style.floatleft ? (css(control, {
            width: "100%",
            "padding-right": style.bgpaddingright,
            "padding-bottom": style.bgpaddingbottom + 20,
            "overflow-x": "scroll",
            "overflow-y": "hidden",
            "white-space": "nowrap"
        }),
        css(container, {
            width: o.screen_w - style.marginright - style.marginleft,
            height: style.floatheight + style.bgpaddingtop + style.bgpaddingbottom
        })) : (css(control, {
            "overflow-y": "scroll",
            "overflow-x": "hidden"
        }),
        1 == style.width100 && ResizePlaylist()),
        1 == style.marginbg && css(container, {
            "background-color": style.marginbgcolor
        }),
        1 == v.playlist.droplist && hide2(container)),
        1 == style.scrollarrows) {
            var arr_up = createElement("div")
              , scrollbgcolor = hex2rgb(1 == style.marginbg ? style.marginbgcolor : style.bgcolor);
            1 == style.floatleft ? (StyleArrow(arr_up, "to right, rgba(" + scrollbgcolor + "," + (1 * style.bga + .3) + "), rgba(" + scrollbgcolor + ",0)", "left", 12, 5, 7, 10, 7, 10, 12, 15),
            arr_up.addEventListener(evntclk, ScrollLeft)) : (StyleArrow(arr_up, "to bottom, rgba(" + scrollbgcolor + "," + (1 * style.bga + .3) + "), rgba(" + scrollbgcolor + ",0)", "top", 5, 12, 10, 7, 10, 7, 15, 12),
            arr_up.addEventListener(evntclk, ScrollUp));
            var arr_down = createElement("div");
            1 == style.floatleft ? (StyleArrow(arr_down, "to left, rgba(" + scrollbgcolor + "," + (1 * style.bga + .3) + "), rgba(" + scrollbgcolor + ",0)", "right", 8, 5, 13, 10, 13, 10, 8, 15),
            arr_down.addEventListener(evntclk, ScrollRight)) : (StyleArrow(arr_down, "to bottom, rgba(" + scrollbgcolor + ",0), rgba(" + scrollbgcolor + "," + (1 * style.bga + .3) + ")", "bottom", 5, 8, 10, 13, 10, 13, 15, 8),
            arr_down.addEventListener(evntclk, ScrollDown)),
            arr_up.addEventListener("mouseover", ScrollOverOut),
            arr_up.addEventListener("mouseout", ScrollOverOut),
            arr_down.addEventListener("mouseover", ScrollOverOut),
            arr_down.addEventListener("mouseout", ScrollOverOut),
            control.addEventListener("wheel", Wheel, {
                passive: !1
            }),
            arr_up.addEventListener("mouseup", onMouseUp),
            arr_down.addEventListener("mouseup", onMouseUp),
            container.appendChild(arr_up),
            container.appendChild(arr_down),
            clearInterval(arrinterval),
            arrinterval = setInterval(ArrowsInterval, 1e3)
        }
        if (control.addEventListener(evntovr, ControlOver, {
            passive: !1
        }),
        control.addEventListener(evntout, ControlOut, {
            passive: !1
        }),
        v.playlist.srch > 0 && !srch && "playlist" == is && void 0 !== PluginPlSrch && (srch = new PluginPlSrch(!1,v.playlist)),
        iset)
            for (var i = 1; i < 15; i++)
                if (exist(v["control_" + is][is + i]) && (v.settings[is + i] = v["control_" + is][is + i],
                exist(v["control_" + is][is + i + "title"]) && (v.settings[is + i + "title"] = v["control_" + is][is + i + "title"]),
                exist(v["control_" + is][is + i + "action"]) && (v.settings[is + i + "action"] = v["control_" + is][is + i + "action"])),
                exist(v.settings[is + i]) && 1 == v.settings[is + i]) {
                    CreateItem("f", i),
                    StyleItem(f[i], fbg[i], ftitle[i], fvalue[i], i);
                    var act = v.settings[is + i + "action"]
                      , ttl = v.settings[is + i + "title"];
                    if (exist(act) || (v.settings[is + i + "action"] = "speed"),
                    act && act.indexOf("custom") > -1 && ttl && !v["files_" + act]) {
                        if (ttl.indexOf(":") > 0) {
                            for (var mi = act.slice(-1), dm = v["menu" + mi], k = trim(ttl.substr(ttl.indexOf(":") + 1)).split(","), ka = [], kap, j = 0; j < k.length; j++)
                                k[j].indexOf("(*)") > -1 && (!exist(dm) && (dm = j),
                                k[j] = k[j].replace("(*)", "")),
                                kap = k[j].indexOf("->api:"),
                                ka[j] = "",
                                kap > 0 && (ka[j] = k[j].substr(kap + 6),
                                k[j] = k[j].substr(0, kap));
                            o["files_" + act] = k,
                            o["m" + mi + "_api"] = ka,
                            ttl = v.settings[is + i + "title"] = ttl.substr(0, ttl.indexOf(":"))
                        } else
                            o["files_" + act] = [],
                            v.settings[is + i + "title"] = ttl;
                        v["files_" + act] = 1,
                        o["current_" + act] = existv(dm, 0)
                    }
                    ftitle[i].innerHTML = Lang(act),
                    exist2(ttl) && (ftitle[i].innerHTML = ttl),
                    "share" == act && (o.shareme = !0),
                    faction[i] = act,
                    Value(i),
                    "openfile" == faction[i] && "undefined" != typeof PluginOpen && (!o.upldfl && (o.upldfl = new PluginOpen),
                    exist(window.FileReader) && (ftitle[i].innerHTML = o.upldfl.Input(),
                    o.upldfl.Ch())),
                    faction[i]in o.menuproc && (mpi[faction[i]] = i),
                    f[i].addEventListener(evntovr, onOver, {
                        passive: !1
                    }),
                    f[i].addEventListener(evntout, onOut, {
                        passive: !1
                    }),
                    f[i].addEventListener(evntclk, onClick),
                    f[i].addEventListener("mouseup", onMouseUp),
                    1 == v.settings[is + i + "hide"] && css(f[i], {
                        height: 0
                    })
                }
        function Wheel(e) {
            "playlist" == is && 1 == style.floatleft && e && 0 == e.deltaX && 0 != e.deltaY && (control.scrollLeft -= e.deltaY,
            e.preventDefault()),
            clearInterval(wheelinterval),
            wheelinterval = setInterval(ControlOut, 3e3),
            Retimer()
        }
        function ControlOver() {
            o.mouseDown = !0
        }
        function ControlOut() {
            1 == style.showovercontrol && (clearTimeout(o.settingsovertimer),
            o.settingsovertimer = setTimeout((function() {
                o.mouseDown || o.setaction || HideControl()
            }
            ), v.settings.showoverto > 0 ? 1e3 * v.settings.showoverto : o.system.tv ? 2e3 : 1e3)),
            o.mouseDown = !1
        }
        function onOver(event) {
            o.fullscreen && o.volumewheel && o.actions.volumewheel(!1);
            var i = event.target.getAttribute("fid"), x;
            if (i ? x = "f" : event.target.getAttribute("f2id") && (i = event.target.getAttribute("f2id"),
            x = "f2"),
            i) {
                i = parseInt(i);
                var opn = !1;
                if (exist(eval(x)[i])) {
                    if (style.bgaover > -1 && css(eval(x + "bg")[i], {
                        opacity: style.bgaover
                    }),
                    exist2(style.bgbrovr) && css(eval(x + "bg")[i], {
                        filter: "brightness(" + style.bgbrovr + ")"
                    }),
                    style.aover > -1 && (css(eval(x + "title")[i], {
                        opacity: style.aover
                    }),
                    css(eval(x + "value")[i], {
                        opacity: style.aover
                    })),
                    "playlist" == is && 0 == faction[i].indexOf("playlist")) {
                        var id = faction[i].substr(8);
                        plid == id || plfolder == id ? (css(eval(x + "title")[i], {
                            color: style.valuecolor
                        }),
                        css(eval(x + "value")[i], {
                            color: style.valuecolor
                        }),
                        opn = !0) : css(eval(x + "title")[i], {
                            color: style.color
                        })
                    }
                    1 == style.playbgcolored && exist(style.playbgcolor) && opn || css(eval(x + "bg")[i], {
                        backgroundColor: style.bgcolorover
                    })
                }
            }
        }
        function onOut(event) {
            o.fullscreen && o.volumewheel && o.actions.volumewheel(!0);
            var i = event.target.getAttribute("fid"), x, opn = !1;
            if (clearInterval(downin),
            Retimer(),
            i ? x = "f" : event.target.getAttribute("f2id") && (i = event.target.getAttribute("f2id"),
            x = "f2"),
            i && exist(eval(x)[i])) {
                if (style.bgaover > -1 && css(eval(x + "bg")[i], {
                    opacity: style.bga
                }),
                exist2(style.bgbrovr) && css(eval(x + "bg")[i], {
                    filter: "brightness(1)"
                }),
                style.aover > -1 && (css(eval(x + "title")[i], {
                    opacity: style.a
                }),
                css(eval(x + "value")[i], {
                    opacity: style.a
                })),
                "playlist" == is && 0 == faction[i].indexOf("playlist")) {
                    var id = faction[i].substr(8);
                    plid == id || plfolder == id ? (css(eval(x + "title")[i], {
                        color: style.valuecolor
                    }),
                    css(eval(x + "value")[i], {
                        color: style.valuecolor
                    }),
                    opn = !0) : exist(o.plhistory[id]) ? HistoryPlaylist(i) : css(eval(x + "title")[i], {
                        color: style.color
                    })
                }
                1 == style.playbgcolored && exist(style.playbgcolor) && opn || css(eval(x + "bg")[i], {
                    backgroundColor: o.plhistory[id] ? style.historybgcolor : style.bgcolor
                })
            }
        }
        function onClick(e) {
            if (!justshow) {
                var t = new Date;
                o.clicktime = t.getTime();
                var i = e.target.getAttribute("fid");
                i && exist(f[i]) && exist(faction[i]) && ("playlist" == is && (o.seekto = void 0),
                Action(i, 0)),
                JsClk()
            }
        }
        function onMouseDown(e) {
            if (!justshow) {
                var t = e.target.getAttribute("f2id");
                t && exist(f2action[t]) && open_action in o.menuproc && (downi = t,
                downin = setInterval(DownIn, 200))
            }
        }
        function DownIn() {
            Action2(downi)
        }
        function onMouseUp(e) {
            clearInterval(downin),
            e.cancelBubble = !0,
            Retimer()
        }
        function onClick2(e) {
            if (clearInterval(downin),
            !justshow) {
                var t = new Date;
                o.clicktime = t.getTime();
                var i = e.target.getAttribute("f2id");
                i && (0 == i ? "color" == f2action[0] ? (Remove2(),
                Action(iclr)) : Home() : exist(f2action[i]) && Action2(i))
            }
        }
        function onClickSubtitle(e) {
            var t = e.target.getAttribute("setupx");
            t && ActionOptions(t)
        }
        function onClickSubtitle2(e) {
            Retimer();
            var t = e.target.getAttribute("f2id");
            if (exist(f2action[t]) && f2i("=", t) > 0) {
                var o = f2action[t].substr(0, f2i("=", t))
                  , i = f2action[t].substr(f2i("=", t) + 1)
                  , s = open_action + "_reset";
                v[s] || (v[s] = []),
                exist(v[s][o]) || (v[s][o] = v[o] + ""),
                StyleSubtitle(o, i)
            }
        }
        function StyleSubtitle(e, t) {
            v[e] = t,
            o.storage && 1 == v.sub_designstore && "sub_shift" != e && localStorage.setItem("pljs" + e, t),
            o.casting && o.chromecast && o.chromecast.Sub(),
            o.actions.RenewSubtitle(),
            ActionOptions(e)
        }
        function onClickTimer2(e) {
            var t = e.target.getAttribute("f2id")
              , i = f2action[t];
            if (exist(i) && i.indexOf("=") > 0) {
                var s = i.substr(0, i.indexOf("="))
                  , r = i.substr(i.indexOf("=") + 1);
                v[s] = r,
                SubtitleTimerMenu(),
                Value(o[open_action + "_i"]),
                "offsettimer" == open_action && SettingsTimers("offsetwrite")
            }
        }
        function Value(e) {
            if (exist(faction[e])) {
                var t = !1
                  , i = !1
                  , s = "";
                if (iset) {
                    if ("quality" == faction[e] && (s = o.media.getQuality()),
                    "audiotrack" == faction[e] && (s = o.media.getAudioTrack()),
                    "share" == faction[e] && (s = " ",
                    i = !0),
                    faction[e].indexOf("custom") > -1 && o["files_" + faction[e]] && o["files_" + faction[e]].length > 0) {
                        var r = o["current_" + faction[e]];
                        -1 != r && (s = o["files_" + faction[e]][r]),
                        i = !0
                    }
                    if ("channel" == faction[e] && o.channels && (s = o.files_channel[o.current_channel]),
                    "audiotrack" != faction[e] && "channel" != faction[e] && "quality" != faction[e] || (0 == o["files_" + faction[e]].length ? t = !0 : 1 != o["files_" + faction[e]].length || 1 == style.show1value && 1 != o["files_" + faction[e]][0] ? i = !0 : t = !0),
                    "airplay" == faction[e] && (o.airplay ? i = !0 : t = !0),
                    "download" == faction[e] && ("native" == o.file_type || v.download ? i = !0 : t = !0),
                    "subtitle" == faction[e])
                        if (exist(o.subs)) {
                            i = !0,
                            o.subtitle_on || 1 == v.sub_off ? o.sbt && (s = o.files_subtitle[o.subtitle_on ? o.current_subtitle : o.sbt.ioff()]) : s = "";
                            for (var n = 0, a = 0; a < o.subs.length; a++)
                                "" != o.subs[a] && n++;
                            1 == n && 1 == o.subload && (n = 0),
                            1 == v.sub_upload && 1 == v.sub_upload0 || 0 == n && (t = !0,
                            i = !1)
                        } else
                            t = !0;
                    if ("speed" == faction[e] && (1 == (s = o.files_speed[o.current_speed]) && 1 != style.speed1 && (s = Lang("normal")),
                    i = !0,
                    ("vimeo" == o.file_type || o.media.isLive() && 1 != style.speed4live) && (t = !0,
                    i = !1)),
                    faction[e]in o.menuproc && (s = FltrVal(faction[e]),
                    i = !0),
                    faction[e].indexOf("timer") > 0) {
                        for (var l = " ", c = ["hour", "minute", "second"], d = 0; d < c.length; d++)
                            exist(v[faction[e] + c[d]]) && " " !== v[faction[e] + c[d]] && (l += (" " !== l ? ":" : "") + v[faction[e] + c[d]]);
                        s = " 0:0" != l && l.indexOf(":") > -1 ? l : " ",
                        o[faction[e] + "val"] = s,
                        i = !0
                    }
                }
                fvalue[e].innerHTML = s + "&nbsp;" + ("" != s && 1 != style.hidearrow ? ' <svg width="5px" height="7px" viewBox="-1 -1 5 8" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><polyline stroke="' + CheckColor(style.valuecolor) + '" stroke-width="1" fill="none" points="0 0 3 3 0 6"></polyline></svg>' : "");
                var u = iset && -1 != open_settings;
                t && (hide(f[e]),
                iset && (stout[e] && clearTimeout(stout[e]),
                o.controls ? o.controls.SettingsN(e, !1, s) : stout[e] = setTimeout((function() {
                    o.controls.SettingsN(e, !1, s)
                }
                ), 200)),
                css(f[e], {
                    position: "absolute",
                    right: 0,
                    top: -100
                })),
                i && (u || (1 == style.floatleft ? css(f[e], {
                    display: "inline-block"
                }) : show(f[e])),
                iset && (stout[e] && clearTimeout(stout[e]),
                o.controls ? o.controls.SettingsN(e, !0, s) : stout[e] = setTimeout((function() {
                    o.controls.SettingsN(e, !0, s)
                }
                ), 500)),
                css(f[e], {
                    position: "relative",
                    right: 0,
                    top: 0
                })),
                Resize()
            }
            for (var p = 1; p < f.length; p++)
                if (f[p] && isVisible(f[p])) {
                    var h = !1;
                    empty && (h = !0),
                    empty = !1,
                    h && o.controls && o.controls.refresh()
                }
        }
        var stvs = 0;
        function Action(e, t, i) {
            if (i && (faction[e] = i),
            exist(faction[e])) {
                o.setaction = !0,
                Retimer();
                var s = VisibleItems();
                if (iset && (-1 == open_settings ? stvs = s[0] : s[0] = stvs),
                open_action != faction[e]) {
                    var r = (open_action = faction[e]).indexOf("custom") > -1;
                    if ("quality" == open_action || "audiotrack" == open_action || "subtitle" == open_action || "speed" == open_action || r || "channel" == open_action || open_action in o.menuproc || open_action.indexOf("timer") > 0 || "share" == open_action || "color" == open_action) {
                        open_settings = e;
                        var n = copyObject(o["files_" + open_action]);
                        if ("sleeptimer" == open_action && (n = 1 == style.sleep2 ? SettingsTimers("sleep2options") : SettingsTimers("sleepoptions")),
                        "offsettimer" == open_action && (n = SettingsTimers("offsetoptions")),
                        "share" == open_action && o.share) {
                            n = [];
                            for (var a = 1; a <= 16; a++)
                                exist(v["share" + a]) && (n.push(Lang(v["share" + a])),
                                shr[n.length] = v["share" + a])
                        }
                        if ("color" == open_action && o.tagvideo) {
                            n = [],
                            iclr = e;
                            for (a = 0; a < o.clr_options.length; a++) {
                                var l = o.clr_options[a].substr(4);
                                n.push(Lang(l)),
                                clr[n.length] = l
                            }
                        }
                        if (0 == n.length && r) {
                            var c = open_action.slice(-1);
                            return exist(window["PlayerjsMenu" + c]) && window["PlayerjsMenu" + c](v.id),
                            void HideControl()
                        }
                        var d = o["current_" + open_action]
                          , u = o["pressed_" + open_action];
                        for (a = 1; a < f.length; a++)
                            f[a] && (f[a].style.display = "none");
                        f2 = [],
                        CreateItem("f2", 0),
                        StyleItem(f2[0], f2bg[0], f2title[0], f2value[0], 0),
                        css(f2[0], {
                            "border-bottom": "1px solid " + (1 == style.bordercolored ? bordercolor : "rgba(100,100,100,0.7)")
                        }),
                        _cstm = t;
                        var p = !1;
                        if (f2title[0].innerHTML = (s[0] < 2 || 1 == _cstm || 1 == style.noprevicon ? "" : _prevIcon) + hidesvg(exist2v(v.settings[is + e + "title"], Lang(v.settings[is + e + "action"]))) + (o[faction[e] + "val"] ? o[faction[e] + "val"] : ""),
                        "subtitle" == open_action && !o.dash_subs) {
                            var h = createElement("div");
                            h.innerHTML = Lang("options"),
                            css(h, {
                                color: style.color,
                                pointerEvents: "auto",
                                cursor: "pointer"
                            }),
                            f2value[0].appendChild(h),
                            h.addEventListener(evntclk, SubtitleSettings),
                            p = !0
                        }
                        if ("subtitle" == open_action && 1 == v.sub_upload && !o.system.tv && exist(window.FileReader)) {
                            var m = createElement("div");
                            !o.sbt && (o.sbt = new PluginSub),
                            m.innerHTML = "<input type='file' id='" + v.id + "_subfile' accept='.vtt,.ass,.srt' style='display:none'/>" + Lang("upload"),
                            css(m, {
                                color: style.color,
                                pointerEvents: "auto",
                                cursor: "pointer",
                                "margin-left": p ? "10px" : 0
                            }),
                            f2value[0].appendChild(m),
                            o.subupld = gebi(v.id + "_subfile"),
                            o.subupld.onchange = o.sbt.SubUpload,
                            m.addEventListener(evntclk, o.sbt.SubUpload)
                        }
                        if (p && sub_settings_on)
                            for (2 == _cstm && (n = [],
                            hide2(f2[0])),
                            a = 0; a < o.sub_options.length; a++)
                                0 == v.sub_all && "sub_color2" == o.sub_options[a] || n.push("pjslng_" + o.sub_options[a]);
                        if (css(f2title[0], {
                            "font-size": style.headfontsize * existv(v.globalfs, 1)
                        }),
                        f2action[0] = "home",
                        open_action in o.menuproc && (Menuproc(open_action),
                        iclr > 0 && o.clr_options.indexOf("clr_" + open_action) > -1 && (f2title[0].innerHTML = _prevIcon + Lang(open_action),
                        f2action[0] = "color",
                        f2value[0].innerHTML = FltrVal(open_action)),
                        css(f2value[0], {
                            width: 2.5 * style.valuefontsize,
                            "text-align": "right"
                        })),
                        1 != _cstm && s[0] > 1 ? (f2[0].addEventListener(evntovr, onOver),
                        f2[0].addEventListener(evntout, onOut),
                        f2[0].addEventListener(evntclk, onClick2),
                        f2[0].addEventListener("mouseup", onMouseUp)) : css(f2[0], {
                            cursor: "default"
                        }),
                        1 == style.nohead && hide2(f2[0]),
                        exist(n)) {
                            var g = "";
                            for (a = 0; a < n.length; a++) {
                                var w = a + 1
                                  , b = 0
                                  , y = !1;
                                if (n[a] && "" != trim(n[a])) {
                                    if ("quality" == open_action && (n[a] == Lang("auto") && (b = 1),
                                    "hls" == o.file_type && 1 == v.hlsqhsort)) {
                                        var x = int(n[a]);
                                        x && x < g && (b = 2),
                                        g = int(n[a])
                                    }
                                    if (CreateItem("f2", w, b),
                                    StyleItem(f2[w], f2bg[w], f2title[w], f2value[w], faction[e], e),
                                    "speed" == open_action && 1 == n[a] && 1 != style.speed1 && (n[a] = Lang("normal")),
                                    "string" == typeof n[a])
                                        if (0 == n[a].indexOf("<<<") && (n[a] = n[a].replace("<<<", ""),
                                        y = !0),
                                        n[a].indexOf("timer") > 0 && (o[open_action + "_i"] = e),
                                        0 == n[a].indexOf("pjslng")) {
                                            var k = n[a];
                                            k.indexOf("timer") > 0 ? f2title[w].innerHTML = Lang(n[a].substr(k.indexOf("timer") + 5)) : f2title[w].innerHTML = Lang(n[a].substr(7)),
                                            "pjslng_sub_sizeproc" == n[a] && (subopt1 = f2[w],
                                            css(f2[w], {
                                                "border-top": "1px solid " + (1 == style.bordercolored ? bordercolor : "rgba(100,100,100,0.7)")
                                            }))
                                        } else
                                            f2title[w].innerHTML = n[a];
                                    else
                                        f2title[w].innerHTML = n[a];
                                    if (f2action[w] = open_action + a,
                                    d != a && u != a || (f2value[w].innerHTML = d == a ? _activeIcon : _xIcon,
                                    d == a && StyleActive(w)),
                                    "string" == typeof n[a]) {
                                        if (0 == n[a].indexOf("pjslng")) {
                                            var A = n[a].substr(7);
                                            A.indexOf("color") > 0 ? f2value[w].innerHTML = "<div style='" + ("000000" == v[A] ? "border:1px solid #999;height:8px;width:8px;" : "height:10px;width:10px;") + ";background-color:" + (-1 == v[A].indexOf("#") ? "#" : "") + v[A] + ";border-radius:10px;'></div>" : exist(v[n[a].substr(7)]) && (f2value[w].innerHTML = v[n[a].substr(7)])
                                        }
                                        if ("share" == open_action && exist(shr[w]) && o.share && (f2value[w].innerHTML = o.share.icon(shr[w], .7, CheckColor(style.valuecolor))),
                                        "color" == open_action && exist(clr[w]) && o.tagvideo && (f2value[w].innerHTML = FltrVal(clr[w])),
                                        "quality" == open_action && (n[a] == Lang("auto") && o.media.autoQuality() && (style.valuecolor == style.color && (f2value[w].innerHTML = _activeIcon),
                                        StyleActive(w)),
                                        exist2(v.forbidden_quality)))
                                            for (var _ = v.forbidden_quality.split(","), B = 0; B < _.length; B++)
                                                n[a].indexOf(_[B]) > -1 && hide2(f2[w])
                                    }
                                    var j = "";
                                    "string" == typeof n[a] && 0 == n[a].indexOf("pjslng") && (attr(f2[w], {
                                        f2parent: e,
                                        setupx: n[a].substr(7)
                                    }),
                                    j = "onClickSubtitle"),
                                    y ? css(f2[w], {
                                        cursor: "default"
                                    }) : (f2[w].addEventListener(evntovr, onOver),
                                    f2[w].addEventListener(evntout, onOut),
                                    "onClickSubtitle" == j ? f2[w].addEventListener(evntclk, onClickSubtitle) : f2[w].addEventListener(evntclk, onClick2),
                                    f2[w].addEventListener("mouseup", onMouseUp),
                                    f2[w].addEventListener("mousedown", onMouseDown))
                                }
                            }
                        }
                        StyleFew(),
                        Resize()
                    }
                    if ("download" == faction[e] && (o.actions.Download(),
                    open_action = -1),
                    "openfile" == faction[e] && exist(o.upldfl) && (o.upldfl.open(),
                    open_action = -1),
                    faction[e].indexOf("playlist") > -1) {
                        var z = faction[e].substr(8);
                        if (exist(o.playlist_dic[z])) {
                            var C = o.playlist_dic[z].file;
                            if (exist(C)) {
                                if (faction[e].indexOf("playlist") > -1 && exist(pldly))
                                    return void (open_action = -1);
                                if (0 == C.indexOf("seek:"))
                                    return 0 != z.indexOf("x" + plfolder) ? (o.seekto = C.substr(5),
                                    void playById(z.substr(0, z.lastIndexOf("-")) + "-0")) : (o.start || (o.seekto = C.substr(5)),
                                    o.play || o.actions.Play(),
                                    apiProcessor("seek", C.substr(5)),
                                    void (0 == v.playlist.always && 1 == v.playlist.autohide && HideControl()));
                                ActionPlaylist(e),
                                UpdateStart(z),
                                SettingsTimers("offset"),
                                exist(o.playlist_dic[z].redirect) && 1 == v.redirect && 1 == v.redirectplaylist ? redirect(o.playlist_dic[z].redirect) : (UpdateVars0(z),
                                o.actions.NewFile(C, 1 == v.playlist.dontplay ? 1 : void 0),
                                0 == v.playlist.always && 1 == v.playlist.autohide && setTimeout(HideControl, 200),
                                autonextopenfolder = !1,
                                autoprevopenfolder = !1,
                                UpdateVars(z),
                                js("usernew"))
                            } else
                                exist(o.playlist_dic[z].folder) && (UpdatePlaylist(z),
                                autonextopenfolder ? -1 == plx && Action(0, 0) : autoprevopenfolder && -1 == plx && Action(parseInt(f.length) - 2, 0))
                        }
                        o.droplist && o.droplist.Update()
                    }
                    "airplay" == faction[e] && o.media.Airplay()
                }
            }
        }
        function ActionOptions(e) {
            if ("sub_x" != e)
                if ("sub_reset" != e) {
                    Retimer();
                    for (var t = 0; t < f2.length; t++)
                        f2[t] && (f2[t].style.display = "none");
                    f2 = [],
                    CreateItem("f2", 0),
                    StyleItem(f2[0], f2bg[0], f2title[0], f2value[0], 0),
                    css(f2[0], {
                        "border-bottom": "1px solid " + (1 == style.bordercolored ? bordercolor : "rgba(100,100,100,0.7)")
                    }),
                    e.indexOf("timer") > 0 ? (f2[0].addEventListener(evntclk, SubtitleTimerMenu),
                    f2title[0].innerHTML = Lang(e.substr(e.indexOf("timer") + 5))) : (f2[0].addEventListener(evntclk, SubtitleSettingsMenu),
                    f2title[0].innerHTML = (1 != style.noprevicon ? _prevIcon : "") + Lang(e)),
                    css(f2title[0], {
                        "font-size": style.headfontsize * existv(v.globalfs, 1)
                    }),
                    f2[0].addEventListener(evntovr, onOver),
                    f2[0].addEventListener(evntout, onOut),
                    f2[0].addEventListener("mouseup", onMouseUp);
                    var o = []
                      , i = !1;
                    if (e.indexOf("size") > 0 && (o = ["50%", "75%", "100%", "125%", "150%", "175%", "200%", "250%", "300%", "400%"]),
                    e.indexOf("bga") > 0 && (o = ["0", "0.2", "0.3", "0.4", "0.5", "0.6", "0.7", "0.8", "0.9", "1"]),
                    e.indexOf("shift") > 0)
                        for (t = -5; t < 5.5; t += .5)
                            o.push(Math.round(100 * t) / 100);
                    if (e.indexOf("weight") > 0 && (o = [200, 400, 600]),
                    e.indexOf("bottom") > 0)
                        for (t = 0; t < 21; t++)
                            o[t] = 10 * t;
                    if (e.indexOf("hour") > 0)
                        for (t = 0; t < 24; t++)
                            o[t] = t;
                    if (e.indexOf("minute") > 0 || e.indexOf("second") > 0)
                        for (t = 0; t < 60; t++)
                            o[t] = t;
                    if (e.indexOf("shadow") > 0 && (i = !0,
                    o = [0, 1]),
                    e.indexOf("stroke") > 0 && (i = !0,
                    o = [0, 1]),
                    e.indexOf("color") > 0) {
                        o = ["ffffff", "ffeeab", "72ccf8", "62de50", "faed54", "feba54", "e8bbff", "ffc7d1", "aaaaaa", "d9bb8c", "b3fee8", "4bd9ac", "ffff00", "D90000", "073DA0", "409829", "644082", "000000"];
                        var s = v[e].replace("#", "");
                        -1 == o.indexOf(s) && (o[8] = s)
                    }
                    for (n = 1; n <= o.length; n++)
                        CreateItem("f2", n, 0),
                        StyleItem(f2[n], f2bg[n], f2title[n], f2value[n], n),
                        css(f2value[n], {
                            "padding-left": 0
                        }),
                        e.indexOf("color") > 0 || e.indexOf("bottom") > 0 || e.indexOf("timer") > 0 || e.indexOf("shift") > 0 ? (n % 3 != 0 && css(f2[n], {
                            float: "left"
                        }),
                        css(f2[n], {
                            width: "33.3%"
                        }),
                        e.indexOf("color") > 0 ? (o[n - 1] = existv(v["subclr" + (n - 1)], o[n - 1]),
                        f2title[n].innerHTML = "<div style='" + ("000000" == o[n - 1] ? "border:1px solid #999;height:18px;width:18px;" : "height:20px;width:20px;") + ";background-color:" + CheckColor(o[n - 1]) + ";border-radius:20px;'></div>",
                        css(f2[n], {
                            "line-height": 1
                        })) : f2title[n].innerHTML = o[n - 1]) : e.indexOf("weight") > 0 ? f2title[n].innerHTML = o[n - 1] : (n % 2 != 0 && css(f2[n], {
                            float: "left"
                        }),
                        css(f2[n], {
                            width: "50%"
                        }),
                        f2title[n].innerHTML = i ? Lang(o[n - 1] + "val") : o[n - 1]),
                        f2action[n] = e + "=" + o[n - 1],
                        (o[n - 1] == v[e] && " " != String(v[e]) || v[e] == "#" + o[n - 1]) && (f2value[n].innerHTML = _activeIcon,
                        StyleActive(n)),
                        f2[n].addEventListener(evntovr, onOver),
                        f2[n].addEventListener(evntout, onOut),
                        e.indexOf("timer") > 0 ? f2[n].addEventListener(evntclk, onClickTimer2) : f2[n].addEventListener(evntclk, onClickSubtitle2),
                        f2[n].addEventListener("mouseup", onMouseUp);
                    Resize()
                } else {
                    var r = open_action + "_reset";
                    if (v[r]) {
                        for (var n in v[r])
                            v[r].hasOwnProperty(n) && StyleSubtitle(n, v[r][n]);
                        SubtitleSettingsMenu()
                    }
                }
            else
                SubtitleSettingsClose()
        }
        function StyleActive(e) {
            f2[e].classList.add("pjs-" + v.id + "-active-menu"),
            css(f2title[1 * e], {
                color: style.valuecolor
            }),
            BgBrAct(f2bg[1 * e])
        }
        function StyleFew() {
            var e = o["few" + open_action];
            if (e && iobj(e))
                for (var t in e)
                    StyleActive(e[t] + 1)
        }
        function UpdateVars0(e) {
            exist(o.playlist_dic[e].poster) && (v.poster = o.playlist_dic[e].poster,
            exist(v.poster) && o.media.Poster(v.poster)),
            exist(o.playlist_dic[e].title) && (o.titlestore = o.playlist_dic[e].title),
            v.playlist.pldelay > 0 && (pldly = setTimeout(Pldelay, 1e3 * v.playlist.pldelay)),
            MediaSess()
        }
        function UpdateVars(e) {
            var t = o.playlist_dic[e].title;
            exist(t) && 1 == v.showtitleplaylist && (o.actions.TitleTemplate(o.playlist_dic[e]) || (v.title = (1 == v.addtitleplaylist && exist(o.maintitle) ? o.maintitle + (1 == v.addtitleplaylistbr ? "<br>" : " ") : "") + t),
            o.actions.Title("title")),
            1 == v.pointed && (exist(o.playlist_dic[e].points) ? v.points = o.playlist_dic[e].points : v.points = [],
            o.controls.RenewPoints());
            for (var i = ["remove", "thumbnails", "download", "skip", "url", "url2", "url3", "vars", "embed", "end", "delete", "duration", "heartbeat", "outside", "label", "title2", "casturl", "castname", "customtext", "autonext"], s = 0; s < i.length; s++) {
                var r = o.playlist_dic[e][i[s]];
                exist(r) ? (o.plopt[i[s]] = r,
                v[i[s]] = r,
                16 == s && (v.playlist.autoplaylist = r)) : s < 4 && (v[i[s]] = void 0)
            }
            for (var n in o.playlist_dic[e])
                0 == n.indexOf("update_") && (v[n.substr(7)] = o.playlist_dic[e][n]),
                n.indexOf("poster") > 0 && (v[n] = o.playlist_dic[e][n]);
            UpdateStart(e);
            var a = o.playlist_dic[e];
            exist(a.sub) && (a.subtitle = a.sub),
            exist(a.subtitle) && o.actions.Subtitle(a.subtitle),
            exist(a.customtext) && o.controls.customTextPl(),
            o.actions.Ctxt(o.playlist_dic[e]),
            o.ctxtnk && o.controls.upText(o.ctxtnk),
            exist(a.design) && apiProcessor("design", a.design),
            exist(a.volume) && o.actions.Volume(a.volume)
        }
        function UpdateStart(e) {
            var t = o.playlist_dic[e].start;
            exist(t) ? "continue" == t ? (options.subtitle && !o.playlist_dic[e].subtitle && (o.playlist_dic[e].subtitle = options.subtitle),
            o.media.time() > 0 ? v.start = o.seekto = o.media.time() : options.start && !o.seekto ? o.seekto = options.start : v.start = 0) : v.start = o.seekto = t : v.start = 0
        }
        function Pldelay() {
            clearTimeout(pldly),
            pldly = null
        }
        function ActionPlaylist(e) {
            if (0 != plx || o.start ? (o.plopenid = e,
            plx > -1 && HistoryPlaylist(plx),
            "" != plid && (!o.plhistory[plid] && exist(o.playlist_dic[plid]) && (o.pldur2 += existv(o.playlist_dic[plid].duration, 0)),
            o.plhistory[plid] = !0,
            shuffle = removebykey(shuffle, plid))) : (css(ftitle[plx], {
                color: style.color
            }),
            css(fbg[plx], {
                backgroundColor: style.bgcolor
            }),
            fvalue[plx].innerHTML = "",
            f[plx].classList.remove("pjs-" + v.id + "-active-pl")),
            faction[e]) {
                var t = faction[e].substr(8);
                fvalue[e].innerHTML = _activeIcon,
                f[e].classList.add("pjs-" + v.id + "-active-pl"),
                css(ftitle[e], {
                    color: style.valuecolor,
                    "text-decoration": "none",
                    opacity: style.a
                }),
                BgBrAct(fbg[e]),
                1 == style.playbgcolored && exist(style.playbgcolor) && css(fbg[e], {
                    backgroundColor: style.playbgcolor
                }),
                plx = e,
                plid = t,
                o.plid = plid,
                v.plstart = plid,
                o.playlist_title = ftitle[e].innerHTML,
                o.plopenid = plid,
                plfolder = o.playlist_dic[t].pjs_parent,
                o.controls && o.controls.PlaylistControls(),
                srch && srch.clear()
            }
        }
        function UpdatePlaylist(e) {
            var t = 0 == e ? o.playlist : o.playlist_dic[e];
            o.plopenid = e;
            for (var i = 0; i < f.length; i++)
                f[i] && (1 == style.floatleft ? control.removeChild(f[i]) : control2.removeChild(f[i]),
                f[i] = null);
            if (f = [],
            plx = -1,
            exist(t.folder)) {
                if (CreateItem("f", a = Object.keys(t.folder).length),
                faction[a] = "playlistfolder",
                StyleItem(f[a], fbg[a], ftitle[a], fvalue[a], a),
                1 == style.floatleft && css(f[a], {
                    width: 1 == style.floatlimitwidth ? style.floatwidth : "auto",
                    height: style.floatheight
                }),
                1 == style.borderbottom) {
                    var s = "1px solid " + hex2rgb(style.headbordercolor, existv(style.brda, 1));
                    1 == style.floatleft ? css(f[a], {
                        borderRight: s
                    }) : css(f[a], {
                        borderBottom: s
                    })
                }
                var r = t.title;
                1 != style.noprevicon && (r = _prevIcon + r),
                ftitle[a].innerHTML = r,
                css(ftitle[a], {
                    "font-size": style.headfontsize * existv(v.globalfs, 1)
                });
                var n = t.pjs_parent;
                f[a].addEventListener(evntovr, onOver),
                f[a].addEventListener(evntout, onOut),
                f[a].addEventListener(evntclk, (function() {
                    PlaylistBack(n)
                }
                )),
                t = t.folder
            }
            var a = Object.keys(t).length;
            shuffle = [],
            shuffle_ = [],
            srch && 1 != style.floatleft && (srch.remove(control2),
            a > v.playlist.srch && srch.add(style, control2));
            for (i = 0; i < a; i++)
                CreateItem("f", i),
                faction[i] = "playlist" + t[i].id,
                exist(o.plhistory[t[i].id]) || exist(t[i].folder) || (shuffle[t[i].id] = i,
                shuffle_[t[i].id] = i),
                StyleItem(f[i], fbg[i], ftitle[i], fvalue[i], i),
                1 == style.floatleft && (0 == icnsz && (css(ftitle[i], {
                    width: style.floatwidth - style.paddingleft - style.paddingright
                }),
                hide2(fvalue[i])),
                css(f[i], {
                    width: 1 == style.floatlimitwidth ? style.floatwidth : "auto",
                    height: style.floatheight
                })),
                ftitle[i].innerHTML = t[i].title ? t[i].title : "&nbsp;",
                1 == v.timestore && 1 == v.playedstore && t[i].id && o.playedstored && o.playedstored.indexOf(t[i].id) > -1 && (t[i].played = 1),
                exist(t[i].played) && 1 == t[i].played && (o.plhistory[t[i].id] = !0,
                HistoryPlaylist(i)),
                exist(t[i].folder) && (fvalue[i].innerHTML = _nextIcon,
                css(fvalue[i], {
                    color: style.color
                })),
                f[i].addEventListener(evntovr, onOver),
                f[i].addEventListener(evntout, onOut),
                f[i].addEventListener(evntclk, onClick),
                f[i].addEventListener("mouseup", onMouseUp),
                exist(o.plhistory[t[i].id]) && HistoryPlaylist(i),
                plid == t[i].id && ActionPlaylist(i),
                plfolder == t[i].id && (css(ftitle[i], {
                    color: style.valuecolor
                }),
                css(fvalue[i], {
                    color: style.valuecolor
                }),
                BgBrAct(fbg[i]));
            Resize(),
            empty = !1,
            o.controls && o.controls.refresh()
        }
        function BgBrAct(e) {
            exist2(style.bgbract) && e && css(e, {
                "background-image": "linear-gradient(rgba(0, 0, 0, " + (1 - 1 * style.bgbract) + ") 0 0)"
            })
        }
        function StyleArrow(e, t, i, s, r, n, a, l, c, d, u) {
            var v = 1 == style.floatleft ? "40px" : "100%"
              , p = 1 == style.floatleft ? "100%" : "40px";
            css(e, {
                position: "absolute",
                display: "inline-block",
                width: v,
                height: p,
                "text-align": "center"
            }),
            1 == style.scrollarrowgradient && css(e, {
                background: "-moz-linear-gradient(" + t + ")",
                background: "-webkit-linear-gradient(" + t + ")",
                background: "-ms-linear-gradient(" + t + ")",
                background: "-o-linear-gradient(" + t + ")",
                background: "linear-gradient(" + t + ")"
            }),
            1 == style.floatleft || o.system.mobile ? css(e, {
                cursor: "pointer"
            }) : css(e, {
                "pointer-events": "none"
            }),
            1 == style.limitwidth && css(e, {
                "max-width": style.limitmaxwidth + "px!important"
            }),
            "top" == i && css(e, {
                top: -1,
                left: 0
            }),
            "bottom" == i && css(e, {
                bottom: -1,
                left: 0
            }),
            "left" == i && css(e, {
                top: 0,
                left: 0
            }),
            "right" == i && css(e, {
                top: 0,
                right: 0
            }),
            "right" != i && "left" != i || css(e, {
                "text-align": "left",
                "padding-top": container.offsetHeight / 2 - 10
            }),
            e.innerHTML = "<center><div " + (1 == style.scrollarrowbgover ? "onMouseOver='this.style.backgroundColor=\"#" + style.scrollarrowbgovercolor + "\"' onMouseOut='" + (1 == style.scrollarrowbg ? 'this.style.backgroundColor="#' + style.scrollarrowbgcolor : 'this.style.background="none') + "\"'" : "") + " style='pointer-events:auto;cursor:pointer;width:20px;height:20px;border-radius:20px;" + (1 == style.scrollarrowbg ? "background-color:#" + style.scrollarrowbgcolor + ";" : "") + ("top" == i ? "margin-top:10px;" : "") + ("bottom" == i ? "margin-top:10px;" : "") + ("right" == i ? "margin-left:0px;" : "") + ("left" == i ? "margin-right:0px;" : "") + "'><svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'><g><line x1='" + s + "' y1='" + r + "' x2='" + n + "' y2='" + a + "' stroke='#" + style.scrollarrowcolor + "' stroke-width='" + style.scrollarrowsize + "' stroke-linecap='round'/><line x1='" + l + "' y1='" + c + "' x2='" + d + "' y2='" + u + "' stroke='#" + style.scrollarrowcolor + "' stroke-width='" + style.scrollarrowsize + "' stroke-linecap='round'/></g></svg></div></center>"
        }
        function ArrowsInterval() {
            is_visible && Arrows()
        }
        function Arrows(e) {
            if (1 == style.scrollarrows && !removed) {
                if (1 == style.floatleft)
                    var t = control.scrollWidth
                      , o = container.offsetWidth + style.bgpaddingleft + style.bgpaddingright + 20
                      , i = control.scrollLeft;
                else
                    t = control.scrollHeight,
                    o = container.offsetHeight,
                    i = control.scrollTop;
                if (t > o) {
                    if (i > 0) {
                        if (!isVisible(arr_up)) {
                            show(arr_up);
                            new Motion({
                                mc: arr_up,
                                type: "alpha_div",
                                to: 1,
                                time: .3,
                                me: "arr_up"
                            })
                        }
                    } else {
                        if (isVisible(arr_up))
                            new Motion({
                                mc: arr_up,
                                type: "alpha_div",
                                to: 0,
                                time: .3,
                                me: "arr_up",
                                hide: !0
                            });
                        e && e.deltaY < 0 && e.preventDefault()
                    }
                    if (i < t - o - 10) {
                        if (!isVisible(arr_down)) {
                            show(arr_down);
                            new Motion({
                                mc: arr_down,
                                type: "alpha_div",
                                to: 1,
                                time: .3,
                                me: "arr_down"
                            })
                        }
                    } else {
                        if (isVisible(arr_down))
                            new Motion({
                                mc: arr_down,
                                type: "alpha_div",
                                to: 0,
                                time: .3,
                                me: "arr_down",
                                hide: !0
                            });
                        e && e.deltaY > 0 && e.preventDefault()
                    }
                } else
                    hide(arr_up),
                    hide(arr_down)
            }
        }
        function ScrollDown() {
            var e = control.scrollTop + container.offsetHeight - 60;
            new Motion({
                mc: control,
                type: "scroll",
                to: e,
                time: .3,
                me: "scroll_down",
                ease: "cubic"
            });
            setTimeout(Arrows, 1e3)
        }
        function ScrollUp() {
            var e = control.scrollTop - container.offsetHeight + 60;
            new Motion({
                mc: control,
                type: "scroll",
                to: e,
                time: .3,
                me: "scroll_up",
                ease: "cubic"
            });
            setTimeout(Arrows, 1e3)
        }
        function ScrollOverOut(e) {
            clearTimeout(o.settingsovertimer),
            e.stopPropagation()
        }
        function ScrollRight() {
            var e = control.scrollLeft + (container.offsetWidth + style.bgpaddingleft + style.bgpaddingright) - 60;
            new Motion({
                mc: control,
                type: "scrollleft",
                to: e,
                time: .3,
                me: "scroll_right",
                ease: "cubic"
            });
            setTimeout(Arrows, 1e3)
        }
        function ScrollLeft() {
            var e = control.scrollLeft - (container.offsetWidth + style.bgpaddingleft + style.bgpaddingright) + 60;
            new Motion({
                mc: control,
                type: "scrollleft",
                to: e,
                time: .3,
                me: "scroll_left",
                ease: "cubic"
            });
            setTimeout(Arrows, 1e3)
        }
        function PlaylistBack(e) {
            "" == e ? UpdatePlaylist(0) : exist(o.playlist_dic[e]) && UpdatePlaylist(e),
            open_action = ""
        }
        function HistoryPlaylist(e) {
            fvalue[e].innerHTML = "",
            css(ftitle[e], {
                color: style.historycolor
            }),
            1 == style.historytitlestrike && css(ftitle[e], {
                "text-decoration": "line-through"
            }),
            style.historytitlea > -1 && css(ftitle[e], {
                opacity: style.historytitlea
            }),
            f[e].classList.remove("pjs-" + v.id + "-active-pl"),
            css(fbg[e], {
                backgroundColor: style.historybgcolor
            }),
            style.historybga > -1 && css(fbg[e], {
                opacity: style.historybga
            })
        }
        function Action2(e) {
            if (exist(f2action[e])) {
                if (Retimer(),
                0 == f2i("quality", e) && o.actions.SetQuality(f2action[e].substr(7)),
                0 == f2i("audiotrack", e) && o.actions.SetAudioTrack(f2action[e].substr(10)),
                0 == f2i("subtitle", e) && (!o.sbt && (o.sbt = new PluginSub),
                o.sbt.SetSubtitle(f2action[e].substr(8))),
                0 == f2i("channel", e) && 1 == v.channels && o.channels.SetChannel(f2action[e].substr(7)),
                0 == f2i("custom", e)) {
                    var t = f2action[e].slice(0, -1);
                    if (-1 != o["current_" + t] && (o["current_" + t] = e - 1),
                    o["files_" + t]) {
                        var i = t.slice(-1);
                        if ("" != o["m" + i + "_api"][e - 1]) {
                            var s = o["m" + i + "_api"][e - 1].split(":");
                            apiProcessor(s[0], s.length > 1 ? s[1] : null)
                        }
                        exist(window["PlayerjsMenu" + i]) && (v["menu" + i] = e - 1,
                        window["PlayerjsMenu" + i](v.id, o["files_" + t][e - 1], e - 1))
                    }
                    Value(open_settings),
                    HideControl()
                }
                for (var r in 0 == f2i("share", e) && (o.share && o.share.api(shr[e]),
                HideControl()),
                0 == f2i("color", e) && (Remove2(),
                Action(0, 0, clr[e])),
                o.menuproc)
                    o.menuproc.hasOwnProperty(r) && 0 == f2i(r, e) && o.media.menufltr(r, e);
                f2i("timer", e) > 0 && (f2title[e].innerHTML == Lang("off") ? (SettingsTimers(open_action + "0"),
                Value(open_settings),
                "offsettimer" == open_action && SettingsTimers("offsetwrite"),
                Home()) : "sleeptimer" == open_action && 1 == style.sleep2 && (SettingsTimers("sleep2", e),
                Value(open_settings),
                Home())),
                0 == f2i("speed", e) && (o.actions.SetSpeed(f2action[e].substr(5)),
                UpdateSpeed(),
                setTimeout(HideControl, 200))
            }
        }
        function UpdateSpeed() {
            for (var e = 0; e < faction.length; e++)
                "speed" == faction[e] && (Value(e),
                "speed" == open_action && (Remove2(),
                Action(e, 0)))
        }
        function CreateItem(x, i, toend) {
            if (exist(eval(x))) {
                eval(x)[i] = createElement("div"),
                i < 2 || "f" == x || "quality" != open_action || toend > 0 ? 1 == style.floatleft ? control.appendChild(eval(x)[i]) : control2.appendChild(eval(x)[i]) : 1 == style.floatleft ? control.insertBefore(eval(x)[i], eval(x)[i - 1]) : control2.insertBefore(eval(x)[i], eval(x)[2 == toend ? i - 2 : i - 1]),
                "f" == x && attr(eval(x)[i], {
                    fid: i
                }),
                "f2" == x && attr(eval(x)[i], {
                    f2id: i
                }),
                eval(x + "bg")[i] = createElement("div");
                var bgtmp = createElement("div");
                eval(x)[i].appendChild(bgtmp),
                bgtmp.appendChild(eval(x + "bg")[i]),
                Pnt0(bgtmp),
                eval(x + "img")[i] = createElement("div"),
                eval(x)[i].appendChild(eval(x + "img")[i]),
                Pos0(eval(x + "img")[i]),
                Pnt0(eval(x + "img")[i]),
                vllft && CrtVl(x, i),
                eval(x + "title")[i] = createElement("div"),
                eval(x)[i].appendChild(eval(x + "title")[i]),
                vllft || CrtVl(x, i),
                i > 0 && "f2" == x && iset && 0 == style.activeicon && hide2(eval(x + "value")[i])
            }
        }
        function CrtVl(x, i) {
            eval(x + "value")[i] = createElement("div"),
            eval(x)[i].appendChild(eval(x + "value")[i])
        }
        function StyleItem(e, t, o, i, s, r) {
            css(e, {
                position: "relative",
                right: 0,
                top: 0,
                cursor: "pointer",
                height: "auto",
                width: "100%",
                overflow: "hidden",
                display: "block",
                "line-height": "1.5em"
            }),
            iset && 1 == style.floatleft && css(e, {
                width: "auto"
            }),
            style.floatmarginright && 1 == style.floatleft && css(e, {
                marginRight: style.floatmarginright
            }),
            1 == style.floatleft && (!iset || r > 0 || 1 == style.nohead) && css(e, {
                display: "inline-block",
                "vertical-align": "top",
                "white-space": "normal"
            }),
            css(t, {
                background: 1 == style.bggr ? "linear-gradient(to left," + CheckColor(style.bggrclr) + ", " + CheckColor(style.bgcolor) + ")" : CheckColor(style.bgcolor),
                opacity: style.bga,
                pointerEvents: "none",
                transition: "opacity 0.2s ease-out,background .2s ease-out,filter .2s ease-out"
            }),
            Pos0(t),
            Pos0(t.parentNode),
            1 == style.blur && css(t.parentNode, {
                "backdrop-filter": "blur(8px)"
            }),
            1 == style.brdl && (e.style[1 == style.floatleft ? "border-right" : "border-bottom"] = "1px solid " + hex2rgb(existv(style.brdlc, "ffffff"), existv(style.brdla, .2))),
            css(o, {
                position: "relative",
                right: 0,
                top: 0,
                float: style.align ? style.align : "left",
                color: style.color,
                "padding-top": style.paddingtop,
                "padding-right": style.paddingright,
                "padding-bottom": style.paddingbottom,
                "padding-left": style.paddingleft,
                pointerEvents: "none",
                opacity: style.a,
                transition: "opacity 0.2s linear,color 0.2s linear"
            }),
            css(i, {
                position: "relative",
                right: 0,
                top: 0,
                float: vllft && r > 0 ? "left" : "right",
                "padding-top": style.paddingtop,
                "padding-right": style.paddingright,
                "padding-left": style.paddingleft,
                pointerEvents: "none",
                "font-size": style.valuefontsize * existv(v.globalfs, 1),
                opacity: style.a,
                color: style.valuecolor,
                transition: "opacity 0.2s linear,color 0.2s linear"
            }),
            1 == style.limitwidth ? (css(e, {
                "max-width": style.limitmaxwidth + "px!important"
            }),
            css(o, {
                "max-width": style.limitmaxwidth - 70 + "px!important"
            })) : 1 == style.floatleft ? 1 == style.floatlimitwidth && (css(e, {
                width: style.floatwidth
            }),
            css(o, {
                width: style.floatwidth - 70
            })) : (css(o, {
                "white-space": "nowrap"
            }),
            css(i, {
                "white-space": "nowrap"
            }))
        }
        function Home() {
            for (var e = 1; e < f.length; e++)
                exist(f[e]) && (1 == style.floatleft ? f[e].style.display = "inline-block" : f[e].style.display = "block");
            Retimer(),
            Remove2(),
            Resize(),
            open_action = "",
            open_settings = -1
        }
        function Remove2() {
            for (var e = 0; e < f2.length; e++)
                f2[e] && (1 == style.floatleft ? control.removeChild(f2[e]) : control2.removeChild(f2[e]),
                f2[e] = null);
            f2 = [],
            open_action = ""
        }
        function Width() {
            return control.offsetWidth
        }
        function ResizePlaylist() {
            if ("playlist" == is) {
                if (1 == style.floatleft || 1 == style.width100) {
                    var e = o.screen_w - style.marginright - style.marginleft;
                    css(container, {
                        width: e
                    }),
                    css(control, {
                        width: e
                    }),
                    control2 && css(control2, {
                        width: e
                    })
                }
                o.droplist && o.droplist.Resize()
            }
        }
        function Resize() {
            if (!removed) {
                if (iset) {
                    o.controls && o.controls.resizeSettings();
                    var e = 1 == style.nohead && f.length > 1 ? f[1] : f[0]
                }
                if ("playlist" == is) {
                    ResizePlaylist(),
                    o.controls && o.controls.resizePlaylist();
                    e = f[0];
                    1 == v.change2playlist && MainUpdateSize()
                }
                f.length > 1 && !e && (f[1] && (e = f[1])),
                f.length > 2 && !e && (f[2] && (e = f[2])),
                e && 0 == e.offsetWidth && f2.length > 0 && (e = f2[0]),
                control.offsetWidth - control.clientWidth > 0 && e && 1 != style.floatleft ? (exist(arr_up) && css(arr_up, {
                    width: control2.offsetWidth
                }),
                exist(arr_down) && css(arr_down, {
                    width: control2.offsetWidth
                }),
                style.scrollwidth = control.offsetWidth - e.offsetWidth - (control.clientWidth - e.clientWidth)) : style.scrollwidth = 0
            }
        }
        function VisibleItems() {
            for (var e = 0, t = 0, o = "", i = 1; i < f.length; i++)
                exist(f[i]) && "hidden" != f[i].style.visibility && "none" != f[i].style.display && (e++,
                t = i,
                o = faction[i]);
            return [e, t, o]
        }
        function SubtitleSettings(e) {
            sub_settings_on = !0,
            SubtitleSettingsMenu(e),
            sub_settings_on && subopt1 && control.scrollTo(0, subopt1.offsetTop)
        }
        function SubtitleSettingsClose(e) {
            sub_settings_on = !1,
            SubtitleSettingsMenu(e)
        }
        function SubtitleSettingsMenu() {
            Home();
            for (var e = 0; e < faction.length; e++)
                "subtitle" == faction[e] && Action(e, _cstm)
        }
        function Retimer() {
            clearTimeout(settimer),
            settimer = setTimeout((function() {
                o.setaction = !1
            }
            ), 2e3)
        }
        function SubtitleTimerMenu() {
            var e = open_action;
            Home();
            for (var t = 0; t < faction.length; t++)
                faction[t] == e && Action(t, 0)
        }
        function HideControl(e) {
            if (!(!iset && 1 == v.playlist.always2 || iset && 1 == v.settings.always && 2 != e)) {
                if ("playlist" == is && 1 == v.playlist.droplist && 1 != v.playlist.dropnohide) {
                    if (1 == v.playlist.always && 1 == e)
                        return;
                    o.droplist && o.droplist.Hide(),
                    is_visible = !1
                } else if (1 == e && (1 != style.hidesmoothly || 1 != style.always) || o.system.tv)
                    css(container, {
                        visibility: "hidden",
                        opacity: 0,
                        top: -2e3
                    }),
                    is_visible = !1;
                else {
                    new Motion({
                        mc: container,
                        type: "alpha_div",
                        to: 0,
                        time: .1,
                        me: is,
                        ease: "elastic"
                    });
                    hidetimeout = setTimeout((function() {
                        css(container, {
                            visibility: "hidden",
                            opacity: 0,
                            top: -2e3
                        }),
                        is_visible = !1
                    }
                    ), 200)
                }
                "playlist" == is && 1 == v.playlist.hidecontrol && o.controls && o.controls.toggleControl("action", "playlist", !0),
                clearInterval(wheelinterval)
            }
        }
        function ShowTimeout() {
            clearInterval(showinterval),
            justshow = !1
        }
        function playById(e) {
            exist(o.playlist_dic[e]) && (FindPlStart(o.playlist_dic[e]),
            Action(o.playlist_dic[e].pjs_i, 0),
            ScrollTo(o.playlist_dic[e].pjs_i))
        }
        function showById(e) {
            exist(o.playlist_dic[e]) && (plfolder = "",
            UpdatePlaylist(0),
            FindPlStart(o.playlist_dic[e]),
            UpdateVars0(e),
            Action(o.playlist_dic[e].pjs_i, 0),
            UpdateVars(e))
        }
        function ScrollTo(e) {
            if (f[e] && !removed) {
                if (1 == style.floatleft) {
                    var t = f[e].offsetLeft - 20;
                    new Motion({
                        mc: control,
                        type: "scrollleft",
                        to: t,
                        time: .3,
                        me: "scroll_left",
                        ease: "cubic"
                    })
                } else
                    t = f[e].offsetTop - container.offsetHeight / 2 + 20,
                    new Motion({
                        mc: control,
                        type: "scroll",
                        to: t,
                        time: .3,
                        me: "scroll_down",
                        ease: "cubic"
                    });
                setTimeout(Arrows, 1e3)
            }
        }
        function Shuffle(e) {
            for (var t, o = Object.keys(e), i = 0; i < o.length && !(t = e[o[o.length * Math.random() << 0]]); i++)
                ;
            return t
        }
        function Menuproc(e) {
            mpi[e] > -1 && Value(mpi[e]),
            f2value[0] && (f2value[0].innerHTML = "scale" == open_action ? Math.round(100 * o.mediascale.x) + "%" : FltrVal(open_action))
        }
        function FltrVal(e) {
            return "scale" == e ? Math.round(100 * o.mediascale.x) + "%" : Math.round(100 * existv(o.fltrs[e], o.menuproc[e])) + "%"
        }
        function NxtExt() {
            if (1 == v.shuffle)
                return Object.keys(shuffle).length > 0;
            var e = !1;
            return o.playlist_dic && (e = okpd().indexOf(plid) < okpd().length - 1),
            e
        }
        function f2i(e, t) {
            return f2action[t].indexOf(e)
        }
        function FindPlStart(e) {
            e && (-1 != e.pjs_parent_i ? (FindPlStart(o.playlist_dic[e.pjs_parent]),
            UpdatePlaylist(e.pjs_parent)) : UpdatePlaylist(0))
        }
        function okpd() {
            return Object.keys(o.playlist_dic)
        }
        this.UpdateTimer = function(e) {
            Value(o[e + "_i"])
        }
        ,
        this.Arrows = function() {
            1 == style.scrollarrows && Arrows()
        }
        ,
        this.UpdateSpeed = function() {
            UpdateSpeed()
        }
        ,
        this.Exist = function(e) {
            for (var t = 0; t < faction.length; t++)
                if (faction[t] == e)
                    return !0;
            return !1
        }
        ,
        this.resizePlaylist = function() {
            ResizePlaylist()
        }
        ,
        this.SubOpt = function() {
            sub_settings_on = !0,
            this.show(),
            _cstm = 2,
            SubtitleSettingsMenu()
        }
        ,
        this.tb = function() {
            return 1 == v.settings.always && 1 == v.settings.toolbar
        }
        ,
        this.c = function() {
            return container
        }
        ,
        this.co = function() {
            if (container.contains(control))
                return control
        }
        ,
        this.s = function(e) {
            if ("marginleft" == e || "marginright" == e) {
                var t = e.replace("margin", "marginproc")
                  , i = e.replace("margin", "mrgnprs");
                if (exist2(style[i]) && o.small)
                    return o.screen_w * style[i] / 100;
                if (exist2(style[t]))
                    return o.screen_w * style[t] / 100
            }
            return style[e]
        }
        ,
        this.ss = function(e) {
            return style
        }
        ,
        this.show = function() {
            if (Home(),
            clearTimeout(hidetimeout),
            is_visible = !0,
            "playlist" == is && 1 == v.playlist.droplist)
                o.droplist && o.droplist.Show();
            else {
                css(container, {
                    visibility: "visible",
                    opacity: 1,
                    transition: "opacity 0.2s linear"
                });
                var e = VisibleItems();
                1 == e[0] && ("quality" == e[2] || "audiotrack" == e[2] || "subtitle" == e[2] || "speed" == e[2] || e[2]in o.menuproc || e[2].indexOf("timer") > 0) && Action(e[1], 0)
            }
            o.controls && ("playlist" == is && o.controls.SettingsVisible() && o.controls.SettingsClose(),
            "settings" == is && o.controls.PlaylistVisible() && !o.droplist && 1 != v.playlist.always && 1 != v.hidevideo && o.controls.PlaylistClose()),
            o.controls && ("settings" == is && o.controls.resizeSettings(),
            "playlist" == is && (o.controls.resizePlaylist(),
            1 == v.playlist.hidecontrol && o.controls.toggleControl("action", "playlist", !1))),
            o.system.safari && (css(control, {
                "min-width": "auto"
            }),
            1 != style.floatleft && css(control2, {
                "min-width": "auto"
            })),
            justshow = !0,
            clearInterval(showinterval),
            showinterval = setInterval(ShowTimeout, 100)
        }
        ,
        this.open = function(e) {
            Action(e, 1)
        }
        ,
        this.hide = function(e) {
            HideControl(e)
        }
        ,
        this.plclose = function() {
            o.droplist && o.droplist.Close()
        }
        ,
        this.SetQuality = function() {
            for (var e = 0; e < faction.length; e++)
                "quality" == faction[e] && (Value(e),
                o.files_quality.length > 1 && show(f[e]),
                "quality" == open_action && (Remove2(),
                Action(e, _cstm)))
        }
        ,
        this.Airplay = function() {
            for (var e = 0; e < faction.length; e++)
                "airplay" == faction[e] && Value(e)
        }
        ,
        this.SetSetting = function(e) {
            for (var t = 0; t < faction.length; t++)
                faction[t] == e && (Value(t),
                o["files_" + e] && o["files_" + e].length > 1 && show(f[t]),
                open_action == e && (Remove2(),
                Action(t, _cstm)))
        }
        ,
        this.SetSubtitle = function() {
            for (var e = 0; e < faction.length; e++)
                if ("subtitle" == faction[e]) {
                    if (Value(e),
                    o.files_subtitle && o.files_subtitle.length > 0) {
                        var t = !1;
                        if (o.subs) {
                            for (var i = 0; i < o.subs.length; i++)
                                if ("" != o.subs[i]) {
                                    t = !0;
                                    break
                                }
                        } else
                            t = !0;
                        t && show(f[e])
                    }
                    "subtitle" == open_action && (Remove2(),
                    Action(e, 0))
                }
        }
        ,
        this.updatePlaylist = function(e) {
            if (o.playlist = e,
            UpdatePlaylist(0),
            exist(v.plstart)) {
                if (0 != v.plstart.indexOf("x-"))
                    for (var t in o.playlist_dic)
                        o.playlist_dic.hasOwnProperty(t) && o.playlist_dic[t].pjs_id == v.plstart && (v.plstart = t);
                if (exist(o.playlist_dic[v.plstart]))
                    FindPlStart(o.playlist_dic[v.plstart]),
                    ActionPlaylist(t = o.playlist_dic[v.plstart].pjs_i),
                    1 == v.playlist.openplaylistroot && 1 != style.droplist ? (UpdatePlaylist(0),
                    setTimeout((function() {
                        Resize()
                    }
                    ), 500)) : setTimeout((function() {
                        ScrollTo(t),
                        Resize()
                    }
                    ), 500),
                    v.plstart = void 0;
                else
                    ActionPlaylist(0)
            } else
                ActionPlaylist(0);
            1 == style.droplist && (exist(o.droplist) || (o.droplist = new PluginDroplist(_iconv)))
        }
        ,
        this.playById = function(e) {
            playById(e)
        }
        ,
        this.openById = function(e) {
            exist(o.playlist_dic[e]) && (FindPlStart(o.playlist_dic[e]),
            o.playlist_dic[e].file ? (o.seekto = void 0,
            ActionPlaylist(o.playlist_dic[e].pjs_i),
            UpdateVars0(e),
            o.actions.NewFile(o.playlist_dic[e].file, 1),
            UpdateVars(e),
            ScrollTo(o.playlist_dic[e].pjs_i),
            o.droplist && o.droplist.Update()) : o.playlist_dic[e].folder && UpdatePlaylist(e))
        }
        ,
        this.dropupdate = function(e) {
            o.droplist && o.droplist.Update()
        }
        ,
        this.PlaylistNext = function() {
            autonextopenfolder = !0;
            var e = parseInt(plx) + 1;
            if ("" != plid && (o.plhistory[plid] = !0,
            shuffle = removebykey(shuffle, plid)),
            1 == v.shuffle) {
                if (null == (e = Shuffle(shuffle)))
                    if (1 == v.shuffle8 || 1 == v.playlist.autoplaylist) {
                        for (var e in shuffle_.sort((function(e, t) {
                            return Math.random() - .5
                        }
                        )),
                        shuffle_)
                            shuffle_.hasOwnProperty(e) && (shuffle[e] = shuffle_[e]);
                        e = Shuffle(shuffle),
                        js("next")
                    } else
                        o.actions.ShuffleEnd()
            } else if ("" != plid) {
                var t = okpd().indexOf(plid);
                if (t < okpd().length)
                    for (var i, s = t + 1; s < okpd().length; s++)
                        if ((i = o.playlist_dic[okpd()[s]]).file && 0 != i.file.indexOf("seek:") && 1 != i.next && !i.folder) {
                            this.openById(i.id),
                            e = -1,
                            o.actions.Play(),
                            js("next");
                            break
                        }
            }
            e > -1 && (o.seekto = void 0,
            Action(e, 0),
            ScrollTo(e))
        }
        ,
        this.menuproc = function(e) {
            Menuproc(e)
        }
        ,
        this.PlaylistNextExist = function() {
            return NxtExt()
        }
        ,
        this.PlaylistRewind = function() {
            exist(o.pl_first_id) && (open_action = void 0,
            showById(o.pl_first_id))
        }
        ,
        this.PlaylistPrevExist = function() {
            var e = plx > 0;
            if (o.playlist_dic) {
                var t = okpd().indexOf(plid);
                e = t > 0,
                1 == t && exist(o.playlist_dic[okpd()[0]].folder) && (e = !1)
            }
            return e
        }
        ,
        this.PlaylistExist = function() {
            return exist(o.playlist_dic)
        }
        ,
        this.PlaylistPrev = function() {
            if (autoprevopenfolder = !0,
            this.PlaylistPrevExist()) {
                var e = parseInt(plx) - 1;
                if (e < 0) {
                    var t = okpd().indexOf(plid);
                    if (t > 0) {
                        for (var i, s, r = t - 1; r >= 0; r--)
                            if ((i = o.playlist_dic[okpd()[r]]) && i.file && (s = i,
                            0 != i.file.indexOf("seek:") && 1 != i.next && !i.folder)) {
                                s = i;
                                break
                            }
                        s && (this.openById(s.id),
                        o.actions.Play())
                    }
                } else
                    o.seekto = void 0,
                    Action(e, 0),
                    ScrollTo(e);
                js("previous")
            }
        }
        ,
        this.PlaylistHere = function() {
            plx > 0 && ScrollTo(plx)
        }
        ,
        this.g = function(e) {
            switch (e) {
            case "width":
                return Width();
            case "height":
                return container.offsetHeight;
            case "top":
                return style.margintop;
            case "scroll_height":
                return control.scrollHeight;
            case "margin_bottom":
                return style.marginbottom;
            case "x":
                return int(container.style.left);
            case "y":
                return int(container.style.top);
            case "opacity":
                return container.style.opacity;
            case "show":
                return is_visible;
            case "open":
                return open_settings;
            case "key":
                return key;
            case "motion_id":
                return key + motion_id;
            case "empty":
                return empty;
            case "playlist":
                return "playlist" == is;
            case "played":
                return o.plhistory[plid];
            case "open?":
                return o.droplist ? o.droplist.Visible() : is_visible;
            case "activeicon":
                return _activeIcon;
            case "butplstart":
                return o.playlist_dic[o.butplstart] ? o.playlist_dic[o.butplstart].title : "";
            case "title2":
                return v.title2 ? v.title2 : "";
            case "nxtttl":
                return NxtExt() ? o.playlist_dic[okpd()[okpd().indexOf(plid) + 1]].title : ""
            }
        }
        ,
        this.prenewpl = function() {
            plid = "",
            v.plstart = ""
        }
        ,
        this.empty = function() {
            if (iset) {
                for (var e = 0, t = 1; t < 15; t++) {
                    if ("quality" == faction[t]) {
                        var i = o.files_quality.length;
                        if (exist(v.forbidden_quality))
                            for (var s = v.forbidden_quality.split(","), r = 0; r < s.length; r++)
                                o.files_quality.indexOf(s[r]) > -1 && i--;
                        i > 0 && (i > 1 || 1 == i && 1 != o.files_quality && 1 == style.show1value) && e++
                    }
                    if ("airplay" == faction[t] && o.airplay && e++,
                    "download" == faction[t] && ("native" == o.file_type || v.download) && e++,
                    "audiotrack" == faction[t] && o.files_audiotrack.length > 1 && e++,
                    "channel" == faction[t] && 1 == v.channels && o.files_channel.length > 0 && e++,
                    "subtitle" == faction[t]) {
                        if (exist(o.subs))
                            for (var n = 0; n < o.subs.length; n++)
                                if ("" != o.subs[n]) {
                                    e++;
                                    break
                                }
                        1 == e && 1 == o.subload && (e = 0),
                        1 == v.sub_upload && 1 == v.sub_upload0 && e++
                    }
                    "speed" == faction[t] && "vimeo" != o.file_type && e++,
                    (faction[t]in o.menuproc || "share" == faction[t] || "openfile" == faction[t] || "color" == faction[t]) && e++,
                    faction[t] && (faction[t].indexOf("timer") > 0 && e++,
                    faction[t].indexOf("custom") > -1 && e++),
                    1 == v.settings[is + t + "hide"] && e--
                }
                return e <= 0
            }
            return "playlist" == is ? 0 == f.length : empty
        }
        ,
        this.Remove = function() {
            container.parentNode == o.frame && (container.removeChild(control),
            o.frame.removeChild(container),
            o.droplist && o.droplist.Remove(),
            container = null,
            control = null,
            removed = !0)
        }
    }
      , TimeStore = function() {
        var e = ""
          , t = 0
          , i = 0
          , s = "pljsplayfrom_"
          , r = "pljsplayed_";
        function n(e) {
            if (exist(v.continue) && "" == e && v.duration && (e = v.continue + "--" + v.duration),
            e && e.indexOf("--") > 0) {
                var s = e.split("--");
                t = parseFloat(s[0]),
                exist(v.continue) && (t = v.continue,
                v.continue = void 0),
                1 == v.timestoreunauto && t > 0 && 1 == v.autoplay && (v.autoplay = 0),
                1 == v.timestorejustbut ? o.butseekto = t : (i = parseFloat(s[1]),
                o.seekto = t)
            }
        }
        function a(e) {
            if (e)
                return null != localStorage.getItem(e) && localStorage.getItem(e)
        }
        o.storage && 1 != v.timestoredontuse && (a(s + v.id + o.href2) && (e = a(s + v.id + o.href2)),
        1 == v.playedstore && a(r + v.id + o.href2) && (o.playedstore = a(r + v.id + o.href2)),
        exist(v.cuid) && (a(s + o.d + v.cuid) && (e = a(s + o.d + v.cuid)),
        1 == v.playedstore && a(r + o.d + v.cuid) && (o.playedstore = a(r + o.d + v.cuid))),
        o.playedstore && 1 == v.playedstore && (o.playedstored = o.playedstore.split(",")),
        0 == e.indexOf("{") && (1 == v.timestorejustbut ? o.butplstart = e.substr(1, e.indexOf("}") - 1) : o.plcontinue = v.plstart = e.substr(1, e.indexOf("}") - 1),
        e = e.substr(e.indexOf("}") + 1),
        1 == v.timestore0plroot && (v.playlist.openplaylistroot = 0)),
        n(e)),
        this.updateCuid = function() {
            exist(v.cuid) && (a(s + o.d + v.cuid) ? (n(e = a(s + o.d + v.cuid)),
            o.controls.Played(t, i),
            o.controls.Duration(t, i),
            v.duration = i) : (o.seekto = 0,
            o.controls.Played(0, 0),
            o.controls.Duration(0, 0),
            v.duration = 0))
        }
        ,
        this.write = function(e, t) {
            if (o.media.isLive() && 1 == v.timestorenolive)
                ;
            else {
                var i = (new Date).getTime();
                exist2(v.tslmt) && e < v.tslmt && (e = 0),
                localStorage.setItem(s + (exist(v.cuid) ? o.d + v.cuid : v.id + o.href2), (exist(o.plid) ? "{" + o.plid + "}" : "") + e + "--" + t + "--" + i)
            }
        }
        ,
        this.writePl = function(e) {
            o.playedstore = (o.playedstore ? o.playedstore + "," : "") + e,
            localStorage.setItem(r + (exist(v.cuid) ? o.d + v.cuid : v.id + o.href2), o.playedstore)
        }
        ,
        this.flag = function() {
            return {
                t: t,
                d: i
            }
        }
    };
    function PluginThumbs() {
        var e, t, i, s = [], r = [];
        o.thumbs_on = !1;
        var n = v.thumbnails;
        if (exist(n) && ("string" == typeof n && 0 == n.indexOf("#" + v.enc2) && (v.thumbnails = n = o[o.fd[0]](n)),
        "" != n)) {
            var a = XHR(n);
            a.onload = function() {
                4 == this.readyState && 200 == this.status ? function(e) {
                    try {
                        var t, i, s, r = e.responseText, n = e.responseURL, a = Array();
                        if (0 == r.indexOf("#" + v.enc2) && (r = o[o.fd[0]](r)),
                        a = r.split("\n"),
                        o.thumbs = [],
                        o.thumbs_img = [],
                        a[0].indexOf("WEBVTT") > -1) {
                            for (var l = 0; l < a.length; l++)
                                a[l].indexOf("--\x3e") > -1 && a[l].indexOf(":") > -1 && (t = p(a[l].substr(0, a[l].indexOf("--\x3e"))),
                                i = p(a[l].substr(a[l].indexOf("--\x3e") + 4, 12)),
                                s = "",
                                l < a.length - 1 && 0 != (s = a[l + 1]).indexOf("http") && 0 != s.indexOf("//") && (s = n.substr(0, n.lastIndexOf("/") + (0 == s.indexOf("/") ? 0 : 1)) + s),
                                o.thumbs.push({
                                    t1: t,
                                    t2: i,
                                    url: s
                                }));
                            o.thumbs_on = !0
                        }
                    } catch (e) {
                        log("Thumbnails Error", e)
                    }
                }(this) : v.thumbnails = ""
            }
            ,
            a.onerror = function(e) {
                v.thumbnails = ""
            }
            ,
            a.send()
        }
        function l() {
            o.thumb.innerHTML = "",
            hide2(o.thumb)
        }
        function c() {
            e && (o.thumbs_img[i] = !0,
            u(t),
            e = null)
        }
        function d() {
            e && (r[t] = e,
            c())
        }
        function u(e) {
            var t = o.thumbs[e].url;
            if (o.thumb.innerHTML = "",
            f(t))
                o.thumb.appendChild(r[e]),
                css(r[e], {
                    width: "100%",
                    height: "100%"
                });
            else {
                var i = o.thumbs[e].urlz ? o.thumbs[e].urlz : t;
                if (i = i.replace(/\n|\r\n|\r/g, ""),
                css(o.thumb, {
                    "background-image": 'url("' + i + '")'
                }),
                t.indexOf("xywh") > 0) {
                    var n = t.substr(t.indexOf("xywh") + 5).split(",");
                    if (exist(v.thumbless) && 1 != v.thumbless && (n[2] = n[2] / v.thumbless,
                    n[3] = n[3] / v.thumbless),
                    4 == n.length) {
                        var a = -s[3] / 2 + (s[1] - s[2]) - n[2] / 2;
                        a > s[3] / 2 - n[2] && (a = s[3] / 2 - n[2]),
                        css(o.thumb, {
                            top: -n[3] - (v.thumb_bottom > 0 ? 1 * v.thumb_bottom : 5) - v.thumb_border,
                            left: a < -s[3] / 2 ? -s[3] / 2 : a
                        }),
                        css(o.thumb, {
                            "background-position-y": "-" + parseInt(n[1]) + "px",
                            "background-position-x": "-" + parseInt(n[0]) + "px",
                            width: parseInt(n[2]) + "px",
                            height: parseInt(n[3]) + "px",
                            "background-size": "auto"
                        }),
                        v.thumb_width = n[2],
                        v.thumb_height = n[3]
                    }
                } else
                    css(o.thumb, {
                        "background-size": "cover"
                    })
            }
        }
        function p(e) {
            var t = e.split(":")
              , o = 0;
            return 2 == t.length && t.unshift("00"),
            "00" != t[0] && (o += 3600 * t[0]),
            "00" != t[1] && (o += 60 * t[1]),
            o += 1 * t[2].substr(0, 2),
            o += 1 * t[2].substr(2)
        }
        function f(e) {
            return !!e && (e.indexOf(".mp4") > 0 && -1 == e.indexOf(".jpg"))
        }
        this.time = function(r, n, a, p) {
            s = [r, n, a, p],
            function() {
                var r = Math.round(s[0]);
                if (1 == v.thumbs && o.thumbs_on) {
                    var n = -1;
                    if (exist(o.thumbs) && o.thumbs.length > 0)
                        for (var a = o.thumbs.length - 1; a >= 0; a--)
                            if (r >= o.thumbs[a].t1 && r <= o.thumbs[a].t2) {
                                n = a;
                                break
                            }
                    if (-1 != n && o.current_thumb != n) {
                        if (exist(o.thumbs[n]))
                            if (exist(o.thumbs[n].url)) {
                                if (o.thumbs[n].url.indexOf(".") > -1) {
                                    var p = o.thumbs[n].url;
                                    if (p.indexOf("#xywh") > -1 && (p = p.substr(0, o.thumbs[n].url.indexOf("#xywh")),
                                    o.thumbs[n].urlz = p),
                                    !isVisible(o.thumb) && show2(o.thumb),
                                    !o.thumbs_img[p] || f(p)) {
                                        if (o.thumb.innerHTML = "",
                                        css(o.thumb, {
                                            "background-image": "none"
                                        }),
                                        v.control_buffer.icon) {
                                            var h = createElement("div");
                                            controlCSS(v.control_buffer.icon, v.control_buffer.color, h),
                                            css(h, {
                                                opacity: .5,
                                                position: "absolute",
                                                top: "50%",
                                                left: "50%"
                                            }),
                                            o.thumb.appendChild(h),
                                            css(h, {
                                                transform: "scale(0.5)",
                                                "margin-left": -h.offsetWidth / 2,
                                                "margin-top": -h.offsetHeight / 2
                                            })
                                        }
                                        e && e.removeEventListener("load", c),
                                        f(p) ? (e && e.removeEventListener("loadedmetadata", d),
                                        e = document.createElement("video"),
                                        attr(e, {
                                            preload: "metadata"
                                        }),
                                        e.addEventListener("loadedmetadata", d)) : (e = document.createElement("img")).addEventListener("load", c),
                                        t = n,
                                        i = p,
                                        e.src = p
                                    } else
                                        u(n)
                                }
                            } else
                                l()
                    } else
                        -1 == n && l();
                    o.current_thumb = n
                }
            }()
        }
        ,
        this.hide = function() {
            l()
        }
        ,
        this.thumb = function(e, t, i, s) {
            if (o.media.duration() > 0) {
                var r = -t / 2 + (Zoomed(e.clientX) - s) - v.thumb_width / 2;
                r > t / 2 - v.thumb_width && (r = t / 2 - v.thumb_width),
                css(o.thumb, {
                    top: -v.thumb_height - (v.thumb_bottom > 0 ? 1 * v.thumb_bottom : 5) - v.thumb_border,
                    left: r < -t / 2 ? -t / 2 : r
                }),
                o.th.time(i * o.media.duration(), Zoomed(e.clientX), s, t)
            }
        }
    }
    var ChromeCast = function() {
        var player, controller, deviceName, words, current_color, urls;
        if (window.__onGCastApiAvailable) {
            for (var j = 0, i = 0; i < window.pljssglobal.length; i++)
                window.pljssglobal[i] && j++;
            1 == j && CastInit()
        } else
            window.__onGCastApiAvailable = function(e, t) {
                if (e)
                    for (var o = 0; o < window.pljssglobal.length; o++)
                        window.pljssglobal[o] && window.pljssglobal[o].api("id") == options.id && window.pljssglobal[o].api("castinit");
                else
                    _log("error: " + t)
            }
            ;
        function CastInit() {
            if (_log("available"),
            exist(chrome) && exist(chrome.cast) && exist(cast) && !o.cast_available) {
                var e = "CC1AD845";
                1 == v.chromecast.receiver && v.chromecast.receiverid && (e = v.chromecast.receiverid);
                try {
                    cast.framework.CastContext.getInstance().setOptions({
                        receiverApplicationId: e,
                        autoJoinPolicy: "tab_and_origin_scoped",
                        language: "en-US",
                        resumeSavedSession: !1,
                        androidReceiverCompatible: !0
                    }),
                    player = new cast.framework.RemotePlayer
                } catch (e) {
                    log(e)
                }
                Controller(),
                o.cast_available = !0,
                setTimeout(Available, 1e3)
            }
        }
        function Available() {
            o.controls.Review(),
            o.controls.resize()
        }
        function Connection(e) {
            cast && cast.framework && (_log((player.isConnected ? "" : "dis") + "connected " + v.id),
            player.isConnected ? PlayRemote() : PlayLocal())
        }
        function PlayRemote(e, t) {
            var i, s = cast.framework.CastContext.getInstance().getCurrentSession(), r = "video/mp4";
            "hls" == o.file_type && (r = "application/x-mpegurl"),
            "dash" == o.file_type && (r = "application/dash+xml"),
            t ? i = t : (i = o.media.currentFile(),
            exist(v.casturl) && (i = v.casturl),
            exist(o.casturl) && (i = o.casturl),
            0 == (i = fjs(i)).indexOf("#" + v.enc2) && (i = o[o.fd[0]](i)),
            i && 0 == i.indexOf("#" + v.enc3) && i.indexOf(v.file3_separator) > 0 && (i = o[o.fd[1]](i)),
            i = fjs(i),
            urls = [],
            i.indexOf(":or:") > 0 && (iurl = 0,
            urls = i.split(":or:"),
            i = urls[0]));
            var n = new chrome.cast.media.MediaInfo(i,r);
            n.metadata = new chrome.cast.media.GenericMediaMetadata,
            n.metadata.metadataType = chrome.cast.media.MetadataType.GENERIC;
            var a = [];
            if (exist(o.subs) && exist(o.current_subtitle) && 1 == v.chromecast.sub) {
                for (var l in n.textTrackStyle = SubStyle(),
                o.subs)
                    if (o.subs[l].indexOf("vtt") > 0) {
                        var c = new chrome.cast.media.Track(0,chrome.cast.media.TrackType.TEXT);
                        c.trackContentId = o.subs[l],
                        c.trackContentType = "text/vtt",
                        c.subtype = "CAPTIONS",
                        c.name = o.files_subtitle[l],
                        c.trackId = parseInt(l),
                        c.customData = null,
                        a.push(c)
                    }
                a.length > 0 && (n.tracks = a)
            }
            v.poster && (n.metadata.images = [new chrome.cast.Image(v.poster)]),
            n.metadata.title = o.titlestore ? o.titlestore : v.title ? v.title : "",
            v.castname && (n.metadata.title = v.castname);
            var d = new chrome.cast.media.LoadRequest(n);
            d.currentTime = o.seekto > 0 ? o.seekto : o.casting ? 0 : o.media.time(),
            d.autoplay = o.play || 1 == e,
            a.length > 0 && o.current_subtitle > -1 && o.current_subtitle < a.length && (d.activeTrackIds = [parseInt(o.current_subtitle)],
            _log("subtitle " + o.current_subtitle)),
            s ? s.loadMedia(d).then((function() {
                _log("connected to " + (deviceName = s.getCastDevice().friendlyName)),
                0 == v.chromecast.message || o.casting || (words && o.frame.removeChild(words),
                words = createElement("div"),
                css(words, {
                    position: "absolute",
                    top: "20px",
                    width: "100%",
                    left: 0,
                    opacity: .7,
                    color: "#fff",
                    "pointer-events": "none"
                }),
                words.innerHTML = "<center>" + Lang("castdevice") + " &laquo;" + deviceName + "&raquo;</center>",
                o.frame.appendChild(words)),
                player.volumeLevel = v.volume,
                controller.setVolumeLevel(),
                o.muted && !player.isMuted && controller.muteOrUnmute(),
                js("casted"),
                1 != e && (o.play ? o.media.Pause() : !player.isPaused && controller.playOrPause()),
                hide(o.mediacontainer),
                o.casting = !0
            }
            ), (function(e) {
                _log(e),
                ErrLocal()
            }
            )) : (_log("no session"),
            ErrLocal())
        }
        function ErrLocal() {
            var e;
            urls.length > 1 && iurl < urls.length - 1 && (iurl++,
            e = !0,
            o.media.Pause(),
            PlayRemote(!0, urls[iurl]),
            setTimeout((function() {
                o.controls.Play()
            }
            ), 300)),
            e || (PlayLocal(),
            o.alert.txt(Lang("casterror")))
        }
        function PlayLocal() {
            words && o.frame.removeChild(words),
            words = void 0,
            o.casting = !1,
            show(o.mediacontainer),
            js("uncasted"),
            player && player.savedPlayerState && (o.actions.Seek(player.savedPlayerState.currentTime),
            player.savedPlayerState.isPaused ? o.media.Pause() : o.media.Play())
        }
        function PlayChanged() {
            player.isPaused ? (_log("pause"),
            js("castpause"),
            o.controls.Pause()) : (_log("play"),
            js("castplay"),
            o.controls.Play())
        }
        function VolumeChanged() {
            o.actions.Volume(player.volumeLevel)
        }
        function MuteChanged() {
            player.isMuted ? o.actions.Mute() : o.actions.Unmute()
        }
        function StateChanged() {
            player.isConnected && null == player.playerState && player.currentTime == player.duration && (o.controls.Pause(),
            o.media.onEnded())
        }
        function Controller() {
            _log("control " + v.id),
            (controller = new cast.framework.RemotePlayerController(player)).addEventListener(cast.framework.RemotePlayerEventType.IS_CONNECTED_CHANGED, Connection),
            controller.addEventListener(cast.framework.RemotePlayerEventType.IS_PAUSED_CHANGED, PlayChanged),
            controller.addEventListener(cast.framework.RemotePlayerEventType.VOLUME_LEVEL_CHANGED, VolumeChanged),
            controller.addEventListener(cast.framework.RemotePlayerEventType.IS_MUTED_CHANGED, MuteChanged),
            controller.addEventListener(cast.framework.RemotePlayerEventType.PLAYER_STATE_CHANGED, StateChanged)
        }
        function _log(e) {
            v.chromecast && 1 == v.log && log("chromecast", e)
        }
        function fjs(x) {
            if (0 == x.indexOf("js:"))
                try {
                    x = eval(x.substr(3))
                } catch (e) {
                    console.log(e.message)
                }
            return x || ""
        }
        function UpdateSub() {
            if (player.isConnected) {
                var e = SubStyle()
                  , t = new chrome.cast.media.EditTracksInfoRequest([parseInt(o.current_subtitle)],e);
                cast.framework.CastContext.getInstance().getCurrentSession().getSessionObj().media[0].editTracksInfo(t, (function() {
                    _log("subtitle " + o.current_subtitle)
                }
                ), (function(e) {
                    _log("subtitle error" + e)
                }
                ))
            }
        }
        function SubStyle() {
            var e = new chrome.cast.media.TextTrackStyle
              , t = Math.round(255 * v.sub_bga).toString(16);
            return e.backgroundColor = CheckColor(v.sub_bgcolor) + (1 == t.length ? t + "0" : t),
            e.edgeColor = "#00000016",
            e.edgeType = "DROP_SHADOW",
            e.fontFamily = "CASUAL",
            e.fontScale = parseFloat(parseInt(v.sub_sizeproc) / 100),
            e.foregroundColor = CheckColor(v.sub_color) + Math.round(255).toString(16),
            e
        }
        function Exit() {
            cast && cast.framework && PlayLocal()
        }
        function Remove() {
            Exit(),
            controller && (controller.removeEventListener(cast.framework.RemotePlayerEventType.IS_CONNECTED_CHANGED, Connection),
            controller.removeEventListener(cast.framework.RemotePlayerEventType.IS_PAUSED_CHANGED, PlayChanged),
            controller.removeEventListener(cast.framework.RemotePlayerEventType.VOLUME_LEVEL_CHANGED, VolumeChanged),
            controller.removeEventListener(cast.framework.RemotePlayerEventType.IS_MUTED_CHANGED, MuteChanged),
            controller.removeEventListener(cast.framework.RemotePlayerEventType.PLAYER_STATE_CHANGED, StateChanged),
            cast.framework.CastContext.getInstance().endCurrentSession(),
            controller = null)
        }
        this.init = function() {
            CastInit()
        }
        ,
        Script("gstatic.com/cv", "https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"),
        this.button = function(e) {
            return current_color = e,
            "<button is='google-cast-button' id='pjs_cast_button_" + v.id + "' style='padding:0;width:20px;height:20px;--connected-color:" + e + ";--disconnected-color:" + e + ";border:0;background:transparent;pointer-events:auto;cursor:pointer'></button>"
        }
        ,
        this.Color = function(e, t) {
            if (current_color != t) {
                var o = document.getElementById("pjs_cast_button_" + v.id);
                if (o) {
                    var i = o.getAttribute("style")
                      , s = new RegExp(current_color,"gi");
                    i = i.replace(s, t),
                    o.setAttribute("style", i)
                }
                current_color = t
            }
        }
        ,
        this.Volume = function(e) {
            player.isConnected && (player.volumeLevel = e,
            controller.setVolumeLevel())
        }
        ,
        this.Mute = function() {
            player.isConnected && (player.isMuted || controller.muteOrUnmute())
        }
        ,
        this.Unmute = function() {
            player.isConnected && player.isMuted && controller.muteOrUnmute()
        }
        ,
        this.Play = function(e) {
            player.isConnected && (player.isPaused ? controller.playOrPause() : player.playerState)
        }
        ,
        this.Pause = function(e) {
            player.isConnected && !player.isPaused && controller.playOrPause()
        }
        ,
        this.Sub = function() {
            1 == v.chromecast.sub && UpdateSub()
        }
        ,
        this.Time = function(e) {
            return player.isConnected && (e = player.currentTime),
            e
        }
        ,
        this.Duration = function(e) {
            return player.isConnected && (e = player.duration),
            e
        }
        ,
        this.Exit = function() {
            Exit()
        }
        ,
        this.Go = function() {
            cast && cast.framework && player.isConnected && PlayRemote(o.play)
        }
        ,
        this.Seek = function(e) {
            player.isConnected && (player.currentTime = e,
            controller.seek())
        }
        ,
        this.remove = function() {
            Remove()
        }
    }
      , PluginSub = function() {
        var sub = [], upld = [], empty = !0, ioff, loading = -1, lastsub, wait, parsed = [], alldd, hlsrows = [], sblsthd = !1, tt = 0, ttt = 0;
        function Start0(e) {
            exist(e) && (0 == e.indexOf("#" + v.enc3) && e.indexOf(v.file3_separator) > 0 ? o[o.fd[1]](e, Start00) : Start(e))
        }
        function Start00(e) {
            e && (o.subs = e,
            Start(e))
        }
        function Start(e) {
            if (!e && (e = ""),
            "11" != e) {
                var t = 0
                  , i = !0
                  , s = "";
                o.subs = e.split(","),
                o.files_subtitle = [],
                o.current_subtitle = -1,
                o.storage && 1 == v.sub_store ? null != localStorage.getItem("pljssubtitle") && (s = localStorage.getItem("pljssubtitle")) : o.remember_sub && (s = o.remember_sub);
                for (var r = 0; r < o.subs.length; r++)
                    0 == o.subs[r].indexOf("#0") && (o.subs[r] = fd0(o.subs[r])),
                    0 == o.subs[r].indexOf("#" + v.enc2) && (o.subs[r] = o[o.fd[0]](o.subs[r])),
                    0 == o.subs[r].indexOf("[") && o.subs[r].indexOf("]") > 1 ? (o.files_subtitle[r] = o.subs[r].substr(o.subs[r].indexOf("[") + 1, o.subs[r].indexOf("]") - 1),
                    o.subs[r] = o.subs[r].substr(o.subs[r].indexOf("]") + 1),
                    i = !1) : (o.files_subtitle[r] = o.subs[r].substr(o.subs[r].lastIndexOf("/") + 1),
                    o.files_subtitle[r] = o.files_subtitle[r].substr(0, o.files_subtitle[r].lastIndexOf("."))),
                    0 == o.subs[r].indexOf("#0") && (o.subs[r] = fd0(o.subs[r])),
                    0 == o.subs[r].indexOf("#" + v.enc2) && (o.subs[r] = o[o.fd[0]](o.subs[r]));
                if (o.files_subtitle.length > 1 && 1 == v.sub_all && (o.files_subtitle.push(StringVar("sub_all_title", 1 == v.sub_allmy && exist(v.sub_allmyt) ? v.sub_allmyt : "+ " + Lang("together"))),
                o.subs.push("all")),
                o.files_subtitle.length > 0 && 1 == v.sub_off && (1 == v.sub_off0 ? (ioff = 0,
                t++,
                o.files_subtitle.unshift(StringVar("sub_off_title", Lang("off"))),
                o.subs.unshift("")) : (o.files_subtitle.push(StringVar("sub_off_title", Lang("off"))),
                o.subs.push(""),
                ioff = o.files_subtitle.length - 1)),
                exist(v.default_subtitle))
                    for (r = 0; r < o.subs.length; r++)
                        v.default_subtitle == o.files_subtitle[r] && (t = r,
                        o.current_subtitle = r,
                        v.subtitle_start = 1);
                if ("" != s)
                    for (r = 0; r < o.subs.length; r++)
                        s == o.files_subtitle[r] && (t = r,
                        o.current_subtitle = r);
                1 == v.sub_off && 0 == v.subtitle_start && (o.current_subtitle = ioff),
                exist(o.controls) && o.controls.SubtitleChanged(),
                1 == v.subtitle_start ? (o.current_subtitle = t,
                o.start ? 1 == v.sub_all && "all" == o.subs[t] ? SubtitleLoadAll(o.current_subtitle) : SubtitleLoad(o.current_subtitle) : (wait = e,
                o.subtitle_on = "off" != o.subs[t] && t != ioff,
                setTimeout(Parsed, 500))) : (i && o.subs.length < 3 && SubtitleLoad(0 == ioff ? 1 : 0),
                1 != v.sub_off && (o.current_subtitle = -1))
            } else
                Remove()
        }
        function sfjs(x) {
            if (0 == x.indexOf("js:"))
                try {
                    x = eval(x.substr(3))
                } catch (e) {
                    console.log(e.message)
                }
            return x || ""
        }
        function SubtitleLoad(e) {
            exist(o.subs[e]) && (o.subs[e] = sfjs(o.subs[e]),
            o.subs[e] && (o.subs[e].indexOf(".") > -1 ? (o.subsor = o.subs[e].split(" or "),
            o.sub_or = 0,
            SubtitleLoad2(e)) : (0 == o.subs[e].indexOf("upld") && upld[o.subs[e].substr(4)] && SubtitleParse(o.files_subtitle[e], upld[o.subs[e].substr(4)]),
            0 == o.subs[e].indexOf("hls") && (o.media.hlsDashSub(e, "hls2"),
            o.subtitle_on = !0,
            o.current_subtitle = e,
            o.controls.SubtitleChanged()))))
        }
        function SubtitleLoadAll(e) {
            o.subtitle_on = !0,
            Parsed()
        }
        function SubtitleLoad2(e, t) {
            var i = "hls" == t ? e : trim(o.subsor[o.sub_or])
              , s = i;
            if (parsed[i])
                "all" != o.subs[e] && (o.subtitle_on = !0,
                Parsed());
            else {
                i.indexOf("id_") > 0 && i.indexOf("id_") < 4 && (i.substr(0, i.indexOf("id_")),
                s = i.substr(i.indexOf("id_") + 3));
                var r = XHR(s);
                loading = e,
                o.subload = 1,
                r.onload = function() {
                    o.subload = 0,
                    4 == this.readyState && 200 == this.status ? (o.subtitle_on = !0,
                    SubtitleParse(i, this.responseText, e, t)) : o.sub_or + 1 < o.subsor.length ? (o.sub_or++,
                    SubtitleLoad2(loading)) : SubtitleError("loading_error")
                }
                ,
                r.onerror = function(e) {
                    o.subload = 0,
                    o.sub_or + 1 < o.subsor.length ? (o.sub_or++,
                    SubtitleLoad2(loading)) : SubtitleError("loading_error")
                }
                ,
                r.send()
            }
        }
        function SubtitleError(e) {
            log("subtitle not found or access denied"),
            o.files_subtitle && o.subs && (o.files_subtitle[o.current_subtitle] && -1 == o.files_subtitle[o.current_subtitle].indexOf(Lang("loading_error")) && (o.files_subtitle[o.current_subtitle] = o.files_subtitle[o.current_subtitle] + " (" + Lang(e) + ")"),
            1 == v.subtitle_errdel && loading > -1 && (o.subs[loading] = "",
            o.files_subtitle[loading] = "")),
            o.current_subtitle = -1,
            o.subtitle_on = !1,
            o.constrols ? (o.controls.SubtitleChanged(),
            o.controls.refresh()) : setTimeout((function() {
                o.controls && (o.controls.SubtitleChanged(),
                o.controls.refresh())
            }
            ), 100),
            exist(o.subtitle) && (o.frame.removeChild(o.subtitle),
            o.subtitle = null)
        }
        function SubtitleParse(e, t, i, s) {
            var r;
            if (0 == t.indexOf("#" + v.enc2) && (t = o[o.fd[0]](t)),
            0 == t.indexOf("#" + v.enc3) && t.indexOf(v.file3_separator) > 0 && (t = o[o.fd[1]](t)),
            e.indexOf("id_") > 0 && e.indexOf("id_") < 4 && (r = e.substr(0, e.indexOf("id_"))),
            e.indexOf(".srt") > -1 || e.indexOf(".ass") > -1 || e.indexOf(".ssa") > -1 || e.indexOf(".vtt") > -1) {
                var n = r || o.current_subtitle;
                !o.subs && (o.subs = []),
                "all" == o.subs[n] && (n = i),
                "hls" == s && sub[n] || (sub[n] = Object(),
                sub[n][0] = [],
                sub[n][1] = []);
                var a = Array();
                a = t.split(/\r|\n/);
                var l = 1
                  , c = 0
                  , d = 0
                  , u = exist(v.subshift) ? v.subshift : 0;
                e.indexOf("shift=") > 0 && (u = 1 * e.substr(e.indexOf("shift=") + 6));
                for (var p = 0; p < a.length; p++) {
                    if (e.indexOf(".srt") > -1 || e.indexOf(".vtt") > -1)
                        if (a[p].indexOf("--\x3e") > -1 && a[p].indexOf(":") > -1) {
                            if ("hls" == s) {
                                if (hlsrows.indexOf(a[p]) > -1)
                                    break;
                                hlsrows.push(a[p])
                            }
                            0 == (c = 1 * TimeSub(a[p].substr(0, a[p].indexOf("--\x3e"))) + u) && (c = 1),
                            d = 1 * TimeSub(a[p].substr(a[p].indexOf("--\x3e") + 4, 12)) + u,
                            !exist(sub[n][0][c]) && (sub[n][0][c] = ""),
                            d - c > 100 && (d = c + 100);
                            for (var f = c; f < d; f++)
                                sub[n][1][f] = c;
                            l++
                        } else
                            a[p] = trim(a[p]),
                            "" != a[p] && a[p].length > 0 && a[p] != l && "WEBVTT" != a[p] && (exist2(sub[n][0][c]) ? sub[n][0][c] = sub[n][0][c] + "<br>" + a[p] : sub[n][0][c] = a[p]);
                    if ((e.indexOf(".ass") > -1 || e.indexOf(".ssa") > -1) && a[p].indexOf("Dialogue:") > -1) {
                        c = 1 * TimeSub(a[p].substr(e.indexOf(".ssa") > -1 ? a[p].indexOf("=0") + 3 : 12, 12)) + u,
                        d = 1 * TimeSub(a[p].substr(e.indexOf(".ssa") > -1 ? a[p].indexOf("=0") + 14 : 23, 10)) + u;
                        var h = "";
                        if (a[p].indexOf("0,,") > 0 ? h = a[p].substr(a[p].indexOf("0,,") + 3) : (a[p].indexOf("ffect,") > 0 && (h = a[p].substr(a[p].indexOf("ffect,") + 6)),
                        a[p].indexOf(")}") > 0 && (h = a[p].substr(a[p].indexOf(")}") + 2))),
                        "" != h) {
                            null != sub[n][0][c] ? sub[n][0][c] += "<br>" + h : sub[n][0][c] = h,
                            sub[n][0][c] = sub[n][0][c].replace(/{.*?}/, ""),
                            sub[n][0][c] = sub[n][0][c].replace(/\\\\N/, "<br>"),
                            sub[n][0][c] = sub[n][0][c].replace(/\\N/, "<br>"),
                            d - c > 100 && (d = c + 100);
                            for (f = c; f < d; f++)
                                sub[n][1][f] = c
                        }
                    }
                }
                parsed[e] = !0,
                "all" != o.subs[i] && "hls" != s && Parsed()
            } else
                "" != t ? 0 == t.indexOf("[") ? Start(t) : SubtitleError("error") : (Remove(),
                o.controls.refresh())
        }
        function Parsed() {
            o.controls.SubtitleChanged(),
            o.actions.RenewSubtitle(),
            o.controls.refresh()
        }
        function TimeSub(e) {
            var t = e.split(":")
              , o = 0;
            return 2 == t.length && t.unshift("00"),
            "00" != t[0] && (o += 3600 * t[0]),
            "00" != t[1] && (o += 60 * t[1]),
            o = 10 * (o += 1 * t[2].substr(0, 2)) + 1 * t[2].substr(3, 1)
        }
        function SetSubtitle(e) {
            exist(o.current_subtitle) && (o.current_subtitle != e ? (hlsrows = [],
            -1 == e || 1 == v.sub_off && e == ioff ? SubtitleOff() : (v.sub_shift = 0,
            o.current_subtitle = e,
            o.subtitle_on = !0,
            v.subtitle_start = 1,
            SetSubtitle2(e),
            js("subtitle", o.files_subtitle[e]),
            o.controls.SubtitleChanged())) : 1 != v.sub_off && SubtitleOff(),
            o.sublist && o.sublist.Changed())
        }
        function SubRem() {
            exist(o.files_subtitle[o.current_subtitle]) && (o.storage && 1 == v.sub_store ? localStorage.setItem("pljssubtitle", o.files_subtitle[o.current_subtitle]) : 1 != v.sub_unmem && (o.remember_sub = o.files_subtitle[o.current_subtitle]))
        }
        function SetSubtitle2(e) {
            exist(o.subs[e]) && (log("Subtitle", e),
            o.current_subtitle = e,
            SubRem(),
            "hls" == o.file_type && 1 == o.hls_subs ? o.media.hlsDashSub(e, "hls") : "dash" == o.file_type && 1 == o.dash_subs ? o.media.hlsDashSub(e, "dash") : "all" == o.subs[e] ? SubtitleLoadAll(o.current_subtitle) : SubtitleLoad(o.current_subtitle))
        }
        function SubtitleOff() {
            js("subtitle", "off"),
            o.subtitle_on && (o.last_subtitle = o.current_subtitle),
            o.current_subtitle = 1 == v.sub_off ? ioff : -1,
            v.subtitle_start = 0,
            o.subtitle_on = !1,
            o.controls.SubtitleChanged(),
            SubRem(),
            o.dash_subs && SetSubtitle2(o.current_subtitle),
            exist(o.subtitle) && o.frame.removeChild(o.subtitle),
            o.subtitle = null
        }
        function Show(e) {
            if (!o.nativecontrols) {
                var t = parseInt(10 * e);
                if (v.sub_shift && (e -= 1 * v.sub_shift),
                o.subtitle_on && exist(o.subs) && sub) {
                    var i = o.current_subtitle;
                    t = parseInt(10 * e);
                    if (tt = 100 * t,
                    1 == v.subpausehide && !o.play)
                        return;
                    if ("all" == o.subs[i])
                        if (alldd)
                            if (sub[i][1][t])
                                ;
                            else {
                                for (s = 0; s < o.subs.length; s++)
                                    sub[s] && exist(sub[s][1]) && exist(sub[s][1][t]) && (sub[i][0][t] || (sub[i][0][t] = ""),
                                    sub[i][0][t] += ("" != sub[i][0][t] ? "<br>[sub2]" : "") + sub[s][0][sub[s][1][t]] + ("" != sub[i][0][t] ? "[/sub2]" : ""));
                                exist(sub[i][0]) && exist(sub[i][0][t]) && (sub[i][1][t] = t)
                            }
                        else {
                            for (var s = 0; s < o.subs.length; s++)
                                setTimeout(SubtitleLoad, 500 * s, s);
                            sub[i] || (sub[i] = Object(),
                            sub[i][0] = Array(),
                            sub[i][1] = Array()),
                            alldd = !0
                        }
                    if (exist(sub[i])) {
                        if (exist(sub[i][1]))
                            if (exist(sub[i][1][t])) {
                                ttt = sub[i][1][t];
                                var r = sub[i][0][ttt];
                                exist(o.subtitle) || (o.subtitle = createElement("div"),
                                attr(o.subtitle, {
                                    id: "pjs_" + v.id + "_subtitle"
                                }),
                                o.frame.appendChild(o.subtitle),
                                Style(),
                                js("subtitles", o.files_subtitle[i])),
                                empty && show2(o.subtitle),
                                SubtitleBottom(),
                                1 == v.sub_split2words && (r = PluginSubword(r)),
                                1 == v.sub_all && (r = (r = r.replace(/\[sub2\]/gm, '<span style="color:' + CheckColor(v.sub_color2) + '">')).replace(/\[\/sub2\]/gm, "</span>")),
                                r.indexOf("<c.") > -1 && (r = (r = r.replace(/\<c./gm, "<span style=color:")).replace(/\<\/c\>/gm, "</span>")),
                                v.apiprm && 1 == v.apiprm.sub && lastsub != r && (js("sub", r),
                                lastsub = r),
                                o.subtitle.innerHTML = '<span style="' + (1 == v.sub_bg ? "background-color:" + hex2rgb(v.sub_bgcolor, v.sub_bga) + ";" : "") + "-webkit-box-decoration-break: clone;color:" + CheckColor(v.sub_color) + ";padding:" + v.sub_bgpadding + "px " + 2 * v.sub_bgpadding + "px;border-radius:" + v.sub_bgo + "px;margin:0 0;line-height:" + (v.sub_lineheight ? v.sub_lineheight : 1.8) + ";font-weight:" + v.sub_weight + '">' + trim(r) + "</span>",
                                css(o.subtitle, {
                                    "font-size": parseInt(v.sub_size) + (parseInt(v.sub_sizeproc) - 100) * parseInt(v.sub_size) / 100 + "px"
                                }),
                                1 == v.sub_big_fullscreen && o.fullscreen && css(o.subtitle, {
                                    "font-size": v.sub_size_fullscreen + (parseInt(v.sub_sizeproc) - 100) * v.sub_size_fullscreen / 100 + "px"
                                }),
                                empty = !1,
                                o.sublist && (o.sublist.Open() ? (o.sublist.Update(sub, ttt),
                                1 == v.subfeedhide && (hide2(o.subtitle1),
                                hide2(o.subtitle2),
                                sblsthd = !0)) : sblsthd && !empty && (show2(o.subtitle1),
                                show2(o.subtitle2),
                                sblsthd = !1))
                            } else
                                !empty && exist(o.subtitle) && Empty()
                    } else
                        Empty()
                }
            }
        }
        function Empty() {
            empty || (o.subtitle && (o.subtitle.innerHTML = ""),
            empty = !0,
            hide2(o.subtitle))
        }
        function Style() {
            o.subtitle && (css(o.subtitle, {
                position: "absolute",
                width: "100%",
                "padding-left": "10%",
                "padding-right": "10%",
                left: 0,
                color: v.sub_color,
                "text-align": "center",
                "box-sizing": "border-box"
            }),
            1 == v.sub_fonted && exist(v.sub_font) && "" != v.sub_font && css(o.subtitle, {
                "font-family": v.sub_font
            }),
            1 == v.sub_stroke ? css(o.subtitle, {
                "text-shadow": "-1px -1px 0 #000,1px -1px 0 #000,-1px  1px 0 #000,1px  1px 0 #000"
            }) : 1 == v.sub_shadow ? css(o.subtitle, {
                "text-shadow": "1px 1px 2px black"
            }) : css(o.subtitle, {
                "text-shadow": "none"
            }),
            1 == v.sub_drag ? PluginMovable(o.subtitle, "o.subdrag") : 1 != v.sub_split2words && Pnt0(o.subtitle))
        }
        function SubtitleBottom() {
            o.subdrag || ((o.controls.ToolbarHidden() || v.sub_bottom > v.toolbar.h) && 1 == v.sub_move ? css(o.subtitle, {
                position: "absolute",
                top: "auto",
                left: 0,
                bottom: 1 * v.sub_bottom
            }) : css(o.subtitle, {
                position: "absolute",
                left: 0,
                bottom: 1 * v.sub_bottom + 1 * v.toolbar.h
            }))
        }
        function Remove() {
            o.current_subtitle = -1,
            o.subtitle_on = !1,
            o.thumbs_on = !1,
            v.subtitle = null,
            v.thumbnails = null,
            o.sub = null,
            o.subs = null,
            alldd = !1,
            parsed = [],
            sub = [],
            exist(o.controls) && o.controls.SubtitleChanged(),
            o.files_subtitle = [],
            exist(o.subtitle) && (o.frame.removeChild(o.subtitle),
            o.subtitle = null),
            o.current_subtitle = null,
            o.subtitle_on = !1
        }
        this.start = function(e) {
            !e && wait ? (Start0(wait),
            wait = void 0) : e && Start0(e)
        }
        ,
        this.check = function(e) {
            Start0(e)
        }
        ,
        this.reHls = function() {
            hlsrows = []
        }
        ,
        this.text = function() {
            1 == v.sublist && "function" == typeof PlugSublist && (o.sublist || (o.sublist = new PlugSublist),
            o.sublist.Show(sub, tt, 1))
        }
        ,
        this.hlsSub = function(e) {
            SubtitleLoad2(e, "hls")
        }
        ,
        this.SubUpload = function() {
            if (o.subupld) {
                var e = o.subupld.files;
                if (e[0]) {
                    var t = new FileReader;
                    t.onload = function(t) {
                        var i = t.target.result;
                        upld.push(i),
                        o.current_subtitle = -1,
                        (i = e[0].name).length > 40 && (i = e[0].name.substr(0, 15) + "..." + e[0].name.substr(-15)),
                        1 == v.sub_off && 1 == v.sub_off0 ? (o.subs.push("upld" + (upld.length - 1)),
                        o.files_subtitle.push(i + ""),
                        SetSubtitle(o.subs.length - 1)) : (o.subs.unshift("upld" + (upld.length - 1)),
                        o.files_subtitle.unshift(i + ""),
                        1 == v.sub_off && ioff++,
                        SetSubtitle(0)),
                        o.subupld.value = ""
                    }
                    ,
                    t.readAsText(e[0])
                } else
                    o.subupld.click()
            }
        }
        ,
        this.SetSubtitle = function(e) {
            SetSubtitle(e)
        }
        ,
        this.ioff = function() {
            return ioff
        }
        ,
        this.exst = function() {
            return !!sub && sub.length > 0
        }
        ,
        this.setioff = function(e) {
            ioff = e
        }
        ,
        this.show = function(e) {
            Show(e)
        }
        ,
        this.style = function() {
            Style()
        }
        ,
        this.remove = function() {
            Remove()
        }
        ,
        this.off = function() {
            SubtitleOff()
        }
    }
      , PluginHdIcon = function(e, t, i) {
        var s, r = createElement("div");
        e.appendChild(r),
        css(r, {
            position: "absolute",
            top: -t.offsetHeight / 2 - 1,
            "background-color": CheckColor(existv(i.hdiconclr, "#f00")),
            "border-radius_": 1,
            display: "none",
            pointerEvents: "none"
        }),
        1 == i.hdicon2 && i.hdiconlist ? (s = i.hdiconlist.split(","),
        css(r, {
            "font-size": 8,
            color: "#fff",
            padding: "2px 2px 0 2px",
            "line-height": "1"
        })) : (i.hdicon2 = 0,
        css(r, {
            height: 9,
            width: 13,
            "background-image": "url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTAwJSIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgMTMgOSIgd2lkdGg9IjEwMCUiPjxwYXRoIGQ9Ik01LDcgTDYsNyBMNiw4IEw1LDggTDUsNyBaIE0xMCwzIEwxMCw0IEw4LDQgTDgsMyBMMTAsMyBaIE0zLDYgTDMsNSBMNSw1IEw1LDYgTDMsNiBaIE0yLDcgTDMsNyBMMyw4IEwyLDggTDIsNyBaIE03LDcgTDEwLDcgTDEwLDggTDcsOCBMNyw3IFogTTEwLDYgTDExLDYgTDExLDcgTDEwLDcgTDEwLDYgWiIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIwLjY0NzEiIGZpbGwtcnVsZT0iZXZlbm9kZCIgLz48cGF0aCBkPSJNNSw3IEw1LDYgTDUsNSBMMyw1IEwzLDYgTDMsNyBMMiw3IEwyLDIgTDMsMiBMMyw0IEw1LDQgTDUsMiBMNiwyIEw2LDcgTDUsNyBaIE0xMSw2IEwxMCw2IEwxMCw3IEw3LDcgTDcsMiBMMTAsMiBMMTAsMyBMMTEsMyBMMTEsNiBaIE0xMCw0IEwxMCwzIEw4LDMgTDgsNCBMOCw2IEwxMCw2IEwxMCw0IFoiIGZpbGw9IiNmZmYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgLz48L3N2Zz4=)"
        })),
        this.toggle = function() {
            var e = 0
              , n = o.media.getQuality();
            if (n = n.replace(Lang("auto") + " ", "")) {
                1 != i.hdicon2 && ("HD" == n || n.indexOf(" HD") > 0 || 0 == n.indexOf("hd") || 0 == n.indexOf("Hd")) && (n = "720");
                var a = n;
                n.indexOf(" ") > 0 && (a = n.substr(0, n.indexOf(" "))),
                e = parseInt(a)
            }
            var l, c = "-1";
            if (1 == i.hdicon2) {
                isNaN(e) && (e = n),
                c = "";
                for (var d = 0; d < s.length; d++) {
                    var u = s[d].split(":");
                    2 == u.length && trim(u[0]) == e && (c = trim(u[1]))
                }
                "" == c ? e > 700 && (l = !0,
                r.innerHTML = "HD") : (l = !0,
                r.innerHTML = c)
            } else
                e > 700 && (l = !0);
            l ? (show2(r),
            t.offsetWidth - r.offsetWidth > 0 && css(r, {
                left: (t.offsetWidth - r.offsetWidth) / 2 - 2
            })) : hide2(r)
        }
    }
      , PluginHotIcon = function(e, t) {
        var i, s = 2;
        function r() {
            i && (o.frame.removeChild(i),
            i = null)
        }
        o.screen_w > 500 && (s = 4),
        o.screen_w > 1e3 && (s = 5),
        1 == v.hotkey[e + "icon"] && (v.hotkey[e + t + "icon"] || "volume" == e) && ("" == v.hotkey[e + t + "icon"] && "volume" != e || (i = createElement("div"),
        css(i, {
            position: "absolute",
            top: "50%",
            left: "50%",
            transform: "scale(" + s + ")",
            transition: "opacity .3s linear, transform .3s linear"
        }),
        o.frame.appendChild(i),
        i.innerHTML = "volume" == e ? (o.muted ? 0 : Math.round(100 * v.volume)) + "%" : v.hotkey[e + t + "icon"],
        css(i, {
            marginTop: "-" + i.offsetHeight / 2 + "px",
            marginLeft: "-" + i.offsetWidth / 2 + "px"
        }),
        1 != v.hotkey.icnclr && SvgColor(i, "#ffffff"),
        setTimeout((function() {
            i && (css(i, {
                transform: "scale(" + 2 * s + ")",
                opacity: 0
            }),
            setTimeout(r, 500))
        }
        ), 50)))
    };
    function PluginDroplist(e) {
        var t, i, s = -1, r = [], n = [], a = [], l = [], c = [], d = [], u = 5, p = 0, f = v.playlist;
        !f.dropcolor && (f.dropcolor = "ffffff"),
        !f.dropbgcolor && (f.dropbgcolor = "000000");
        var h = 1 == f.dropclrs ? f.dropcolor : f.color
          , m = 1 == f.dropclrs ? f.dropbgcolor : f.bgcolor;
        v.playlist.srch > 0 && !t && void 0 !== PluginPlSrch && (t = new PluginPlSrch(!0,f)),
        pushCSS(".pjspl" + v.id + "scroll::-webkit-scrollbar {width: " + parseFloat(.3 * existv(f.dropscrlw, 1)) + "rem;}.pjspl" + v.id + "scroll::-webkit-scrollbar-track {background:" + hex2rgb(f.bgcolor, f.bga) + "}.pjspl" + v.id + "scroll::-webkit-scrollbar-thumb {background:" + CheckColor(existv(f.dropscrlclr, f.valuecolor)) + "}"),
        f.arrowsize = 4;
        var g = "<svg width='" + (2 * f.arrowsize + 2) + "' height='" + (1.2 * f.arrowsize + 1) + "' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg' style='pointer-events:none;transition:transform 0.2s ease-out;position: absolute;bottom: 50%;margin-bottom:-" + (1.2 * f.arrowsize + 2) / 2 + "px;right:" + (f.paddingright / 2 + f.arrowsize / 2) + "px'><g><line x1='1' y1='1' x2='" + (f.arrowsize + 1) + "' y2='" + 1.2 * f.arrowsize + "' stroke='#" + h + "' stroke-width='1' stroke-linecap='round'/><line x1='" + (f.arrowsize + 1) + "' y1='" + 1.2 * f.arrowsize + "' x2='" + (2 * f.arrowsize + 1) + "' y2='1' stroke='#" + h + "' stroke-width='1' stroke-linecap='round'/></g></svg>";
        if (o.playlist_dic) {
            for (var w = 0; w < u; w++)
                b(w);
            1 == f.dropaudio && (o.plaudio = !0,
            b(u)),
            1 == f.dropquality && (o.plquality = !0,
            b(u + 1)),
            0 == o.plopenid && (o.plopenid = o.plid),
            y(),
            P(0)
        }
        function b(e) {
            r[e] = createElement("div");
            createElement("div");
            css(r[e], {
                position: "absolute",
                top: f.margintop,
                color: f.color,
                overflow: "hidden",
                "font-family": checkFont(f.font),
                "border-radius": f.rounding + "px",
                zIndex: 1e3
            }),
            exist2(f.bgborder) && css(r[e], {
                border: "1px solid " + CheckColor(existv(f.bgbordercolor, "ffffff"))
            }),
            o.frame.appendChild(r[e]),
            attr(r[e], {
                id: v.id + "_playlist" + (e + 1)
            }),
            a[e] = createElement("div");
            var t = f.headfontsize;
            f.dropfontsize > 0 && (t = f.dropfontsize,
            f.dropsmallfontsize > 0 && o.small && (t = f.dropsmallfontsize)),
            css(a[e], {
                display: "block",
                "font-size": t * existv(v.globalfs, 1)
            }),
            r[e].appendChild(a[e]),
            l[e] = createElement("div"),
            css(l[e], {
                display: "block",
                transition: "height 0.1s ease-out",
                "font-size": f.fontsize * existv(v.globalfs, 1),
                "overflow-x": "hidden"
            }),
            l[e].classList.add("pjspl" + v.id + "scroll"),
            l[e].addEventListener("wheel", q, {
                passive: !1
            }),
            1 == f.blur && css(l[e], {
                "backdrop-filter": "blur(8px)"
            }),
            r[e].appendChild(l[e])
        }
        function y() {
            for (var e = 0; e <= u + 1; e++)
                l[e] && (l[e].innerHTML = "",
                a[e].innerHTML = "");
            var t = o.playlist_dic[o.plopenid];
            if (k(x(t, 0), 0),
            k(x(t, 1), 1),
            k(x(t, 2), 2),
            k(x(t, 3), 3),
            k(x(t, 4), 4),
            1 == f.dropaudio && o.files_audiotrack.length > 0) {
                var i = [{
                    title: o.files_audiotrack[o.current_audiotrack],
                    id: "audio-0"
                }];
                for (var s in o.files_audiotrack)
                    i.push({
                        title: o.files_audiotrack[s],
                        id: "audio_" + s
                    });
                k(i, u)
            }
            if (1 == f.dropquality && o.files_quality.length > 1 && o.current_quality > -1) {
                var r = [{
                    title: o.files_quality[o.current_quality],
                    id: "quality-0"
                }];
                for (var s in o.files_quality)
                    r.push({
                        title: o.files_quality[s],
                        id: "quality_" + s
                    });
                k(r, u + 1)
            }
            X()
        }
        function x(e, t) {
            for (var i = 0; i < t; i++)
                if (e) {
                    if ("" == e.pjs_parent) {
                        e = -1;
                        break
                    }
                    -1 != o.playlist_dic[e.pjs_parent].pjs_parent && (e = o.playlist_dic[e.pjs_parent])
                }
            return e
        }
        function k(e, i) {
            if (e)
                if (-1 == e)
                    n[i] = !1,
                    hide2(r[i]);
                else {
                    n[i] = !0,
                    show2(r[i]);
                    var s = []
                      , p = "";
                    if (i == u)
                        s = e,
                        w = "audio_" + o.current_audiotrack,
                        p = "au";
                    else if (i == u + 1)
                        s = e,
                        w = "quality_" + o.current_quality,
                        o.media.autoQuality() && (w += ",quality_" + (o.files_quality.length - 1)),
                        p = "qu";
                    else {
                        for (var m in s.push(e),
                        o.playlist_dic)
                            o.playlist_dic.hasOwnProperty(m) && o.playlist_dic[m].pjs_parent == e.pjs_parent && s.push(o.playlist_dic[m]);
                        var w = _(o.plid);
                        t && s.length > v.playlist.srch + 1 && t.add(f, l[i])
                    }
                    for (var b = 0; b < s.length; b++) {
                        var y = createElement("div");
                        css(y, {
                            display: "block",
                            position: "relative",
                            cursor: "pointer",
                            padding: MarPad(f.padding),
                            transition: "color .1s ease-out",
                            "padding-right": f.paddingright + (o.screen_w > 400 ? 3 * f.arrowsize : 0)
                        });
                        var x = createElement("div");
                        css(x, {
                            position: "absolute",
                            top: 0,
                            left: 0,
                            zIndex: -1,
                            width: "100%",
                            height: "100%",
                            transition: "filter .2s ease-out,background .2s ease-out,opacity .2s ease-out"
                        }),
                        A(x, b, existv(f["bgcolor" + p], f.bgcolor), f.bga),
                        css(y, 0 == b ? {
                            color: h
                        } : {
                            color: f.color
                        });
                        w && w.indexOf(s[b].id) > -1 && b > 0 && (css(y, {
                            color: f.valuecolor
                        }),
                        1 == f.playbgcolored && exist(f.playbgcolor) && css(x, {
                            backgroundColor: f.playbgcolor
                        }),
                        exist2(f.bgbract) && css(y, {
                            "background-image": "linear-gradient(rgba(0, 0, 0, " + (1 - 1 * f.bgbract) + ") 0 0)"
                        }),
                        y.classList.add("pjs-" + v.id + "-active-pl")),
                        y.innerHTML = "" + s[b].title + (0 == b && o.screen_w > 400 ? g : ""),
                        y.setAttribute("me", (0 == b ? "head_" : "") + s[b].id),
                        1 == f.blur && css(x, {
                            "backdrop-filter": "blur(8px)"
                        }),
                        0 == b ? (w.indexOf(s[b].id) > -1 || i > 0 ? c[i] = s[b].id : y.innerHTML = (1 != f.no3 ? "..." : f.my3 ? f.my3 : "") + g,
                        a[i].appendChild(y)) : (o.plhistory[s[b].id] && s[b].id != o.plid && E(y),
                        l[i].appendChild(y)),
                        y.appendChild(x)
                    }
                    css(l[i], {
                        height: "auto"
                    }),
                    d[i] = l[i].offsetHeight,
                    css(l[i], {
                        height: 0
                    }),
                    r[i].addEventListener("click", B),
                    r[i].addEventListener("mouseover", T),
                    r[i].addEventListener("mouseout", H)
                }
        }
        function A(e, t, o, i) {
            var s;
            e && (1 == f.bggr && f.bggrclr && (css(e, {
                background: "linear-gradient(to left," + hex2rgb(f.bggrclr, i) + ", " + hex2rgb(0 == t ? m : o, i) + ")"
            }),
            s = !0),
            s || css(e, {
                "background-color": hex2rgb(0 == t ? m : o, i, e)
            }))
        }
        function _(e) {
            var t = o.playlist_dic[e]
              , i = [];
            if (t)
                for (var s = 0; s < u; s++)
                    i.push(t.id),
                    "" != t.pjs_parent && (t = o.playlist_dic[t.pjs_parent]);
            return i
        }
        function B(e) {
            var t = e.target
              , i = new Date;
            o.clicktime = i.getTime(),
            "PJSDIV" != t.tagName && (t = t.parentNode),
            "PJSDIV" != t.tagName && (t = t.parentNode);
            var n = t.parentNode.parentNode
              , l = t.getAttribute("me");
            if (l)
                if (0 == l.indexOf("head_")) {
                    for (var d = -1, v = 0; v <= u + 1; v++)
                        r[v] && n == r[v] && (d = v);
                    C(),
                    d > -1 && (s != d ? z(d) : s = -1)
                } else {
                    if (show2(a[s]),
                    c[s] == l) {
                        if (C(),
                        s > 0)
                            return void z(s - 1);
                        s = -1
                    } else
                        c[s] = l;
                    s == u ? (apiProcessor("audiotrack", l.substr(6)),
                    y()) : s == u + 1 ? (apiProcessor("quality", l.substr(8)),
                    y()) : o.playlist_dic[l].folder ? (o.controls.PlaylistPlayId(l),
                    C(),
                    s = -1,
                    j()) : (C(),
                    o.seekto = void 0,
                    s = -1,
                    apiProcessor("play", "id:" + l))
                }
            JsClk()
        }
        function j() {
            for (var e in o.playlist_dic)
                if (o.playlist_dic.hasOwnProperty(e) && o.playlist_dic[o.plopenid] && o.playlist_dic[e].pjs_parent == o.playlist_dic[o.plopenid].id) {
                    if (o.plopenid = o.playlist_dic[e].id,
                    y(),
                    o.playlist_dic[e].folder)
                        l[0].childNodes.length < 2 ? j() : z(0);
                    else if (1 == f.dropautoplay) {
                        var t = l[0].childNodes[0].getAttribute("me");
                        t && apiProcessor("play", "id:" + t)
                    } else
                        z(0);
                    break
                }
        }
        function z(e) {
            css(l[e], {
                height: "auto"
            }),
            css(Z(a[e].childNodes[0]), {
                "background-color": hex2rgb(m, 1)
            }),
            css(a[e].getElementsByTagName("svg")[0], {
                transform: "scale(-1, -1)"
            }),
            o.controls.SettingsClose(),
            s = e
        }
        function C() {
            s > -1 && (css(l[s], {
                height: 0
            }),
            css(l[s], {
                "border-top": "none"
            }),
            css(Z(a[s].childNodes[0]), {
                "background-color": hex2rgb(m, f.bga, Z(a[s].childNodes[0]))
            }),
            css(a[s].getElementsByTagName("svg")[0], {
                transform: "scale(1, 1)"
            }))
        }
        function T(e) {
            var t = e.target
              , o = t.getAttribute("me")
              , i = Z(t);
            o && (exist2(f.bgbrovr) && css(i, {
                filter: "brightness(" + f.bgbrovr + ")"
            }),
            -1 == s || 0 == o.indexOf("head") ? A(i, -1, existv(f.dropbgcolorover, m), 1) : exist2(f.bgcolorover) && A(i, -1, f.bgcolorover, f.bgaover > -1 ? f.bgaover : f.bga))
        }
        function H(e) {
            var t = e.target
              , i = t.getAttribute("me")
              , n = (_(o.plid),
            t.classList)
              , a = !!n.value && n.value.indexOf("-active") > -1
              , l = Z(t);
            if (i)
                if (exist2(f.bgbrovr) && css(l, {
                    filter: "brightness(1)"
                }),
                -1 == s || 0 == i.indexOf("head_")) {
                    var d = e.target.parentNode.parentNode
                      , u = -1;
                    d == r[0] && (u = 0),
                    d == r[1] && (u = 1),
                    d == r[2] && (u = 2),
                    A(l, -1, m, s == u ? 1 : f.bga)
                } else
                    o.plhistory[i] && i != o.plid && E(t),
                    1 == f.playbgcolored && exist(f.playbgcolor) && (i == c[s] || a) ? A(l, -1, f.playbgcolor, f.bga) : A(l, -1, f.bgcolor, f.bga)
        }
        function q(e) {}
        function X() {
            if (isVisible(r[0])) {
                for (var e = 0, t = 0; t < a.length; t++)
                    a[t].offsetHeight > e && (e = a[t].offsetHeight);
                if (p = o.screen_h - e - (o.screen_h > 200 ? v.toolbar.h + (o.screen_h > 400 ? 60 : 30) : 0),
                e > 0 && (p = Math.round(p / e) * e + (1 == f.borderbottom ? Math.round(p / e) : 0) - (o.screen_h <= 200 ? 5 : 0)),
                p > 0) {
                    var i = 0;
                    for (t = 0; t <= u + 1; t++)
                        if (l[t])
                            if (l[t].scrollHeight > p ? css(l[t], {
                                "overflow-y": "scroll",
                                "margin-right": 0,
                                "max-height": p
                            }) : css(l[t], {
                                overflow: "hidden",
                                "max-height": "none"
                            }),
                            v.playlist.position.indexOf("right") > -1)
                                css(r[t], {
                                    right: f.marginright + M(t)
                                });
                            else if (css(r[t], {
                                left: f.marginleft
                            }),
                            t > 0) {
                                var s = f.marginleft + O(t);
                                css(r[t - 1], {
                                    left: s
                                }),
                                s > i && (i = s + r[t - 1].offsetWidth)
                            }
                    1 == f.dropaudio && css(r[u], {
                        left: f.marginleft + i
                    }),
                    1 == f.dropquality && css(r[u + 1], {
                        left: f.marginleft + i + r[u].offsetWidth
                    })
                }
            }
        }
        function O(e) {
            for (var t = 0, o = u - 1; o >= e; o--)
                t += r[o].offsetWidth + (r[o].offsetWidth > 0 ? f.marginright : 0);
            return t
        }
        function M(e) {
            for (var t = 0, o = 0; o < e; o++)
                t += r[o].offsetWidth + (r[o].offsetWidth > 0 ? f.marginright : 0);
            return t
        }
        function P(e) {
            var t = .3;
            if (1 == e) {
                for (var o = u + 1; o >= 0; o--)
                    if (n[o]) {
                        if ("a" == f.dropanm)
                            new Motion({
                                mc: r[o],
                                me: "dropl" + o,
                                type: "alpha_div",
                                to: 1
                            });
                        if ("t" == f.dropanm) {
                            new Motion({
                                mc: r[o],
                                me: "dropl" + o,
                                type: "top",
                                to: f.margintop,
                                time: t
                            });
                            t += .3
                        }
                        "i" != f.dropanm && f.dropanm || show2(r[o])
                    }
            } else
                for (o = 0; o <= u + 1; o++)
                    if (n[o]) {
                        if ("a" == f.dropanm)
                            new Motion({
                                mc: r[o],
                                me: "dropl" + o,
                                type: "alpha_div",
                                to: 0
                            });
                        if ("t" == f.dropanm) {
                            new Motion({
                                mc: r[o],
                                me: "dropl" + o,
                                type: "top",
                                to: -f.margintop - 40,
                                time: t
                            });
                            t += .3
                        }
                        "i" != f.dropanm && f.dropanm || hide2(r[o])
                    }
        }
        function E(e) {
            css(e, {
                color: f.historycolor
            }),
            1 == f.historytitlestrike && css(e, {
                "text-decoration": "line-through"
            }),
            f.historytitlea > -1 && css(e, {
                opacity: f.historytitlea
            }),
            css(Z(e), {
                "background-color": hex2rgb(f.historybgcolor, f.historybga > -1 ? f.historybga : f.bga)
            })
        }
        function Z(e) {
            if (e)
                return e.getElementsByTagName("pjsdiv")[0]
        }
        this.OpenScroll = function() {
            return (e = s) > -1 && l[e].scrollHeight > p;
            var e
        }
        ,
        this.Hide = function() {
            P(0),
            C(),
            s = -1
        }
        ,
        this.Show = function() {
            P(1)
        }
        ,
        this.Visible = function() {
            return s > -1
        }
        ,
        this.Update = function() {
            if (0 != o.plopenid) {
                var e = 0;
                s = -1,
                !isVisible(r[0]) && (e = 1),
                y(),
                e && P(0)
            }
        }
        ,
        this.Resize = function() {
            clearTimeout(i),
            i = setTimeout(X, 500)
        }
        ,
        this.Close = function() {
            C(),
            s = -1
        }
        ,
        this.Remove = function() {
            for (var e = 0; e <= u + 1; e++)
                r[e] && (r[e].removeEventListener("click", B),
                r[e].removeEventListener("mouseover", T),
                r[e].removeEventListener("mouseout", H),
                l[e].removeEventListener("wheel", q),
                o.frame.removeChild(r[e]),
                o.droplist = void 0)
        }
    }
    var PluginPlSrch = function(e, t) {
        var i, s;
        pushCSS("[contenteditable] {-webkit-user-select: text;user-select: text;}");
        var r = CheckColor(existv(t.srchclr, "000"));
        function n(t) {
            if (t) {
                var i = t.target;
                if (t.target) {
                    var s = trim(i.innerHTML.toLowerCase());
                    s = s.replace("<br>", ""),
                    css(i.parentNode, "" == s ? {
                        "min-width": "auto"
                    } : {
                        "min-width": i.parentNode.offsetWidth - (e ? 0 : 20)
                    });
                    var r = i.parentNode;
                    if (r)
                        for (var n = r.childNodes, a = 2; a < n.length; a++)
                            if ("PJSDIV" == n[a].tagName) {
                                var l = n[a].innerText.toLowerCase();
                                "" == s ? show2(n[a]) : -1 == l.indexOf(s) && "" != s ? hide2(n[a]) : show2(n[a])
                            }
                    o.controls && o.controls.resizePlaylist()
                }
            }
        }
        this.add = function(o, a) {
            !function(o, a) {
                if (i = createElement("pjsin"),
                attr(i, {
                    contenteditable: "true"
                }),
                css(i, {
                    display: "block",
                    padding: MarPad(o.padding),
                    width: "100%",
                    background: CheckColor(existv(t.srchbgclr, "fff")),
                    color: r
                }),
                i.oninput = n,
                e)
                    a.appendChild(i);
                else {
                    var l = a.childNodes;
                    a.insertBefore(i, l[1])
                }
                s = createElement("pjsin"),
                css(s, {
                    margin: "-15px 5px 0 0",
                    float: "right"
                }),
                s.innerHTML += '<svg width="9px" height="9px" viewBox="-27 102 9 9"><circle stroke="' + r + '" stroke-width="1" fill="none" cx="-23.5" cy="105.5" r="2.5"></circle><path d="M-21.5,107.5 L-19.5,109.5" stroke="' + r + '" stroke-width="1"></path></svg>',
                e ? a.appendChild(s) : a.insertBefore(s, l[2])
            }(o, a)
        }
        ,
        this.remove = function(e) {
            i && s && (e.removeChild(i),
            e.removeChild(s),
            i = null,
            s = null)
        }
        ,
        this.clear = function(e) {
            i && (i.innerText = "")
        }
    };
    o.lang_ru = {
        auto: "",
        play: "",
        pause: "",
        stop: "",
        fullscreen: "  ",
        normalscreen: "   ",
        settings: "",
        options: "",
        volume: "",
        mute: " ",
        unmute: " ",
        live: " ",
        playlist: "",
        quality: "",
        download: "",
        openfile: " ",
        subtitle: "",
        speed: "",
        normal: "",
        error: "",
        unmute_video: " ",
        audiotrack: "",
        loading_error: " ",
        "160p": " ",
        "240p": "",
        "360p": "",
        "480p": "",
        "540p": "",
        next: "",
        prev: "",
        share: "",
        copied: "   ",
        ads: "",
        skip: "",
        skip_after_: "  ",
        adsinvitation: "   ",
        sub_sizeproc: " ",
        sub_shift: "  ",
        sub_color: " ",
        sub_color2: "  2",
        sub_bgcolor: " ",
        sub_bga: " ",
        sub_shadow: "",
        sub_stroke: "",
        sub_weight: " ",
        sub_bottom: " ",
        sub_reset: "",
        sub_x: " ",
        upload: "",
        sleeptimer: "",
        offsettimer: "",
        hour: "",
        minute: "",
        second: "",
        "1val": "",
        "0val": "",
        of: "",
        pass: "",
        casterror: "   ",
        castdevice: "  ",
        channel: "",
        scale: "",
        on: ".",
        off: ".",
        together: "",
        kbps: "/",
        embed: "",
        url: "",
        color: "",
        contrast: "",
        brightness: "",
        saturate: "",
        sepia: ""
    };
    var Motion = function(e) {
        var t, i, s, r, n, a, l, c = 0, d = !1;
        if (null != e.me && null != e.mc && null != e.type && null != e.to) {
            null == e.time && (e.type.indexOf("alpha") > -1 && 0 == e.to ? e.time = .5 : e.time = .2),
            t = function(e) {
                switch (e) {
                case "elastic":
                    return [0, .432, .857, 1.275, 1.372, 1.296, 1.102, .957, .883, .87, .914, .992, 1.029, 1.041, 1.036, 1.019, .996, .984, .981, .988, 1.001, 1.006, 1.007, 1.006, 1.003, .999, .998, .998, .998, .998, 1];
                case "cubic":
                    return [0, .096, .185, .267, .344, .416, .483, .547, .606, .659, .705, .747, .785, .818, .848, .874, .897, .918, .935, .95, .962, .971, .979, .985, .99, .994, .997, .999, 1];
                default:
                    return [0, .175, .32, .44, .52, .6, .67, .73, .775, .82, .85, .885, .915, .935, .95, .97, .983, .993, 1]
                }
            }(e.ease),
            -1 == e.type.indexOf("scale") && (exist(o.motions[e.me]) && o.motions[e.me].TheEnd(),
            o.motions[e.me] = this),
            1 == e.show && e.mc.set("display", !0),
            i = e.type.split("|"),
            r = String(e.to).split("|"),
            s = new Array;
            for (var u = 0; u < i.length; u++)
                r[u] || (r[u] = r[0]),
                "alpha" == i[u] && (s[u] = e.mc.g("opacity")),
                "alpha_div" == i[u] && (s[u] = e.mc.style.opacity),
                "y" == i[u] && (s[u] = e.mc.g("y")),
                "x" == i[u] && (s[u] = e.mc.g("x")),
                "left" == i[u] && (s[u] = parseInt(e.mc.style.left)),
                "top" == i[u] && (s[u] = parseInt(e.mc.style.top)),
                "scale" == i[u] && (s[u] = e.mc.g("scaleX")),
                "scroll" == i[u] && (s[u] = e.mc.scrollTop),
                "scrollleft" == i[u] && (s[u] = e.mc.scrollLeft),
                "scaleY" == i[u] && (s[u] = e.mc.g("scaleY")),
                "scaleX" == i[u] && (s[u] = e.mc.g("scaleX")),
                "width" == i[u] && (s[u] = e.mc.g("width")),
                "width_div" == i[u] && (s[u] = e.mc.offsetWidth,
                r[u] = Math.floor(r[u]),
                "line_play" == e.me && log("width", e.me, s[u], r[u], e.mc.offsetWidth)),
                "height" == i[u] && (s[u] = e.mc.g("height")),
                "height_div" == i[u] && (s[u] = e.mc.offsetHeight),
                r[u] = Number(r[u]),
                s[u] = Number(s[u]);
            a = 1e3 * e.time / t.length,
            n = t.length,
            1 == i.length && s[0] == r[0] ? p() : setTimeout(v, Math.round(a))
        }
        function v() {
            for (var o = 0; o < i.length; o++) {
                var u = s[o] + (r[o] - s[o]) * (t[c] ? t[c] : 0);
                f(i[o], u),
                "y" == i[o] && e.mc.set("top", u),
                "x" == i[o] && e.mc.set("left", u),
                "left" == i[o] && (e.mc.style.left = u + "px"),
                "top" == i[o] && (e.mc.style.top = u + "px"),
                "scale" == i[o] && e.mc.set("scale", u),
                "scaleY" == i[o] && e.mc.set("scaleY", u),
                "scaleX" == i[o] && e.mc.set("scaleX", u),
                "scroll" == i[o] && (e.mc.scrollTop = u),
                "scrollleft" == i[o] && (e.mc.scrollLeft = u),
                "width" == i[o] && e.mc.set("width", u),
                "width_div" == i[o] && css(e.mc, {
                    width: u
                }),
                "height" == i[o] && e.mc.set("height", u),
                "height_div" == i[o] && css(e.mc, {
                    height: u
                })
            }
            c++,
            d || (c == n ? p() : l = setTimeout(v, Math.round(a)))
        }
        function p() {
            d = !0,
            e.hide && ("alpha_div" == i[0] || "left" == i[0] ? hide(e.mc) : e.mc.set("display", !1)),
            -1 == e.type.indexOf("scale") && (o.motions[e.me] = null,
            delete o.motions[e.me]);
            for (var t = 0; t < i.length; t++)
                f(i[t], r[t]);
            clearTimeout(l)
        }
        function f(t, o) {
            "alpha" == t && e.mc.set("opacity", o),
            "alpha_div" == t && (e.mc.style.opacity = o)
        }
        this.TheEnd = function() {
            p()
        }
        ,
        this.TheEnd2 = function() {
            c = n - 1,
            v(),
            p()
        }
        ,
        this.XY = function(e, t, o, s) {
            for (var r = !1, n = 0; n < i.length; n++)
                "x" == i[n] && e != t && (r = !0),
                "y" == i[n] && o != s && (r = !0);
            r && p()
        }
    }
      , System = function() {
        var e, t = navigator.appName, i = navigator.userAgent, s = i.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);
        (s = i.match(/(opera|chrome|safari|firefox|msie|trident|edge)\/?\s*(\.?\d+(\.\d+)*)/i)) && null != (e = i.match(/version\/([\.\d]+)/i)) && (s[2] = e[1]);
        var r = navigator.maxTouchPoints;
        this.browser = s ? s[1] : t,
        this.version = s ? s[2] : navigator.appVersion,
        this.touch = navigator.maxTouchPoints > 1,
        this.lang = navigator.language,
        this.opera = "Opera" == this.browser,
        this.ie9 = "MSIE 9.0" == this.browser,
        this.ie = "MSIE" == this.browser || "Trident" == this.browser || "Edge" == this.browser,
        this.edge = i.search(/(edge)\/?\s*/i) > -1,
        this.ff = "Firefox" == this.browser,
        this.safari = "Safari" == this.browser,
        this.chrome = window.chrome,
        this.win = i.search("Windows NT") > -1,
        this.ios = i.search(/(iphone|ipad|ipod)\/?\s*/i) > -1 || "MacIntel" === navigator.platform && r > 1,
        this.tv = 1 != v.notv && i.search(/(TV|tvOS|webOS|armv|BRAVIA|Roku|Tizen|Philips)\/?\s*/i) > -1,
        this.lg = 1 != v.notv && i.search(/(LG)\/?\s*/i) > -1,
        this.iphone = i.search(/(iphone)\/?\s*/i) > -1,
        this.ipad = this.ios && !this.iphone,
        this.webkit = "WebkitAppearance"in document.documentElement.style,
        i.search(/(android)\/?\s*/i) > -1 && (r > 0 ? this.android = !0 : this.tv = !0,
        matchMedia("(pointer:fine)").matches && (this.tv = !0)),
        this.mobile = (1 == options.mobile || this.ios || this.android || i.search(/(blackberry|iemobile|opera mini)\/?\s*/i) > -1) && !this.tv && 1 != options.nomobile,
        this.mutedautoplay = this.safari || this.chrome,
        this.fullscreen = !1,
        this.ios && (this.iosv = parseFloat(i.substr(i.indexOf("OS ") + 3, 4).replace("_", ".")),
        this.ipad && (!1 in window || r < 2) && (this.mobile = this.ios = !1,
        this.tv = !0)),
        this.desktop = !this.mobile,
        this.mobtch = this.mobile || this.touch,
        this.mobiletv = this.mobile || this.tv,
        this.wkdt = this.webkit && this.desktop,
        (o.frame.requestFullScreen || o.frame.requestFullscreen || o.frame.mozRequestFullScreen || o.frame.webkitRequestFullScreen || o.frame.msRequestFullscreen) && (this.fullscreen = !0)
    };
    function UpdateObject(e, t) {
        for (var o in t)
            if ("object" == typeof t[o])
                if ("events" == o || "file" == o)
                    e[o] = t[o];
                else
                    for (var i in t[o])
                        if ("object" != typeof e[o] && (e[o] = {}),
                        "object" == typeof t[o][i])
                            for (var s in t[o][i])
                                if ("object" != typeof e[o][i] && (e[o][i] = {}),
                                "object" == typeof t[o][i][s])
                                    for (var r in t[o][i][s])
                                        "object" != typeof e[o][i][s] && (e[o][i][s] = {}),
                                        e[o][i][s][r] = t[o][i][s][r],
                                        "padding" != s && "margin" != s || (e[o][i][s][r] = parseInt(e[o][i][s][r]));
                                else
                                    e[o][i][s] = t[o][i][s],
                                    "padding" != i && "margin" != i || (e[o][i][s] = parseInt(e[o][i][s]));
                        else
                            e[o][i] = t[o][i],
                            "padding" != o && "margin" != o || (e[o][i] = parseInt(e[o][i]));
            else
                o.indexOf("roll") > 0 && "" === trim(t[o]) || (e[o] = SettingsParser(o, t[o]));
        return e
    }
    var SettingsParser = function(e, t) {
        return "string" == typeof t && (t = trim(t),
        e.indexOf("color") > -1 && -1 != t && (t = CheckColor(t))),
        t
    };
    function StorageSupport() {
        try {
            var e = window.localStorage
              , t = "__storage_test__";
            return e.setItem(t, t),
            e.removeItem(t),
            !0
        } catch (e) {
            return !1
        }
    }
    function killMotion(e) {
        e && exist(o.motions[e]) && o.motions[e].TheEnd()
    }
    var Lang = function(e) {
        var t = e;
        t && (t = e.charAt(0).toUpperCase() + e.slice(1)).indexOf("_") > -1 && (t = t.replace(/_/gi, " "));
        var i = {
            of: "of",
            kbps: "kbps",
            castdevice: "Playback on device",
            casterror: "Playback error on device",
            pass: "Password",
            "0val": "No",
            sleeptimer: "Sleep",
            offsettimer: "Skip",
            openfile: "Open file",
            "1val": "Yes",
            sub_bottom: "Bottom margin",
            sub_weight: "Font weight",
            sub_shadow: "Shadow",
            sub_bga: "Background opacity",
            sub_bgcolor: "Background color",
            sub_sizeproc: "Text size",
            sub_color: "Text color",
            sub_color2: "Text color 2",
            sub_shift: "Time shift",
            sub_x: "Close options",
            sub_reset: "Reset",
            prev: "Previous",
            copied: "Copied to clipboard",
            "160p": "Tiny",
            "240p": "Small",
            "360p": "Medium",
            "480p": "High",
            "540p": "High",
            "720p": "HD",
            "1080p": "Full HD",
            "1296p": "Super HD",
            "1440p": "Quad HD",
            "2160p": "Ultra HD 4K",
            ads: "Ad",
            adsinvitation: "Go to the advertiser's website",
            audiotrack: "Audio",
            live: "LIVE",
            fullscreen: "Enter fullscreen",
            normalscreen: "Exit fullscreen"
        };
        return exist(i[e]) && (t = i[e]),
        1 == v.slng && o["lang_" + o.system.lang] && (v.lang = o.system.lang,
        v.slng = 0),
        exist(o["lang_" + v.lang]) && exist(o["lang_" + v.lang][e]) && (t = o["lang_" + v.lang][e]),
        v.rename && v.rename[e] && (t = v.rename[e]),
        t
    }
      , gaTracker = function(e, t, i) {
        if (!exist(o.gatracked[t]) && 1 != v.playerjscom) {
            var s, r = o.titlestore ? o.titlestore : v.title ? v.title : "";
            if (exist(v.label) && (r = v.label),
            1 == v.yamtr_event[e] && 1 == v.yamtr && exist(v.yamtrid) && (exist(window["yaCounter" + v.yamtrid]) ? (window["yaCounter" + v.yamtrid].reachGoal("playerjs_" + e, {
                title: r
            }),
            log("Yandex", "playerjs_" + e)) : log("Yandex Metric error")),
            1 == v.ga_event[e])
                if (1 == v.ga)
                    if (window.gtag) {
                        if (s = {
                            event_category: "PlayerJS",
                            event_label: r
                        },
                        v.galabels && "object" == typeof v.galabels)
                            for (var n in v.galabels)
                                v.galabels.hasOwnProperty(n) && (s[n] = v.galabels[n]);
                        1 == v.galog && log("ga", "playerjs_" + e, s),
                        gtag("event", "playerjs_" + e, s)
                    }
        }
        i && (o.gatracked[t] = !0)
    }
      , YoutubeID = function(e) {
        var t = "";
        if ((e = e.replace("v=", "{=")) && (e.indexOf("youtu.be/") > -1 ? (t = e.substr(e.indexOf(".be/") + 4)).replace("/", "") : t = e.split(/(youtu.be\/|v\/|embed\/|watch\?|youtube.capiom\/user\/[^#]*#([^\/]*?\/)*)\??{?=?([^#\&\?]*)/)[3],
        "" != t)) {
            if (t.indexOf("?t=") > 0) {
                v.start = t.substr(t.indexOf("?t=") + 3);
                var o = 0
                  , i = 0
                  , s = 0;
                v.start.indexOf("h") > 0 && (o = v.start.substr(0, v.start.indexOf("h")),
                v.start = v.start.substr(v.start.indexOf("h") + 1)),
                v.start.indexOf("m") > 0 && (i = v.start.substr(0, v.start.indexOf("m")),
                v.start = v.start.substr(v.start.indexOf("m") + 1)),
                v.start.indexOf("s") > 0 && (s = v.start.substr(0, v.start.indexOf("s")),
                v.start = v.start.substr(v.start.indexOf("s") + 1)),
                (o > 0 || i > 0 || s > 0) && (v.start = 3600 * o + 60 * i + 1 * s)
            }
            t.indexOf("?") > 0 && (t = t.substr(0, t.indexOf("?")))
        }
        return t
    }
      , js = function(x, y, li, ev) {
        if ("string" == typeof y && (y = y.replace(/'/gi, "")),
        "init" == x && (o.init = !0),
        1 == ev)
            for (var yi in y)
                y.hasOwnProperty(yi) && "object" == typeof y[yi] && (y[yi] = "");
        if (1 == v.eventstracker && o.init)
            if (1 == v.eventlisteners || 1 == li)
                JsEvent(x, y);
            else {
                if (null != y && "object" == typeof y)
                    try {
                        y = JSON.stringify(y)
                    } catch (e) {}
                if ("string" == typeof v.events && 0 == v.events.indexOf("{"))
                    try {
                        v.events = v.events.replace(/\'/gi, '"'),
                        v.events = JSON.parse(v.events)
                    } catch (e) {
                        console.log(e)
                    }
                if ("object" == typeof v.events) {
                    if (exist(v.events[x]) || exist(v.events.other)) {
                        var z = x;
                        !exist(v.events[x]) && exist(v.events.other) && (z = "other"),
                        0 == x.indexOf("vast_") && exist(v.events.vast) && (z = "vast");
                        try {
                            void 0 !== y ? eval(v.events[z] + "('" + x + "','" + v.id + "','" + y + "')") : eval(v.events[z] + "('" + x + "','" + v.id + "')")
                        } catch (e) {
                            log("events", e, x)
                        }
                    }
                } else {
                    "" == v.events && (v.events = "PlayerjsEvents");
                    try {
                        void 0 !== y ? eval(v.events + "('" + x + "','" + v.id + "','" + y + "')") : eval(v.events + "('" + x + "','" + v.id + "')")
                    } catch (e) {
                        log("events", e, x, y)
                    }
                }
            }
        if (o.init && 1 == v.pjsframe && o.pjsfrm)
            try {
                o.pjsfrm.contentWindow.postMessage({
                    event: x,
                    info: y
                }, "*")
            } catch (e) {}
        if (1 == v.postmessage && 1 !== li) {
            if (x && exist2(v.pmevnts)) {
                var pm = v.pmevnts.replace(/\s+/gi, "").split(",");
                if (-1 == pm.indexOf(x))
                    return
            }
            var zv = {
                event: x,
                time: o.media ? "seek" == x ? o.seeked_time : o.media.time() : 0
            };
            null != y && (zv.data = y),
            "duration" != x && "time" != x || (zv.duration = o.media.duration()),
            "volume" != x && "unmute" != x || (zv.volume = v.volume),
            "new" == x && (zv.id = apiProcessor("playlist_id"));
            try {
                window.parent.postMessage(zv, "*")
            } catch (e) {}
            var z = x;
            if (("init" == x || "start" == x || "end" == x) && (z = x + "ed"),
            "play" == x && (z = "resumed"),
            "pause" == x && (z = "paused"),
            "mute" == x && (z = "muted"),
            "unmute" == x && (z = "unmuted"),
            "seek" == x && (z = "rewound"),
            "vast_Impression" == x && (z = "adShown"),
            zv.event = z,
            "" != z && z != x) {
                zv = JSON.parse(JSON.stringify(zv));
                try {
                    window.parent.postMessage(zv, "*")
                } catch (e) {}
            }
        }
    }
      , JsEvent = function(e, t) {
        var i = document.createEvent("Events");
        void 0 !== t && (i.info = t),
        i.initEvent(e, !0, !0),
        o.container.dispatchEvent(i)
    };
    function apiProcessor(x, y, but) {
        if (!exist(o.actions) || "string" != typeof x)
            return !1;
        if (1 != o.destroyed) {
            if (but && "string" == typeof but && 0 == but.indexOf("id:") && (but = o.controls.butByS(but.substr(3), "dom"),
            but && "button" == x && "toogle" == y && but.Click()),
            "play" == x || "file" == x)
                if (exist(y)) {
                    var noads = !1;
                    if ("string" == typeof y) {
                        y = y.replace(/(\r\n|\n|\r)/gm, "");
                        var seekto = -1;
                        if (y.indexOf("[seek:") > -1 && y.lastIndexOf("]") == y.length - 1) {
                            if (seekto = y.substr(y.indexOf("[seek:") + 6, y.length - 1),
                            seekto = seekto.substr(0, seekto.length - 1),
                            seekto = "time" == seekto ? o.media.time() : parseInt(seekto),
                            y = y.substr(0, y.indexOf("[seek:")),
                            "" == y)
                                return o.media.duration() > 0 ? (o.actions.Seek(seekto),
                                void o.actions.Play()) : (o.seekto = seekto,
                                void o.actions.Play());
                            o.seekto = seekto
                        }
                        if (y.indexOf("[skipads]") > -1 && (noads = !0,
                        y = y.replace("[skipads]", "")),
                        0 == y.indexOf("#" + v.enc2) && (y = o[o.fd[0]](y)),
                        0 == y.indexOf("#" + v.enc3) && y.indexOf(v.file3_separator) > 0)
                            return void o[o.fd[1]](y, api_, x);
                        if (0 == y.indexOf("#0") && (y = fd0(y)),
                        1 == v.fplace && (y = fplace(y)),
                        y.indexOf(".txt") == y.length - 4) {
                            var xhr = XHR(y);
                            return xhr.onload = function() {
                                if (4 == this.readyState && 200 == this.status)
                                    try {
                                        apiProcessor("play", JSON.parse(this.responseText))
                                    } catch (e) {}
                            }
                            ,
                            void xhr.send()
                        }
                        if (0 == y.indexOf("id:") && exist(o.playlist_dic)) {
                            var z = FindIdPl(y);
                            return !!exist(o.playlist_dic[z]) && (o.controls.PlaylistPlayId(z),
                            seekto > -1 && (o.seekto = seekto),
                            !0)
                        }
                        if (0 == y.indexOf("youtubeid:")) {
                            var z = y.substr(10);
                            if ("youtube" == o.file_type)
                                return o.media.playByYoutubeId(z),
                                !0;
                            y = "//youtu.be/" + z
                        }
                    }
                    "play" == x && (o.controls.PreNewPl(),
                    o.actions.NewFile(y, void 0, void 0, noads ? 1 : 0)),
                    "file" == x && (o.newfile = !0,
                    v.autoplay = 0,
                    o.actions.NewFile(y, 1, void 0, noads ? 1 : 0),
                    o.controls.Duration(0, 0),
                    o.start = !1)
                } else
                    "play" == x && o.actions.Play(),
                    "file" == x && "function" == typeof Papi41 && Papi41();
            if ("file2" == x && y && o.media.pipSrc(y),
            "preload" == x && (exist(y) ? (o.newfile = !0,
            o.actions.NewFile(y, 1, 1)) : o.media.Preload()),
            "pause" == x && (o.play && (o.actions.Pause(),
            o.actions.RenewSubtitle()),
            exist(y) && 1 == y))
                try {
                    o.vast && o.vast.pause(),
                    o.ima && o.ima.pause()
                } catch (e) {}
            if ("channel" == x && exist(y) && o.start && o.channels && o.channels.SetChannel(y),
            0 == x.indexOf("vpaid_") && o.vast && o.vast.VpaidSet(x.substr(6), y),
            "act" == x)
                return o.acted;
            if ("alert" == x && (o.alert.close(),
            o.alert = new Alert,
            exist(y) ? o.alert.txt(y) : (1 == v.alert404 ? o.alert.txt(v.alert404text) : o.alert.txt("Test message"),
            1 == v.alert404v && exist(v.alert404video) && (o.err404v = new PluginErrorVideo))),
            "waiting" == x && (!o.start && o.controls.startcss(),
            o.controls.Waiting(),
            o.controls.HideElement("control_start")),
            "toggle" == x && (o.play ? o.actions.Pause() : o.actions.Play()),
            "stop" == x && (v.preload = 0,
            v.autoplay = 0,
            o.media.Recover(),
            o.actions.Stop()),
            "reload" == x && (o.time = o.media.time(),
            o.actions.Reload()),
            "download" == x && v.apiprm && 1 == v.apiprm.on && 1 == v.apiprm.dwn && o.actions.Download(),
            "effect" == x && exist(y) && o.effects && o.effects.api(y),
            "share" == x && o.controls.showShare(),
            "startvast" == x && exist(y) && 1 == v.vast)
                if (0 == y.indexOf("js:"))
                    v.midroll = y,
                    v.midrolls = !0,
                    o.actions.advertising("midroll");
                else if ("" != o.p) {
                    var sv = JSON.parse(decode(o.p));
                    for (var l in sv)
                        sv.hasOwnProperty(l) && exist(sv[l].id) && y == sv[l].id && (v.midroll = "prt" + (exist(sv[l].cpm) ? "cpm" + sv[l].cpm : "") + y + "_" + sv[l].preroll,
                        v.midrolls = !0,
                        o.actions.advertising("midroll"))
                }
            if ("vastbreak" == x && "function" == typeof VastBreak && VastBreak(y),
            "cuid" == x && y && (v.cuid = y,
            o.continue && o.continue.updateCuid()),
            "mute" == x && o.actions.Mute(),
            "speed" == x) {
                if (!exist(y))
                    return o.files_speed[o.current_speed];
                o.actions.SetSpeed(y)
            }
            if ("played" == x && v.apiprm && o.pld && 1 == v.apiprm.pld)
                return Math.round((o.pld.filter(Boolean).length - 1) / Math.round(o.media.duration()) * 100);
            if ("speeds" == x)
                return o.files_speed;
            if ("unmute" == x && o.actions.Unmute(),
            "thumbnails" == x && exist(y) && (v[x] = y,
            o.actions.Thumbs()),
            "qualities" == x)
                return o.files_quality;
            if ("adblock" == x)
                return !!o.ab;
            if ("live" == x)
                return !!o.media && o.media.isLive();
            if ("subtitles" == x)
                return 1 == v.sub_off ? 1 == v.sub_off0 ? o.files_subtitle.slice(1) : o.files_subtitle.slice(0, -1) : o.files_subtitle;
            if ("togglesubs" == x && (o.subtitle_on ? o.sbt.off() : o.sbt.SetSubtitle(existv(o.last_subtitle, 0 == o.sbt.ioff() ? 1 : 0))),
            "subfeed" == x && o.sbt && o.sbt.text(),
            "native" == x)
                return o.nativecontrols;
            if (0 == x.indexOf("subtitle:") && y && (v[x.replace("title:", "_")] = y,
            o.actions.RenewSubtitle()),
            "plduration" == x)
                return o.pldur;
            if ("audiotracks" == x)
                return o.files_audiotrack;
            if ("volume" == x || "setVolume" == x)
                return exist(y) && ("string" == typeof y && (0 == y.indexOf("+") ? y = v.volume + parseFloat(y.substr(1)) : 0 == y.indexOf("-") && (y = v.volume - parseFloat(y.substr(1)))),
                y >= 0 && y <= 1 && o.actions.Volume(y)),
                o.muted ? 0 : v.volume;
            if ("muted" == x)
                return !!exist(o.muted) && o.muted;
            if ("moveplaylist" == x && o.controls && o.controls.PlaylistMove(y),
            "design" == x && "function" == typeof PlugDsgn && PlugDsgn(y),
            "vars" == x)
                return v.vars;
            if (0 == x.indexOf("let_"))
                return eval("window." + x.substr(4) + "=" + y),
                !0;
            if ("resize" == x && o.controls.resize2(),
            "mainresize" == x && o.controls.resizeSettings(),
            "resize2" == x && MainResize(),
            "error" == x && o.media.onError(x),
            "seek" == x && exist(y)) {
                if ("string" == typeof y)
                    if (y.indexOf("%") > -1)
                        y = parseInt(y.substr(0, y.indexOf("%"))),
                        y = o.media.duration() * y / 100;
                    else {
                        var omt = o.media.time();
                        if (o.continue && !o.start && !o.continue.seeked) {
                            var f = o.continue.flag();
                            f.t && f.d && (omt = f.t,
                            o.continue.seeked = !0)
                        }
                        0 == y.indexOf("+") ? y = omt + parseFloat(y.substr(1)) : 0 == y.indexOf("-") && (y = omt - parseFloat(y.substr(1)))
                    }
                y *= 1,
                y < 0 && (y = 0),
                o.media.duration() > 0 && y > o.media.duration() && (y = 0),
                !exist(o.vast) && !exist(o.vastloader) && o.media.duration() > 0 ? (o.seekto = void 0,
                o.actions.Seek(y, !0),
                o.actions.Playing()) : o.seekto = y
            }
            if ("seekstep" == x && (console.log(y),
            y && (v.hotkey.seek = y)),
            "fullscreen" == x && !o.fullscreen && o.actions.Fullscreen(),
            "exitfullscreen" == x && o.fullscreen && o.actions.Normalscreen(),
            "isfullscreen" == x)
                return o.fullscreen;
            if ("size" == x)
                return o.screen_w + "/" + o.screen_h;
            if ("videosize" == x)
                return o.media ? o.media.size() : void 0;
            if ("fix" == x && exist(o.minify) && o.minify.Do(),
            "unfixing" != x && "unfix" != x || exist(o.minify) && o.minify.Un(),
            "time" == x || "time2" == x) {
                var _t = o.media ? o.media.time() : 0;
                if (o.continue && 1 == v.timestore && !o.start && 0 == _t) {
                    var f = o.continue.flag();
                    f.t && (_t = f.t)
                }
                return "time2" == x ? timeFormat(_t) : _t
            }
            if ("timeplay" == x && (o.butplstart && apiProcessor("play", "id:" + o.butplstart),
            o.butseekto && (apiProcessor("seek", o.butseekto),
            apiProcessor("play"))),
            "duration" == x)
                return o.media ? o.media.duration() : 0;
            if ("buffered" == x)
                return o.media ? o.media.loaded() : 0;
            if ("points" == x && y && (v.points = y,
            o.controls.RenewPoints()),
            "quality" == x) {
                if (!exist(y))
                    return o.media ? NoSpan(o.media.getQuality()) : 0;
                but ? (v.hd = Switcher(v.hd, y, but),
                2 == o.files_quality.length && o.actions.SetQuality(v.hd)) : o.actions.SetQuality(y)
            }
            if ("audiotrack" == x) {
                if (!exist(y))
                    return o.media ? o.media.getAudioTrack() : 0;
                if ("index" == y)
                    return 1 * o.current_audiotrack;
                but ? (v.ahd = Switcher(v.ahd, y, but),
                2 == o.files_audiotrack.length && o.actions.SetAudioTrack(v.ahd)) : o.actions.SetAudioTrack(y)
            }
            if ("isyoutube" == x)
                return "youtube" == o.file_type;
            if ("restart" == x && (o.current_audiotrack > 0 && (o.restart_audio = o.current_audiotrack),
            o.actions.NewFile(o.files[o.current_file])),
            "playing" == x)
                return o.play;
            if ("started" == x)
                return o.start;
            if ("system" == x)
                return o.system[y];
            if ("youtubeready" == x && 1 != o.destroyed && o.media.onYoutubeReady(),
            "id" == x)
                return v.id;
            if ("log" == x && (v.log = y),
            "eventstracker" == x && (v.eventstracker = y),
            "pip" == x && o.media.PipToggle(),
            "switchpip" == x && (o.media.PipSwitch(),
            but && (o.piped = Switcher(o.piped, y, but))),
            "airplay" == x && o.media.Airplay(),
            "camera" == x && "function" == typeof PluginCam && PluginCam(x, y),
            "pipwebkit" == x && o.media.PipWebkit(),
            "options" == x && 1 != v.playerjscom && console.log(options),
            "castinit" == x && o.chromecast && o.chromecast.init(),
            "castend" == x && o.chromecast && o.chromecast.remove(),
            "subtitle" == x) {
                if (!exist(y))
                    return o.files_subtitle ? o.files_subtitle[o.current_subtitle] : "";
                if ("index" == y)
                    return 1 * o.current_subtitle;
                "0/1" == y && (o.subtitle_on ? (o.submm = o.current_subtitle,
                y = -1) : y = o.submm ? o.submm : 0),
                y.toString().length < 3 && o.sbt ? o.sbt.SetSubtitle(1 * y) : (v.subtitle = y,
                o.actions.Subtitle(y))
            }
            if ("+subtitle" == x && v.subtitle && exist(y) && (v.subtitle += "," + y,
            o.actions.Subtitle(v.subtitle)),
            "quiz" == x && exist(o.quiz)) {
                if (!exist(y))
                    return o.quiz.Active();
                o.quiz.api(y)
            }
            if ("geo" == x)
                return !!o.geobj && o.geobj;
            if ("ratio" == x)
                return o.media.ratio();
            if ("box" == x && (o.subtox && o.subtox.parentNode && o.subtox.parentNode.removeChild(o.subtox),
            o.subtox = createElement("div"),
            o.subtox.id = y,
            o.subtox.style.zIndex = 1e4,
            o.frame.appendChild(o.subtox)),
            "screenshot" == x) {
                if (o.tagvideo) {
                    var canvas = createElement("canvas")
                      , size = o.media.size();
                    canvas.width = size.width > 0 ? size.width : o.normal_w,
                    canvas.height = size.height > 0 ? size.height : o.normal_h,
                    css(canvas, {
                        position: "absolute",
                        top: -canvas.height,
                        left: -canvas.width,
                        display: "none"
                    }),
                    document.body.appendChild(canvas);
                    var ctx = canvas.getContext("2d");
                    ctx.drawImage(o.media.tag(), 0, 0, canvas.width, canvas.height);
                    var quality = 2
                      , canvas2 = document.createElement("canvas");
                    canvas2.width = canvas.width * quality,
                    canvas2.height = canvas.height * quality;
                    var ctx2 = canvas2.getContext("2d"), img;
                    ctx2.drawImage(o.media.tag(), 0, 0, canvas.width * quality, canvas.height * quality),
                    1 == v.sscopyright && exist(v.sstext) && (!exist(v.ssfontsize) && (v.ssfontsize = 20),
                    !exist(v.ssfontcolor) && (v.ssfontcolor = "ffffff"),
                    ctx2.font = v.ssfontsize + "px Courier, Arial",
                    ctx2.fillStyle = CheckColor(v.ssfontcolor),
                    ctx2.fillText("domain" == v.sstext ? o.domain : v.sstext, v.ssfontsize, canvas.height * quality - v.ssfontsize - 5)),
                    ctx.drawImage(canvas2, 0, 0, canvas.width, canvas.height);
                    try {
                        img = canvas.toDataURL("image/jpeg")
                    } catch (e) {
                        return console.log(e.message),
                        !1
                    }
                    return img
                }
                return !1
            }
            if ("dash" == x)
                return o.file_type == x ? o.media.getDASH() : void 0;
            if ("hls" == x)
                return o.file_type == x ? o.media.getHLS() : void 0;
            if ("poster" == x)
                return (!o.play || 0 === v.posterhide) && (o.media.Poster(y),
                !0);
            if ("stretch" == x) {
                if (!exist(y))
                    return existv(v.covervideo, 0);
                "1/0" == y && (y = 1 - existv(v.covervideo, 0)),
                v.covervideo = y,
                o.media.normalscale()
            }
            if ("scale" == x) {
                if (!exist(y))
                    return [o.mediascale.x, o.mediascale.y, o.mediacontainer.style.left, o.mediacontainer.style.top];
                0 == y ? o.media.normalscale() : o.media.scale(y)
            }
            if ("title" == x)
                return exist(y) ? (exist(y) && (v.title = y),
                o.actions.Title("title"),
                !0) : v.title;
            if ("invert" == x && o.actions.InvertPlaylist(),
            "push" == x && y && (!o.playlist_source && (o.playlist_source = []),
            "object" == typeof y && (y = o.playlist_source.concat(y),
            x = "playlist")),
            "playlist" == x && y)
                if ("object" == typeof y)
                    try {
                        return o.actions.UpdatePlaylist(y),
                        !0
                    } catch (e) {
                        return !1
                    }
                else {
                    if (y.indexOf(".txt") == y.length - 4 || y.indexOf(".txt?") > 0) {
                        var xhr = XHR(y);
                        return xhr.onload = function() {
                            if (4 == this.readyState && 200 == this.status)
                                try {
                                    apiProcessor("playlist", JSON.parse(this.responseText))
                                } catch (e) {}
                        }
                        ,
                        xhr.send(),
                        !0
                    }
                    if ("" == y)
                        o.actions.UpdatePlaylist([]);
                    else if ("played" == y && o.pldur > 0) {
                        var tmp = Math.round((o.pldur2 + (o.controls.PlaylistG("played") ? 0 : o.media.time())) / o.pldur * 100);
                        return tmp < o.pldur3 || tmp > 100 ? o.pldur3 : (o.pldur3 = tmp,
                        tmp)
                    }
                }
            if ("next" == x && o.controls && o.controls.PlaylistNext(),
            "prev" == x && o.controls && o.controls.PlaylistPrev(),
            "cut" == x && o.controls && o.controls.Cut(y),
            "cut?" == x)
                return o.cutted ? [o.cut1, o.cut2] : 0;
            if ("flip" == x && o.media && o.media.flip(),
            "find" == x && exist(y) && exist(o.playlist_dic)) {
                for (var j in !o.play && (v.autoplay = 0),
                o.playlist_dic)
                    o.playlist_dic.hasOwnProperty(j) && o.playlist_dic[j].pjs_id == y && (y = j);
                return !!exist(o.playlist_dic[y]) && (o.controls.PlaylistOpenId(y),
                !0)
            }
            if ("playlist_folders" == x) {
                var tmp = [];
                if (exist(o.playlist_dic))
                    for (var j in o.playlist_dic)
                        o.playlist_dic[j].folder && -1 == o.playlist_dic[j].pjs_parent_i && tmp.push({
                            title: o.playlist_dic[j].title,
                            id: o.playlist_dic[j].id
                        });
                return tmp
            }
            if ("playlist_id" == x && o.plid)
                return o.playlist_dic[o.plid].pjs_id ? o.playlist_dic[o.plid].pjs_id : o.plid;
            if ("playlist_length" == x)
                return o.playlist_dic ? Object.keys(o.playlist_dic).length : -1;
            if ("playlist_title" == x && exist(o.playlist_title))
                return o.playlist_title;
            if ("showplaylist" == x && o.controls.PlaylistShow(y),
            "showvlt" == x && o.media.VstLdTxt(),
            "toolbar" == x && ("on" == y ? v.toolbar.hide = 0 : "off" == y ? (v.toolbar.hide = 1,
            o.controls.HideForce()) : o.controls.ShowForce()),
            "menu" == x && o.controls.Settings(),
            "menu1" == x || "menu2" == x || "menu3" == x) {
                if (!exist(y))
                    return v[x];
                o["current_custom" + x.slice(-1)] = v[x] = 1 * y,
                o.controls.SettingChanged("custom" + x.slice(-1))
            }
            if ("focus" == x && (o[x] = !0),
            "vastnow" == x)
                return !!o.vast;
            if ("vastinfo" == x)
                return !!o.vast && VastInfo();
            if ("vastpause" == x)
                return !!o.vast && o.vast.pause();
            if ("vastresume" == x)
                return !!o.vast && o.vast.resume();
            if ("vaststart" == x) {
                if (!o.vast)
                    return !1;
                o.vast.startAd()
            }
            if ("vastmute" == x) {
                if (!o.vast)
                    return !1;
                o.vast.mute()
            }
            if ("captions" == x) {
                if (!but)
                    return v.captions;
                v.captions = Switcher(v.captions, y, but),
                o.media.captions()
            }
            if ("loop" == x)
                if (exist(but))
                    v.loop = Switcher(v.loop, y, but);
                else {
                    if (!exist(y))
                        return v.loop;
                    "0/1" == y && (y = 1 - v.loop),
                    v.loop = y
                }
            if ("shuffle" == x)
                if (exist(but))
                    v.shuffle = Switcher(v.shuffle, y, but);
                else {
                    if (!exist(y))
                        return v.shuffle;
                    v.shuffle = y
                }
            if ("autonext" == x || "playlistloop" == x) {
                var z = "autoplaylist";
                return "playlistloop" == x && (z = "playlistrewind"),
                exist(but) ? v.playlist[z] = Switcher(v.playlist[z], y, but) : exist(y) && ("0/1" == y && (y = 1 - v.playlist[z]),
                v.playlist[z] = y),
                v.playlist[z]
            }
            if ("hd" == x && 2 == o.files_quality.length && (v.hd = o.files_quality[o.current_quality],
            v.hd = Switcher(v.hd, y, but),
            o.files_quality[0] == v.hd ? o.actions.SetQuality(0) : o.actions.SetQuality(1)),
            "v" == x && y) {
                if (0 == y.indexOf("file") || 0 == y.indexOf("bk"))
                    return;
                return v[y]
            }
            if (0 == x.indexOf("update:")) {
                var xx = x.substr(7);
                if ("object" == typeof y && "object" == typeof v[xx])
                    for (var yy in y)
                        y.hasOwnProperty(yy) && (v[xx][yy] = y[yy]);
                else
                    -1 == x.indexOf("rc_") && (v[xx] = y),
                    x.indexOf("roll") > 0 && (v[xx + "_recover"] = y);
                return o.actions.upDT(),
                !0
            }
            if (0 == x.indexOf("text:") && o.controls.customText(x.substr(5), y),
            1 == v.clrs && 0 == x.indexOf("color") && y && pushCSS("pjsdiv, pjsdiv > *{--pjs" + x + ":" + hex2rgb(y, v[y.replace("color", "clr") + "a"]) + "}"),
            "currentfile" == x)
                return o.media ? o.media.currentFile() : "";
            if ("vrsn" == x)
                return o.version + " " + o.playerid;
            if ("playerid" == x)
                return o.playerid;
            if ("hlserror" == x)
                return o.hlserror;
            if ("dasherror" == x)
                return o.dasherror;
            if ("visibility" == x)
                return o.visibility;
            if ("vastids" == x)
                return o.vast ? o.vast_adid : void 0;
            if ("destroy" == x) {
                if (o.actions.StopMedia(),
                v.hotkey.on = 0,
                1 == v.stopotherplayers)
                    for (var i = 0; i < pljssglobal.length; i++)
                        pljssglobal[i] && pljssglobal[i].api("id") == v.id && (pljssglobal[i] = null);
                for (var w in window)
                    window[w] == o.this && (window[w] = null);
                window.pljssglobalid == v.id && (window.pljssglobalid = ""),
                o.chromecast && o.chromecast.remove(),
                Destroy(),
                o.destroyed = 1,
                o.container.innerHTML = "",
                o.this = null
            }
        }
    }
    function api_(e, t) {
        e && t && apiProcessor(t, e)
    }
    function Switcher(e, t, o) {
        var i = trim(t) + "";
        if (t && t.indexOf("/") > 0) {
            var s = t.split("/");
            2 == s.length && (e == trim(s[0]) ? (i = trim(s[1]),
            o && o.CustomSwitch(1)) : (i = trim(s[0]),
            o && o.CustomSwitch(0)))
        }
        return i
    }
    function XHR(e) {
        var t = new XMLHttpRequest;
        return t.open("GET", e, !0),
        t
    }
    function FindIdPl(e) {
        var t = e.substr(3);
        if (o.playlist_dic)
            for (var i in o.playlist_dic)
                o.playlist_dic.hasOwnProperty(i) && o.playlist_dic[i].pjs_id == t && (t = i);
        return t
    }
    function VastInfo() {
        var e;
        if (o.ima && o.ima.active() && (e = o.ima),
        !e && o.vast && o.vast.active() && (e = o.vast),
        !e && o.vastloader && (e = o.vastloader),
        e) {
            var t = exist2v(o.current_vast_url, "") + (e.info("wrapper") ? e.info("wrapper0") + e.info("wrapper") : "");
            t = t.replace(/'/gi, "");
            var i = {
                is: o.vasttype,
                system: e.info("adsystem"),
                version: e.info("version"),
                vpaid: e.info("isVpaid"),
                url: t,
                type: e.info("filetype"),
                duration: e.info("dur"),
                file: e.info("file"),
                time: o.media ? o.media.time() : "",
                volume: e.getVolume(),
                id: o.vast_adid
            };
            return "midroll" == o.vasttype && (i.midroll_time = o.midrollcrtm),
            i
        }
    }
    function MediaSess() {
        "mediaSession"in navigator && (navigator.mediaSession.metadata = new MediaMetadata({
            title: notag(existv(o.titlestore, v.title)),
            artwork: [{
                src: existv(v.lockposter, existv(v.poster, ""))
            }]
        }),
        o.mss || (navigator.mediaSession.setActionHandler("play", (function() {
            apiProcessor("play")
        }
        )),
        navigator.mediaSession.setActionHandler("pause", (function() {
            apiProcessor("pause")
        }
        )),
        o.mss = !0),
        o.controls.PlaylistExist() && (o.controls.PlaylistNextExist() ? (!o.mssnxt && navigator.mediaSession.setActionHandler("nexttrack", (function() {
            apiProcessor("next")
        }
        )),
        o.mssnxt = !0) : (o.mssnxt && navigator.mediaSession.setActionHandler("nexttrack", null),
        o.mssnxt = !1),
        o.controls.PlaylistPrevExist() ? (!o.mssprv && navigator.mediaSession.setActionHandler("previoustrack", (function() {
            apiProcessor("prev")
        }
        )),
        o.mssprv = !0) : (o.mssprv && navigator.mediaSession.setActionHandler("previoustrack", null),
        o.mssprv = !1)))
    }
    this.api = function(e, t, o) {
        return 1 == v.logapi && log("api", e, t),
        apiProcessor(e, t, o)
    }
    ;
    var createElement = function(e) {
        var t = e;
        ("div" == e || "div2" == e) && (t = "pjsdiv");
        var o = document.createElement(t);
        return "div2" == e && css(o, {
            cursor: "pointer",
            display: "block"
        }),
        o
    }
      , log = function(e, t, o, i, s, r, n) {
        if (1 == v.log || 1 == v.logout) {
            var a = e + (null != t ? " " + t : "") + (null != o ? " " + o : "") + (null != i ? " " + i : "") + (null != s ? " " + s : "") + (null != r ? " " + r : "") + (null != n ? " " + n : "");
            console.log("Playerjs" + (1 == v.pjsframed ? "2" : "") + ": " + a),
            1 == v.logout && exist(gebi("pjslog")) && (gebi("pjslog").innerHTML += a + "<br/>")
        }
    }
      , gebi = function(e) {
        return document.getElementById(e)
    }
      , CustomFonts = function() {
        if (1 == v.fonts && exist(v.fontnames) && "" != v.fontnames) {
            var e = document.createElement("link");
            e.rel = "stylesheet",
            v.fontnames.indexOf(":") > 0 && -1 == v.fontnames.indexOf(":wght") && (v.fontnames = v.fontnames.replace(/:/gi, ":wght@")),
            e.href = "https://fonts.googleapis.com/css2?family=" + v.fontnames.replace(/,/gi, "&family=").replace(/ /gi, "+"),
            document.head.appendChild(e)
        }
    }
      , Vsts = function(e) {
        if (options[e])
            return o.vsts.indexOf(e) > -1 && 1 == options[e].toString().indexOf("rt")
    }
      , SvgColor = function(e, t) {
        for (var o = ["path", "polygon", "polyline", "rect", "ellipse", "circle"], i = 0; i < o.length; i++) {
            var s = e.querySelectorAll("svg " + o[i]);
            if (s.length > 0)
                for (var r = 0; r < s.length; r++)
                    s[r].style.fill = CheckColor(t)
        }
    }
      , JsClk = function() {
        v.apiprm && 1 == v.apiprm.clk && js("click")
    }
      , Time = function(e) {
        e < 0 && (e = 0);
        var t = o.media.duration >= 600
          , i = o.media.duration >= 3600
          , s = Math.floor(e / 60)
          , r = Math.floor(e - 60 * s)
          , n = Math.floor(s / 60)
          , a = Math.floor(n / 24);
        if (s -= 60 * n,
        a > 0 && (n -= 24 * a),
        1 == v.dvrtime && o.media.isLive()) {
            var l = new Date;
            return String(new Date(l.getTime() + 1e3 * e).toLocaleTimeString())
        }
        return String((a > 0 ? a + ":" : "") + (n > 0 || i ? n + ":" : "") + ((n > 0 || t) && s < 10 ? "0" : "") + s + ":" + (r < 10 ? "0" : "") + r)
    }
      , timeFormat = function(e) {
        var t = Math.floor(e)
          , i = Math.floor(t / 60)
          , s = Math.floor(i / 60);
        i = Math.floor(i % 60),
        s > 0 && i < 10 && (i = "0" + i);
        var r = (s > 0 ? s + ":" : "") + (i >= 0 ? i : "0") + ":" + (t = (t = Math.floor(t % 60)) >= 0 ? t >= 10 ? t : "0" + t : "00");
        if (1 == v.dvrtime && o.media.isLive()) {
            var n = new Date;
            return String(new Date(n.getTime() + 1e3 * e).toLocaleTimeString())
        }
        return r
    }
      , Href = function() {
        return encodeURIComponent(window.location != window.parent.location ? document.referrer : document.location.href)
    }
      , NoSpan = function(e) {
        if (e) {
            var t = (e = e.toString()).indexOf(" <span style='opacity");
            t > -1 && (e = e.substr(0, t))
        }
        return e
    }
      , Script = function(e, t, o) {
        var i;
        if (!Scripted(e) && t) {
            "same" == t && (t = e),
            (i = document.createElement("script")).src = -1 == t.indexOf("//") ? "https://" + t : t,
            i.async = 1,
            o && (i.name = o);
            var s = document.getElementsByTagName("script")[0];
            s || (s = document.getElementsByTagName("link")[0]),
            s && s.parentNode.insertBefore(i, s)
        }
        return i
    }
      , notag = function(e) {
        return e && "string" == typeof e && (e = e.replace(/<[^>]*>?/gm, "")),
        e
    }
      , Scripted = function(e) {
        for (var t = !1, o = document.getElementsByTagName("script"), i = 0; i < o.length; i++)
            o[i].src.indexOf(e) > -1 && (t = !0);
        return t
    }
      , hidesvg = function(e) {
        return e && (e = e.replace("<svg", "<pjshd").replace("svg>", "pjshd>")),
        e
    }
      , hex2rgb = function(e, t, o) {
        if (e) {
            if (e.indexOf("color") > -1 || e.indexOf("var") > -1)
                return exist(t) && exist(o) && (o.style.opacity = t),
                CheckColor(e);
            e = e.replace("#", "");
            var i = parseInt(3 == e.length ? e.slice(0, 1).repeat(2) : e.slice(0, 2), 16)
              , s = parseInt(3 == e.length ? e.slice(1, 2).repeat(2) : e.slice(2, 4), 16)
              , r = parseInt(3 == e.length ? e.slice(2, 3).repeat(2) : e.slice(4, 6), 16);
            return exist(t) ? "rgba(" + i + ", " + s + ", " + r + ", " + t + ")" : "rgb(" + i + ", " + s + ", " + r + ")"
        }
    }
      , Zoomed = function(e) {
        var t = e;
        return v.zm && 1 != v.zm && (t = e / v.zm),
        v.scld && 1 != v.scld && !o.fullscreen && (t = e / v.scld),
        t
    }
      , css = function(e, t) {
        if (exist(e))
            for (var o in t)
                t.hasOwnProperty(o) && "NaNpx" != t[o] && null != t[o] && ("number" == typeof t[o] && "font-weight" != o && "opacity" != o && "zIndex" != o && (t[o] += "px"),
                o.indexOf("olor") > -1 && -1 == o.indexOf("scheme") && (t[o] = CheckColor(t[o])),
                ("transform" == o || o.indexOf("backdrop") > -1) && (e.style["-ms-" + o] = t[o],
                e.style["-moz-" + o] = t[o],
                e.style["-webkit-" + o] = t[o],
                e.style["-o-" + o] = t[o]),
                "fontFamily" == o && t[o].indexOf(" ") > -1 && (t[o] = '"' + t[o] + '"'),
                "box-sizing" == o ? e.style.setProperty(o, t[o], "important") : e.style[o] = t[o])
    }
      , Bglines = function(e, t, o, i) {
        t = CheckColor(t);
        var s = 1 * existv(o, 1)
          , r = 1 * existv(i, 1);
        css(e, {
            background: "repeating-linear-gradient(-45deg," + t + "," + t + " " + s + "px,rgba(0,0,0,0)," + s + "px,rgba(0,0,0,0) " + (s + r) + "px)"
        })
    }
      , CheckColor = function(e) {
        return e ? (0 == e.indexOf("color") && (e = "var(--pjs" + e + ")"),
        "#" != e.substr(0, 1) && -1 == e.indexOf("var") && -1 == e.indexOf("rgb") ? e = "#" + e : e) : "#fff"
    }
      , controlCSS = function(e, t, i) {
        !t && (t = "#fff"),
        t = CheckColor(t);
        var s = random(1e5, 1e6)
          , r = (e = (e = (e = e.replace(/\(rand\)/g, s)).replace(/\(color\)/g, t)).replace(/\(scl\)/g, 1 + (v.control_buffer.scale - 1) / 2)).substr(0, e.indexOf("|||"))
          , n = e.substr(e.indexOf("|||") + 3)
          , a = "";
        o.system.webkit && (a = (a = (a = (a = n.replace(/animation:/g, "-webkit-animation:")).replace(/animation-/g, "-webkit-animation-")).replace(/@keyframes/g, "@-webkit-keyframes")).replace(/transform/g, "-webkit-transform")),
        i && (i.innerHTML = r),
        pushCSS(a + n)
    }
      , indOf = function(e, t, o) {
        var i = !1;
        if (e)
            for (var s = 0; s < e.length; s++)
                if (e[s])
                    if (o) {
                        if (parseFloat(t) == parseFloat(e[s])) {
                            i = s;
                            break
                        }
                    } else
                        String(e[s]).indexOf(t) > -1 && (i = !0);
        return i
    }
      , indOf2 = function(e, t) {
        var o = !1;
        if (e && t)
            for (var i = 0; i < t.length; i++)
                String(e).indexOf(t[i]) > -1 && (o = !0);
        return o
    }
      , iobj = function(e) {
        return "object" == typeof e
    }
      , pushCSS = function(e) {
        o.css && (o.css.styleSheet ? o.css.styleSheet.cssText = e : o.css.appendChild(document.createTextNode(e)))
    }
      , Pos0 = function(e) {
        css(e, {
            position: "absolute",
            top: 0,
            left: 0,
            width: "100%",
            height: "100%"
        })
    }
      , Pnt0 = function(e) {
        css(e, {
            pointerEvents: "none"
        })
    }
      , xhr = function(e, t) {
        var o = new XMLHttpRequest;
        o.open("GET", e, !0),
        o.onload = t,
        o.send()
    }
      , FindPjsDiv = function(e) {
        if (e)
            for (var t = 0; t < 5 && "PJSDIV" != e.nodeName; t++)
                e.parentElement && (e = e.parentElement);
        return e
    }
      , gif = function(e) {
        var t = document.createElement("img");
        o.gifed.indexOf(e) > -1 ? (o.gifed.push(e),
        e = e.indexOf("?") > 0 ? e + "&" + Math.random() : e + "?" + Math.random()) : o.gifed.push(e),
        t.setAttribute("src", e),
        t.setAttribute("height", "1px"),
        t.setAttribute("width", "1px")
    }
      , attr = function(e, t) {
        for (var o in t)
            t.hasOwnProperty(o) && e.setAttribute(o, t[o])
    }
      , destroy = function(e) {
        if (e)
            try {
                e.parentNode.removeChild(e),
                e = null
            } catch (e) {}
    }
      , random = function(e, t) {
        return Math.floor(arguments.length > 1 ? (t - e + 1) * Math.random() + e : (e + 1) * Math.random())
    }
      , randomstr = function() {
        return Math.random().toString(36).substring(2, 12)
    }
      , removebykey = function(e, t) {
        return e = Object.keys(e).reduce((function(o, i) {
            return i != t && (o[i] = e[i]),
            o
        }
        ), {})
    }
      , trim = function(e) {
        return "string" == typeof e ? e.replace(/^\s+|\s+$/gm, "") : e
    }
      , cut = function(e, t, o) {
        var i = !1;
        if (e && e.indexOf(t) > -1) {
            i = e.substr(e.indexOf(t) + t.length);
            o && i.indexOf(o) > -1 && (i = i.substr(0, i.indexOf(o)))
        }
        return i
    }
      , encode = function(e, t) {
        return 0 == t ? "#0" + salt.e(e) : -1 == t ? salt.e(e) : 1 == t ? "#1" + pepper(salt.e(e), 1) : void 0
    }
      , str2obj = function(x) {
        if ("" != v[x])
            if ("string" != typeof v[x])
                o[x + "o"] = v[x];
            else if (0 == v[x].indexOf("[{"))
                try {
                    v[x] = v[x].replace(/pjs'qt/gi, '"'),
                    o[x + "o"] = eval(v[x])
                } catch (e) {}
    }
      , dechar = function(e) {
        return String.fromCharCode(e)
    }
      , decode = function(e) {
        return "object" == typeof e && (e = JSON.stringify(e)),
        "#1" == e.substr(0, 2) ? salt.d(pepper(e.substr(2), -1)) : "#0" == e.substr(0, 2) ? salt.d(e.substr(2)) : e
    }
      , checkBase64 = function(e) {
        return e && -1 == e.indexOf("http") && -1 == e.indexOf(".") && e.length > 100 && -1 == e.indexOf("data:") && (e = "data:image/png;base64," + e),
        e
    }
      , hide = function(e) {
        e && (e.style.visibility = "hidden")
    }
      , show = function(e) {
        e && (e.style.visibility = "visible")
    }
      , hide2 = function(e) {
        if (e)
            if (Array.isArray(e))
                for (var t in e)
                    iobj(e[t]) && (e[t].style.display = "none");
            else
                e.style.display = "none"
    }
      , show2 = function(e) {
        if (e)
            if (Array.isArray(e))
                for (var t in e)
                    "object" == typeof e[t] && (e[t].style.display = "block");
            else
                e.style.display = "block"
    }
      , isVisible = function(e) {
        return !!e && ("hidden" != e.style.visibility && "none" != e.style.display)
    }
      , int = function(e) {
        return "string" == typeof e && e.indexOf("px") > 0 && (e = e.substr(0, e.indexOf("px"))),
        parseInt(e)
    }
      , hidden = function(e) {
        return "none" == e.style.display
    }
      , MarginPadding = function(e, t, o) {
        if (e[t + "top"] = 0,
        e[t + "right"] = 0,
        e[t + "bottom"] = 0,
        e[t + "left"] = 0,
        exist(e[o])) {
            var i = e[o].split(" ");
            4 == i.length && (e[t + "top"] = i[0] ? parseFloat(i[0]) : 0,
            e[t + "right"] = i[1] ? parseFloat(i[1]) : 0,
            e[t + "bottom"] = i[2] ? parseFloat(i[2]) : 0,
            e[t + "left"] = i[3] ? parseFloat(i[3]) : 0)
        }
        return e
    }
      , MarPad = function(e) {
        return e && (e = e.replace(/ /gi, "px ")),
        e + "px"
    }
      , StringVar = function(e, t) {
        return v[e] && "" != v[e] ? v[e] : t
    }
      , abc = String.fromCharCode(65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122)
      , salt = {
        _keyStr: abc + "0123456789+/=",
        e: function(e) {
            var t, o, i, s, r, n, a, l = "", c = 0;
            for (e = salt._ue(e); c < e.length; )
                s = (t = e.charCodeAt(c++)) >> 2,
                r = (3 & t) << 4 | (o = e.charCodeAt(c++)) >> 4,
                n = (15 & o) << 2 | (i = e.charCodeAt(c++)) >> 6,
                a = 63 & i,
                isNaN(o) ? n = a = 64 : isNaN(i) && (a = 64),
                l = l + this._keyStr.charAt(s) + this._keyStr.charAt(r) + this._keyStr.charAt(n) + this._keyStr.charAt(a);
            return l
        },
        d: function(e) {
            var t, o, i, s, r, n, a = "", l = 0;
            for (e = e.replace(/[^A-Za-z0-9\+\/\=]/g, ""); l < e.length; )
                i = this._keyStr.indexOf(e.charAt(l++)),
                t = (15 & (s = this._keyStr.indexOf(e.charAt(l++)))) << 4 | (r = this._keyStr.indexOf(e.charAt(l++))) >> 2,
                o = (3 & r) << 6 | (n = this._keyStr.indexOf(e.charAt(l++))),
                a += dechar(i << 2 | s >> 4),
                64 != r && (a += dechar(t)),
                64 != n && (a += dechar(o));
            return a = salt._ud(a)
        },
        _ue: function(e) {
            e = e.replace(/\r\n/g, "\n");
            for (var t = "", o = 0; o < e.length; o++) {
                var i = e.charCodeAt(o);
                i < 128 ? t += dechar(i) : i > 127 && i < 2048 ? (t += dechar(i >> 6 | 192),
                t += dechar(63 & i | 128)) : (t += dechar(i >> 12 | 224),
                t += dechar(i >> 6 & 63 | 128),
                t += dechar(63 & i | 128))
            }
            return t
        },
        _ud: function(e) {
            for (var t = "", o = 0, i = 0, s = 0, r = 0; o < e.length; )
                (i = e.charCodeAt(o)) < 128 ? (t += dechar(i),
                o++) : i > 191 && i < 224 ? (s = e.charCodeAt(o + 1),
                t += dechar((31 & i) << 6 | 63 & s),
                o += 2) : (s = e.charCodeAt(o + 1),
                r = e.charCodeAt(o + 2),
                t += dechar((15 & i) << 12 | (63 & s) << 6 | 63 & r),
                o += 3);
            return t
        }
    }
      , pepper = function(e, t) {
        e = (e = e.replace(/\+/g, "#")).replace(/#/g, "+");
        var i = sugar(o.y) * t;
        t < 0 && (i += abc.length / 2);
        var s = abc.substr(2 * i) + abc.substr(0, 2 * i);
        return e.replace(/[A-Za-z]/g, (function(e) {
            return s.charAt(abc.indexOf(e))
        }
        ))
    }
      , sugar = function(e) {
        e = e.split(dechar(61));
        var t, o = "", i = dechar(120);
        for (var s in e)
            if (e.hasOwnProperty(s)) {
                var r = "";
                for (var n in e[s])
                    e[s].hasOwnProperty(n) && (r += e[s][n] == i ? dechar(49) : dechar(48));
                t = parseInt(r, 2),
                o += dechar(t.toString(10))
            }
        return o.substr(0, o.length - 1)
    }
      , exist = function(e) {
        return null != e && void 0 !== e && NaN != e && "undefined" != e
    }
      , existv = function(e, t) {
        return exist(e) ? e : t
    }
      , exist2 = function(e) {
        return exist(e) && -1 != e && "" != e
    }
      , exist2v = function(e, t) {
        return exist2(e) ? e : t
    }
      , copyObject = function(e) {
        return "object" == typeof e && (e = JSON.parse(JSON.stringify(e))),
        e
    }
      , findLeft = function(e) {
        return e.getBoundingClientRect().left + (window.scrollX ? window.scrollX : window.pageXOffset)
    }
      , checkFont = function(e) {
        return 1 == v.globalfont && exist2(v.globalfontname) && (e = v.globalfontname),
        e
    }
      , findTop = function(e) {
        return e.getBoundingClientRect().top + window.scrollY
    }
      , redirect = function(e, t) {
        "" != e && (1 == v.redirectblank || "blnk" == t ? window.open(e) : 1 == v.redirectparent || "top" == t ? window.parent.location.href = e : window.location.href = e,
        e = "")
    }
      , reRightMenu = function() {
        1 == v.rightmenu && (o.rightmenu && o.frame.removeChild(o.rightmenu),
        o.rightmenu = null)
    }
      , Actions = function() {
        var _fullscreen_end = !1, volumewheelin;
        function Prefile(e) {
            return exist(v.prefile) && -1 == e.indexOf("//") && (e = v.prefile + e),
            e
        }
        function Ctxt(e) {
            for (var t, i = 1; i < 6; i++) {
                var s = "text" + i;
                exist(e[s]) && (v[s] = e[s],
                t = !0)
            }
            t && o.controls && o.controls.upTexts()
        }
        function Thumbs() {
            1 == v.thumbs && void 0 !== PluginThumbs && (o.th = new PluginThumbs)
        }
        function onPlay(e) {
            o.onplay = !0,
            o.controls && o.controls.SettingsVisible() && o.controls.Settings(),
            o.droplist && o.droplist.Close(),
            o.rel && o.rel.Close(),
            !e && o.media.Play(),
            o.checknative || setTimeout((function() {
                o.media.NativeControls()
            }
            ), 500),
            !o.play && o.controls.Play(),
            1 == v.effects && o.effects.api("play"),
            1 == v.vast && o.actions.VastRecover("pauseroll"),
            o.system.mobile && o.controls.HideInterval(),
            exist(o.share) && o.share.isOpen() && o.share.Hide()
        }
        function UpdateDt() {
            o.media.duration() > 0 && o.controls.Duration(o.media.time(), o.media.duration())
        }
        function StartTimeout() {
            o.starttimeout = !1,
            o.controls.refresh()
        }
        function EarlyEnd() {
            o.media.Pause(),
            o.media.Seek(v.start > 0 ? v.start : 0),
            o.actions.Ended()
        }
        function Quartile(e) {
            o.quartile[e] = !0,
            1 == v.timestore && 1 == v.playedstore && v.playedquartile == e && o.storage && o.plid && o.continue && o.continue.writePl(o.plid),
            js("quartile", 25 * (e + 1) + "%")
        }
        function gaTrackPlay(e, t, i, s) {
            exist(o.gatracked[t]) || i > s && gaTracker(e, t, 1)
        }
        function NativeEnterFs() {
            var e = o.media.tag();
            e && (0 == o.media.time() && o.system.ios && 1 != v.iosplbf ? !o.play && o.actions.Play() : (o.nativefull = !0,
            o.system.android && e.requestFullscreen(),
            o.system.ios && (o.media.nativeSubtitle(),
            e.webkitEnterFullScreen(),
            e.addEventListener("webkitendfullscreen", iosExitFullscreen))))
        }
        function NativeExitFs() {
            var e = o.media.tag();
            e && e.webkitExitFullscreen()
        }
        function PostFullscreen() {
            1 != o.fs_error && (o.ispipkit && o.media.PipWebkit(),
            1 == v.hotkey.volumewheelfull && (VolumeWheelX(!0),
            o.volumewheel = !0),
            1 == v.effects && o.effects.api("full"),
            js("fullscreen"),
            gaTracker("full", "Fullscreen", 1))
        }
        o.system.tv && log("tv"),
        o.system.mobile && log("mobile" + (o.system.ios ? " ios" : "")),
        this.Title = function(e) {
            o.controls && o.controls.title(e)
        }
        ,
        this.File = function(e) {
            if (!e)
                return e;
            if ("string" == typeof e && (e = fjs(e)),
            "string" == typeof e && 0 == (e = e.replace(/(\r\n|\n|\r)/gm, "")).indexOf("[{"))
                try {
                    e = e.replace(/pjs'qt/gi, '"'),
                    e = JSON.parse(e)
                } catch (t) {
                    e = "incorrect JSON"
                }
            if ("object" == typeof e && (o.playlist_dic = [],
            o.playlist_source = copyObject(e),
            o.playlist = IndexPlaylist(e),
            o.playlist.length > 0)) {
                if (1 == v.playlist.openlast && !v.plstart) {
                    var t = Object.keys(o.playlist_dic).slice(-1)[0];
                    t && (v.plstart = t)
                }
                var i = FindFileInPlaylist();
                if (i) {
                    e = i.file,
                    o.titlestore = i.title,
                    o.controls && o.controls.titlepl(i.title),
                    exist2(i.poster) && (o.media ? o.media.Poster(i.poster) : v.poster = i.poster),
                    exist(i.sub) && (i.subtitle = i.sub),
                    exist(i.start) && ("continue" != i.start || o.start) && (v.start = o.seekto = i.start),
                    SettingsTimers("offset"),
                    exist(i.id) && (o.plid = i.id);
                    var s = ["subtitle", "vars", "embed", "url", "url2", "url3", "heartbeat", "thumbnails", "casturl", "castname", "label", "download", "points", "remove", "end", "delete", "outside", "title2", "duration", "skip", "customtext", "volume"];
                    exist(v.control_title) && 1 == v.control_title.showfrom1file && 1 == v.control_title.showtitleplaylist && (s.push("title"),
                    s.push("t1"),
                    s.push("t2"),
                    s.push("t3"),
                    s.push("t4"),
                    s.push("t5"));
                    for (var r = 0; r < s.length; r++)
                        exist(i[s[r]]) && (v[s[r]] = i[s[r]],
                        o.plopt[s[r]] = i[s[r]]);
                    for (var n in i)
                        0 == n.indexOf("update_") && (v[n.substr(7)] = i[n]),
                        n.indexOf("poster") > 0 && (v[n] = i[n],
                        o.plopt[n] = i[n]);
                    Ctxt(i),
                    s.indexOf("title") > 0 && (1 == v.control_title.templated && (o.title_template = v.control_title.template,
                    o.actions.TitleTemplate(i)),
                    o.actions.Title("title")),
                    exist(i.volume) && setTimeout((function() {
                        o.actions.Volume(i.volume)
                    }
                    ), 200),
                    o.controls && (o.controls.UpdatePlaylist(o.playlist),
                    v.customtext && o.controls.customTextPl()),
                    o.droplist && o.droplist.Update()
                }
            }
            if ("string" == typeof e) {
                if ((e = fjs(e)) && (0 == e.indexOf("#" + v.enc2) && (e = o[o.fd[0]](e)),
                e && (0 == e.indexOf("#" + v.enc3) && e.indexOf(v.file3_separator) > 0 && (e = o[o.fd[1]](e)),
                e ? (0 == e.indexOf("#0") && (e = fd0(e)),
                e = fjs(e)) : e = "")),
                1 == v.fplace && (e = fplace(e)),
                "" == e && (log("empty file"),
                o.media_error = !0,
                js("error", "empty")),
                o.files_quality = [],
                o.files_quality_ag = [],
                o.files_audiotrack = [],
                o.current_file = 0,
                o.current_quality = 0,
                o.current_audiotrack = 0,
                o.ncrtat = 0,
                "" == v.file_separator && (v.file_separator = ","),
                e.indexOf(v.qbr1) > -1 && e.indexOf(v.qbr2) > -1 || exist(v.qualities) ? o.files = e.split(v.file_separator) : o.files = [e],
                o.audiotracks = [],
                exist(v.qualities))
                    var a = v.qualities.split(v.file_separator);
                if (o.files.length > 0) {
                    var l = -1;
                    for (r = 0; r < o.files.length; r++)
                        if (o.files[r] = trim(o.files[r]),
                        "" != o.files[r]) {
                            0 == o.files[r].indexOf(v.qbr1) && o.files[r].indexOf(v.qbr2) > 1 ? (o.files_quality[r] = o.files[r].substr(o.files[r].indexOf(v.qbr1) + v.qbr1.length, o.files[r].indexOf(v.qbr2) - v.qbr2.length),
                            o.files[r] = o.files[r].substr(o.files[r].indexOf(v.qbr2) + v.qbr2.length)) : exist(v.qualities) ? o.files_quality[r] = exist(a[r]) ? a[r] : "" : o.files_quality[r] = r + 1;
                            var c = 0;
                            if (exist(v.default_quality) && -1 == l) {
                                if (0 == String(v.default_quality).indexOf("num:") && o.files.length > 1) {
                                    var d = 1 * v.default_quality.substr(4);
                                    d >= o.files.length && (v.default_quality = "max"),
                                    d == r && (c = 1)
                                }
                                v.default_quality == o.files_quality[r] && (c = 1),
                                "max" == v.default_quality && r == o.files.length - 1 && (c = 1)
                            }
                            exist(o.default_quality) && o.default_quality == o.files_quality[r] && (c = 1,
                            l = r),
                            1 == c && (o.current_file = r,
                            o.current_quality = r),
                            o.files[r] = Prefile(o.files[r])
                        }
                } else
                    o.files[0] = Prefile(o.files[0]);
                return o.files[o.current_file]
            }
        }
        ,
        this.InvertPlaylist = function() {
            if (o.playlist) {
                for (var e = o.playlist.reverse(), t = 0; t < e.length; t++)
                    e[t].pjs_i = t;
                o.playlist = e,
                o.controls.UpdatePlaylist(o.playlist)
            }
        }
        ,
        this.Ctxt = function(e) {
            Ctxt(e)
        }
        ,
        this.UpdatePlaylist = function(e) {
            "object" == typeof e && (o.playlist_dic = [],
            o.playlist_source = copyObject(e),
            o.playlist = IndexPlaylist(e),
            o.controls && o.controls.UpdatePlaylist(o.playlist))
        }
        ,
        this.NewFile = function(e, t, i, s) {
            exist(t) || (o.autoplay = !0,
            o.newplay = !0),
            !exist(i) && (v.preload = 0),
            v.duration = void 0,
            v.end = void 0,
            !options.delete && (v.delete = void 0),
            2 != o.media_error && (o.media_error = !1),
            o.metadata = !1,
            o.pipwebkit = !1,
            o.reloadTimer = 0,
            o.gatracked = [],
            o.checknative = !1,
            o.gained = !1,
            o.dvr = !1,
            o.bitrate = void 0,
            o.quartile = [!1, !1, !1],
            o.sess = randomstr(),
            o.sesstime = 0,
            o.or0 = 0,
            o.pld && (o.pld = []),
            "pjs" != o.file_type && o.sbt && o.sbt.remove(),
            o.trkp && (o.trkp = [],
            o.trkp2 = []),
            o.prc = 0,
            o.mxprc = 0,
            o.err404v && o.err404v.remove(),
            "playing" == o.media.status() && this.Stop(),
            o.cut && o.cutted && o.controls.Cut(),
            exist(o.share) && o.share.Remove(),
            exist(o.reloadto) && clearTimeout(o.reloadto),
            js("new"),
            1 == v.vast && 1 != s && (o.actions.VastRecover(),
            o.actions.VastRecover("midroll")),
            e = this.File(e),
            1 == t && (o.file_type = "",
            ShowPoster(),
            setTimeout((function() {
                o.media.Drt()
            }
            ), 100),
            o.nwfl = !0),
            o.media.File(e),
            !o.system.mobile && !o.system.safari || exist(t) || o.actions.Play(),
            exist(o.custom_aspect) && (o.mediascale = {
                x: 1,
                y: 1,
                x0: 1,
                y0: 1
            },
            o.media.normalscale()),
            1 != t && gaTracker("play", "Play"),
            o.media.NativeControls(),
            o.controls.QualityChangedNoHand(),
            o.controls.AudioTrackChangedNoHand(),
            o.controls.refresh(),
            o.mediatags && o.mediatags.read()
        }
        ,
        this.TitleTemplate = function(e) {
            var t = !1;
            if (e && o.title_template) {
                v.title = o.title_template;
                for (var i = 1; i < 6; i++)
                    exist(e["t" + i]) && (v.title = v.title.replace("{" + i + "}", e["t" + i]),
                    t = !0)
            }
            return t
        }
        ,
        this.MediaReady = function() {
            (1 == v.autoplay && !v.autoplayed || o.autoplay) && (1 == v.observer ? setTimeout((function() {
                o.actions.Play()
            }
            ), 500) : this.Play(),
            v.autoplayed = 1,
            o.autoplay = !1),
            Thumbs()
        }
        ,
        this.Thumbs = function() {
            Thumbs()
        }
        ,
        this.NativeControls = function() {
            var e = !1;
            return o.system.mobile && (e = !0,
            1 == v.nativenotiphone && o.system.iphone && (e = !1),
            1 == v.nativenotipad && o.system.ipad && (e = !1),
            1 == v.nativenotios && o.system.ios && (e = !1),
            1 == v.nativenotandroid && o.system.android && (e = !1)),
            1 == v.nativeontv && o.system.tv && (e = !0),
            e
        }
        ,
        this.Metadata = function() {
            o.media.Volume(v.volume),
            o.muted && o.media.Mute(),
            o.metadata = !0,
            o.controls && o.controls.refresh(),
            o.play || o.start || 1 == v.effects && o.effects.api("pause"),
            o.casting && o.tagvideo && (o.chromecast.Exit(),
            o.chromecast.Go()),
            1 == v.vast && 1 != v.nomidroll && 1 == v.midrolls && !exist(o.vast) && MidrollOverlay("midroll", "metadata")
        }
        ,
        this.onPlayTag = function() {
            !o.onplay && onPlay(!0)
        }
        ,
        this.Play = function(e) {
            if (!o.play && o.media) {
                o.actplay = !0,
                o.vstpause = !1,
                o.ended = !1,
                o.pauseseek = !1,
                9 == v.reload && (v.reload = 1),
                clearTimeout(o.plapto);
                var t = !1;
                if ("youtube" == o.file_type && (o.media.YoutubeReady() || 1 == v.autoplay || 1 != v.preload || (t = !0,
                window.YT && (v.autoplay = 1,
                o.autoplay = !0,
                o.media.onYoutubeReady()))),
                1 == v.pass && 0 == v.passontime && (o.actions.Password(),
                t = !0),
                o.media_error || t)
                    o.media_error && Advertising("preroll") && datetime(2);
                else {
                    if (o.newfile = !1,
                    o.newplay = !1,
                    StopOtherPlayer(!o.start),
                    o.alert.close(),
                    o.start)
                        o.nwfl ? (gaTracker("play", "Play"),
                        o.nwfl = !1) : gaTracker("resume", "Resume");
                    else {
                        js("start"),
                        o.start = !0,
                        1 == v.toolbar.hideuntilstarted && setTimeout((function() {
                            o.controls.resizetext()
                        }
                        ), 100),
                        v.toolbar.hideleavetimeout > 0 && 1 == v.autoplay && (o.starttimeout = !0,
                        setTimeout(StartTimeout, 1e3 * v.toolbar.hideleavetimeout)),
                        1 == v.water && v.wid && PluginWater();
                        for (var i = 0; i < o.vsts.length; i++)
                            1 == v["vast_nofirst" + o.vsts[i]] && localStorage.setItem("pljsfirst" + o.vsts[i], Date.now());
                        1 == v.pjsstat && v.pjsstatid && PluginStat("start"),
                        o.sbt && o.sbt.start(),
                        js("new"),
                        o.ctxtnk && o.controls.upText(o.ctxtnk),
                        o.controls.startcss(),
                        o.controls.refresh(),
                        gaTracker("play", "Play"),
                        MediaSess(),
                        o.ab && gaTracker("adblock", "AdBlock", 1)
                    }
                    if (1 == v.fullonplay && !o.fullscreen)
                        (new Date).getTime() - o.clicktime < 300 && (o.system.ios || 1 == v.fullonplaymobile && !o.system.mobile || this.Fullscreen());
                    if (o.subtitle_on && 1 == v.subpausehide && (show2(o.subtitle),
                    show2(o.subtitle2)),
                    o.err404v && o.err404v.remove(),
                    1 != e && Advertising("preroll") || Advertising("intro"))
                        datetime(2);
                    else if (1 == v.redirect && exist(v.redirectonplay) && !exist(options.redirect) && (redirect(v.redirectonplay),
                    t = !0),
                    !t) {
                        log("Play"),
                        UpdateDt(),
                        o.start2 || (o.start2 = !0,
                        v.toolbar.hideleavetimeout > 0 && 1 == v.autoplay && (o.starttimeout = !0,
                        setTimeout(StartTimeout, 1e3 * v.toolbar.hideleavetimeout)));
                        var s = !1;
                        o.media.time() > 1 && 1 == v.pauserollonplay && 1 != e && !isVastBgLoad() && !exist(o.vast) && !exist(o.vastloader) && (s = Advertising("pauseroll")),
                        s ? isVastBgLoad() && onPlay(!1) : onPlay(!1)
                    }
                }
            } else
                o.media && o.media.Play()
        }
        ,
        this.upDT = function() {
            UpdateDt()
        }
        ,
        this.Pause = function() {
            o.play && (o.actplay = !1,
            log("Pause"),
            o.media.Pause(),
            o.controls.Pause(),
            js("pause"),
            1 == v.posteronpause && ShowPoster(),
            1 == v.posterhidepause && HidePoster2(),
            1 == v.effects && o.effects.api("pause"),
            o.subtitle_on && 1 == v.subpausehide && (hide2(o.subtitle),
            hide2(o.subtitle2)),
            exist(o.vast) || exist(o.vastloader) || 0 != v.pauserollonplay || Advertising("pauseroll") || 1 != v.nooverlay && 1 == v.overlays && MidrollOverlay("overlay", "pause"),
            isVastBgLoad() && (o.vstpause = !0),
            o.onplay = !1)
        }
        ,
        this.Mute = function() {
            o.media.Mute(),
            o.controls.Mute(),
            o.muted = !0,
            js("mute")
        }
        ,
        this.Unmute = function() {
            o.media.Unmute(),
            o.muted = !1,
            o.controls.Unmute(),
            o.media.Volume(v.volume),
            js("unmute")
        }
        ,
        this.Volume = function(e, t) {
            o.controls && (e < .01 && (e = 0),
            e > 1 && (e = 1),
            e <= 0 ? (this.Mute(),
            v.volume = 0,
            e = 0) : (o.muted && this.Unmute(),
            v.volume = e),
            js("volume", e),
            o.controls.Volume(e, t),
            o.media.Volume(e))
        }
        ,
        this.Waiting = function() {
            o.controls.Waiting()
        }
        ,
        this.StopWaiting = function() {
            o.controls && o.controls.StopWaiting()
        }
        ,
        this.Progress = function() {
            this.StopWaiting()
        }
        ,
        this.Seeked = function() {
            o.actions.UpdatePlay(),
            this.StopWaiting()
        }
        ,
        this.Duration = function(e, t) {
            if (o.continue && !o.start) {
                var i = o.continue.flag();
                i.t && i.d && (e = i.t)
            }
            o.controls && o.controls.Duration(e, t)
        }
        ,
        this.LoadedData = function(e, t) {
            o.seekto > 0 && "youtube" != o.file_type && (o.actions.Seek(o.seekto, !1),
            o.seekto = void 0)
        }
        ,
        this.ScreenClick = function() {
            var e = new Date;
            o.clicktime = e.getTime();
            var t = !1;
            o.controls.SettingsVisible() && 1 != v.settings.always && (o.controls.SettingsClose(),
            t = !0),
            o.droplist && o.droplist.Visible() && (o.droplist.Close(),
            t = !0),
            0 == v.playlist.always && o.controls.PlaylistVisible() && 1 == v.playlist.autohide && (o.controls.Playlist(),
            t = !0),
            1 == v.redirect && exist(v.redirectonclick) && !exist(options.redirect) && (redirect(v.redirectonclick),
            t = !0),
            o.muted && 1 == v.unmuteonclick && (o.actions.Unmute(),
            v.unmuteonclick = 0,
            t = !0),
            t || (1 == v.hotkey.on && 1 == v.hotkey.icons && 1 == v.hotkey.playiconbut && PluginHotIcon("play", o.play ? 0 : 1),
            this.Toggle())
        }
        ,
        this.ControlsBgClick = function() {
            o.controls.SettingsVisible() && o.controls.Settings()
        }
        ,
        this.Toggle = function() {
            "playing" == o.media.status() ? (js("userpause"),
            1 == v.scrnstp ? this.StopMedia() : this.Pause()) : (js("userplay"),
            this.Play()),
            Sub()
        }
        ,
        this.Seek = function(e, t) {
            if (e < o.media.duration()) {
                if (1 == v.control_line.dontseekforward && e > o.media.time())
                    return;
                v.delete > 0 && e < v.delete && (e = v.delete),
                log("Seek", e),
                o.seeked_time = e,
                o.pauseseek = !o.play,
                o.media.Seek(e),
                t && o.controls.Seek(e, o.media.duration()),
                o.seeking = !0,
                o.seeking_time = o.media.time(),
                Sub(o.seeking_time)
            }
        }
        ,
        this.Open = function(e, t, i) {
            "playing" == o.media.status() && "audio" != o.mode && (Pause(),
            o.fullscreen && i && o.actions.Normalscreen()),
            window.open(e, t)
        }
        ,
        this.Download = function() {
            if (1 != v.vast || o.start || !Advertising("preroll")) {
                var e = o.media.currentFile();
                if (exist(v.download) && (e = v.download),
                "" != e)
                    js("download"),
                    window.open(e, 1 == v.downself ? "_self" : "_blank").focus()
            } else
                o.vstdwn = !0
        }
        ,
        this.UpdatePlay = function(e) {
            var t = o.media.time()
              , i = o.media.duration();
            !o.start && o.seekto > 0 && (t = o.seekto),
            o.controls.Played(t, i, e)
        }
        ,
        this.Playing = function() {
            var e = o.media.time()
              , t = o.media.duration()
              , i = t > 0 ? e / t : 0
              , s = Math.ceil(100 * i);
            o.seeking ? e != o.seeking_time && -9 != o.seeking_time && (o.seeking = !1) : o.controls && o.controls.Played(o.seekto > 0 ? o.seekto : e, t),
            (1 == v.ga || 1 == v.yamtr) && t > 0 && (gaTrackPlay("play25", "Play 25%", i, .25),
            gaTrackPlay("play50", "Play 50%", i, .5),
            gaTrackPlay("play75", "Play 75%", i, .75));
            for (var r = 0; r < 3; r++)
                o.quartile[r] || i >= .25 * r + .25 && Quartile(r);
            if (1 == v.reloadlog && log(1, e, t),
            (1 == v.reload || v.fileorto > 0) && o.play) {
                var n = !1
                  , a = !1;
                if (1 == v.reloadlive && 1 == v.reload && (o.media.isLive() || (n = !0)),
                e > 0)
                    e != o.time || n ? o.reloadTimer = 0 : a = !0,
                    o.time = e;
                else if (1 == v.reloadstart) {
                    var l = o.media.loaded();
                    1 == v.reloadlog && log(2, l, o.timeld),
                    n || (l == o.timeld ? a = !0 : o.reloadTimer = 0),
                    o.timeld = l
                }
                a && (o.reloadTimer++,
                1 == v.reload ? (1 == v.reloadlog && log(3, o.reloadTimer),
                o.reloadTimer == v.reloadtimeout * (1e3 / o.timerTime) && o.actions.Reload()) : v.fileorto > 0 && o.media.urlsl() > 1 && o.reloadTimer == v.fileorto * (1e3 / o.timerTime) && o.media.onError("OR timeout"))
            }
            if (v.apiprm && 1 == v.apiprm.pld && t > 0 && (!o.pld && (o.pld = []),
            o.pld[Math.round(e)] = 1),
            1 == v.vast && (1 != v.nomidroll && 1 == v.midrolls && !exist(o.vast) && MidrollOverlay("midroll", e, t),
            1 != v.nooverlay && 1 == v.overlays && !exist(o.vast) && MidrollOverlay("overlay", e, t)),
            1 == v.intros && v.introstart > 0 && e >= v.introstart && (exist(o.vast) || (Advertising("intro") && (o.media.Pause(),
            o.controls.Pause()),
            v.introstart = 0)),
            SettingsTimers("play"),
            1 == v.pass && v.passontime > -1 && PasswordTime(e, t),
            1 == v.slds && v.slides && "undefined" != typeof PluginSlides && PluginSlides(e),
            o.subtitle_on && Sub(e),
            o.storage && 1 == v.timestore && o.continue && !o.seekto && o.continue.write(e, t),
            o.cutted && o.cut && o.cut.play(e),
            exist(v.end)) {
                var c = v.end;
                indOf([v.end], "-") && (c = t),
                c > 0 && e > c && EarlyEnd()
            }
            if (exist(v.remove)) {
                var d = v.remove.split(",");
                for (r = 0; r < d.length; r++) {
                    var u = d[r].split("-");
                    2 == u.length && e > u[0] && e < u[1] && (1 * u[1] > t ? EarlyEnd() : o.media.Seek(1 * u[1] + (o.system.safari ? 1 : 0)))
                }
            }
            o.prc != s && s > 0 && (1 == v.tracking && "undefined" != typeof PluginTrack && PluginTrack(e, t, s),
            1 == v.heartbeats && o.dt && "undefined" != typeof PluginHeart && PluginHeart()),
            o.prc = s
        }
        ,
        this.Reload = function() {
            if (o.reloadTimer = 0,
            exist(o.reloadto) && clearTimeout(o.reloadto),
            1 == v.reloadjustevent)
                js("reload");
            else {
                !(o.seekto > 0 || o.media.isLive()) && (o.seekto = o.media.time() + (v.reloadplus > 0 ? 1 : 0));
                var e = o.controls.PlaylistVisible();
                js("reload"),
                o.media.reload(),
                e && 1 == v.playlist.autohide && o.controls.PlaylistShow()
            }
        }
        ,
        this.Stopped = function() {
            o.controls.Played(0, 0),
            o.controls.Loaded(0, 0),
            o.actions.Duration(0, 0),
            o.controls.StopWaiting()
        }
        ,
        this.Loading = function() {
            if (o.media) {
                var e = o.media.loaded();
                1 == v.pjsiframed && js("loaded", e);
                var t = o.media.duration();
                o.controls && o.controls.Loaded(e, t)
            }
        }
        ,
        this.Ended = function() {
            js("fileend"),
            js("quartile", "100%"),
            o.ended = !0,
            1 == v.loop ? ("youtube" == o.file_type && this.Stop(),
            1 == v.vast && o.actions.VastRecover("preroll"),
            v.start > 0 && (o.actions.Seek(v.start),
            o.seekto = void 0),
            this.Play()) : (o.media.isLive() || "youtube" == o.file_type || "rt" == o.file_type ? this.Stop() : 1 == v.finishrewind && (o.actions.Seek(v.start > 0 ? v.start : 0, !0),
            o.system.ie && o.media.Pause()),
            o.controls.onEnded(),
            1 == v.intros && (v.outros = 1),
            Advertising("postroll") || Advertising("outro") || End()),
            js("end")
        }
        ,
        this.Fullscreen = function() {
            var e = !1
              , t = !1;
            for (var i in o.fs_error = !1,
            o.fullscreen_process = !0,
            setTimeout((function() {
                o.fullscreen_process = !1
            }
            ), 3e3),
            o.motions)
                if (o.motions.hasOwnProperty(i) && exist(o.motions[i]))
                    try {
                        o.motions[i].TheEnd2()
                    } catch (e) {}
            try {
                if (o.fullscreen_start = !0,
                (o.system.ios && 1 == v.nativefullios || o.system.android && 1 == v.nativefulldroid) && o.tagvideo && !o.nativecontrols)
                    (i = o.media.tag()) && (i.webkitSupportsFullscreen || i.requestFullscreen) && (NativeEnterFs(),
                    e = !0);
                if (!e) {
                    var s, r = o.frame;
                    if (("dm" == o.file_type || "vimeo" == o.file_type) && o.system.iphone && 1 == v.nativefullios)
                        return void o.media.iosfull();
                    r.requestFullscreen ? (o.realfullscreen = !0,
                    void 0 !== (s = r.requestFullscreen({
                        navigationUI: "hide"
                    })) && s.then((function() {}
                    )).catch((function(e) {}
                    ))) : r.requestFullScreen ? (r.requestFullScreen({
                        navigationUI: "hide"
                    }),
                    o.realfullscreen = !0) : o.frame.mozRequestFullScreen ? (r.mozRequestFullScreen({
                        navigationUI: "hide"
                    }),
                    o.realfullscreen = !0) : r.webkitRequestFullScreen ? (r.webkitRequestFullScreen({
                        navigationUI: "hide"
                    }),
                    o.realfullscreen = !0) : r.msRequestFullscreen && (r.msRequestFullscreen(),
                    o.realfullscreen = !0)
                }
            } catch (e) {
                t = !0,
                log(e)
            }
            o.system.webkit && !1 === document.webkitFullscreenEnabled && (o.realfullscreen = !1),
            o.realfullscreen || e || (o.system.webkit && o.iniframe ? NativeEnterFs() : this.FullscreenUI()),
            t || setTimeout(PostFullscreen, 200)
        }
        ,
        this.NativeEnterFs = function() {
            NativeEnterFs()
        }
        ,
        this.NativeExitFs = function() {
            NativeExitFs()
        }
        ;
        var lastwheel = {
            x: 0,
            y: 0
        }, vast_and, vast_or, vast_type, vasturl;
        function VolumeWheel(e) {
            if (!(o.droplist && o.droplist.OpenScroll() || o.sublist && o.sublist.Open() || 0 == e.wheelDelta))
                if (0 != e.deltaX ? lastwheel.x++ : lastwheel.x--,
                0 != e.deltaY ? lastwheel.y++ : lastwheel.y--,
                (1 == v.hotkey.whlskfll || 1 == v.hotkey.scrollwheelfull) && o.fullscreen && lastwheel.y > lastwheel.x ? (clearInterval(volumewheelin),
                volumewheelin = setInterval((function() {
                    lastwheel = {
                        x: 0,
                        y: 0
                    },
                    clearInterval(volumewheelin)
                }
                ), 1e3)) : (o.hidden_volume_over = !0,
                clearInterval(volumewheelin),
                volumewheelin = setInterval((function() {
                    o.hidden_volume_over = !1,
                    o.controls.resize(),
                    lastwheel = {
                        x: 0,
                        y: 0
                    },
                    clearInterval(volumewheelin)
                }
                ), 2e3),
                o.controls.resize(),
                e.preventDefault()),
                lastwheel.x > lastwheel.y)
                    e.deltaX > 0 ? o.actions.Volume(parseFloat(v.volume) - v.hotkey.wheelstep / 10, "no") : o.actions.Volume(parseFloat(v.volume) + v.hotkey.wheelstep / 10, "no");
                else {
                    var t = o.system.win ? -v.hotkey.wheelstep / 10 : v.hotkey.wheelstep / 10;
                    1 == v.hotkey.scrollwheelfull && o.fullscreen ? o.media.scale(e.deltaY > 0 ? t : -t) : 1 == v.hotkey.whlskfll && o.fullscreen ? apiProcessor("seek", e.deltaY > 0 ? "+" + 10 * t : "-" + 10 * t) : (o.actions.Volume(parseFloat(v.volume) + (e.deltaY > 0 ? t : -t), "no"),
                    o.controls.volumescroll())
                }
        }
        function iosExitFullscreen() {
            o.system.ios && (o.media.removeNativeSubtitle(),
            js("exitfullscreen")),
            o.nativefull = !1
        }
        function NewAspect(e, t) {
            if (exist(o.vast) && !t)
                o.resizeonplay = e;
            else {
                var i = !1
                  , s = o.container_w / e
                  , r = 0
                  , n = {
                    height: s
                };
                if (1 == v.chngwd && s > o.container_h && (s = o.container_h,
                r = o.container_w / e,
                o.container_w = n.width = r),
                exist(o.parentIframe) && 1 != v.notframe)
                    try {
                        css(o.parentIframe, n)
                    } catch (e) {
                        i = !0,
                        log("iframe crossdomain issue")
                    }
                i || (o.aspect = e,
                o.container_h = s,
                o.aspect > 0 && css(o.container, n),
                r > 0 && js("width", r),
                js("height", s)),
                o.vast && !o.fullscreen && (o.screen_h = s,
                r > 0 && (o.screen_w = r),
                o.vast.Resize())
            }
        }
        function VolumeWheelX(e) {
            lastwheel = {
                x: 0,
                y: 0
            },
            e ? window.addEventListener("wheel", VolumeWheel, {
                passive: !1
            }) : (clearInterval(volumewheelin),
            window.removeEventListener("wheel", VolumeWheel))
        }
        function Sub(e) {
            o.sbt && o.sbt.show(exist(e) ? e : o.media.time())
        }
        function Advertising(e) {
            if (v["vast_" + e + "timebreak"] > 0 && o.storage) {
                var t = localStorage.getItem("pljs" + e + "_" + o.d);
                if (t) {
                    var i = new Date;
                    if (o.clicktime = i.getTime(),
                    (i.getTime() - t) / 36e5 < v["vast_" + e + "timebreak"])
                        return !1
                }
            }
            if (v["vast_" + e + "timelimit"] > 0 && o.media.duration() > 0 && o.media.duration() < 60 * v["vast_" + e + "timelimit"]) {
                if (!(v["vast_" + e + "timelimited"] > 0))
                    return !1;
                v["vast_" + e + "_andlimit"] = v["vast_" + e + "timelimited"]
            }
            if (-1 == o.compilations.indexOf("VAST") || 1 != v.vast || o.noads || 1 != v[e + "s"])
                return !1;
            if (void 0 === VastVideo)
                return !1;
            if (("intro" == e || "outro" == e) && "undefined" != typeof PluginIntro)
                return vasturl = [],
                PluginIntro(e);
            if (exist(o.vast) || exist(o.vastloader))
                return !isVisible(o.vastcontainer) || isVastBgLoad(o.vasttype) ? (log("ad bg"),
                !1) : (log("ad now"),
                !0);
            if (exist(v[e])) {
                if (v[e].toString().indexOf(".") > -1 || v[e].toString().indexOf(":") > -1 || v[e].toString().indexOf("[yandex]") > -1) {
                    js("vast_init", e),
                    isVastBgLoad(e) || "overlay" == e || (setTimeout((function() {
                        !(o.play || null == o.vastloader && null == o.vast) && o.actions.Waiting()
                    }
                    ), 10),
                    Curtain()),
                    vast_and = 0,
                    vast_or = 0,
                    vast_type = e,
                    vasturl = v[e].split(" and "),
                    o.vast_loaders = [],
                    o.adsinchain = vasturl.length,
                    VastAndLimit(),
                    o.adscounter = 1,
                    o.adsfirst = !0;
                    for (var s = 0; s < vasturl.length; s++)
                        vasturl[s] = vasturl[s].split(" or ");
                    v[e.concat("_", "recover")] = v[e],
                    v[e] = null,
                    o.vasttype = e,
                    "overlay" != e && (o.vast = new VastVideo),
                    o.vastloader = new VastLoader;
                    for (s = 0; s < vasturl.length; s++)
                        for (var r = 0; r < vasturl[s].length; r++) {
                            if ((l = trim(vasturl[s][r])).indexOf("[50%]") > 0) {
                                var n = random(1, 2);
                                vasturl[s][r] = vasturl[s][r].replace("[50%]", ""),
                                2 == n && (vasturl[s][r] = "")
                            }
                        }
                    if (1 == v.vast_preload)
                        for (s = 0; s < vasturl.length; s++) {
                            var a = 0 == s ? 1 : 0;
                            if (vasturl[s].length > a)
                                for (r = a; r < vasturl[s].length; r++) {
                                    var l = trim(vasturl[s][r]);
                                    o.system.ie9 ? VastAddPreload(l) : setTimeout(VastAddPreload, 100 * s, l)
                                }
                        }
                    return "" == vasturl[0][0] ? VastNext() : o.vastloader.Load(trim(vasturl[0][0]), e),
                    !0
                }
                return !1
            }
            return !1
        }
        function MidrollOverlay(e, t, i) {
            if (exist(o[e + "o"]) && 1 == v[e + "s"])
                for (var s in o[e + "o"])
                    if (o[e + "o"].hasOwnProperty(s) && !exist(o[e + "o"][s].worked) && exist(o[e + "o"][s].time) && exist(o[e + "o"][s].vast)) {
                        var r = o[e + "o"][s].time.toString()
                          , n = !1;
                        if (r && ("metadata" == t ? r == t && (n = !0) : ("pause" == r && r == t && (n = !0),
                        t >= (r = r.indexOf("%") > 0 ? i > 0 ? parseInt(r.substr(0, r.indexOf("%"))) * i / 100 : -1 : parseInt(r)) && (v["vast_" + e + "rest"] > 0 && r > -1 && t - r >= v["vast_" + e + "rest"] && (r = -1),
                        r > -1 && (n = !0))),
                        o[e + "o"][s].minduration && o.media.duration() > 0 && o.media.duration() < 1 * o[e + "o"][s].minduration && (o[e + "o"][s].worked = !0,
                        n = !1),
                        n && (o[e + "o"][s].vast,
                        v[e] = o[e + "o"][s].vast,
                        o[e + "crtm"] = o[e + "o"][s].time,
                        o[e + "skipimprsd"] = o[e + "o"][s].skipimpessed,
                        Advertising(e)))) {
                            o[e + "o"][s].worked = !0;
                            break
                        }
                    }
        }
        function VastBgLoad() {
            isVastBgLoad() && (0 != o.vast_impressions && 1 != v["vast_" + o.vasttype + "bgload2"] || (css(o.vastcontainer, {
                opacity: 0,
                visibility: "hidden",
                top: 2e3
            }),
            log(o.vasttype + " hide"),
            "midroll" == o.vasttype && o.media.Play()))
        }
        function isVastBgLoad(e) {
            for (var t = !1, i = ["midroll", "pauseroll"], s = 0; s < i.length; s++)
                o.vasttype != i[s] && e != i[s] || 1 == v["vast_" + i[s] + "bgload"] && (t = !0);
            return t
        }
        function VastVisible() {
            isVastBgLoad() && (o.play && (o.media.Pause(),
            o.controls.Pause()),
            log(o.vasttype + " show"),
            css(o.vastcontainer, {
                opacity: 1,
                visibility: "visible",
                top: 0
            }),
            o.vastfrombg = 1),
            o.nativefull && !o.realfullscreen ? NativeExitFs() : 1 == v["vast_" + o.vasttype + "normal"] && o.fullscreen && o.actions.Normalscreen()
        }
        function VastGo(e) {
            o.vast.Go(e)
        }
        function VastLongTimeout() {
            exist(o.vast) && o.vast.active() && 0 == o.vast_impressions && (o.vast.RemoveForNextAd(),
            log("VAST timeout " + v.vast_longtimeout),
            vasturl = [],
            VastRemoveAndPlay())
        }
        function VastCheckNext() {
            var e = VastAndLimit();
            log("VAST next " + !e),
            e ? VastRemoveAndPlay() : VastNext()
        }
        function VastAndLimit() {
            var e = !1;
            if (o.vasttype) {
                var t = v["vast_" + o.vasttype + "_andlimit"]
                  , i = v["vast_" + o.vasttype + "_and2limit"];
                (i || t) && (i > 0 && o.vast_starts > 0 ? (o.adsinchain = i,
                o.vast_impressions >= i && (e = !0)) : t > 0 && (o.adsinchain = t,
                o.vast_impressions >= t && (e = !0)))
            }
            return e
        }
        function VastNext() {
            if (vasturl.length > 0 && vasturl[vast_and])
                if (vast_or < vasturl[vast_and].length - 1) {
                    log("VAST Next"),
                    o.vast && o.vast.RemoveForNextAd(),
                    VastBgLoad(),
                    vast_or++;
                    var e = trim(vasturl[vast_and][vast_or])
                      , t = VastPreloaded(e);
                    "skip" == t && (o.vastloader = new VastLoader,
                    o.vastloader.Load(e, o.vasttype)),
                    "error" == t && VastNext()
                } else
                    VastRemoveAndPlay();
            else
                VastRemoveAndPlay()
        }
        function VastPreloaded(e) {
            var t = "skip";
            if (1 == v.vast_preload && o.vast_loaders)
                for (var i = !1, s = 0, r = 0; r < o.vast_loaders.length; r++)
                    if (0 == o.vast_loaders[r].done) {
                        if (o.vast_loaders[r].ldr.preloaded(e)) {
                            o.vast_loaders[r].done = 1;
                            var n = o.vast_loaders[r].ldr.Status();
                            "ready" == n ? (o.vastloader = o.vast_loaders[r].ldr,
                            log("VAST preloaded"),
                            o.vast_loaders[r].ldr.Ready(),
                            t = n) : ("" == n && (t = "ok",
                            log("VAST preloading"),
                            o.vastloader = o.vast_loaders[r].ldr,
                            o.vast_loaders[r].ldr.disablePreload()),
                            "error" == n && (t = "error")),
                            i = !0
                        }
                        if (i && 0 == o.vast_loaders[r].load) {
                            if (!(++s < 6))
                                break;
                            VastPreloadLoad(o.vast_loaders[r])
                        }
                    }
            return t
        }
        function VastAddPreload(e) {
            if (1 == v.vast_preload && o.vast_loaders) {
                var t = 0;
                for (t = 0; t < vasturl.length; t++)
                    if (vasturl[t] == e && vast_and >= t)
                        return;
                if (1 == vasturl.length && vasturl[0].length > 1)
                    ;
                else {
                    var i = 0;
                    for (t = 0; t < o.vast_loaders.length; t++)
                        0 == o.vast_loaders[t].done && i++;
                    o.vast_loaders.push({
                        load: 0,
                        done: 0,
                        x: trim(e),
                        t: o.vasttype,
                        ldr: new VastLoader(!0)
                    }),
                    i < 5 && VastPreloadLoad(o.vast_loaders[o.vast_loaders.length - 1])
                }
            }
        }
        function VastPreloadLoad(e) {
            e && (e.load = 1,
            e.ldr.Load(e.x, e.t))
        }
        function VastRemoveAndPlay(e) {
            var t = VastAndLimit();
            if (log("VAST remove (" + o.vast_impressions + ")"),
            vasturl.length > 0 && vast_and == vasturl.length - 1 && 0 == vasturl[0][0].indexOf("js:") && (vast_and = -1,
            vasturl = [[vasturl[0][0]]]),
            2 == o.vast_stop && (t = !0),
            vasturl.length > vast_and + 1 && !t) {
                o.vast.RemoveForNextAd(),
                VastBgLoad(),
                vast_and++,
                o.adscounter++,
                vast_or = 0;
                var i = trim(vasturl[vast_and][0])
                  , s = VastPreloaded(i);
                "skip" == s && (o.vastloader = new VastLoader,
                o.vastloader.Load(i, vast_type)),
                "error" == s && VastRemoveAndPlay(e)
            } else {
                if (RemoveCurtain(),
                o.controls.StopWaiting(),
                exist(o.vast) && (o.vast.Remove(),
                o.vast = null),
                o.vastloader = null,
                vasturl = [],
                vast_or = 0,
                vast_and = 0,
                o.vastfrombg = 0,
                1 != o.shwvstfnsh && js("vast_finish", o.vasttype),
                o.shwvstfnsh = 0,
                1 == v.vast_ima && o.ima) {
                    try {
                        o.ima.Destroy()
                    } catch (e) {
                        log(o.ima, e)
                    }
                    o.ima = void 0
                }
                var r;
                if (vast_type = "",
                o.vast_impressions = 0,
                o.vpaid_starts = 0,
                o.current_vast_url = "",
                clearTimeout(o.vast_longtimeout),
                clearInterval(o.vldcntrInterval),
                o.vast_longtomsg && o.vast_longtomsg.remove(),
                o.vast_loadtxt && o.vast_loadtxt.hide(),
                o.vast_starts++,
                "preroll" == o.vasttype || "pauseroll" == o.vasttype && 1 == v.pauserollonplay && o.actplay || "midroll" == o.vasttype)
                    if ("?" != v.file)
                        o.media.AfterVast(),
                        o.vstdwn && (o.actions.Download(),
                        o.vstdwn = !1,
                        r = !0),
                        "youtube" == o.file_type && !o.vastclick && o.system.ios && (r = !0,
                        "preroll" == o.vasttype && o.media.reYT()),
                        r || "dontplay" == e || 1 == v.vast_dontplay || o.vstpause ? o.vstpause = !1 : o.actions.Play(1);
                o.resizeonplay > 0 && (NewAspect(o.resizeonplay),
                o.resizeonplay = 0),
                "postroll" == o.vasttype && End(),
                o.vastclick = !1,
                o.vasttype = null
            }
        }
        function Curtain() {
            o.curtain || (o.curtain = createElement("div"),
            o.frame.appendChild(o.curtain),
            Pos0(o.curtain),
            css(o.curtain, {
                background: "#000000",
                opacity: .1
            }),
            o.curtain.style.zIndex = 1001)
        }
        function RemoveCurtain() {
            o.curtain && (o.frame.removeChild(o.curtain),
            o.curtain = null)
        }
        function ShowPoster() {
            if (exist(o.poster)) {
                var e = o.fullscreen ? existv(v.posterfull, v.poster) : v.poster;
                e != o.currentposter && Poster(e, o.poster, v.poster_scale),
                show(o.poster),
                css(o.poster, {
                    opacity: v.poster_a
                }),
                o.controls.refresh(),
                o.pstrv && o.pstrv.play()
            }
        }
        function HidePoster2() {
            clearTimeout(o.pstr_to),
            1 == v.posteronpause && !o.play || 1 == v.showposter ? 1 == v.showposter && ShowPoster() : (css(o.poster, {
                opacity: 0
            }),
            setTimeout(HidePoster3, 500))
        }
        function HidePoster3() {
            (o.play || 1 != v.posterhide) && (hide(o.poster),
            o.pstrv && o.pstrv.pause(),
            o.controls.refresh())
        }
        function StopOtherPlayer(e) {
            if (1 == v.stopotherplayers)
                for (var t = 0; t < window.pljssglobal.length; t++)
                    window.pljssglobal[t] && window.pljssglobal[t].api("id") != v.id && window.pljssglobal[t].api("pause", 1 == v.stpoad ? 1 : 0);
            window.pljssglobalid = v.id
        }
        function IndexPlaylist(e) {
            var t = Object.keys(e).length;
            return o.pldur = 0,
            t > 0 && (e = IndexPlaylistProcessor(e, t, "", -1)),
            e
        }
        function IndexPlaylistProcessor(e, t, i, s) {
            var r, n = [];
            exist(e.playlist) && (t = (e = e.playlist).length);
            for (var a = 0, l = 0; l < t; l++) {
                if (r = !1,
                exist(e[l].id) && (e[l].pjs_id = e[l].id),
                e[l].id = "x" + i + "-" + l + (exist(e[l].id) ? "-" + e[l].id : ""),
                -1 == s && 0 == l && !exist(e[l].folder) && (o.pl_first_id = e[l].id),
                exist(o.pl_first_id) || 0 == s && !exist(e[l].folder) && (o.pl_first_id = e[l].id),
                e[l].pjs_parent = i,
                e[l].pjs_parent_i = s,
                e[l].pjs_i = a,
                exist(e[l].duration) && (o.pldur += e[l].duration),
                exist(e[l].comment)) {
                    e[l].title = e[l].comment;
                    var c = e[l].file ? e[l].file.indexOf("[") : 0
                      , d = e[l].file ? e[l].file.indexOf("]") : 0;
                    if (c > 0 && d > 0) {
                        for (var u = e[l].file.substr(c + 1, d - c - 1), v = u.split(","), p = "", f = 0; f < v.length; f++)
                            p += "[" + v[f] + "]" + e[l].file.replace("[" + u + "]", v[f]) + (f < v.length - 1 ? "," : "");
                        e[l].file = p
                    }
                }
                if (exist(e[l].playlist) && (e[l].folder = e[l].playlist),
                exist(e[l].folder) || exist(e[l].file) && ("" != e[l].file || exist(e[l].redirect)) || (r = !0),
                r || (o.playlist_dic[e[l].id] = e[l],
                a += 1),
                exist(e[l].folder)) {
                    var h = Object.keys(e[l].folder).length;
                    h > 0 && (e[l].folder = IndexPlaylistProcessor(e[l].folder, h, e[l].id, l))
                }
                r || n.push(e[l])
            }
            return n
        }
        function FindFileInPlaylist() {
            var e = [];
            if (exist(v.plstart)) {
                if (0 != v.plstart.indexOf("x-"))
                    for (var t in o.playlist_dic)
                        o.playlist_dic.hasOwnProperty(t) && o.playlist_dic[t].pjs_id == v.plstart && (v.plstart = t);
                exist(o.playlist_dic[v.plstart]) ? (1 == v.playlist.norootplstart && (v.playlist.openplaylistroot = 0),
                e = o.playlist_dic[v.plstart]) : (e = o.playlist[0],
                v.plstart == o.plcontinue && (o.seekto = void 0))
            } else
                e = o.playlist[0];
            if (e) {
                for (var i = 0; i < 10 && exist(e.folder); i++)
                    e = e.folder[0];
                v.plstart = e.id,
                v.plstart == o.plcontinue && "continue" != e.start && (e.start = void 0)
            }
            return e
        }
        function plNxtExst() {
            var e = !1;
            return o.controls && o.controls.PlaylistExist() && (1 != v.playlist.autoplaylist && 1 != v.autonext || !o.controls.PlaylistNextExist() || (e = !0)),
            e
        }
        function End() {
            gaTracker("end", "End", 1),
            o.actions.VastRecover(),
            o.storage && 1 == v.timestore && o.continue.write(0, o.media.duration()),
            o.controls.PlaylistExist() ? plNxtExst() ? exist(v.playlist.apto) ? o.plapto = setTimeout((function() {
                o.controls.PlaylistNext()
            }
            ), 1e3 * v.playlist.apto) : o.controls.PlaylistNext() : End2() : (1 == v.finishnormal && o.fullscreen && o.actions.Normalscreen(),
            End3())
        }
        function End2() {
            1 != v.playlist.autoplaylist || 1 != v.playlist.playlistrewind || o.controls.PlaylistNextExist() ? (1 == v.playlist.openplaylistafter && !o.controls.PlaylistVisible() && o.controls.Playlist(),
            End3()) : o.controls.PlaylistRewind()
        }
        function End3() {
            1 == v.effects && o.effects.api("end"),
            js("finish"),
            1 == v.redirect && 1 == v.redirectafter && exist2(v.after) && redirect(v.after),
            v.rel && "undefined" != typeof PluginRel && (o.rel ? o.rel.Open() : o.rel = new PluginRel),
            !o.rel && ShowPoster()
        }
        function fjs(x) {
            if (0 == x.indexOf("js:"))
                try {
                    x = eval(x.substr(3))
                } catch (e) {
                    console.log(e.message)
                }
            return x || ""
        }
        this.FullscreenUI = function() {
            if (o.fullscreen_start) {
                if (o.fullscreen = !0,
                o.controls.Fullscreen(),
                !o.realfullscreen) {
                    if (exist(o.parentIframe))
                        try {
                            css(o.parentIframe, {
                                width: "100%",
                                height: "100%",
                                position: "fixed",
                                left: 0,
                                top: 0,
                                zIndex: "100000"
                            })
                        } catch (e) {}
                    css(o.frame, {
                        width: "100%",
                        height: "100%",
                        position: "fixed",
                        left: 0,
                        top: 0,
                        zIndex: "100000"
                    }),
                    o.screen_w = o.frame.offsetWidth,
                    o.screen_h = o.frame.offsetHeight;
                    try {
                        document.body.style.overflow = "hidden",
                        exist(o.playlist) || (document.ontouchmove = function(e) {
                            e.preventDefault()
                        }
                        )
                    } catch (e) {}
                }
                if (1 == v.fullblack && css(o.frame, {
                    backgroundColor: "#000000"
                }),
                1 == v.fzoom && 1 == o.system.webkit && !o.system.ff) {
                    for (var e = window.screen.width, t = 1, i = 1; i < 6; i++)
                        e > 1e3 * i && (t = existv(v["fzoom" + 1e3 * i], i));
                    t > 1 && (o.frame.style.zoom = t,
                    v.zm = t,
                    MainResize())
                }
                o.droplist && o.droplist.Close(),
                Sub(),
                o.fullscreen_start = !1
            }
        }
        ,
        this.Normalscreen = function() {
            _fullscreen_end = !0,
            document.cancelFullScreen ? document.cancelFullScreen() : document.exitFullscreen ? document.exitFullscreen() : document.cancelFullscreen ? document.cancelFullscreen() : document.mozCancelFullScreen ? document.mozCancelFullScreen() : document.webkitCancelFullScreen ? document.webkitCancelFullScreen() : document.msExitFullscreen && document.msExitFullscreen(),
            o.realfullscreen || this.NormalscreenUI(!1)
        }
        ,
        this.changeAspect = function(e, t) {
            NewAspect(e, t)
        }
        ,
        this.NormalscreenUI = function(e) {
            if (_fullscreen_end || e) {
                if (o.fullscreen = !1,
                o.nativefull = !1,
                !o.realfullscreen) {
                    if (exist(o.parentIframe))
                        try {
                            css(o.parentIframe, {
                                position: "static",
                                left: 0,
                                top: 0,
                                zIndex: "unset"
                            }),
                            css(o.parentIframe, o.parentIframe_style),
                            css(o.parentIframe, {
                                width: o.normal_w,
                                height: o.normal_h
                            })
                        } catch (e) {}
                    css(o.frame, {
                        width: o.normal_w,
                        height: o.normal_h,
                        position: "absolute",
                        left: 0,
                        top: 0,
                        zIndex: "unset"
                    });
                    try {
                        document.body.style.overflow = "auto",
                        document.ontouchmove = function(e) {
                            return !0
                        }
                    } catch (e) {}
                }
                o.controls.Normalscreen(),
                1 == v.fullblack && (css(o.frame, {
                    backgroundColor: v.screencolor
                }),
                1 == v.transparent ? o.frame.style.backgroundColor = "transparent" : css(o.frame, {
                    backgroundColor: v.screencolor
                })),
                v.zm > 1 && (o.frame.style.zoom = 1,
                v.zm = 1,
                MainResize()),
                1 == v.hotkey.volumewheelfull && (VolumeWheelX(!1),
                o.volumewheel = !1),
                o.droplist && o.droplist.Close(),
                Sub(),
                o.subdrag && (o.subdrag = !1),
                o.controls.PlaylistHere(),
                _fullscreen_end = !1,
                js("exitfullscreen"),
                o.realfullscreen = !1,
                o.fullscreen_process = !1
            }
        }
        ,
        this.volumewheel = function(e) {
            0 != v.hotkey.vlscrl && VolumeWheelX(e)
        }
        ,
        this.Stop = function(e) {
            v.preload = 0,
            1 != e && (o.controls.Pause(),
            o.actions.Stopped()),
            o.media.Volume(v.volume),
            o.controls.SettingsVisible() && o.controls.Settings(),
            o.muted && this.Mute(),
            Sub(0),
            log("stop"),
            js("stop")
        }
        ,
        this.StopMedia = function() {
            v.preload = 0,
            v.autoplay = 0,
            v.livewakeup = 0,
            1 == v.reload && (v.reload = 9),
            o.media.Recover(),
            o.actions.Stop()
        }
        ,
        this.SetQuality = function(e) {
            exist(o.current_quality) && o.current_quality != e && (o.current_quality = e,
            1 == v.qualitystore && (o.default_quality = o.files_quality[e],
            o.storage && localStorage.setItem("pljsquality", o.default_quality)),
            o.media.SetQuality(e),
            js("quality", o.files_quality[e]),
            o.controls.QualityChanged(e))
        }
        ,
        this.AirplayChanged = function() {
            o.controls && o.controls.AirplayChanged()
        }
        ,
        this.SetAudioTrack = function(e) {
            exist(o.current_audiotrack) && o.current_audiotrack != e && (o.current_audiotrack = e,
            1 == v.trackstore && (o.default_audio = v.default_audio = o.files_audiotrack[e],
            o.storage && localStorage.setItem("pljstrack", o.default_audio)),
            o.media.SetAudioTrack(e),
            js("audiotrack", e),
            o.controls.SettingChanged("audiotrack"))
        }
        ,
        this.SetSpeed = function(e, t) {
            "0.0" == e && (e = .1);
            var i = e;
            if (String(i).indexOf(".") > 0 && (t = 1),
            i *= 1,
            t || (i = e == o.speed1 ? 1 : o.files_speed[e],
            o.current_speed = e),
            i = parseFloat(i),
            o.line_speed || t) {
                o.custom_speed = i;
                for (var s = 0; s < o.files_speed.length; s++)
                    if (i <= 1 * o.files_speed[s]) {
                        o.current_speed = s;
                        break
                    }
            }
            o.storage && 1 == v.speedstore && localStorage.setItem("pljsspeed", i),
            js("speed", i),
            o.media.SetSpeed(i),
            o.controls.SettingChanged("speed")
        }
        ,
        this.RenewSubtitle = function() {
            o.sbt && (Sub(),
            o.sbt.style())
        }
        ,
        this.Subtitle = function(e) {
            "function" == typeof PluginSub && (!o.sbt && (o.sbt = new PluginSub),
            o.sbt.check(e))
        }
        ,
        this.advertising = function(e) {
            Advertising(e)
        }
        ,
        this.isVastBgLoad = function(e) {
            return isVastBgLoad(e)
        }
        ,
        this.VastImpression = function(e) {
            !e && VastVisible(),
            "midroll" == o.vasttype && o.midrollimprsd.push(o.current_vast_url)
        }
        ,
        this.VpaidStarted = function() {
            VastVisible()
        }
        ,
        this.VastShow = function() {
            VastVisible()
        }
        ,
        this.VastReady = function(e) {
            if (o.vastloader = null,
            o.vastfrombg = 0,
            log("VAST ready", o.vasttype),
            js("vast_ready", o.vasttype),
            "overlay" == e.type) {
                var t = new VastOverlay(e);
                o.overlays.push(t)
            } else
                exist(o.vast) ? (0 != v.preload || 1 != v.vastbgpreload || 0 != o.media.time() || o.metadata || (v.preload = 1,
                o.media.Preload()),
                (!o.vast.tagLive() || e.isVpaid) && o.vastgo > 0 && (log("VAST renew"),
                o.vast.Remove(),
                o.vast = null,
                o.vast = new VastVideo),
                isVastBgLoad() ? VastBgLoad() : o.play && (o.media.Pause(),
                o.controls.Pause()),
                o.vastgo++,
                o.adsfirst && v.vast_longtimeout > 0 && (clearTimeout(o.vast_longtimeout),
                o.vast_longtimeout = setTimeout(VastLongTimeout, 1e3 * v.vast_longtimeout * 60),
                exist(v.vast_longtimemsg) && "" != v.vast_longtimemsg && (o.vast_longtomsg && o.vast_longtomsg.remove(),
                o.vast_longtomsg = new PluginVastTimeMsg)),
                o.adsfirst = !1,
                v.vast_prestarttimeout > 0 ? (log("VAST startdelay"),
                js("vast_startdelay"),
                setTimeout(VastGo, 1e3 * v.vast_prestarttimeout, e)) : VastGo(e)) : log("VAST alarm")
        }
        ,
        this.VastError = function() {
            js("vast_error", o.vasttype),
            log("VAST error"),
            VastCheckNext()
        }
        ,
        this.VastNext = function() {
            VastCheckNext()
        }
        ,
        this.VastRemoveUrl = function(e) {
            if (v[o.vasttype + "_recover"])
                for (var t = 0; t < 3; t++)
                    v[o.vasttype + "_recover"] = v[o.vasttype + "_recover"].replace(e + (0 == t ? " and " : 1 == t ? " or " : ""), "")
        }
        ,
        this.VstAndLmt = function() {
            return VastAndLimit()
        }
        ,
        this.VastInsertAnd = function(e, t) {
            if ("" != e) {
                var i = vast_and
                  , s = !1;
                if (t)
                    for (var r = 0; r < vasturl.length; r++)
                        vasturl[r] == t && (i = r);
                if (1 == vasturl.length && vasturl[0].length > 1 && vast_or < vasturl[0].length - 1 && vasturl[vast_or]) {
                    var n = vasturl[vast_or].slice(1, 99);
                    vasturl[0].splice(vast_or + 1, 99),
                    s = !0
                }
                if ("object" == typeof e)
                    for (var a = 0; a < e.length; a++)
                        vasturl.splice(i + a + 1, 0, [e[a]]),
                        o.system.ie9 ? VastAddPreload(e[a]) : setTimeout(VastAddPreload, 100 * a, e[a]);
                else
                    "string" == typeof e && (vasturl.push([e]),
                    VastAddPreload(e));
                s && (vasturl[vasturl.length - 1] = vasturl[vasturl.length - 1].concat(n))
            }
        }
        ,
        this.VastInsertOr = function(e, t) {
            if ("" != e) {
                var o = vast_and;
                if (t)
                    for (var i = 0; i < vasturl.length; i++)
                        vasturl[i] == t && (o = i);
                if (vasturl[o])
                    if ("object" == typeof e)
                        for (var s = 0; s < e.length; s++)
                            vasturl[o].push(e[s]);
                    else
                        "string" == typeof e && vasturl[o].push(e)
            }
        }
        ,
        this.VastRemoveAndPlay = function(e) {
            VastRemoveAndPlay(e)
        }
        ,
        this.EmptyVastUrl = function() {
            vasturl = [[""]]
        }
        ,
        this.VastRecover = function(e) {
            for (var t, i = ["preroll", "pauseroll", "postroll", "intro", "outro"], s = 0; s < i.length; s++)
                t = !1,
                e && e != i[s] && (t = !0),
                !t && exist(v[i[s].concat("_", "recover")]) && (v["vast_" + i[s].concat("_", "limit")]--,
                v["vast_" + i[s].concat("_", "limit")] > 0 && (v[i[s]] = v[i[s].concat("_", "recover")],
                v[i[s].concat("_", "recover")] = null));
            if (("preroll" == e || "midroll" == e) && v.vast_midroll_limit > 1 && exist(o.midrollo) && 1 == v.midrolls) {
                for (var s in o.midrollo)
                    o.midrollo[s].worked = void 0;
                v.vast_midroll_limit--
            }
        }
        ,
        this.Password = function() {
            Curtain(),
            exist(o.pass) && (o.pass.Remove(),
            o.pass = null),
            o.pass = new Pass
        }
        ,
        this.RemovePassword = function() {
            RemoveCurtain(),
            o.pass.Remove(),
            o.pass = null
        }
        ,
        this.Curtain = function() {
            Curtain()
        }
        ,
        this.RemoveCurtain = function() {
            RemoveCurtain()
        }
        ,
        this.HidePoster = function() {
            exist(o.poster) && (isVisible(o.poster) && (clearInterval(o.pstrsin),
            0 == o.media.time() && 1 == v.posterhidestart || (v.posterhidetime > 0 ? (clearTimeout(o.pstr_to),
            o.pstr_to = setTimeout(HidePoster2, 1e3 * v.posterhidetime)) : HidePoster2())))
        }
        ,
        this.ShowPoster = function() {
            ShowPoster()
        }
        ,
        this.plNxtExst = function() {
            return plNxtExst()
        }
        ,
        this.ShuffleEnd = function() {
            End2()
        }
    }
      , Media = function(url) {
        var url, urls, urls_and, current_url, _status = "", _lastime = 0, _ended = !1, _stopped = !1, _tags, media, media2, wait;
        o.mediascale = {
            x: 1,
            y: 1,
            x0: 1,
            y0: 1
        };
        var plurls = [], current_plurl = 0, rldcnt = 0, hlsend_to;
        if ("string" == typeof url) {
            if (url = trim(url),
            0 == url.indexOf("[{"))
                try {
                    url = url.replace(/pjs'qt/gi, '"'),
                    url = JSON.parse(url),
                    wait && (url = o.actions.File(url))
                } catch (e) {
                    url = "incorrect JSON"
                }
            0 == url.indexOf("#" + v.enc2) && (url = o[o.fd[0]](url)),
            url && 0 == url.indexOf("#" + v.enc3) && url.indexOf(v.file3_separator) > 0 && (wait = !0,
            o[o.fd[1]](url, Start)),
            url && 0 == url.indexOf("#0") && (url = url.indexOf(o.pltxt) > 0 ? fd0(url.replace(o.pltxt, "")) + o.pltxt : fd0(url)),
            1 == v.fplace && (url = fplace(url)),
            "string" == typeof url && (url.indexOf(".m3u") == url.length - 4 || url.indexOf(".txt") > 0) && (plurls = url.split(" or "),
            PlaylistLoad())
        }
        function Swiping() {
            var e, t = o.mediacontainer.offsetLeft, i = o.screen_w;
            1 == v.hotkey.swipev && (t = o.mediacontainer.offsetTop,
            i = o.screen_h),
            t > i * existv(v.hotkey.swipep, .5) ? o.controls.PlaylistPrevExist() && (e = !0,
            o.controls.PlaylistPrev()) : t < -i * existv(v.hotkey.swipep, .5) && o.controls.PlaylistNextExist() && (e = !0,
            o.controls.PlaylistNext()),
            e ? 1 == v.hotkey.swipev ? css(o.mediacontainer, {
                top: 0
            }) : css(o.mediacontainer, {
                left: 0
            }) : new Motion({
                mc: o.mediacontainer,
                type: 1 == v.hotkey.swipev ? "top" : "left",
                to: 0,
                time: .1,
                ease: "back",
                me: "mdswp"
            })
        }
        function PlaylistLoad() {
            (url = plurls[current_plurl]).indexOf(o.pltxt) > 0 && (url = url.replace(o.pltxt, ""),
            v.file = url);
            var e = XHR(url);
            e.onload = function() {
                4 == this.readyState && 200 == this.status ? (Playlist(this),
                o.controls.NewPl()) : PlaylistError(1)
            }
            ,
            e.onerror = function(e) {
                PlaylistError(3)
            }
            ,
            e.send(),
            wait = !0
        }
        function PlaylistError(e) {
            plurls.length > 1 && current_plurl + 1 < plurls.length && (current_plurl++,
            PlaylistLoad(),
            e = 0),
            1 == e && onError("playlist not found or access denied"),
            2 == e && onError("playlists JSON")
        }
        function Playlist(e) {
            if (e.responseText) {
                var t = e.responseText;
                if (0 == t.indexOf("#" + v.enc2) && (t = o[o.fd[0]](t)),
                0 == t.indexOf("#" + v.enc3) && t.indexOf(v.file3_separator) > 0 && (t = o[o.fd[1]](t)),
                url.indexOf(".m3u") == url.length - 4) {
                    var i = t.split(/(\r\n\t|\n|\r\t)/gm);
                    url = [];
                    for (var s = 1, r = "", n = 0; n < i.length; n++)
                        if (i[n].indexOf("#EXTINF") > -1)
                            if (i[n].indexOf(" - ") > -1) {
                                var a = i[n].split(" - ");
                                r = a[a.length - 1]
                            } else
                                i[n].indexOf("tvg-name") > -1 && (r = (r = i[n].substr(i[n].indexOf("tvg-name") + 10)).substr(0, r.indexOf('"')));
                        else
                            0 == i[n].indexOf("http") && (url.push({
                                title: "" + ("" != r ? r : s),
                                file: i[n]
                            }),
                            s++,
                            r = "")
                } else {
                    t = t.replace(/(\r\n\t|\n|\r\t)/gm, "");
                    try {
                        url = JSON.parse(t)
                    } catch (e) {
                        console.log(e.message),
                        PlaylistError(2)
                    }
                }
                o.controls && 1 == v.playlist.openplaylistbefore && o.controls.PlaylistShow(2),
                Start(),
                MainResize(),
                setTimeout((function() {
                    js("playlist")
                }
                ), 1)
            }
        }
        function Start(e) {
            (url = o.actions.File(e || url)) && "?" != url && File(url),
            o.play && e && !o.vast && o.media.Play()
        }
        function onError(e, t) {
            var i = !0
              , s = !0;
            js("loaderror", e),
            o.destroyed || (1 == t || 1 != v.reload || 1 != v.reloadfirst ? (urls && (o.play || o.actplay || 1 == v.autoplay && !o.start ? urls.length > 0 && ((i = ++current_url > urls.length - 1) && urls.length > 1 && v.or0 > 0 && (o.or0 < v.or0 && (current_url = 0,
            i = !1),
            o.or0++),
            i && 1 == v.tryotherquality && o.files.length > 1 && (-1 == o.files_quality[o.current_quality].indexOf(Lang("loading_error")) && (o.files_quality[o.current_quality] = o.files_quality[o.current_quality] + " (" + Lang("loading_error") + ")"),
            o.current_quality > 0 ? (s = !1,
            o.actions.SetQuality(o.current_quality - 1),
            FileTo()) : -1 == o.files_quality[o.current_quality + 1].indexOf(Lang("loading_error")) && (s = !1,
            o.actions.SetQuality(o.current_quality + 1),
            FileTo())),
            i ? 1 == v.reload && s && 1 != v.reloadfirst && (i = !1,
            ErrorReload()) : (!(o.seekto > 0 || !o.start || media.isLive()) && (o.seekto = Time()),
            o.file_type == FileType(urls[current_url]) && o.tagvideo || o.play && o.actions.Stop(1),
            o.fatal = !1,
            v.filerorto > 0 ? (clearTimeout(o.errorto),
            o.errorto = setTimeout(ErrorOr, 1e3 * v.filerorto)) : ErrorOr())) : (i = !1,
            o.start || ErrorOr())),
            i && s && e && ErrorMsg(e, !0)) : ErrorReload())
        }
        function ErrorOr() {
            o.destroyed || (o.play || o.actplay || 1 == v.autoplay && !o.start ? (log("Alternative source", o.seekto),
            File("or"),
            o.start && !o.vast && media.Play(),
            FileTo()) : o.start ? (clearTimeout(o.errorto),
            o.errorto = setTimeout(ErrorOr, 1e3 * exist2(v.filerorto, 5))) : urls.length > 0 && current_url + 1 < urls.length && (current_url++,
            o.or0++,
            File("or")))
        }
        function ErrorMsg(e, t) {
            gaTracker("error", "Error", !0),
            o.newplay = !1,
            1 != v.alerts || o.media_error || (1 == v.alert404 ? o.alert.txt(v.alert404text) : o.alert.txt(e),
            1 == v.alert404v && exist(v.alert404video) && (o.err404v = new PluginErrorVideo,
            o.actions.HidePoster())),
            t && (o.media_error = !0),
            o.play && (o.actions.StopWaiting(),
            o.controls.Pause()),
            exist(o.poster) && !exist(o.err404v) && o.actions.ShowPoster(),
            js("error", e)
        }
        function ErrorReload() {
            rldcnt++,
            log("Error Reload Timeout " + rldcnt),
            o.play && (o.rldplay = 1),
            exist(o.reloadto) && clearTimeout(o.reloadto),
            o.reloadto = setTimeout(ReloadTimeout, 1e3 * v.reloadtimeout)
        }
        function ReloadTimeout() {
            var e = existv(v.reloadtimes, 10);
            (o.play || 1 == o.rldplay) && (o.rldplay = 0,
            rldcnt < e ? o.actions.Reload() : 1 == v.reloadfirst ? onError(media.errorMessage(), 1) : ErrorMsg("Reload Error " + media.errorMessage()))
        }
        function Time() {
            return media.time()
        }
        function Duration() {
            return media.duration()
        }
        function ChkHlsEnd() {
            _ended || (o.actions.Pause(),
            o.media.onEnded())
        }
        function RenameQualities(e, t) {
            var o = e.height + "p";
            return e.height < 200 ? o = "160p" : e.height >= 200 && e.height <= 300 ? o = "240p" : e.height > 300 && e.height <= 400 ? o = "360p" : e.height > 400 && e.height <= 500 ? o = "480p" : e.height > 500 && e.height <= 600 ? o = "540p" : e.height > 600 && e.height <= 900 ? o = "720p" : e.height > 900 && e.height <= 1150 ? o = "1080p" : e.height > 1150 && e.height <= 1550 ? o = "1440p" : e.height > 1550 && e.height <= 1800 ? o = "1600p" : e.height > 1800 && (o = "2160p"),
            426 == e.width && e.height <= 240 ? o = "240p" : 640 == e.width && e.height <= 360 ? o = "360p" : 854 == e.width && e.height <= 480 ? o = "480p" : 1280 == e.width && e.height <= 720 ? o = "720p" : 1920 == e.width && e.height <= 1080 ? o = "1080p" : 2560 == e.width && e.height <= 1440 ? o = "1440p" : 3840 == e.width && e.height <= 2160 && (o = "2160p"),
            1 == v.settings.customqualities && exist(v.settings["name" + o]) ? o = v.settings["name" + o] : (1 == t && (o = Lang(o)),
            2 == t && exist(e.bitrate) && (o = parseInt(e.bitrate / 1e3) + " " + Lang("kbps"))),
            o
        }
        function RenameTracks(e, t) {
            var o = e.toLowerCase();
            return "eng" == o || "en" == o ? e = "English" : "rus" != o && "ru" != o || (e = ""),
            "object" == typeof v.rename_audio && (e = exist(v.rename_audio[e]) ? v.rename_audio[e] : existv(v.rename_audio[t.toString()], e)),
            e
        }
        function NativeSubtitle() {
            if (o.tagvideo && o.subs && !o.nativesub) {
                media.removeTracks();
                for (var e = 0; e < o.subs.length; e++)
                    "all" != o.subs[e] && media.addTrack(o.subs[e], o.files_subtitle[e], e == o.current_subtitle);
                o.nativesub = !0
            }
        }
        function autoQuality() {
            var e = !1;
            return media && ("youtube" == o.file_type && (e = media.auto()),
            "hls" == o.file_type && 1 == v.hlsquality && HlsLevelsLength() > 1 && 1 == v.hlsautoquality && (e = media.auto()),
            "dash" == o.file_type && 1 == v.dashquality && DashLevelsLength() > 1 && (e = media.auto())),
            e
        }
        function HlsLevelsLength() {
            return "hls" == o.file_type ? media.HlsLevelsLength() : 0
        }
        function DashLevelsLength() {
            return "dash" == o.file_type ? media.DashLevelsLength() : 0
        }
        function Status() {
            _status = media ? media.status() : ""
        }
        function ParseUrl(e) {
            urls = e.split(" or ");
            for (var t = 0; t < urls.length; t++)
                urls[t].indexOf(" and ") > -1 && (urls_and = urls[t].split(" and "),
                urls[t] = urls_and[random(0, urls_and.length - 1)]),
                exist(v.prefile) && -1 == urls[t].indexOf("//") && (urls[t] = v.prefile + urls[t]);
            current_url = 0
        }
        function Timer() {
            Status(),
            ("playing" == _status || o.casting) && o.actions.Playing(),
            "" != _status && o.actions.Loading()
        }
        function CreatePoster() {
            o.poster && o.frame.removeChild(o.poster),
            o.poster = createElement("div"),
            css(o.poster, {
                "pointer-events": "none",
                opacity: v.poster_a,
                transition: "opacity 0.5s"
            }),
            1 == v.poster_float ? PluginFloatPoster() : Pos0(o.poster),
            o.frame.appendChild(o.poster)
        }
        function File(x, y, crt) {
            if (x && 0 == x.indexOf("seek:") && o.playlist)
                return o.seekto = x.substr(5),
                void o.controls.OpenPl(0);
            if (clearTimeout(hlsend_to),
            "" == v.file2_separator && (v.file2_separator = ";"),
            x.indexOf("{") > -1 && x.indexOf("}") > -1) {
                var z = x.split(v.file2_separator);
                o.audiotracks = [];
                for (var i = 0; i < z.length; i++)
                    o.files_audiotrack[i] = z[i].substr(z[i].indexOf("{") + 1, z[i].indexOf("}") - 1),
                    o.audiotracks[i] = z[i].substr(z[i].indexOf("}") + 1),
                    exist(v.default_audio) && v.default_audio == o.files_audiotrack[i] && (o.current_audiotrack = i);
                x = o.audiotracks[o.current_audiotrack]
            }
            !exist(urls) && (urls = []),
            o.fileTimeout && clearTimeout(o.fileTimeout),
            x && "or" != x && "x" != x && ParseUrl(x);
            var ft = o.file_type_old;
            if (urls.length > 0) {
                var fu = urls[current_url];
                if (fu && 0 == fu.indexOf("js:"))
                    try {
                        fu = eval(fu.substr(3))
                    } catch (e) {
                        console.log(e.message)
                    }
                if (fu) {
                    o.file_type = FileType(fu);
                    var create = !1;
                    crt && (create = !0),
                    url = fu,
                    url = url ? url.replace(/\(random\)/g, Math.random()) : urls[0],
                    !create && "x" != x && media && o.file_type == ft && ("native" == ft || "vimeo" == ft && !o.system.mobile || "youtube" == ft && o.start && !_stopped || "dm" == ft || "hls" == ft || "dash" == ft) && !o.hlsfps ? media.src(url) : (log("New"),
                    RemoveMedia(),
                    CreateMedia(url)),
                    o.file_type_old = o.file_type,
                    StartSpeed()
                }
            }
            y || (clearInterval(o.timerInterval),
            o.timerInterval = setInterval(Timer, o.timerTime),
            exist(v.subtitle) || 1 != v.sub_upload || 1 != v.sub_upload0 || (v.subtitle = ""),
            exist(v.subtitle) && o.actions.Subtitle(v.subtitle),
            1 == v.hidevideo && (1 == v.nativecontrolsmobile && o.system.mobile || ("youtube" == o.file_type ? css(o.mediacontainer, {
                top: -3e3,
                left: -3e3
            }) : hide2(o.mediacontainer),
            v.toolbar.hide = 0)))
        }
        function StartSpeed(e) {
            (o.speed1 || e) && (o.line_speed ? media.setSpeed(o.custom_speed) : o.current_speed != o.speed1 && media.setSpeed(o.files_speed[o.current_speed]))
        }
        function FileType(e) {
            var t = "native";
            if (e)
                if (e.indexOf(".m3u8") > 0)
                    t = "hls";
                else if (e.indexOf(".mpd") > 0)
                    t = "dash";
                else if (0 == e.indexOf("w") && 1 == e.indexOf("s"))
                    t = o.ws;
                else if (e.indexOf("youtube.com/") > -1 || e.indexOf("youtu.be/") > -1)
                    if ("function" == typeof MediaYoutube) {
                        if (t = "youtube",
                        1 == v.youtubeposter) {
                            var i = "https://img.youtube.com/vi/" + YoutubeID(e) + "/";
                            imageExists(i + "maxresdefault.jpg", (function(e) {
                                v.poster = e > 100 ? i + "maxresdefault.jpg" : i + "hqdefault.jpg",
                                o.playlist_dic && (o.playlist_dic[o.plid].poster = v.poster),
                                1 != v.autoplay && !o.start && Poster(v.poster, o.poster, v.poster_scale)
                            }
                            ))
                        }
                    } else
                        log("No YouTube");
                else
                    1 == v.vimeo && e.indexOf("vimeo.com/") > -1 ? t = "vimeo" : 1 == v.mediart && e.indexOf("utube.r") > -1 ? t = "rt" : 1 == v.pjsframe && "function" == typeof PjsFramed && PjsFramed(e) && (t = "pjs");
            return o.file_yv = "youtube" == t || "vimeo" == t || "rt" == t,
            o.tagvideo = "native" == t || "hls" == t || "dash" == t || t == o.ws,
            t
        }
        function imageExists(e, t) {
            var o = new Image;
            o.onload = function() {
                t(this.height)
            }
            ,
            o.src = e
        }
        function CreateMedia(x) {
            o.file_type = FileType(x),
            o.tagvideo && (media = new MediaVideo(x,o.mediacontainer,!1)),
            o.file_yv && (media = eval("new Media" + o.file_type[0].toUpperCase() + o.file_type.slice(1) + "(x,o.mediacontainer);")),
            "pjs" == o.file_type && (media = new MediaPjs(x)),
            o.controls && o.controls.UpdateSettings(),
            ChkDrt()
        }
        function ChkDrt() {
            if (exist(v.duration)) {
                var e = 0;
                o.continue && 1 == v.timestore && !o.start && (e = o.continue.flag().t),
                setTimeout((function() {
                    o.actions.Duration(e, v.duration)
                }
                ), 100)
            }
        }
        function RemoveMedia() {
            media && (media.Remove(),
            media = null,
            _status = "ended"),
            media2 && (media2.Remove(),
            media2 = null,
            media2 = void 0,
            o.mediapip.remove(),
            o.media2 = null,
            o.mediapip = null)
        }
        function FileTo() {
            v.fileto > 0 && urls.length > 1 && (0 != Duration() && 1 != v.filetod || (clearTimeout(o.fileTimeout),
            o.fileTimeout = setTimeout(FileTimeout, 1e3 * v.fileto)))
        }
        function FileTimeout() {
            !o.play || 0 != Duration() && 1 != v.filetod || 0 != Time() || o.errorto || media && 0 == media.loaded() && current_url != urls.length - 1 && onError("File Timeout")
        }
        function VstLdTxt(e) {
            1 == v.vast_loadtxtd && exist2(v.vast_loadtxt) && (exist(o.vast_loadtxt) ? o.vast_loadtxt.show(e) : "function" == typeof PlgnVstLdtx && (o.vast_loadtxt = new PlgnVstLdtx))
        }
        function Scale(e) {
            if (String(e).indexOf(":") > 0) {
                var t = e.split(":")
                  , i = o.screen_w / o.screen_h
                  , s = o.media.size();
                s.width > 0 && (i = s.width / s.height);
                var r = t[0] / t[1];
                if (i != r) {
                    o.tagvideo && media.ObjectFit();
                    var n = o.screen_h * r / o.screen_w
                      , a = o.screen_w / r / o.screen_h;
                    n < 1 ? (o.mediascale.x0 = o.mediascale.x = parseFloat(n),
                    o.mediascale.y = 1) : (o.mediascale.x = 1,
                    o.mediascale.y0 = o.mediascale.y = parseFloat(a)),
                    Scl(),
                    o.custom_aspect = e
                }
            } else
                o.mediascale.x += parseFloat(e),
                o.mediascale.y += parseFloat(e),
                Scl();
            1 == v.hotkey.scaledrag && (o.mediadrag || (o.mediascale.x > 0 || o.mediascale.y > 1) && (PluginMovable(o.mediacontainer, "o.dragging"),
            o.mediadrag = !0),
            xy00()),
            o.controls && o.controls.MenuProc("scale"),
            ScaleStore()
        }
        function Scl() {
            css(o.mediacontainer, {
                transform: "scaleX(" + o.mediascale.x + ") scaleY(" + o.mediascale.y + ")"
            }),
            o.controls && o.controls.MenuProc("scale")
        }
        function ScaleStore() {
            o.storage && 1 == v.scalestore && (localStorage.setItem("pljssclx", o.mediascale.x),
            localStorage.setItem("pljsscly", o.mediascale.y))
        }
        function xy00() {
            o.mediadrag && 1 != v.hotkey.scaledrag0 && 1 == o.mediascale.x && 1 == o.mediascale.y && css(o.mediacontainer, {
                top: 0,
                left: 0
            })
        }
        function currentFile() {
            return urls && urls.length > 0 && urls[current_url] ? urls[current_url] : ""
        }
        function RadioTags() {
            var e = XHR(v.tagsurl + "?url=" + urls[current_url]);
            e.onload = function() {
                4 == this.readyState && 200 == this.status && this.responseText && (v.title = this.responseText,
                o.actions.Title("title"))
            }
            ,
            e.send()
        }
        o.mediacontainer = createElement("div"),
        Pos0(o.mediacontainer),
        css(o.mediacontainer, {
            transition: "transform 0.2s linear",
            "text-align": "center"
        }),
        o.frame.appendChild(o.mediacontainer),
        1 == v.hotkey.swiping && (o.mdswp || (PluginMovable(o.mediacontainer, "o.swiping", 1 != v.hotkey.swipev, 1 == v.hotkey.swipev, Swiping),
        o.mdswp = !0)),
        wait || Start(),
        this.onError = function(e) {
            onError(e || media.errorMessage())
        }
        ,
        this.onEnded = function(e) {
            log("Ended"),
            _ended = !0,
            clearTimeout(hlsend_to);
            var t = !1;
            if (Duration() > 0 && !o.casting && !e) {
                var i = o.current_time;
                i + 10 < Duration() && (log("Break (recovery)"),
                js("recovery"),
                media.Play(),
                media.Seek(i),
                t = !0)
            }
            t || o.actions.Ended()
        }
        ,
        this.onPlay = function() {
            1 == v.posterhidepause && exist(o.poster) && o.actions.ShowPoster(),
            1 == v.posterhide && o.actions.HidePoster(),
            o.controls.Play(),
            o.actions.onPlayTag(),
            1 == v.tags && exist(v.tagsurl) && v.tagsurl.length > 5 && (RadioTags(),
            clearInterval(_tags),
            _tags = setInterval(RadioTags, 1e3 * v.tagsinterval)),
            js("play")
        }
        ,
        this.NativeControls = function() {
            1 == v.nativecontrolsmobile && o.tagvideo && o.actions.NativeControls() && (o.nativecontrols = media.nativeControls(),
            o.controls.refresh(),
            NativeSubtitle()),
            o.checknative = !0
        }
        ,
        this.onPause = function() {
            !(Time() > 0 && Time() == Duration() && o.actions.plNxtExst()) && o.actions.Pause()
        }
        ,
        this.onSeeking = function() {
            log("Seeking")
        }
        ,
        this.onSeeked = function() {
            log("Seeked"),
            o.actions.Seeked(),
            exist(o.seeking_time) && js("seek", o.seeking_time)
        }
        ,
        this.onMeta = function() {
            log("Metadata"),
            rldcnt = 0,
            o.actions.Metadata(),
            "hls" == o.file_type && StartSpeed(1)
        }
        ,
        this.onDuration = function() {
            media && (log("Duration", Duration()),
            o.actions.Duration(Time(), Duration()),
            js("duration", Duration()),
            rldcnt = 0,
            clearTimeout(o.reloadto),
            exist(o.restart_audio) && (o.actions.SetAudioTrack(o.restart_audio),
            o.restart_audio = null),
            o.stored_dur = void 0)
        }
        ,
        this.onVolume = function() {}
        ,
        this.onWaiting = function() {
            log("Waiting"),
            o.actions.Waiting(),
            js("waiting")
        }
        ,
        this.onTimeupdate = function() {
            _lastime != Time() && (o.curtain || (o.actions.StopWaiting(),
            0 == _lastime && 1 == v.posterhide && 1 == v.posterhidestart && o.actions.HidePoster())),
            _lastime = Time();
            var e = Duration();
            js("time", _lastime),
            1 == v.pip.on && "function" == typeof PluginPip && (!v.file2 && v.pip.file2 && (v.file2 = v.pip.file2),
            !media2 && 1 != v.pip.custom && v.file2 && "" != v.file2 && _lastime > 0 && (o.mediapip = new PluginPip,
            media2 = o.mediapip.create())),
            "hls" == o.file_type && o.system.safari && e > 0 && o.play && _lastime > e - 1 && (clearTimeout(hlsend_to),
            hlsend_to = setTimeout(ChkHlsEnd, 2e3))
        }
        ,
        this.onYoutubeReady = function() {
            "youtube" == o.file_type && media && media.YoutubeReady()
        }
        ,
        this.playByYoutubeId = function(e) {
            o.actions.Stop(),
            media.playId(e)
        }
        ,
        this.pipVol = function(e) {
            exist(e) && (media2 && media2.Volume(e),
            v.pip.volume = e)
        }
        ,
        this.pipSrc = function(e) {
            exist(e) && media2 && (media2.src(e),
            media2.Play())
        }
        ,
        this.YoutubeReady = function() {
            return "youtube" != o.file_type || !media || media.ready()
        }
        ,
        this.getHLS = function() {
            return "hls" == o.file_type ? media.getHLS() : void 0
        }
        ,
        this.getDASH = function() {
            return media.getDASH()
        }
        ,
        this.SetQuality = function(e) {
            if (log("Quality", e),
            ("native" == o.file_type || o.file_type == o.ws || "hls" == o.file_type && (0 == v.hlsquality || HlsLevelsLength() < 2) || "dash" == o.file_type && (0 == v.dashquality || DashLevelsLength() < 2)) && exist(o.files[e])) {
                var t = this.time();
                !(o.seekto > 0) && (o.seekto = t),
                o.actions.Seek(t, !1),
                File(o.files[e], !0);
                var i = !0;
                v.settings && ((1 != v.settings.qualitypause || o.play) && o.start || (i = !1)),
                o.ncrtat > 0 && media.nativeAudioTrack(o.ncrtat),
                i && o.actions.Play()
            }
            "hls" == o.file_type && 1 == v.hlsquality && HlsLevelsLength() > 1 ? media.setHlsQuality(e) : "dash" == o.file_type && 1 == v.dashquality && DashLevelsLength() > 1 ? media.setDashQuality(e) : "youtube" != o.file_type && "rt" != o.file_type || media.setQuality(e)
        }
        ,
        this.renameQualities = function(e, t) {
            return RenameQualities(e, t)
        }
        ,
        this.renameTracks = function(e, t) {
            return RenameTracks(e, t)
        }
        ,
        this.SetSpeed = function(e) {
            log("Speed", e),
            e = parseFloat(e),
            media && media.setSpeed(e),
            1 == v.pip.on && media2 && media2.setSpeed(e)
        }
        ,
        this.nativeSubtitle = function() {
            NativeSubtitle()
        }
        ,
        this.removeNativeSubtitle = function() {
            media.removeTracks()
        }
        ,
        this.SetAudioTrack = function(e) {
            if (log("Audiotrack", e),
            o.audiotracks.length > 0) {
                if (o.audiotracks[e]) {
                    var t = this.time();
                    !(o.seekto > 0) && (o.seekto = t),
                    o.actions.Seek(t, !1),
                    File(o.audiotracks[e], !0),
                    o.actions.Play()
                }
            } else
                "hls" == o.file_type && 1 == v.hlsaudio ? media.setHlsAudioTrack(e) : "dash" == o.file_type && 1 == v.dashaudio ? media.setDashAudioTrack(e) : o.tagvideo && media.nativeAudioTrack(e)
        }
        ,
        this.getQuality = function() {
            var e = o.files_quality[o.current_quality];
            null == e && (e = "");
            var t = autoQuality() && 1 == v.hlsautoquality && 1 == v.hlsquality && e != Lang("auto");
            return (t ? Lang("auto") + " " : "") + (1 == v.onlyauto && t ? "" : e)
        }
        ,
        this.getAudioTrack = function() {
            var e = o.files_audiotrack[o.current_audiotrack];
            return null == e && (e = ""),
            e
        }
        ,
        this.autoQuality = function() {
            return autoQuality()
        }
        ,
        this.ratio = function() {
            return o.tagvideo ? media.ratio() : o.aspect
        }
        ,
        this.resize = function(e) {
            media && (o.file_yv || exist(v.ratio)) && media.resize(),
            v.screenmarginbottom > 0 && css(o.mediacontainer, {
                height: o.fullscreen ? "100%" : o.normal_h - v.screenmarginbottom
            }),
            o.media2 && 1 == v.pip.movable && o.mediapip.resize(),
            1 == v.poster_float && FloatPosterScale(),
            o.v360 && o.v360.resize()
        }
        ,
        this.size = function() {
            return media ? media.size() : {}
        }
        ,
        this.iosfull = function() {
            media.iosfull()
        }
        ,
        this.reload = function() {
            log("reload"),
            o.reloadTimer = 0,
            o.start && (v.autoplay = 1),
            o.actions.Waiting(),
            url && 1 != v.rldnornd && -1 == url.indexOf("(random)") && (url = url + (-1 == url.indexOf("?") ? "?" : "&") + "rand=(random)"),
            url && (o.tagvideo ? (media.src(url),
            this.Play()) : File(url))
        }
        ,
        exist(o.poster) || CreatePoster(),
        exist(v.poster) && ("" != v.poster ? (Poster(v.poster, o.poster, v.poster_scale),
        1 != v.posterhidepause || o.start || hide(o.poster)) : v.poster = null),
        this.Drt = function() {
            ChkDrt()
        }
        ,
        this.Remove = function() {
            RemoveMedia()
        }
        ,
        this.RemoveAll = function() {
            urls = [],
            RemoveMedia()
        }
        ,
        this.File = function(e, t, o) {
            File(e, t, o)
        }
        ,
        this.Poster = function(e) {
            Poster(e, o.poster, v.poster_scale)
        }
        ,
        this.Play = function(e) {
            media ? (_ended = !1,
            _stopped = !1,
            o.casting ? o.chromecast.Play() : (media.Play(e),
            1 == v.posterhide && o.actions.HidePoster()),
            exist(media2) && media2.Play(),
            o.channels && (o.tagvideo ? o.clicktime > 0 && !o.channels.Created() && o.channels.Update() : (o.files_channel = [],
            o.controls.SettingChanged("channel"))),
            o.tagvideo && v.volumegain > -1 && !o.gained && !o.system.ios && o.clicktime > 0 && media.Gain(),
            FileTo()) : setTimeout(this.Play, 500)
        }
        ,
        this.PipSwitch = function(e) {
            if (o.media2) {
                if (1 == v.pip.movable && o.moving[o.media2] > 2)
                    return;
                e && (e.stopPropagation(),
                window.event && (window.event.cancelBubble = !0));
                var t = media;
                media.ChangePip(!0, o.media2),
                media2.ChangePip(!1, o.mediacontainer),
                media = media2,
                media2 = t,
                media.Play(),
                media2.Play(),
                js("pip")
            }
        }
        ,
        this.reYT = function() {
            media.src(url)
        }
        ,
        this.ToolbarHide = function() {
            1 == v.effects && o.effects.api("hide"),
            o.toolbarhidden = !0
        }
        ,
        this.ToolbarShow = function() {
            v.toolbar.resizeme && (v.toolbar.resizeme = !1,
            o.controls && (o.controls.resizeFromText(1),
            o.controls.resizetext())),
            o.toolbarhidden = !1
        }
        ,
        this.PipToggle = function() {
            o.media2 && o.mediapip && o.mediapip.toggle()
        }
        ,
        this.Airplay = function() {
            o.tagvideo && o.airplay && (o.airplayed = !0,
            media.airplay())
        }
        ,
        this.PipWebkit = function() {
            o.tagvideo && o.pipwebkit && media.pipwebkit()
        }
        ,
        this.BeforeVast = function() {
            1 == v.vast_poster && exist(v.vast_posterurl) && (exist(o.vast_poster) ? o.vast_poster.show() : "function" == typeof PlgnVstPstr && (o.vast_poster = new PlgnVstPstr)),
            VstLdTxt(),
            media && (datetime(0),
            media.BeforeVast())
        }
        ,
        this.AfterVast = function() {
            o.vast_poster && o.vast_poster.hide(),
            media && media.AfterVast()
        }
        ,
        this.VstLdTxt = function(e) {
            VstLdTxt(e)
        }
        ,
        this.Pause = function(e) {
            o.casting ? o.chromecast.Pause() : media ? media.Pause(e) : log("nomedia"),
            exist(o.media2) && media2.Pause()
        }
        ,
        this.Recover = function() {
            _stopped = !0,
            o.actions.Seek(0, !1),
            exist(o.poster) && o.actions.ShowPoster(),
            File("x")
        }
        ,
        this.Toggle = function() {
            media && media.Toggle()
        }
        ,
        this.Seek = function(e) {
            media && (o.casting ? o.chromecast.Seek(e) : (media.Seek(e),
            1 == v.pip.on && media2 && media2.Seek(e)))
        }
        ,
        this.Mute = function() {
            media && (media.Mute(),
            o.casting && o.chromecast.Mute(),
            log("mute")),
            1 == v.pip.on && 1 == v.pip.nomute && media2 && media2.Mute()
        }
        ,
        this.Unmute = function() {
            media && (media.Unmute(),
            o.casting && o.chromecast.Unmute(),
            log("unmute")),
            1 == v.pip.on && 1 == v.pip.nomute && media2 && media2.Unmute()
        }
        ,
        this.Volume = function(e) {
            media && media.Volume(e),
            1 == v.pip.on && 1 == v.pip.nomute && media2 && !o.line_volume2 && media2.Volume(e),
            o.casting && o.chromecast.Volume(e)
        }
        ,
        this.isPlaying = function() {
            return !!media && media.isPlaying()
        }
        ,
        this.isLive = function() {
            return !!media && media.isLive()
        }
        ,
        this.status = function() {
            return _status
        }
        ,
        this.ended = function() {
            return _ended
        }
        ,
        this.time = function() {
            var e = 0;
            if (media) {
                if (e = Time(),
                o.casting) {
                    var t = o.chromecast.Time();
                    t && (e = t)
                } else
                    Duration() > 0 && e != Duration() && (o.current_time = e + 1e-4);
                return e
            }
            return 0
        }
        ,
        this.duration = function() {
            var e = 0;
            if (media && (0 == (e = Duration()) && exist(v.duration) && (e = 1 * v.duration),
            o.casting)) {
                var t = o.chromecast.Duration();
                t && (e = t)
            }
            return e
        }
        ,
        this.loaded = function() {
            return media ? media.loaded() : 0
        }
        ,
        this.flip = function() {
            o.mediascale.flip = !o.mediascale.flip,
            css(o.mediacontainer, {
                transform: o.mediascale.flip ? "scaleX(-1)" : "scaleX(1)"
            })
        }
        ,
        this.createposter = function() {
            CreatePoster()
        }
        ,
        this.Preload = function() {
            o.tagvideo && media.preload()
        }
        ,
        this.menufltr = function(e, t) {
            if ("scale" == e)
                1 == t && Scale(v.settings.scale / 100),
                2 == t && Scale(-v.settings.scale / 100),
                3 == t && o.media.normalscale();
            else if (o.tagvideo) {
                o.fltrs[e] || (o.fltrs[e] = "sepia" == e ? 0 : 1),
                1 == t && (o.fltrs[e] += v.settings[e] / 100),
                2 == t && (o.fltrs[e] -= v.settings[e] / 100),
                3 == t && (o.fltrs[e] = "sepia" == e ? 0 : 1),
                !o.cftlr && (o.cftlr = []),
                o.cftlr[e] = e + "(" + parseInt(100 * o.fltrs[e]) + "%) ";
                var i = "";
                for (var s in o.cftlr)
                    i += o.cftlr[s];
                css(media.tag(), {
                    filter: i
                }),
                o.controls.MenuProc(e)
            }
        }
        ,
        this.scale = function(e) {
            Scale(e)
        }
        ,
        this.normalscale = function() {
            o.tagvideo && media.ObjectFit(),
            o.mediascale.x = o.mediascale.x0,
            o.mediascale.y = o.mediascale.y0,
            Scl(),
            o.custom_aspect = null,
            xy00(),
            ScaleStore()
        }
        ,
        this.scl = function() {
            Scl()
        }
        ,
        this.hlsDashSub = function(e, t) {
            media.hlsDashSub(e, t)
        }
        ,
        this.currentFile = function() {
            return currentFile()
        }
        ,
        this.urlsl = function() {
            return urls.length
        }
        ,
        this.tag = function() {
            return !!media && media.tag()
        }
        ,
        this.captions = function() {
            o.tagvideo && media.captions()
        }
        ,
        this.onDash = function() {
            media.onDash()
        }
    }
      , MediaVideo = function(url, container, pip) {
        var pjstg = createElement(1 == v.hidevideo ? "audio" : "video"), hls_config, pipto = 0, hls, is_hls = !1, is_hls2 = !1, airhls = 0, hls_started = !1, hls_created = !1, hls_force = -1, hlscq = -1, dash, dash_created = !1, ws, ws_created = !1, is_dash = !1;
        o.live = !1;
        var is_sleep = 0, is_ws = !1, play_errs = 0, error, error_time, unmuteplease = !1, pip_quality = -1, pause_before_vast = -1, sleep_timeout, _hlssubtracks, hls_subs, _seekaftervast, urlmse, arpl, mimeCodec = 'video/mp4; codecs="avc1.42E01E, mp4a.40.2"', nops = !1;
        if (css(pjstg, {
            position: "static",
            width: "100%",
            height: "100%",
            "object-fit": "contain",
            transition: "filter 0.2s linear",
            "min-height": "auto",
            "max-height": "none",
            "min-width": "auto",
            "max-width": "none"
        }),
        ObjectFit(),
        o.system.iphone && 1 == v.autoplay && 1 == v.autoplaymute ? !o.start && v.preroll ? attr(pjstg, {
            playsinline: 1
        }) : (o.muted = !0,
        o.controls && o.controls.Mute(),
        attr(pjstg, {
            muted: 1,
            playsinline: 1,
            autoplay: 1
        })) : (1 == v.playsinlineonmobile && o.system.mobile && (1 != v.playsinlineonmobileiphone && o.system.iphone && 1 != v.vast || attr(pjstg, {
            playsinline: 1
        })),
        o.system.tv || attr(pjstg, {
            preload: 1 == v.preload ? "metadata" : "none"
        })),
        1 == v.tagcors && attr(pjstg, {
            crossorigin: "anonymous",
            crossOrigin: "anonymous"
        }),
        url = casturl(url),
        attr(pjstg, {
            src: url,
            "x-webkit-airplay": "allow",
            disableRemotePlayback: "true"
        }),
        v.poster && 1 == v.pstrtg && attr(pjstg, {
            poster: v.poster
        }),
        1 != v.drunchr && attr(pjstg, {
            disableRemotePlayback: "true"
        }),
        1 == v.ynxnopip && attr(pjstg, {
            pip: "false"
        }),
        pip && (pjstg.autoplay = !0,
        1 != v.pip.nomute || 1 == v.autoplay ? pjstg.muted = !0 : pjstg.volume = exist2(v.pip.volume) ? v.pip.volume : v.volume),
        1 == v.nativenodownload && attr(pjstg, {
            controlsList: "nodownload"
        }),
        tagSrc(),
        1 == v.taginframe) {
            var tagframe = createElement("iframe");
            attr(tagframe, {
                scrolling: "no",
                allowfullscreen: "true",
                allowtransparency: "true",
                src: ""
            }),
            css(tagframe, {
                position: "absolute",
                width: "100%",
                height: "100%",
                border: 0
            }),
            container.appendChild(tagframe);
            var framei = window.setInterval((function() {
                "complete" === tagframe.contentWindow.document.readyState && (window.clearInterval(framei),
                css(tagframe.contentDocument.body, {
                    padding: 0,
                    margin: 0
                }),
                tagframe.contentDocument.body.appendChild(pjstg))
            }
            ), 100)
        } else
            container.appendChild(pjstg);
        exist(url) || (url = "");
        var nohls = !1;
        if (o.system.tv && url.indexOf("nativehlstv") > 0 && (nohls = !0),
        o.system.safari && (url.indexOf("nativehlssafari") > 0 || 1 == v.hlsdrmfp && 1 == v.hlsdrm) && (nohls = !0),
        o.system.ios && url.indexOf("nativehlsios") > 0 && (nohls = !0),
        o.system.safari && Arpl(),
        url.indexOf(".mpd") > 0)
            is_dash = !0,
            o.dash || ("undefined" != typeof PluginDash ? o.dash = new PluginDash : is_dash = !1),
            exist(o.dash) && (exist(window.dashjs) ? CheckDash() : o.dash.script());
        else if (!(1 == options.hls && 1 != v.playerjscom || url.indexOf(".m3u8") > 0) || nohls || -1 == o.compilation.indexOf("HLS") && !exist(window.Hls))
            0 == url.indexOf("w") && 1 == url.indexOf("s") && 1 == v.flussonic && (is_ws = !0,
            CreateWS());
        else {
            is_hls = !0,
            is_hls2 = !0;
            try {
                exist(window.Hls) ? !Hls.isSupported() || o.system.safari && 1 == v.nativehlsinsafari && !o.system.ios || o.system.ios && 1 == v.nativehlsios || o.system.edge && 1 == v.nativehlsinedge ? (log("HLS support ", Hls.isSupported()),
                is_hls = !1) : (1 == v.preload || 1 == v.autoplay || 1 == v.preloadhls || pip) && CreateHLS(!1) : is_hls = !1
            } catch (error) {
                is_hls = !1
            }
        }
        function CheckDash() {
            is_dash = !0,
            MseIsSupported() ? 1 != v.preload && 1 != v.autoplay && 1 != v.preloaddash || CreateDASH(!1) : (is_dash = !1,
            log("DASH not supported"))
        }
        function CreateDASH(e) {
            o.dash && !dash_created && (o.dash.create(e, pjstg, url, pip),
            exist(window.dashjs) && (dash_created = !0))
        }
        function CreateHLS(x) {
            log("HLS"),
            o.files.length > 1 ? (v.hlsquality = 0,
            v.hlsquality_off = !0) : v.hlsquality_off && (v.hlsquality = 1),
            o.audiotracks.length > 1 ? (v.hlsaudio = 0,
            v.hlsaudio_off = !0) : v.hlsaudio_off && (v.hlsaudio = 1),
            o.hls_subs = !1,
            hls_force = -1,
            hls_subs = [],
            o.sbt && o.sbt.reHls();
            var dontload = !1;
            if (v.preroll && 1 == v.hlsvastwait && (dontload = !0,
            v.hlsvastwait = 0),
            hls_config = {
                debug: 1 == v.hlsdebug && !pip,
                autoStartLoad: (1 == v.preload || 1 == v.autoplay || pip || x) && !dontload,
                maxBufferLength: 60,
                maxMaxBufferLength: 60,
                enableWorker: !1
            },
            v.hlsmto > 0 && (hls_config.manifestLoadPolicy = {
                default: {
                    maxLoadTimeMs: 1e3 * v.hlsmto
                }
            }),
            v.hlsfto > 0 && (hls_config.fragLoadPolicy = {
                default: {
                    maxLoadTimeMs: 1e3 * v.hlsfto
                }
            }),
            1 == v.hlscltps && (hls_config.capLevelToPlayerSize = !0),
            1 == v.hlsdrm) {
                for (var ks = ["wv", "pr", "ck"], ksu = ["com.widevine.alpha", "com.microsoft.playready", "org.w3.clearkey"], dj = {}, i = 0; i < ks.length; i++)
                    1 == v["hlsdrm" + ks[i]] && (dj[ksu[i]] = {},
                    exist2(v["hlsdrm" + ks[i] + "l"]) && (dj[ksu[i]].licenseUrl = DrmVars(v["hlsdrm" + ks[i] + "l"])),
                    exist2(v["hlsdrm" + ks[i] + "s"]) && (dj[ksu[i]].serverCertificateUrl = DrmVars(v["hlsdrm" + ks[i] + "s"])));
                hls_config.emeEnabled = !0,
                hls_config.drmSystems = dj
            }
            if (1 == v.hlscookies && (hls_config.xhrSetup = function(e, t) {
                e.withCredentials = !0
            }
            ),
            exist(v.hlsconfig) && (exist(v.hlsconfig.maxBufferLength) && (v.hlsconfig.maxBufferLength > 600 && (v.hlsconfig.maxBufferLength = 600),
            v.hlsconfig.maxMaxBufferLength = v.hlsconfig.maxBufferLength),
            exist(v.hlsconfig.customBuffer) && (v.hlsconfig.maxMaxBufferLength = v.hlsconfig.maxBufferLength = v.hlsconfig.customBuffer),
            "object" == typeof v.hlsconfig))
                for (var key in v.hlsconfig)
                    0 == v.hlsconfig[key].toString().indexOf("eval:") && (v.hlsconfig[key] = eval(v.hlsconfig[key].substr(5))),
                    hls_config[key] = v.hlsconfig[key];
            js("prehls", hls),
            hls = new Hls(hls_config),
            js("hls", hls, 1),
            hls.loadSource(url),
            hls.attachMedia(pjstg),
            ('function' == typeof fragListener && hls.on(Hls.Events.FRAG_LOADED, fragListener)),
            hls.on(Hls.Events.MEDIA_ATTACHED, (function() {
                log("HLS attached")
            }
            )),
            hls.on(Hls.Events.MANIFEST_LOADED, (function(e, t) {
                !pip && o.actions.MediaReady()
            }
            )),
            hls.on(Hls.Events.MANIFEST_PARSED, (function(e, t) {
                !pip && 1 == v.hlsquality && HlsLevelsLength() > 1 && (HlsQualityLevels(),
                HlsLevel(),
                o.controls && o.controls.QualityChangedNoHand(o.current_quality))
            }
            )),
            hls.on(Hls.Events.LEVEL_SWITCH, (function(e, t) {
                HlsLevel()
            }
            )),
            hls.on(Hls.Events.LEVEL_SWITCHED, (function(e, t) {
                HlsLevel()
            }
            )),
            hls.on(Hls.Events.LEVEL_LOADED, (function(e, t) {
                pip || (t.details.live != o.live && (o.live = t.details.live,
                o.controls.refresh()),
                o.live = t.details.live,
                o.live && (log("Live"),
                o.dvr = url.indexOf("?DVR") > -1,
                pjstg.duration > 0 && pjstg.currentTime > 0 && pjstg.duration - pjstg.currentTime < 10 && (o.hls_stuck_time > 0 ? o.hls_stuck_time == pjstg.currentTime && o.hls_stuck_duration == pjstg.duration ? (o.stuck++,
                o.stuck > 2 && (o.stuck = 0,
                o.hls_stuck_time = -1,
                hls.destroy(),
                CreateHLS(!0),
                onEnded())) : o.hls_stuck_time = -1 : (o.hls_stuck_time = pjstg.currentTime,
                o.hls_stuck_duration = pjstg.duration)))),
                1 == v.hlsquality && (o.current_quality = hls.loadLevel,
                o.controls && o.controls.QualityChangedNoHand(o.current_quality)),
                HlsUpdateAudio()
            }
            )),
            hls.on(Hls.Events.FRAG_CHANGED, (function(e, t) {
                exist(t.frag) && (!pip && js("fragment", t.frag.relurl),
                1 == v.hlsfdt && (o.hlsfdt || "undefined" != typeof PlgHlsFdt && (o.hlsfdt = new PlgHlsFdt),
                o.hlsfdt && o.hlsfdt.Go(t.frag))),
                hls_force > -1 && (hls.nextAutoLevel = hls_force,
                hls_force = -1),
                clearTimeout(o.errorto),
                hls_started = !0,
                hlsTextTracks()
            }
            )),
            hls.on(Hls.Events.FRAG_PARSING_METADATA, (function(e, t) {
                js("fragdata", t, 1)
            }
            )),
            hls.on(Hls.Events.AUDIO_TRACKS_UPDATED, (function(e, t) {
                pip || 1 != v.hlsaudio || setTimeout(HlsAudioTracks, 500)
            }
            )),
            hls.on(Hls.Events.AUDIO_TRACK_SWITCHING, (function(e, t) {
                pip || 1 != v.hlsaudio || HlsAudioTrack()
            }
            )),
            hls.subtitleDisplay = !1,
            1 == v.hlssubtracks && (hls.on(Hls.Events.FRAG_LOADED, (function(e, t) {
                if ("object" == typeof t && "subtitle" == t.frag.type) {
                    var i = t.frag.url;
                    if (i) {
                        var s = hls.subtitleTrack;
                        o.subtitle_on ? o.sbt.hlsSub(s + "id_" + i) : (!hls_subs[s] && (hls_subs[s] = []),
                        hls_subs[s].push(i))
                    }
                }
            }
            )),
            hls.on(Hls.Events.SUBTITLE_TRACKS_UPDATED, (function(e, t) {
                for (var i = hls.subtitleTracks, s = "", r = 0; r < i.length; r++)
                    s += ("" != s ? "," : "") + "[" + i[r].name + "]hls" + r,
                    i[r].default && (o.remember_sub = i[r].name);
                apiProcessor("subtitle", s)
            }
            ))),
            hls.on(Hls.Events.ERROR, (function(e, t) {
                if (1 == v.log && console.log(t),
                js(t.type + "Hls", t, 0, !0),
                o.hlserror = t,
                t.fatal)
                    if ("networkError" == t.type)
                        log("HLS fatal network error"),
                        1 == v.livewakeup && 0 == Time() ? HlsSleep0() : (error = t.details + " (" + t.type + ")",
                        !(o.seekto > 0 || pip || 1 == v.live || is_ws) && (o.seekto = Time()),
                        hls.destroy(),
                        pip || (o.fatal = !0,
                        o.media.onError()));
                    else {
                        var i = !1;
                        "mediaError" == t.type ? 1 == v.hlsermd && o.media.urlsl() > 0 ? i = !0 : (log("HLS fatal media error, recover"),
                        hls.recoverMediaError()) : i = !0,
                        i && (error = "HLS fatal error, destroy",
                        hls.destroy(),
                        !pip && o.media.onError())
                    }
                else
                    log("HLS ", t.type, t.details, t.response ? t.response.code : ""),
                    js("hls_error", t.response ? t.response.code : ""),
                    is_sleep > 0 && (is_sleep = 2,
                    HlsSleep())
            }
            )),
            hls_created = !0
        }
        function DrmVars(e) {
            if (e)
                for (var t = 1; t < 11; t++)
                    v["drm" + t] && (e = e.replace("{" + t + "}", v["drm" + t]));
            return e
        }
        function HlsLevel() {
            if (!pip && 1 == v.hlsquality && HlsLevelsLength() > 1) {
                if (o.current_quality != hls.loadLevel && (o.current_quality = hls.loadLevel,
                o.controls && o.controls.QualityChangedNoHand(o.current_quality),
                log("HLS Level " + o.current_quality)),
                exist2(v.forbidden_quality) && o.current_quality > 0)
                    for (var e = v.forbidden_quality.split(","), t = 0; t < e.length; t++)
                        if (o.files_quality[o.current_quality].indexOf(e[t]) > -1) {
                            log("regress quality"),
                            hls.currentLevel = o.current_quality - 1,
                            o.current_quality--;
                            break
                        }
                1 != v.hlsautoquality && isAuto() && (v.hlschangequality = "current",
                SetHlsQuality(hlscq > -1 ? hlscq : hls.currentLevel),
                log("unauto"))
            }
        }
        function CreateWS() {
            exist(window.FlussonicMsePlayer) && (MseIsSupported() ? (exist(o.ws) || (o.ws = new PluginWS),
            ws = new FlussonicMsePlayer(pjstg,url,existv(v.wsconfig, {
                debug: !0
            })),
            ws_created = !0) : (is_ws = !1,
            log("not supported")))
        }
        function hlsTextTracks() {
            Captions()
        }
        function Captions() {
            v.hlscaptions && o.controls && (pjstg.textTracks.length > 0 ? (1 == v.captions ? pjstg.textTracks[pjstg.textTracks.length - 1].mode = "showing" : pjstg.textTracks[pjstg.textTracks.length - 1].mode = "hidden",
            o.captions || (o.captions = !0,
            o.controls.refresh())) : o.captions && (o.captions = !1,
            o.controls.refresh()))
        }
        function HlsSleep0() {
            log("sleep"),
            !pip && o.play && o.actions.Pause(),
            o.actions.ShowPoster(),
            is_sleep = 1,
            HlsSleep(o.play)
        }
        function HlsSleep(e) {
            is_sleep > 0 && (clearTimeout(sleep_timeout),
            sleep_timeout = setTimeout(HlsLiveWaiting, 1e3 * v.livewakeuptime))
        }
        function HlsLiveWaiting() {
            is_sleep > 0 && (log("watching"),
            is_hls ? (1 == is_sleep && hls.loadSource(url),
            2 == is_sleep && (hls.destroy(),
            CreateHLS(!0),
            pjstg.play())) : attr(pjstg, {
                src: url
            }))
        }
        function iosexfull() {
            1 != v.nativecontrolsmobile && pjstg.removeAttribute("controls")
        }
        function iosfull() {
            pjstg.webkitDisplayingFullscreen && o.actions.NativeEnterFs()
        }
        function onLoadStart() {
            is_hls || is_dash || !pip && o.actions.MediaReady()
        }
        function onTagError() {
            if (!is_hls && !is_dash) {
                if (pjstg.error) {
                    var e = pjstg.error.code;
                    "" == (error = pjstg.error.message) && (1 == e && (error = "aborted"),
                    2 == e && (error = "network"),
                    3 == e && (error = "decode"),
                    4 == e && (error = "not found")),
                    log("Error: ", error)
                }
                is_hls2 && 1 == v.livewakeup && 0 == Time() && (error = void 0,
                HlsSleep0()),
                (null != error || o.system.mobile) && onError()
            }
        }
        function onError() {
            !pip && o.media.onError()
        }
        function onEnded() {
            pip ? 1 == v.pip.loop && (pjstg.currentTime = 0,
            pjstg.play()) : o.media.onEnded()
        }
        function onPlay() {
            if (!o.start && v.preroll)
                return log("wrong play"),
                pause(),
                void o.actions.Play();
            if (is_hls && is_sleep > 0)
                ;
            else if (!pip) {
                var e = o.actions.isVastBgLoad() && 1 != o.vastfrombg;
                if (e || -1 == pause_before_vast) {
                    var t = !1;
                    is_hls && (exist(o.vast) || exist(o.vastloader)) && (e || (log("pause onplay"),
                    pause(),
                    t = !0)),
                    t || o.media.onPlay()
                }
            }
        }
        function onPause() {
            nops || (log("onpause"),
            o.play && o.actplay && !pjstg.ended && 1 == v.unpause && !o.nativecontrols ? (log("unpause"),
            TagPlay()) : !pip && !o.nopause && pjstg.paused && o.media.onPause())
        }
        function onTimeupdate() {
            !pip && o.media.onTimeupdate(),
            pause_before_vast > -1 && Time() > pause_before_vast && (pause(),
            pause_before_vast = -1)
        }
        function onSeeking() {
            !pip && o.media.onSeeking()
        }
        function onSeeked() {
            !pip && o.media.onSeeked()
        }
        function onMeta() {
            pip ? PipSize() : (o.media.onMeta(),
            PlayerSize(),
            is_hls && is_sleep > 0 && (is_sleep = 0,
            log("wake up"),
            hls.startLoad(),
            TagPlay(),
            o.controls.Play()),
            exist(v.ratio) && Resize(),
            arpl && UnArpl(),
            setTimeout(MetaAudio, 500))
        }
        function CheckTop() {
            ("-2000px" == pjstg.style.top || pjstg.offsetTop < -1e3) && AfterVast()
        }
        function MetaAudio() {
            if (pjstg && pjstg.audioTracks && 0 == o.files_audiotrack.length && 0 != v.nativeaudio) {
                var e = pjstg.audioTracks;
                for (i = 0; i < e.length; i++) {
                    var t = o.media.renameTracks((e[i].label ? e[i].label + " (" : "") + e[i].language + (e[i].label ? ")" : ""), i);
                    t == v.default_audio && (o.current_audiotrack = o.ncrtat = i),
                    o.files_audiotrack[i] = t
                }
                o.controls.AudioTrackChangedNoHand(o.ncrtat)
            }
            o.ncrtat > 0 && nativeAudioTrack(o.ncrtat, 1)
        }
        function PipSize() {
            pjstg.videoHeight > 0 ? css(container, {
                height: container.offsetWidth / (pjstg.videoWidth / pjstg.videoHeight) - parseInt(v.pip.border)
            }) : pipto < 20 && (setTimeout(PipSize, 100),
            pipto++)
        }
        function PlayerSize() {
            1 == v.changeheight && (clearInterval(o.heightInterval),
            o.heightInterval = setInterval(WaitSize, 100),
            WaitSize())
        }
        function WaitSize() {
            pjstg && pjstg.videoHeight > 0 && (o.actions.changeAspect(pjstg.videoWidth / pjstg.videoHeight),
            clearInterval(o.heightInterval))
        }
        function onDuration() {
            !pip && !is_ws && o.media.onDuration()
        }
        function onVolume() {
            !pip && o.media.onVolume()
        }
        function onWaiting() {
            is_hls && is_sleep > 0 || !pip && o.media.onWaiting()
        }
        function onLoadedData() {
            o.actions.LoadedData()
        }
        function MseIsSupported() {
            var e = window.MediaSource = window.MediaSource || window.WebKitMediaSource
              , t = window.SourceBuffer = window.SourceBuffer || window.WebKitSourceBuffer
              , o = e && "function" == typeof e.isTypeSupported && e.isTypeSupported(mimeCodec)
              , i = !t || t.prototype && "function" == typeof t.prototype.appendBuffer && "function" == typeof t.prototype.remove;
            return o && i
        }
        !o.system.tv || 1 != v.autoplay || is_hls || is_dash || is_ws || setTimeout((function() {
            o.actions.MediaReady()
        }
        ), 100),
        1 == v.channels && (exist(o.channels) && o.channels.Close(),
        o.channels = new PlugMediaChannels),
        this.onDash = function() {
            CheckDash()
        }
        ,
        this.captions = function() {
            Captions()
        }
        ,
        pjstg.addEventListener("loadstart", onLoadStart),
        pjstg.addEventListener("error", onTagError),
        pjstg.addEventListener("ended", onEnded),
        pjstg.addEventListener("play", onPlay),
        pjstg.addEventListener("pause", onPause),
        pjstg.addEventListener("timeupdate", onTimeupdate),
        pjstg.addEventListener("seeking", onSeeking),
        pjstg.addEventListener("seeked", onSeeked),
        pjstg.addEventListener("loadedmetadata", onMeta),
        pjstg.addEventListener("volumechange", onVolume),
        pjstg.addEventListener("waiting", onWaiting),
        pjstg.addEventListener("durationchange", onDuration),
        pjstg.addEventListener("loadeddata", onLoadedData),
        pjstg.addEventListener("enterpictureinpicture", onPipEnter),
        pjstg.addEventListener("leavepictureinpicture", onPipLeave),
        1 == v.hlsdrmfp && o.system.safari && exist2(v.hlsdrmfpl) && exist2(v.hlsdrmfps) && pjstg.addEventListener("webkitneedkey", onWkitKey),
        o.system.iphone && (pjstg.addEventListener("webkitbeginfullscreen", iosfull, !1),
        pjstg.addEventListener("webkitendfullscreen", iosexfull)),
        this.ratio = function() {
            return pjstg.videoWidth / pjstg.videoHeight
        }
        ;
        var span05 = "<span style='opacity:0.5'>", playtry;
        function HlsQualityLevels() {
            if (!pip && 1 == v.hlsquality) {
                var e = hls.levels
                  , t = -1;
                if (o.files_quality = [],
                e.length > 1) {
                    exist(v.default_quality) && ("max" == v.default_quality && (t = e.length - 1),
                    0 == v.default_quality.indexOf("num:") && (t = 1 * v.default_quality.substr(4)) >= e.length && (t = e.length - 1));
                    for (var i = 0; i < e.length; i++) {
                        if (exist(e[i].height)) {
                            var s = o.media.renameQualities(e[i], v.nameofhlsquality);
                            if (o.files_quality.indexOf(s) > -1 || 1 == v.hlsaddbitrate) {
                                if (exist(e[i].bitrate)) {
                                    var r = o.files_quality.indexOf(s);
                                    r > -1 && (o.files_quality[r] += " " + span05 + " &nbsp;" + parseInt(e[r].bitrate / 1e3) + " " + Lang("kbps") + "</span>"),
                                    o.files_quality[i] = s + " " + span05 + " &nbsp;" + parseInt(e[i].bitrate / 1e3) + " " + Lang("kbps") + "</span>"
                                }
                            } else
                                o.files_quality[i] = s;
                            exist(e[i].audioGroupIds) && (o.files_quality_ag[i] = e[i].audioGroupIds[0])
                        } else
                            exist(e[i].name) ? o.files_quality[i] = e[i].name : o.files_quality[i] = i;
                        exist(v.default_quality) && -1 == t && v.default_quality == o.files_quality[i] && (t = i),
                        exist(o.default_quality) && o.default_quality == o.files_quality[i] && (t = i)
                    }
                    1 == v.hlsautoquality ? o.files_quality[e.length] = Lang("auto") : -1 == t && (t = e.length - 1),
                    1 == v.hlslowquality || t > -1 ? ("next" == v.hlschangequality || !o.start && 0 == v.preload ? hls.nextLevel = t : "current" == v.hlschangequality && (hls.currentLevel = t),
                    o.current_quality = t) : 1 == v.hlsautoquality ? o.current_quality = hls.levels.length - 1 : o.current_quality = hls.firstLevel,
                    v.hlsmaxlvl > 0 && (hls.autoLevelCapping = e.length - 1 * v.hlsmaxlvl - 1),
                    HlsUpdateAudio()
                }
                hls.levels[o.current_quality] && (o.bitrate = existv(hls.levels[o.current_quality].bitrate, 0)),
                o.controls && o.controls.refresh()
            }
        }
        function HlsUpdateAudio() {
            1 == v.hlsaudio && (HlsAudioTracks(),
            HlsAudioTrack())
        }
        function HlsAudioTracks() {
            if (!pip && 1 == v.hlsaudio) {
                var e, t = hls.audioTracks;
                o.files_audiotrack = [];
                var i = -1;
                if (t.length > 1)
                    for (var s = 0; s < t.length; s++) {
                        if (e = !1,
                        exist(t[s].groupId) && o.files_quality_ag.length > 0 && t[s].groupId != o.files_quality_ag[o.current_quality])
                            for (var r = 0; r < o.files_quality_ag.length; r++)
                                o.files_quality_ag[r] == t[s].groupId && (e = !0);
                        e || (o.files_audiotrack[s] = (exist(t[s].name) ? o.media.renameTracks(t[s].name, s) : s) + (1 == v.hlsaudiolang && exist(t[s].lang) ? " (" + t[s].lang + ")" : ""),
                        exist(v.default_audio) && v.default_audio == o.files_audiotrack[s] && (i = s))
                    }
            }
            i > -1 && (o.current_audiotrack = i,
            hls.audioTrack = i)
        }
        function HlsAudioTrack() {
            if (!pip) {
                var e = hls.audioTracks
                  , t = hls.audioTrack;
                if (t > -1) {
                    if (exist(e[t].groupId) && o.files_quality_ag.length > 0 && o.files_quality_ag[o.current_quality] != e[t].groupId)
                        for (var i = 0; i < e.length; i++)
                            if (e[i].name == e[t].name && e[i].groupId == o.files_quality_ag[o.current_quality]) {
                                hls.audioTrack = i,
                                t = i;
                                break
                            }
                    o.current_audiotrack = t,
                    log("HLS AudioTrack", o.current_audiotrack),
                    o.controls.AudioTrackChangedNoHand(o.current_audiotrack)
                }
            }
        }
        function nativeAudioTrack(e, t) {
            pjstg.audioTracks.length > 1 && (pjstg.audioTracks[e].enabled = !0,
            pjstg.audioTracks[1 == t ? 0 : o.ncrtat].enabled = !1,
            o.ncrtat = e,
            1 != t && (pjstg.currentTime = o.media.time()))
        }
        function Time() {
            if (is_dash)
                return dash_created ? o.dash.time() : 0;
            var e = pjstg.currentTime;
            return exist(v.factor) && (e *= v.factor),
            e
        }
        function Duration() {
            var e = pjstg.duration;
            return !e && o.stored_dur && (e = o.stored_dur),
            e == 1 / 0 && (v.live = 1,
            e = Time() + 10,
            o.dur && e < o.dur && (e = o.dur),
            o.dur = e),
            is_dash && dash_created && (e = o.dash.duration()),
            exist(v.factor) && (e *= v.factor),
            exist(v.end) && (indOf([v.end], "-") ? e += 1 * v.end : e = v.end),
            isNaN(e) ? 0 : e
        }
        function TagPlay() {
            if ("none" != url && pjstg) {
                var e = pjstg.play();
                void 0 !== e && e.then((function() {
                    log("playOk"),
                    o.muted || pjstg.muted && (log("playunmute"),
                    pjstg.muted = !1),
                    play_errs = 0
                }
                )).catch((function(e) {
                    var t = e.message;
                    if (log("playError", t),
                    -1 == t.indexOf("source") && -1 == t.indexOf("interrupted by"))
                        if (1 == v.autoplaymute && exist(pjstg) && o.play) {
                            log("automute", o.play),
                            o.actions.Mute();
                            try {
                                pjstg.volume = 0
                            } catch (e) {}
                            var i = pjstg.play();
                            i && i.then((function() {}
                            )).catch((function(e) {
                                log("playError2", e.message),
                                o.system.tv && (is_hls || is_dash) || (o.controls.Pause(),
                                o.actions.ShowPoster(),
                                js("autoplay_denied"))
                            }
                            ))
                        } else
                            o.acted || (o.controls.Pause(),
                            o.actions.ShowPoster());
                    else
                        (t.indexOf("load request") > 0 || t.indexOf("aborted") > 0) && o.play && play_errs < 5 && (log("playError3", play_errs),
                        setTimeout(TagPlay, 1500),
                        play_errs++)
                }
                ))
            }
        }
        function AfterVast() {
            o.airplayed || !o.system.mobile && !o.system.webkit || (css(pjstg, {
                position: "static",
                left: 0,
                top: 0
            }),
            exist(v.ratio) && Resize(),
            unmuteplease && (!o.muted && (pjstg.muted = !1),
            unmuteplease = !1),
            _seekaftervast > 0 && (o.seekto = _seekaftervast,
            _seekaftervast = 0),
            pause_before_vast = -1)
        }
        function pause() {
            is_ws ? ws.pause() : pjstg.pause()
        }
        function isAuto() {
            var e = !1;
            return is_hls ? hls_created && (e = hls.autoLevelEnabled) : is_dash && dash_created && (e = o.dash.auto()),
            e
        }
        function casturl(e) {
            if (e) {
                var t = e.indexOf(":cast:");
                t > 0 && (o.casturl = e.substr(t + 6),
                e = e.substr(0, t))
            }
            return e
        }
        function tagSrc() {
            if (o.system.safari && pjstg) {
                var e = pjstg.textTracks;
                if (e)
                    for (var t = 0; t < e.length; t++)
                        e[t].mode = "disabled";
                if (e = pjstg.audioTracks)
                    for (t = 0; t < e.length; t++)
                        e[t].enabled = 0 == t ? 1 : 0
            }
            CheckPip(),
            1 == v.v360 && "undefined" != typeof PjsCheck360 && PjsCheck360(url, pjstg, container)
        }
        function Arpl() {
            "hls" == o.file_type && is_hls || window.WebKitPlaybackTargetAvailabilityEvent && (arpl = !0,
            Arpl2())
        }
        function UnArpl() {
            arpl = !1
        }
        function Arpl2(e) {
            o.airplay = !0,
            log("airplay"),
            !pip && o.actions.AirplayChanged(),
            pjstg.addEventListener("webkitcurrentplaybacktargetiswirelesschanged", (function(e) {
                o.airpl = pjstg.webkitCurrentPlaybackTargetIsWireless,
                "hls" == o.file_type && (log("airplay", o.airpl),
                o.airpl && 0 == airhls && is_hls && (o.seekto = Time(),
                hls.destroy(),
                pjstg.src = url,
                pjstg.disableRemotePlayback = !1,
                pjstg.play(),
                is_hls = !1,
                airhls = Date.now()),
                !o.airpl && Date.now() - airhls > 1e3 && !is_hls && (o.seekto = Time(),
                CreateHLS(!0),
                pjstg.play(),
                is_hls = !0,
                airhls = 0))
            }
            ))
        }
        function CheckPip() {
            o.system.webkit && (exist(pjstg.webkitSupportsPresentationMode) && !o.system.iphone && (o.pipwebkit = !0),
            document.pictureInPictureEnabled && !pjstg.disablePictureInPicture && (o.pipwebkit = !0))
        }
        function PipWebkit() {
            o.system.safari ? "picture-in-picture" === pjstg.webkitPresentationMode ? (pjstg.webkitSetPresentationMode("inline"),
            o.ispipkit = !1) : (pjstg.webkitSetPresentationMode("picture-in-picture"),
            o.ispipkit = !0) : document.pictureInPictureElement ? eval("document.exitPictureInPicture().then(ok =>{o.ispipkit = false;}).catch(error => {});") : eval("pjstg.requestPictureInPicture().then(p => {o.ispipkit = true;}).catch(error => {o.ispipkit = false;});")
        }
        function onPipEnter() {
            o.ispipkit = !0
        }
        function onPipLeave() {
            o.ispipkit = !1
        }
        function onWkitKey(e) {
            "undefined" != typeof PluginHlsFps && (!o.hlsfps && (o.hlsfps = new PluginHlsFps),
            o.hlsfps.Go(pjstg, e))
        }
        function SetHlsQuality(e) {
            if (hls_created) {
                var t = parseInt(e);
                t >= hls.levels.length && (1 == v.hlsautoquality ? (t = -1,
                hls.autoLevelCapping = -1) : t = hls.levels.length - 1),
                "current" == v.hlschangequality && (setTimeout(onWaiting, 500),
                hls.currentLevel = t),
                "next" == v.hlschangequality && (log("HLS next level " + t),
                hls.nextLevel = t),
                -1 == t && (o.current_quality = hls.loadLevel),
                HlsUpdateAudio()
            }
        }
        function HlsLevelsLength() {
            var e = 0;
            return hls_created && hls.levels && (e = hls.levels.length),
            e
        }
        function ObjectFit() {
            pjstg && (1 == v.covervideo || 1 == v.fill ? 1 == v.fillvideo || 1 == v.fill ? css(pjstg, {
                "object-fit": "fill"
            }) : css(pjstg, {
                "object-fit": "cover"
            }) : css(pjstg, {
                "object-fit": "contain"
            }))
        }
        function Resize() {
            v.ratio && apiProcessor("scale", String(v.ratio).replace("/", ":"))
        }
        function DashLevelsLength() {
            var e = 0;
            return dash_created && (e = o.dash.levels()),
            e
        }
        function iOSTrackLoaded(e) {
            if (e.target.label && o.sbt)
                for (var t = 0; t < o.files_subtitle.length; t++)
                    o.files_subtitle[t] == e.target.label && o.sbt.SetSubtitle(t)
        }
        this.nativeAudioTrack = function(e, t) {
            nativeAudioTrack(e, t)
        }
        ,
        this.Play = function(e) {
            "nops" == e && (nops = !1);
            var t = !0;
            is_hls && !hls_started && (hls_created || CreateHLS(!0),
            hls.startLoad()),
            is_dash && !dash_created && (CreateDASH(!0),
            t = !1),
            is_ws && (ws_created || CreateWS(),
            ws.play(),
            t = !1),
            CheckTop(),
            t && TagPlay()
        }
        ,
        this.BeforeVast = function() {
            (o.vastloader || o.vast) && (o.ispipkit && PipWebkit(),
            !o.airplayed && o.system.mobile && o.system.webkit && (pjstg.muted || (pjstg.muted = !0,
            unmuteplease = !0),
            css(pjstg, {
                position: "absolute",
                left: -2e3,
                top: -2e3
            }),
            pause_before_vast = Time(),
            is_ws || pjstg.play(),
            0 == pause_before_vast && o.seekto > 0 && (_seekaftervast = o.seekto)))
        }
        ,
        this.AfterVast = function() {
            AfterVast()
        }
        ,
        this.Pause = function(e) {
            "nops" == e && (nops = !0),
            log("paused"),
            pause()
        }
        ,
        this.Toggle = function() {
            pjstg.paused ? TagPlay() : Pause()
        }
        ,
        this.Seek = function(e) {
            exist(v.factor) && (e *= 1 / v.factor),
            is_dash && dash_created ? o.dash.seek(e) : (is_hls && 1 == v.hlsforce && e > 0 && isAuto() && 1 == v.hlsautoquality && (hls_force = hls.currentLevel,
            hls.nextAutoLevel = 0),
            pjstg.currentTime = e)
        }
        ,
        this.Mute = function() {
            pjstg.muted = !0
        }
        ,
        this.Unmute = function() {
            pjstg.muted = !1,
            "hls" == o.file_type && o.system.ios && 1 == v.vast && (exist(o.um1) || (nops = !0,
            log("ios unmute"),
            pjstg.pause(),
            setTimeout((function() {
                pjstg.play(),
                nops = !1
            }
            ), 10),
            o.um1 = !0))
        }
        ,
        this.Volume = function(e) {
            pjstg.volume = e
        }
        ,
        this.Gain = function() {
            if (o.gainedsource != pjstg) {
                var e, t;
                if (o.audiosrc[pjstg])
                    e = o.audiosrc[pjstg],
                    t = o.audioctx[pjstg];
                else if (window.AudioContext = window.AudioContext || window.webkitAudioContext,
                exist(window.AudioContext))
                    try {
                        e = (t = new AudioContext).createMediaElementSource(pjstg),
                        o.audiosrc[pjstg] = e,
                        o.audioctx[pjstg] = t
                    } catch (e) {
                        log(e)
                    }
                if (t) {
                    var i = t.createGain();
                    i.gain.value = v.volumegain,
                    e.connect(i),
                    i.connect(t.destination),
                    o.gained = !0,
                    o.gainedsource = pjstg
                }
            }
        }
        ,
        this.isPlaying = function() {
            return !pjstg.paused
        }
        ,
        this.isLive = function() {
            return !(1 != v.live && !is_ws) || o.live
        }
        ,
        this.tag = function() {
            return pjstg
        }
        ,
        this.nativeControls = function() {
            return attr(pjstg, {
                controls: "1"
            }),
            !0
        }
        ,
        this.preload = function() {
            attr(pjstg, {
                preload: "metadata"
            }),
            is_hls && !hls_created && CreateHLS(!1),
            is_dash && !dash_created && CreateDASH(!1)
        }
        ,
        this.status = function() {
            var e = "playing";
            return pjstg.paused && (e = "paused"),
            pjstg.ended && (e = "ended"),
            e
        }
        ,
        this.ChangePip = function(e, t) {
            pip = e,
            t.appendChild(pjstg),
            container = t,
            e ? (1 != v.pip.nomute ? pjstg.muted = !0 : o.muted || (pjstg.muted = !1),
            PipSize(),
            o.files_quality.length > 0 && 1 == v.hlsautoquality && is_hls && (pip_quality = o.current_quality,
            hls.autoLevelCapping = 0,
            hls.currentLevel = 0)) : (o.muted || 1 == v.pip.nomute || (pjstg.muted = !1),
            pjstg.volume = exist2(v.pip.volume) ? v.pip.volume : v.volume,
            PlayerSize(),
            o.files_quality.length > 0 && 1 == v.hlsautoquality && is_hls && (hls.autoLevelCapping = -1,
            pip_quality > -1 && pip_quality < hls.levels.length && (hls.nextLevel = pip_quality)))
        }
        ,
        this.time = function() {
            return Time()
        }
        ,
        this.duration = function() {
            return Duration()
        }
        ,
        this.loaded = function() {
            var e = 0;
            if (pjstg.buffered && pjstg.buffered.length > 0) {
                for (var t = Time(), o = 0; o < pjstg.buffered.length; o++)
                    (t >= pjstg.buffered.start(o) || t >= pjstg.buffered.start(o) - 100) && t <= pjstg.buffered.end(o) && (e = pjstg.buffered.end(o));
                0 == e && (e = pjstg.buffered.end(pjstg.buffered.length - 1))
            }
            if (exist(v.end)) {
                var i = v.end;
                indOf([i], "-") && (i = Duration()),
                e > i && (e = i)
            }
            return e
        }
        ,
        this.auto = function() {
            return isAuto()
        }
        ,
        this.size = function() {
            return {
                width: pjstg.videoWidth,
                height: pjstg.videoHeight
            }
        }
        ,
        this.src = function(e) {
            e && (log("src"),
            e = casturl(e = e.replace(/\(random\)/g, Math.random())),
            url = e,
            2 != o.media_error && (o.media_error = !1),
            is_dash ? dash_created && o.dash.source(e) : is_hls ? (is_hls && hls && hls.destroy(),
            CreateHLS(o.start || o.autoplay),
            CheckPip()) : (attr(pjstg, {
                src: e,
                autoplay: 0
            }),
            tagSrc(),
            pause()))
        }
        ,
        this.airplay = function() {
            pjstg.webkitShowPlaybackTargetPicker()
        }
        ,
        this.pipwebkit = function() {
            PipWebkit()
        }
        ,
        this.setDashQuality = function(e) {
            dash_created && o.dash.setQuality(e)
        }
        ,
        this.setDashAudioTrack = function(e) {
            dash_created && pjstg.buffered.length > 0 && o.dash.setAudio(e)
        }
        ,
        this.setWsQuality = function(e) {
            o.ws && o.ws.setTracks(ws, e, -1)
        }
        ,
        this.setWsAudioTrack = function(e) {
            o.ws && o.ws.setTracks(ws, -1, e)
        }
        ,
        this.setHlsQuality = function(e) {
            hlscq = 1 * e,
            SetHlsQuality(e)
        }
        ,
        this.getHLS = function() {
            return hls
        }
        ,
        this.getDASH = function() {
            return !!dash_created && o.dash.getDash()
        }
        ,
        this.HlsLevelsLength = function() {
            return HlsLevelsLength()
        }
        ,
        this.DashLevelsLength = function() {
            return DashLevelsLength()
        }
        ,
        this.ObjectFit = function() {
            ObjectFit()
        }
        ,
        this.resize = function() {
            Resize()
        }
        ,
        this.setHlsAudioTrack = function(e) {
            hls_created && (hls.audioTrack = parseInt(e))
        }
        ,
        this.hlsDashSub = function(e, t) {
            if ("hls" == t && hls_created && _hlssubtracks && _hlssubtracks.HlsSubTrack(e),
            "hls2" == t && hls_created) {
                if (hls_subs[e] && o.sbt)
                    for (var i = 0; i < hls_subs[e].length; i++)
                        o.sbt.hlsSub(hls_subs[e][i]);
                setTimeout((function() {
                    hls.subtitleTrack = 1 * e
                }
                ), 500)
            }
            "dash" == t && dash_created && o.dash.subtrack(e)
        }
        ,
        this.setSpeed = function(e) {
            e && (pjstg.playbackRate = e)
        }
        ,
        this.removeTracks = function() {
            for (var e = pjstg.childNodes, t = [], i = 0; i < e.length; i++)
                "track" == e[i].tagName.toLowerCase() && (e[i].removeEventListener("load", iOSTrackLoaded),
                t.push(e[i]));
            for (i = 0; i < t.length; i++)
                pjstg.removeChild(t[i]);
            for (i = 0; i < pjstg.textTracks.length; i++)
                pjstg.textTracks[i].mode = "hidden";
            o.nativesub = !1
        }
        ,
        this.addTrack = function(e, t, o) {
            if ("" != e) {
                if (e.indexOf(" or ") > 0) {
                    var i = e.split(" or ");
                    e = i[0]
                }
                var s = document.createElement("track");
                s.setAttribute("src", e),
                s.setAttribute("label", t),
                s.setAttribute("kind", "subtitles"),
                s.setAttribute("mode", "showing"),
                o && s.setAttribute("default", ""),
                pjstg.appendChild(s),
                s.addEventListener("load", iOSTrackLoaded)
            }
        }
        ,
        this.errorMessage = function() {
            return error || ""
        }
        ,
        this.Remove = function() {
            clearInterval(o.dashInterval),
            is_hls && hls && hls.destroy(),
            is_dash && dash_created && o.dash.reset(),
            is_ws && ws && ws.stop(),
            pjstg.removeEventListener("error", onTagError),
            pjstg.removeEventListener("ended", onEnded),
            pjstg.removeEventListener("play", onPlay),
            pjstg.removeEventListener("pause", onPause),
            pjstg.removeEventListener("timeupdate", onTimeupdate),
            pjstg.removeEventListener("seeking", onSeeking),
            pjstg.removeEventListener("seeked", onSeeked),
            pjstg.removeEventListener("loadedmetadata", onMeta),
            pjstg.removeEventListener("volumechange", onVolume),
            pjstg.removeEventListener("waiting", onWaiting),
            pjstg.removeEventListener("durationchange", onDuration),
            pjstg.removeEventListener("enterpictureinpicture", onPipEnter),
            pjstg.removeEventListener("leavepictureinpicture", onPipLeave),
            pjstg.removeEventListener("webkitneedkey", onWkitKey),
            pjstg.src = "",
            "IFRAME" == container.tagName ? container.contentDocument.body.removeChild(pjstg) : container.removeChild(pjstg),
            pjstg = null
        }
    }
      , Controls = function() {
        var b = [], butNames = [], butPosition = [], waiting = !1, wait_to, toolbarHidden = !1, settings, playlist, _lastactbut;
        for (var i in o.settings2 && (o.settings2.hide(),
        o.settings2 = null),
        o.files_speed = [.25, .5, .75, 1, 1.25, 1.5, 2],
        1 == v.settings.customspeeds && exist(v.settings.speeds) && (v.settings.speeds = v.settings.speeds.replace(/\n/gi, ""),
        o.files_speed = v.settings.speeds.split(",")),
        o.speed1 = indOf(o.files_speed, 1, !0),
        3 == o.current_speed && (o.current_speed = o.speed1),
        o.menuproc)
            o.menuproc.hasOwnProperty(i) && (!exist(v.settings[i]) && (v.settings[i] = 5),
            o["files_" + i] = ["+ " + v.settings[i] + "%", "&ndash; " + v.settings[i] + "%", 100 * o.menuproc[i] + "%"]);
        1 == v.toolbar.hidejustfull && o.system.ios && 1 == v.nativefullios && (v.toolbar.hide = 0);
        var resizeonwidth = !1, stretch_width = 0, stretch_width_last = 0, stretch_with_volume = !1, firstly = !0, uijs, bg = new ControlsBg, settings, order = [], _rights = !1, _move_rights = !1, _max_order = 0, _rb = [];
        for (var y in "controls-right" == v.control_line.position && (v.control_line.position = "controls"),
        v)
            v.hasOwnProperty(y) && 0 == y.indexOf("control_") && v[y] && (exist(v[y].order0) ? v[y].order = v[y].order0 : v[y].order0 = v[y].order,
            order[v[y].order] && (v[y].order += v[y].order),
            order[v[y].order] = y,
            "controls" != v.control_line.position && ("controls-right" == v[y].position ? (_rb.push([y, v[y].order]),
            _rights = !0) : "controls" != v[y].position && null != v[y].position || _rights && (_move_rights = !0)),
            _max_order < v[y].order && (_max_order = v[y].order));
        if (_move_rights) {
            _rb.sort((function(e, t) {
                return e[1] - t[1]
            }
            ));
            for (var i = 0; i < _rb.length; i++)
                order[v[_rb[i][0]].order] = null,
                v[_rb[i][0]].order = _max_order + 1,
                _max_order++,
                order[v[_rb[i][0]].order] = _rb[i][0]
        }
        o.tlbrhd = 1 == v.toolbar.hide && 1 == v.toolbar.hidedown,
        o.tlbrhd && (o.toolbar = createElement("div"),
        o.frame.appendChild(o.toolbar),
        css(o.toolbar, {
            position: "absolute",
            left: 0,
            top: 0,
            width: "100%",
            height: "100%",
            transition: "top 0.3s ease-out",
            "pointer-events": "none"
        }));
        var bg2 = createElement("div"), bgtop;
        o.tlbrhd ? o.toolbar.appendChild(bg2) : o.frame.appendChild(bg2),
        1 == v.toolbar.grdt && (bgtop = new ControlsBg(!0)),
        css(bg2, {
            position: "absolute",
            left: 0,
            bottom: 0,
            width: "100%",
            height: v.toolbar.h
        }),
        bg2.onclick = function() {
            !o.system.mobile && o.actions.ControlsBgClick()
        }
        ,
        1 == v.nocontrols && (hide2(bg.c()),
        hide2(bg2));
        for (var i = 1; i < order.length; i++)
            if (order[i]) {
                var y = order[i];
                if (y) {
                    var action = v[y].action
                      , hdn = v[y].hide;
                    if (o.system.mobile ? ("volume" == action && "speed" == v[y].customline || ("volume" == action && 1 == v.showvolmobile && o.system.mobile ? v[y].hideoutmute = 0 : ("volume" == action || "fullscreen" == action && v.nativemobile) && (v[y].on = 0)),
                    "buffer" == action && 1 == v[y].hdbfmb && (v[y].on = 0)) : "buffer" == action && 1 == v[y].hdbfdt && (v[y].on = 0),
                    1 == v[y].hide && (1 == v[y].hideonvar && exist(v[y].hidevar) && options[v[y].hidevar] && (v[y].on = 0),
                    1 == v[y].hidewovar && exist(v[y].hidevar2) && !options[v[y].hidevar2] && (v[y].on = 0)),
                    1 == v.nocontrols && (v[y].on = 0),
                    1 == v[y].on) {
                        if ("line" == action || "volume" == action ? (b[y] = new ControlLine(y,action),
                        b[y].Resize(b[y].s("w"))) : b[y] = new Control(y),
                        butNames.push(y),
                        "title" == b[y].g("action") && "" == b[y].s("text") && ("" != b[y].s("var") && exist(v[b[y].s("var")]) || b[y].set("display", !1)),
                        "custom" == b[y].g("action")) {
                            var lu = b[y].s("linkurl");
                            if (lu) {
                                if (0 == lu.indexOf("api:") && lu.indexOf(",0/1") > 0) {
                                    var z = lu.split(",");
                                    0 == apiProcessor(z[0].substr(4)) && b[y].CustomSwitch(0)
                                }
                                indOf([lu], "share") && (o.shareme = !0)
                            }
                        }
                        b[y].set("scale", b[y].s("scale"))
                    }
                }
            }
        function ControlX(e) {
            var t = 0;
            if (e)
                if ("line" == e.g("action"))
                    t = butPosition.left + e.s("marginleft") + e.g("width") / 2,
                    null != butPosition.rightbs || (butPosition.rightbs = []);
                else if (null != butPosition.rightbs) {
                    var i = e.g("width") + e.s("marginright") + e.s("marginleft");
                    HideProof(e) && (i = 0),
                    1 != e.s("hidden") || e.g("show") || (i = 0),
                    e.s("vertical") > 0 && (i = 0),
                    t = bg.g("w") - 1 * v.toolbar.lrpd - i + e.g("width") / 2 + e.s("marginleft");
                    var s = 0;
                    for (butPosition.right -= i,
                    s = 0; s < butPosition.rightbs.length; s++) {
                        var r = b[butPosition.rightbs[s]];
                        r.s("vertical") > 0 ? css(r.c(), {
                            left: r.g("x0") - i
                        }) : css(r.c(), {
                            left: r.g("x") - i
                        }),
                        r.set("x0", r.g("x"))
                    }
                    butPosition.rightbs.push(e.g("key")),
                    e.set("rightside", 1)
                } else if (1 != e.s("hidden") || e.g("show") || e.g("cul"))
                    if (e.s("vertical") > 0)
                        t = butPosition.left + e.s("marginleft") + e.s("marginright");
                    else {
                        var n = !1;
                        "volume" == e.g("action") && (1 != e.s("hide") || 1 != e.s("hideoutmute") || e.g("cul") || (o.hidden_volume_over_process || o.hidden_volume_over ? stretch_with_volume || (stretch_width -= e.g("width") + e.s("marginleft") + e.s("marginright"),
                        stretch_with_volume = !0) : (n = !0,
                        stretch_with_volume = !1))),
                        HideProof(e) && (n = !0),
                        n ? t = butPosition.left : (butPosition.left += e.g("width") / 2 + e.s("marginleft"),
                        t = butPosition.left,
                        butPosition.left += e.g("width") / 2 + e.s("marginright"))
                    }
                else
                    "volume" == e.g("action") && 1 == e.s("hide") && 1 == e.s("hideoutmute") && stretch_with_volume && (stretch_width += e.g("width") + e.s("marginleft") + e.s("marginright"),
                    stretch_with_volume = !1);
            return t
        }
        function CreateShare() {
            o.shareme && "function" == typeof PluginShare && (o.share = new PluginShare)
        }
        function ControlCoordinate(e) {
            var t = o.fullscreen && 0 == v.toolbar.stretchonfullscreen ? o.normal_w : o.screen_w
              , i = o.screen_h
              , s = 0;
            e != bg && (s = t / 2 + e.s("marginleft") - e.s("marginright"));
            var r = i / 2
              , n = e.g("width")
              , a = e.g("height")
              , l = e.s("position");
            if (l.indexOf("center") > -1 && (s = o.screen_w / 2 + e.s("marginleft") - e.s("marginright")),
            0 == l.indexOf("top") && (r = a / 2 + e.s("marginproctop") * o.screen_h / 100),
            0 == l.indexOf("bottom") && (r = o.screen_h - (e == bg ? a : a / 2) - e.s("marginprocbottom") * o.screen_h / 100),
            l.indexOf("right") > -1 && (s = o.screen_w - n / 2 + e.s("marginleft") - e.s("marginright") - e.s("marginprocright") * o.screen_w / 100),
            l.indexOf("left") > -1 && (s = n / 2 + e.s("marginleft") - ("text" == e.s("type") ? 0 : e.s("marginright")) + e.s("marginprocleft") * o.screen_w / 100),
            l.indexOf("timeline") > -1 && (r = -o.timeline_h / 2 - e.s("marginprocbottom") * o.timeline_h / 100 + e.s("marginproctop") * o.timeline_h / 100,
            s = ("timeline" == l ? -1 : 1) * o.timeline_w / 2 + e.s("marginprocleft") * o.timeline_w / 100 + e.s("marginleft") - e.s("marginright")),
            l.indexOf("controls") > -1) {
                var c = ControlX(e);
                s = (bg && bg.c() ? int(bg.c().offsetLeft) : 0) + c,
                "controls-right" == l && (s += stretch_width),
                r = "top" == v.toolbar.position ? v.toolbar.h / 2 - (v.toolbar_margintop < 0 ? v.toolbar_margintop : 0) : i - v.toolbar.h / 2
            }
            return {
                x: s,
                y: r + e.s("margintop") - e.s("marginbottom")
            }
        }
        function ResizeMain() {
            o.sublist && o.sublist.Resize()
        }
        function Resize(e) {
            var t = o.fullscreen && 0 == v.toolbar.stretchonfullscreen ? o.normal_w : o.screen_w;
            o.screen_h;
            1 == v.toolbar.lrpp ? (v.toolbar.lrppp = exist2(v.toolbar.lrpps) && o.small ? v.toolbar.lrpps : v.toolbar.leftandrightpadding,
            v.toolbar.lrpd = o.screen_w * v.toolbar.lrppp / 100) : v.toolbar.lrpd = v.toolbar.leftandrightpadding,
            css(bg.c(), {
                top: ("top" == v.toolbar.position ? 0 : o.screen_h - v.toolbar.h) - v.toolbar_margintop
            }),
            bg.set("y0", o.screen_h - v.toolbar.h - v.toolbar_margintop),
            0 == v.toolbar.stretchonfullscreen && bg && (css(bg.c(), {
                width: t,
                left: 0,
                "margin-left": 0
            }),
            bg.set("w", t),
            o.fullscreen && css(bg.c(), {
                left: "50%",
                "margin-left": -t / 2
            })),
            butPosition = {
                left: 1 * v.toolbar.lrpd,
                right: bg.g("w") - 1 * v.toolbar.lrpd
            };
            var i, s = !1;
            bg.g("show") || (bg.set("display", !0),
            s = !0);
            for (var r = 0; r < butNames.length; r++)
                if (i = butNames[r],
                b[i]) {
                    var n = ControlCoordinate(b[i]);
                    if (n) {
                        if ("position" == b[i].s("animation") && exist(o.motions[i])) {
                            if (b[i].g("x0") == n.x && b[i].g("y0") == n.y)
                                continue;
                            o.motions[i].XY(b[i].g("x0"), n.x, b[i].g("y0"), n.y)
                        }
                        b[i].set("x0", n.x),
                        b[i].set("y0", n.y),
                        1 != b[i].s("hidden") || b[i].g("show") || e ? css(b[i].c(), {
                            position: "absolute",
                            left: b[i].g("x0"),
                            top: b[i].g("y0")
                        }) : HidePositionControl(b[i])
                    }
                }
            for (i in s && bg.set("display", !1),
            stretch_width = 0,
            b)
                if (b.hasOwnProperty(i) && ("controls-right" == b[i].s("position") && "line" != b[i].g("action") && stretch_width > -1 && (stretch_width = butPosition.right - butPosition.left),
                "line" == b[i].g("action") && bg)) {
                    var a, l = b[i].s("marginleft") + b[i].s("marginprocleft") * o.screen_w / 100, c = b[i].s("marginright") + b[i].s("marginprocright") * o.screen_w / 100;
                    1 == b[i].s("customwidth") ? a = 1 == b[i].s("wproc") ? o.screen_w * b[i].s("w") / 100 - l - c : b[i].s("w") : b[i].s("position").indexOf("controls") > -1 ? (a = butPosition.right - butPosition.left - l - c,
                    css(b[i].c(), {
                        left: int(bg.c().offsetLeft) + butPosition.left + l + a / 2
                    }),
                    stretch_width = -1) : (a = bg.g("w") - l - c,
                    bg.c() && css(b[i].c(), {
                        left: int(bg.c().offsetLeft) + l + a / 2
                    })),
                    b[i].set("x0", b[i].g("x")),
                    b[i].Resize(a)
                }
            settings && ResizeSettings(settings),
            playlist && ResizeSettings(playlist),
            (resizeonwidth || o.fullscreen || stretch_width_last != stretch_width) && ShowOrHide()
        }
        function HidePositionControl(e) {
            var t = 0
              , i = 0;
            e.s("position").indexOf("right") > -1 && -1 == e.s("position").indexOf("controls") && (t = o.screen_w + e.g("width") + 10),
            e.s("position").indexOf("left") > -1 && (t = -e.g("width") - 10),
            e.s("position").indexOf("top") > -1 && (i = 2 * -e.g("height")),
            (e.s("position").indexOf("bottom") > -1 || e.s("position").indexOf("controls") > -1) && (i = o.screen_h + e.g("height") + e.g("width") + 10),
            t > 0 && css(e.c(), {
                left: t
            }),
            i > 0 && css(e.c(), {
                top: i
            })
        }
        function ResizeSettings(e) {
            var t = -2e3;
            e.resizePlaylist();
            var i = o.screen_h - v.toolbar.h * (e.s("position").indexOf("top") > -1 ? 1 : 2);
            e == playlist && 1 == v.change2playlist && (i = o.screen_h);
            var s = 1 * (o.system.mobile && o.screen_h < 450 && exist(e.s("hmaxk2")) ? e.s("hmaxk2") : e.s("hmaxk"))
              , r = i - (o.fullscreen && !o.system.mobile ? 100 + s : s) - (e == playlist && 0 == s ? e.s("margintop") : 0);
            if (r < 100 && (r = 100),
            css(e.c(), {
                "max-height": r
            }),
            e.co() && css(e.co(), {
                "max-height": r
            }),
            e.g("show") && (t = o.screen_h / 2 - e.g("height") / 2 + e.s("margintop") - e.s("marginbottom"),
            e.s("position").indexOf("top") > -1 && (t = e.s("margintop") - e.s("marginbottom")),
            e.s("position").indexOf("bottom") > -1 && (t = o.screen_h - ("top" != v.toolbar.position ? v.toolbar.h : 0) - e.g("height") + e.s("margintop") - e.s("marginbottom")),
            t < 0 && (t = 0)),
            "settings" == e.g("key") && o.sttx) {
                var n = o.screen_w - e.g("width") - e.s("marginright");
                o.sttx > n ? css(e.c(), {
                    position: "absolute",
                    right: e.s("marginright"),
                    left: "auto",
                    top: t
                }) : css(e.c(), {
                    position: "absolute",
                    left: o.sttx,
                    right: "auto",
                    top: o.stty < t ? o.stty : t
                })
            } else if (e.s("position").indexOf("right") > -1)
                css(e.c(), {
                    position: "absolute",
                    right: e.s("marginright") - e.s("scrollwidth"),
                    left: "auto",
                    top: t
                });
            else if (e.s("position").indexOf("left") > -1)
                css(e.c(), {
                    position: "absolute",
                    left: e.s("marginleft"),
                    right: "auto",
                    top: t
                });
            else if ("playlist" == e.g("key") && 1 == e.s("floatleft"))
                css(e.c(), {
                    position: "absolute",
                    left: o.screen_w / 2 - e.g("width") / 2 + e.s("marginleft") / 2 - e.s("marginright") / 2,
                    top: t
                });
            else {
                var a = o.screen_w / 2 - e.g("width") / 2 + e.s("marginleft") - e.s("marginright");
                css(e.c(), {
                    position: "absolute",
                    left: a > 0 ? a : 0,
                    top: t
                })
            }
            e.Arrows()
        }
        function PlayAction() {
            o.muted && 1 == v.unmuteonplay && (o.actions.Unmute(),
            v.unmuteonplay = 0),
            1 == v.hotkey.on && 1 == v.hotkey.icons && 1 == v.hotkey.playiconbut && PluginHotIcon("play", 1),
            js("userplay")
        }
        function PauseAction() {
            1 == v.hotkey.on && 1 == v.hotkey.icons && 1 == v.hotkey.playiconbut && PluginHotIcon("play", 0),
            js("userpause")
        }
        function Action(but, type) {
            o.acted = !0,
            _lastactbut = but;
            var a = but.g("action");
            if ("play" == a ? (o.actions.Play(),
            PlayAction()) : ("pause" == a && (o.rldplay = 0,
            o.actions.Pause(),
            PauseAction()),
            "stop" == a && o.actions.StopMedia()),
            "back" == a && o.actions.Seek(0, !1),
            "fullscreen" == a ? !o.casting && o.actions.Fullscreen() : "normalscreen" == a && o.actions.Normalscreen(),
            "line" == a) {
                var ld = o.media.duration()
                  , lt = but.g("click") * ld;
                if (v.delete > 0 && (ld -= 1 * v.delete,
                lt = but.g("click") * ld + 1 * v.delete),
                v.seekwindow > 0 && v.seekwindow / ld <= 1 - but.g("click"))
                    return;
                js(a, lt),
                o.actions.Seek(lt, !0),
                o.continue && (o.continue.write(lt, ld),
                o.seekto > 0 && (o.seekto = void 0)),
                js("userseek", lt)
            }
            if ("volume" == a) {
                var x = but.g("click");
                x < .02 && (x = 0),
                x > 1 && (x = 1),
                "speed" == but.s("customline") ? (x = parseFloat(x * o.files_speed.slice(-1)[0]).toFixed(1),
                o.actions.SetSpeed(x, 1)) : "volume2" == but.s("customline") ? o.media.pipVol(x) : (o.storage && 1 == v.volumestore && (localStorage.setItem("pljsvolume", x),
                but.g("click") > 0 || o.system.iphone || 0 == v.mutestore ? localStorage.removeItem("pljsmute") : localStorage.setItem("pljsmute", 1)),
                o.actions.Volume(x))
            }
            if ("mute" == a ? (o.storage && !o.system.iphone && 1 == v.mutestore && localStorage.setItem("pljsmute", 1),
            o.actions.Mute(),
            1 == v.hotkey.icons && 1 == v.hotkey.muteiconbut && PluginHotIcon("mute", 0)) : "unmute" == a && (o.storage && localStorage.removeItem("pljsmute"),
            o.actions.Unmute(),
            1 == v.hotkey.icons && 1 == v.hotkey.muteiconbut && PluginHotIcon("mute", 1)),
            0 == a.indexOf("time") && (but.isOn() ? but.Off() : but.On()),
            "rotate" == a && o.media.Rotate(),
            "scale+" == a && o.media.Scale(.1),
            "scale-" == a && o.media.Scale(-.1),
            "scale" == a && o.media.Scale(0),
            "live" == a && (apiProcessor("restart"),
            but.set("iconopacity", 1),
            but.set("saturate", 1)),
            "share" == a && (js("share"),
            ShowShare()),
            "settings" == a && (o.sttx = void 0,
            settings && (settings.g("show") ? settings.hide() : settings.show())),
            "playlist" == a) {
                if (o.overopentimeout == a)
                    return;
                o.controls.PlaylistShow()
            }
            if ("next" == a && o.controls.PlaylistNext(),
            "prev" == a && o.controls.PlaylistPrev(),
            "custom" == a && 1 == but.s("link") && "" != but.s("linkurl")) {
                var x = trim(but.s("linkurl"));
                if (o.overopentimeout == a + x)
                    return;
                x.indexOf("{time}") > -1 && (x = x.replace("{time}", exist(o.continue) ? o.continue.flag().t : o.media.time())),
                x.indexOf("{file}") > -1 && (x = x.replace("{file}", o.media.currentFile())),
                x.indexOf("{title}") > -1 && (x = x.replace("{title}", v.title.replace(/,/gi, " "))),
                "airplay" == x && o.media.Airplay(),
                "openfile" == x && o.upldfl && o.upldfl.open(),
                0 == x.indexOf("skip") && but.s("skip") > 0 && o.actions.Seek(o.skpbt ? o.skpbt.tskp() : but.s("skip")),
                0 == x.indexOf("cancelskip") && o.skpbt && o.skpbt.cancel(),
                "seektome" == x && (o.actions.Seek(but.s("marginprocleft") * o.media.duration() / 100),
                !o.play && o.actions.Play()),
                1 == but.s("linkpause") && o.actions.Pause();
                var y = x.split(",");
                if (0 == x.indexOf("api:"))
                    for (var z = x.substr(4).split(";"), i = 0; i < z.length; i++)
                        if (y = z[i].split(","),
                        y.length > 1)
                            "seek" == y[0] && 1 == v.hotkey.icons && 1 == v.hotkey.seekiconbut && PluginHotIcon("seek", y[1] > 0 ? 1 : 0),
                            apiProcessor(y[0], y[1], but),
                            js("userseek", y[1]),
                            ("0/1" == y[1] || "1/0" == y[1]) && reRightMenu();
                        else if ("screenshot" == y[0]) {
                            var ss = apiProcessor(y[0]);
                            if (ss) {
                                if (ss.indexOf("data") > -1) {
                                    if (1 == v.ssfly) {
                                        var img = document.createElement("img");
                                        img.setAttribute("src", ss),
                                        css(img, {
                                            position: "fixed",
                                            right: exist(v.ssflyp) ? v.ssflyp : 20,
                                            bottom: exist(v.ssflyp) ? v.ssflyp : 20,
                                            width: 0,
                                            transition: "width 0.5s cubic-bezier(.75,-0.5,0,1.75)"
                                        }),
                                        img.style.zIndex = 1001,
                                        document.body.appendChild(img),
                                        setTimeout((function() {
                                            css(img, {
                                                width: exist(v.ssflyw) ? v.ssflyw : 200
                                            })
                                        }
                                        ), 1),
                                        img.onclick = function() {
                                            this.parentNode.removeChild(this)
                                        }
                                    }
                                    if (1 == v.ssdown) {
                                        var a = createElement("a");
                                        a.href = ss,
                                        a.download = y[0] + ".jpg",
                                        a.click()
                                    }
                                }
                            } else
                                log(y[0] + " error")
                        } else
                            apiProcessor(y[0], void 0, but),
                            "play" == y[0] && PlayAction(),
                            "pause" == y[0] && PauseAction();
                else
                    0 == x.indexOf("js:") && (x.indexOf("(") > 0 && x.indexOf(")") > 0 ? eval(x.substr(3)) : eval(y[0].substr(3) + "(" + (exist(y[1]) ? '"' + y[1] + '"' : "") + (exist(y[2]) ? ',"' + y[2] + '"' : "") + ")")),
                    0 == x.indexOf("event:") && JsEvent(x.substr(6), o.media.time()),
                    0 == x.indexOf("share:") && o.share && o.share.api(x.substr(6)),
                    0 == x.indexOf("effect:") && o.effects && apiProcessor("effect", x.substr(7)),
                    0 != x.indexOf("http") && 0 != x.indexOf("/") && 0 != x.indexOf("?") && 0 != x.indexOf("url:") || (0 == x.indexOf("url:") && (x = x.substr(4)),
                    window.open(x, but.s("linktarget"))),
                    0 == x.indexOf("download") && o.actions.Download(),
                    "api:pipwebkit" == x && o.media.PipWebkit();
                if (x.indexOf("settings#") > -1 && settings) {
                    var si = x.substr(9).split(",");
                    if (settings.g("show") && settings.g("open") == si[0])
                        o.sttx = void 0,
                        o.stty = void 0,
                        settings.hide();
                    else {
                        o.sttx = but.g("x") - but.g("width") / 2,
                        o.stty = but.g("y") + but.g("h");
                        for (var i = 0; i < si.length; i++)
                            0 == i && settings.show(),
                            settings.open(si[i]);
                        playlist && playlist.plclose()
                    }
                }
                if (x.indexOf("settings:") > -1 && 1 == v.settings.combined && (o.settings2 || (o.settings2 = new PluginSettings2),
                1 == v.settings.showovercontrol ? "over" == type ? o.settings2.show(x) : o.settings2.toggle(x) : type || o.settings2.toggle(x)),
                "unblock" == x) {
                    o.actions.RemoveCurtain(),
                    o.stopkeys = 0,
                    but.set("hide2");
                    var bl = FindBut("linkurl", "block");
                    bl && bl.set("hide2")
                }
                "block" == x && (but.UpdateText("OK"),
                but.s("linkurl2") && (window.location.href = trim(but.s("linkurl2"))))
            }
        }
        function TitlePl() {
            for (var e in b)
                b.hasOwnProperty(e) && "custom" == b[e].g("action") && "text" == b[e].s("type") && b[e].RenewFromTitle(!0)
        }
        function ShowShare() {
            exist(o.share) && o.share.Show()
        }
        function CustomTextButs() {
            if (v.customtext && "object" == typeof v.customtext)
                for (var e in v.customtext)
                    v.customtext.hasOwnProperty(e) && CustomText(e, v.customtext[e])
        }
        function CustomText(e, t) {
            if (e)
                for (var o in b)
                    b.hasOwnProperty(o) && b[o].g("ctxt") && b[o].s("dom") == e && (b[o].g("show") && 1 != b[o].s("hidden") || HideProof(b[o]) || (b[o].set("unhidden"),
                    b[o].set("display", !0)),
                    b[o].CustomText(t))
        }
        function CloseSttx() {
            o.sttx && (o.sttx = void 0,
            o.stty = void 0,
            settings.hide())
        }
        function ClosePl() {
            playlist && playlist.g("show") && 1 == v.playlist.autohide && o.controls.Playlist()
        }
        function MbMv() {
            o.system.mobile && (o.mouseHere = !0,
            clearTimeout(o.mbmv_timeout),
            o.mbmv_timeout = setTimeout((function() {
                o.mouseHere = !1
            }
            ), 500))
        }
        function ShowOrHide(e) {
            for (var t in 3 == e && MbMv(),
            b)
                b.hasOwnProperty(t) && "buffer" != b[t].g("action") && ShowOrHideProcessor(b[t]);
            ShowOrHideProcessor(bg),
            stretch_width_last != stretch_width && (stretch_width_last = stretch_width,
            Resize()),
            o.tlbrhd && ToolbarDown(!o.starttimeout && !o.mouseHere && !o.fullscreen && o.play && 1 != v.toolbar.hidejustfull && !o.casting)
        }
        function ShowForce() {
            var e = toolbarHidden && 1 == v.toolbar.hidewithoutmoving;
            if (1 == v.toolbar.hide && (o.play || 1 != v.toolbar.hideonpause || (e = !1)),
            e) {
                for (var t in b)
                    b.hasOwnProperty(t) && "buffer" != b[t].g("action") && ShowOrHideProcessor(b[t], !1);
                css(o.frame, {
                    cursor: "default"
                }),
                o.fcdef = !0,
                ShowOrHideProcessor(bg, !1),
                bg.g("show") && ToolbarShow(),
                ToolbarDown(!1)
            }
            o.cntrlrsz && (Resize(!0),
            o.cntrlrsz = !1)
        }
        function HideForce() {
            if (!o.system.mobile || !o.mouseHere) {
                var e, t = o.play && 1 == v.toolbar.hidewithoutmoving && !o.mouseDown;
                if (o.controlover && 1 == v.toolbar.showovr && (t = !1),
                o.play || 1 != v.toolbar.hide || 1 != v.toolbar.hideonpause || o.mouseHere && 1 == v.toolbar.hidepsms && !o.system.mobile || (t = !0),
                playlist && playlist.g("open?") && (e = !0),
                settings && (settings.g("show") && (e = !0),
                settings.g("show") && o.setaction && (t = !1)),
                e && 1 == v.toolbar.nohdstt) {
                    var i = v.toolbar.nohdsttm;
                    if (1 == i && o.system.mobile)
                        return;
                    if (0 == i || !exist(i))
                        return
                }
                if (o.casting && (t = !1),
                t) {
                    for (var s in b)
                        b.hasOwnProperty(s) && "buffer" != b[s].g("action") && ShowOrHideProcessor(b[s], !0);
                    ShowOrHideProcessor(bg, !0),
                    bg.g("show") || (toolbarHidden = !0,
                    o.media.ToolbarHide(),
                    o.play && (css(o.frame, {
                        cursor: "none"
                    }),
                    o.fcdef = !1)),
                    ToolbarDown(!0)
                }
            }
        }
        function HideInterval() {
            1 == v.toolbar.hidewithoutmoving && (1 != v.toolbar.hidejustfull || o.fullscreen || o.fullscreen_process) && (clearInterval(o.toolbarInterval),
            o.toolbarInterval = setInterval(HideForce, 1e3 * (v.toolbar.hideleavetimeout > 0 ? v.toolbar.hideleavetimeout : v.toolbar.hidetimeout)))
        }
        function ShowOrHideProcessor(e, t) {
            var i = !1
              , s = !1
              , r = !1;
            1 == v.toolbar.hide ? (!o.starttimeout && !o.mouseHere && !o.fullscreen && o.play && 1 != v.toolbar.hidejustfull && !o.casting || o.fullscreen && toolbarHidden && !o.fcdef && 1 != v.toolbar.shwfsps || o.actions.plNxtExst() && o.ended && !o.mouseHere ? (i = !0,
            s = !1,
            r = !0) : (i = !1,
            s = !0),
            exist(t) && !o.casting && (s = !(i = t)),
            !o.tlbrhd || 0 != e.s("position").indexOf("controls") && "line" != e.s("action") || (i = !1,
            s = !0),
            1 != v.toolbar.hideonpause || o.play || o.mouseHere && 1 == v.toolbar.hidepsms && !o.system.mobile || (i = !0,
            s = !1,
            r = !1),
            1 != v.toolbar.hideunact || o.acted || (i = !0,
            s = !1,
            r = !0),
            1 == v.toolbar.showuntilmeta && !o.metadata && o.play && (i = !1,
            s = !0)) : 1 != e.s("hide") && (s = !0),
            s && !o.fcdef && (css(o.frame, {
                cursor: "default"
            }),
            o.fcdef = !0);
            var n = e.g("action");
            ("custom" == n && -1 == e.s("position").indexOf("controls") || 1 == e.s("hideonbar")) && (i = !1,
            s = !0),
            o.casting && "line" == n && -1 == o.media.duration() && (i = !0,
            s = !1);
            var a = !1
              , l = HideProof(e);
            if (1 == e.s("hide") && (1 == e.s("hideonleaveandplay") && (r || t || o.play && !o.mouseHere) && (r || t) && (l = !0),
            1 == e.s("hideonbar") && (r || t || (l = !0)),
            1 == e.s("hidelap") && o.play && !o.mouseHere && (l = !0),
            1 != e.s("hideonwidth") && 1 != e.s("hideoverwidth") && 1 != e.s("hideonfullscreen") || (resizeonwidth = !0)),
            l ? (i = !0,
            s = !1) : !i && (s = !0),
            "volume" == e.s("action") && (1 != e.s("hide") || 1 != e.s("hideoutmute") || e.g("cul") || (i = !0,
            s = !1,
            r || !o.hidden_volume_over && !o.hidden_volume_over_process || t || 1 == e.s("hiddenwidth") ? a = !0 : (i = !1,
            s = !0))),
            (o.nativecontrols || !o.start && 1 == v.toolbar.hide && 1 == v.toolbar.hideuntilstarted || !o.metadata && 1 == v.toolbar.hide && 1 == v.toolbar.hideuntilmeta || !o.fullscreen && 1 == v.toolbar.hide && 1 == v.toolbar.hidesmall) && ((o.nativecontrols && "control_start" == e.g("key") && 1 != e.s("showntv") || indOf2(e.s("position"), ["bottom", "controls"])) && (i = !0,
            s = !1),
            1 != v.toolbar.hidejustfull || o.fullscreen || (i = !1,
            s = !0)),
            settings && settings.g("show") && 1 != v.settings.always && (r = !1,
            t = !1),
            !(playlist && o.droplist && 1 == v.playlist.dropopen && o.droplist.Visible())) {
                if ("share" == n && exist(o.share) && o.share.empty() && (i = !0,
                s = !1,
                e.set("animation", "none")),
                "playlist" != n && "next" != n && "prev" != n && 1 != e.s("hidewithoutplaylist") || (playlist ? playlist.empty() && 0 != e.s("hidewithoutplaylist") && (i = !0,
                s = !1,
                e.set("animation", "none")) : (i = !0,
                s = !1)),
                1 == o.hideall && (i = !0,
                s = !1),
                a) {
                    var c = ControlCoordinate(e);
                    c && (c.y > 0 && e.set("y0", c.y),
                    css(e.c(), {
                        position: "absolute",
                        top: e.g("y0")
                    }))
                }
                i && HideControl(e, !!firstly),
                s && ShowControl(e),
                e == bg && (!i && s && (ToolbarShow(),
                show2(bg2),
                bgtop && bgtop.set("opacity", bgtop.s("a")),
                toolbarHidden = !1,
                0 == uijs && js("ui", 1),
                uijs = 1,
                o.cut && o.cutted && o.cut.show()),
                !i || s || o.casting || (o.media.ToolbarHide(),
                hide2(bg2),
                bgtop && bgtop.set("opacity", 0),
                toolbarHidden = !0,
                1 == uijs && js("ui", 0),
                uijs = 0,
                o.cut && o.cutted && o.cut.hide()),
                settings && settings.tb() && (settings.g("show") ? !s && i && settings.hide(2) : s && !i && settings.show()),
                playlist && (1 != v.playlist.always || playlist.empty() || (s || o.nativecontrols ? 1 == v.playlist.alwaysnotfullscreen && o.fullscreen || playlist.g("show") || (1 == v.playlist.alwaysjustpause ? !o.play && !o.newplay && playlist.show() : playlist.show()) : i && playlist.g("show") && playlist.hide())))
            }
        }
        function HideProof(e) {
            var t = !1
              , i = e.g("action");
            if (1 == e.s("hide")) {
                1 == e.s("hideonplay") && (o.play || o.newplay) && (t = !0),
                1 == e.s("hideonpause") && !o.play && !o.newplay && (t = !0),
                1 == e.s("hideonend") && o.ended && (t = !0),
                1 == e.s("hdnn") ? t = !0 : (1 == e.s("hideondesktop") && o.system.desktop && (e.set("hdnn", 1),
                t = !0),
                1 == e.s("hideonmobile") && o.system.mobile && (e.set("hdnn", 1),
                t = !0)),
                1 == e.s("hideoverwidth") && (o.screen_w > e.s("hideoverwidthlimit") ? (e.set("hiddenwidth", 1),
                t = !0) : e.set("hiddenwidth", 0)),
                1 != e.s("hideunwait") || waiting || (t = !0,
                o.wtcntrl = 1),
                1 != e.s("hidenoerr") || o.media_error || (t = !0),
                1 == e.s("hideerr") && o.media_error && (t = !0),
                1 == e.s("hidewait") && waiting && (t = !0,
                o.wtcntrl = 1),
                1 == e.s("hideonwidth") && (o.screen_w <= e.s("hideonwidthlimit") ? (e.set("hiddenwidth", 1),
                t = !0) : e.set("hiddenwidth", 0)),
                1 == e.s("hideafterstart") && o.start && (t = !0);
                var s = o.media.time()
                  , r = o.media.duration();
                1 == e.s("hideafter") && e.s("hideaftersec") > 0 && s >= e.s("hideaftersec") && (t = !0),
                1 == e.s("hidebefore") && e.s("hidebeforesec") > 0 && s < e.s("hidebeforesec") && (t = !0),
                1 == e.s("hidebefore2") && e.s("hidebeforesec2") > 0 && (s < r - e.s("hidebeforesec2") || 0 == r) && (t = !0),
                1 == e.s("hidelastpl") && playlist && (playlist.PlaylistNextExist() || (t = !0)),
                1 == e.s("hide0timestore") && ((o.start || !o.continue || o.media.isLive()) && 1 != e.s("hideuntilstarted") && (t = !0),
                o.continue && 0 == o.continue.flag().t && (t = !0)),
                1 == e.s("hideuntilstarted") && !o.start && (t = !0),
                e.s("hideuntilto") > 0 && (t = !0),
                1 == e.s("hideonvar") && exist(e.s("hidevar")) && options[e.s("hidevar")] && (t = !0),
                1 == e.s("hideuntiltext") && (exist(e.s("customtext")) || (t = !0)),
                1 == e.s("hidewovar") && exist(e.s("hidevar2")) && !options[e.s("hidevar2")] && (t = !0),
                1 == e.s("hideuntilstartedios") && o.system.ios && (!o.start || o.newfile) && (t = !0),
                1 == e.s("hideuntilended") && !o.media.ended() && (t = !0),
                1 == e.s("hideonvod") && !o.media.isLive() && (t = !0),
                1 == e.s("hideonleave") && !o.mouseHere && (t = !0),
                1 == e.s("hidenormscreen") && !o.fullscreen && (t = !0),
                1 == e.s("hideonfullscreen") && o.fullscreen && (t = !0),
                1 == e.s("hideonunmute") && !o.muted && (t = !0),
                1 == e.s("hideonlive") && o.media.isLive() && -1 == o.media.currentFile().indexOf("?DVR") && (t = !0),
                1 == e.s("hidewithposter") && isVisible(o.poster) && (t = !0),
                1 == e.s("hideuntilmeta") && !o.metadata && (t = !0),
                1 == e.s("hideonmeta") && o.metadata && (t = !0),
                1 == e.s("hidemini") && o.mini && (t = !0),
                1 == e.s("hidenomini") && !o.mini && (t = !0),
                1 == e.s("hideafterclick") && e.g("clicked") && (t = !0),
                1 == e.s("hidenoab") && !o.ab && (t = !0),
                1 == e.s("hideab") && o.ab && (t = !0),
                1 == e.s("hideonyoutube") && 1 == v.preload && 1 == v.screenclick && ("youtube" != o.file_type || exist(v.poster) || 0 != v.youtubeposter || o.start && "ended" != o.media.status() || "" == v.poster || (t = !0))
            }
            if ("custom" == i) {
                var n = e.s("linkurl");
                if (n && ("api:airplay" != n && "airplay" != n || o.airplay || o.airplayed || o.wasapl || (t = !0),
                "api:pipwebkit" == n && (o.pipwebkit && (o.start || 0 != v.preload) || (t = !0)),
                "api:subfeed" == n && (t = !0,
                exist(o.sbt) && o.sbt.exst() && o.subs && o.subtitle_on && (t = !1)),
                "api:unfixing" == n && (o.mini || (t = !0)),
                n.indexOf("captions") > -1 && (o.captions || (t = !0)),
                indOf([n], "skip") && !indOf([n], "js:") && 1 != e.s("hdnn"))) {
                    var a = !1;
                    exist(v.skip) && (o.skpbt || "function" == typeof PluginSkip && (o.skpbt = new PluginSkip),
                    o.skpbt && (a = o.skpbt.check(e))),
                    !a && (t = !0)
                }
            }
            if ("playlist" != i && "next" != i && "prev" != i || (playlist ? playlist.empty() && (t = !0) : t = !0),
            "settings" == i && (settings ? settings.empty() && (t = !0,
            "hls" != o.file_type && e.set("animation", "none")) : t = !0),
            "text" == e.g("type") && 0 == e.g("length") && (t = !0),
            e.g("settings#") && (e.g("set#visible") || (t = !0)),
            1 == e.s("chromecast")) {
                var l = gebi("pjs_cast_button_" + v.id);
                (0 != o.media.duration() || 0 != o.media.time()) && o.tagvideo && isVisible(l) && o.cast_available || (t = !0)
            }
            return 1 == e.s("hidetime") && !t && e.set("hidetime", 1),
            "duration" == i && o.media.isLive() && 1 != e.s("showlive") && (t = !0),
            "control_start" == e.g("key") && o.nativecontrols && o.system.android && 1 != e.s("showntv") && (t = !0),
            t
        }
        function HideControl(e, t) {
            e.g("show") && (o.fullscreen_process || "none" == e.s("animation") || t ? e.set("display", !1) : HideAnimate(e),
            e.set("show", !1))
        }
        function ShowControl(e) {
            e.g("show") || ("none" == e.s("animation") || o.fullscreen_process ? (e.set("display", !0),
            o.fullscreen_process && e.set("opacity", 1),
            "volume" == e.g("action") && o.hidden_volume && HidePositionControl(e)) : ShowAnimate(e),
            "volume" == e.s("action") && o.controls.Volume(o.muted ? 0 : v.volume),
            "line" == e.s("action") && o.actions.Loading(),
            e.set("show", !0))
        }
        function HideAnimate(e) {
            killMotion(e.g("key"));
            var t = "alpha|"
              , i = "0|"
              , s = e.s("animation");
            1 == e.s("apdra") && (t = "",
            i = "");
            var r = e.s("position")
              , n = e.g("scaleX");
            exist2(e.s("apdr")) && (r = e.s("apdr")),
            indOf2(r, ["bottom"]) && o.tlbrhd && (r = ""),
            "scale" == s && (t += "scale|",
            i += "0|"),
            "position" == s && (r.indexOf("right") > -1 && -1 == r.indexOf("controls") && (t += "x|",
            i += int(o.screen_w + e.g("width") / 2 * n) + "|"),
            r.indexOf("left") > -1 && (t += "x|",
            i += int(-e.g("width") / 2) * n + "|"),
            r.indexOf("top") > -1 && (t += "y|",
            i += -e.g("height") / 2 * n + "|"),
            indOf2(r, ["bottom", "controls", "timeline"]) && (t += "y|",
            "line" == e.g("action") || "volume" == e.g("action") ? i += int(o.screen_h + e.s("h") + (e.s("h") < 20 ? 20 - e.s("h") : 0)) + "|" : i += int(o.screen_h + e.g("height") / 2) + "|"),
            "center" == r && (t += "scale|",
            i += "0|"));
            new Motion({
                mc: e,
                me: e.g("key"),
                type: t.substr(0, t.length - 1),
                to: i.substr(0, i.length - 1),
                hide: 1
            })
        }
        function ShowAnimate(e) {
            killMotion(e.g("key"));
            var t = ""
              , o = ""
              , i = e.s("animation")
              , s = e.s("position");
            if (exist2(e.s("apdr")) && (s = e.s("apdr")),
            1 != e.g("opacity") && 1 != e.s("apdra") && (t = "alpha|",
            o = ("bg" == e.g("key") ? v.toolbar.a : "1") + "|"),
            "scale" == i && e.g("scaleX") != e.s("scale") && (t += "scale|",
            o += e.s("scale") + "|"),
            "position" == i && ("center" == s ? e.g("scaleX") != e.s("scale") && (t += "scale|",
            o += e.s("scale") + "|") : s.indexOf("controls") > -1 || "bottom" == s ? e.g("y") != e.g("y0") && (t += "y|",
            o += e.g("y0") + "|") : (t += "x|y|",
            o += e.g("x0") + "|" + e.g("y0") + "|")),
            "" != t && "" != o)
                new Motion({
                    mc: e,
                    me: e.g("key"),
                    type: t.substr(0, t.length - 1),
                    to: o.substr(0, o.length - 1),
                    show: 1
                });
            else
                e.set("display", !0)
        }
        function ToolbarDown(e) {
            1 == v.toolbar.hide && (e && SettingsClose(),
            o.tlbrhd && (o.play || 1 != v.toolbar.hideonpause || (e = !0),
            e && !o.toolbarisdown && css(o.toolbar, {
                top: bg.h()
            }),
            !e && o.toolbarisdown && css(o.toolbar, {
                top: 0
            }),
            o.toolbarisdown = e))
        }
        function ToolbarShow() {
            toolbarHidden = !1,
            o.media.ToolbarShow(),
            o.resizeonmouse && (o.resizeonmouse = !1,
            Resize(),
            setTimeout(Resize, 300))
        }
        function UpdateTime(e, t, o) {
            v.delete > 0 && (t -= 1 * v.delete,
            o -= 1 * v.delete);
            var i = Time(t);
            "1" == e.s("inversetime") && (i = Time(o - t)),
            "1" == e.s("showduration") && ("1" == e.s("showboth") ? i += o > 0 ? " " + Lang(e.s("separator")) + " " + Time(o) : "" : 0 == t && (i = Time(o))),
            e.UpdateText(i)
        }
        function Waiting() {
            if (!waiting) {
                js("buffering"),
                waiting = !0;
                var e = FindBut("action", "buffer");
                e && (e.Buffer(),
                1 == v.posteronwait && o.play && (clearTimeout(o.wtpstr_to),
                o.wtpstr_to = setTimeout(WaitPoster, 1e3 * (v.pstrwt > 0 ? v.pstrwt : 1))));
                var t = FindBut("rotatewait", 1);
                t && t.Rtt(),
                o.wtcntrl && ShowOrHide()
            }
        }
        function WaitPoster() {
            o.play && waiting && o.actions.ShowPoster()
        }
        function Volumescrolled() {
            var e = FindBut("linkurl", "volume scroll");
            e && (e.UpdateText(""),
            e.set("hide2"),
            clearTimeout(o.volumescroll))
        }
        function SettingsClose(e) {
            settings && settings.g("show") && settings.hide(e),
            o.settings2 && o.settings2.hide()
        }
        function PlaylistControls() {
            for (var e in b)
                b.hasOwnProperty(e) && ("next" == b[e].g("action") && css(b[e].c(), {
                    opacity: playlist.PlaylistNextExist() ? 1 : .5
                }),
                "prev" == b[e].g("action") && css(b[e].c(), {
                    opacity: playlist.PlaylistPrevExist() ? 1 : .5
                }))
        }
        function SpeedChanged() {
            if (o.line_speed) {
                var e = parseFloat(o.custom_speed / o.files_speed.slice(-1)[0], 1).toFixed(2);
                for (var t in b)
                    b.hasOwnProperty(t) && ("speed" == b[t].s("customline") && o.custom_speed && b[t].UpdatePlay(e, 1),
                    "api:speed,1.0" == b[t].s("linkurl") && b[t].UpdateVolume(e))
            }
        }
        function FindBut(e, t) {
            for (var o in b)
                if (b.hasOwnProperty(o) && b[o].s(e) == t)
                    return b[o]
        }
        function KeyPlusUp(e) {
            if ("next" == e && (o.playlist ? o.controls.PlaylistNext() : e = "seek"),
            "seek" == e && o.media.duration() > 0) {
                var t = o.media.time() + parseFloat(v.hotkey.seek);
                t < o.media.duration() && (o.actions.Seek(t, !0),
                js("userseek", t))
            }
            "volume" == e && (o.actions.Volume(parseFloat(v.volume) + parseFloat(v.hotkey.vol)),
            event.preventDefault()),
            "scale" == e && (o.media.scale(v.hotkey.scale / 100),
            event.preventDefault()),
            1 == v.hotkey.icons && PluginHotIcon(e, 1)
        }
        function KeyPlusDown(e) {
            if ("next" == e && (o.playlist ? o.controls.PlaylistPrev() : e = "seek"),
            "seek" == e && o.media.duration() > 0 && o.start) {
                var t = o.media.time() - v.hotkey.seek >= 0 ? o.media.time() - v.hotkey.seek : 0;
                o.actions.Seek(t, !0),
                js("userseek", t)
            }
            "volume" == e && (o.actions.Volume(parseFloat(v.volume) - parseFloat(v.hotkey.vol)),
            event.preventDefault()),
            "scale" == e && (o.media.scale(-v.hotkey.scale / 100),
            event.preventDefault()),
            1 == v.hotkey.icons && PluginHotIcon(e, 0)
        }
        exist(v.settings) && ("function" == typeof Settings ? (settings = new Settings("settings"),
        1 == v.settings.always ? settings.show() : settings.hide()) : o.noset = !0),
        exist(v.playlist) && "function" == typeof Settings && (playlist = new Settings("playlist"),
        exist(o.playlist) ? (playlist.updatePlaylist(o.playlist),
        0 != v.playlist.openplaylistbefore && exist(v.playlist.openplaylistbefore) ? playlist.show() : 0 == v.playlist.always && playlist.hide(),
        1 == v.playlist.always2 && playlist.show()) : playlist.hide(1),
        PlaylistControls()),
        CreateShare(),
        CustomTextButs(),
        Resize(!0),
        ShowOrHide(),
        SpeedChanged(),
        firstly = !1,
        this.NewPl = function() {
            CreateShare(),
            playlist && v.playlist.always && !o.start && playlist.show()
        }
        ,
        this.OpenPl = function(e) {
            playlist && playlist.open(e)
        }
        ,
        this.CrShr = function() {
            CreateShare()
        }
        ,
        this.ControlClick = function(e) {
            var t = b[e]
              , i = t.g("action");
            if (i) {
                var s = new Date;
                o.clicktime = s.getTime(),
                i && "" != i && (Action(t),
                "pause" == i && (o.actpause = 1),
                "play" == i && (o.actpause = 0))
            }
            JsClk()
        }
        ,
        this.toggleControl = function(e, t, o) {
            for (var i in b)
                b.hasOwnProperty(i) && b[i].s(e) == t && b[i].set(o ? "show2" : "hide2")
        }
        ,
        this.butByS = function(e, t) {
            return FindBut(t, e)
        }
        ,
        this.Ply = function() {
            PlayAction()
        }
        ,
        this.title = function(e) {
            var t = !1;
            for (var i in b)
                b.hasOwnProperty(i) && "title" == b[i].g("action") && (b[i].s("var") != e && "title" != e || (1 == b[i].s("hide") && 1 == b[i].s("hideonplay") && o.play && (t = !0),
                "" == v[e] || t ? b[i].set("display", !1) : b[i].set("display", !0),
                b[i].UpdateText(v[e])));
            TitlePl()
        }
        ,
        this.titlepl = function() {
            TitlePl()
        }
        ,
        this.resizetext = function() {
            for (var e in b)
                b.hasOwnProperty(e) && "custom" == b[e].g("action") && "text" == b[e].s("type") && b[e].ResizeText()
        }
        ,
        this.showShare = function() {
            ShowShare()
        }
        ,
        this.updateTitle = function() {
            if ("" != v.title)
                for (var e in b)
                    if (b.hasOwnProperty(e) && "title" == b[e].g("action")) {
                        var t = !1;
                        b[e].g("show") || (t = !0,
                        b[e].set("display", !0)),
                        b[e].UpdateText(v.title),
                        t && b[e].set("display", !1)
                    }
        }
        ,
        this.customTextPl = function() {
            CustomTextButs()
        }
        ,
        this.customText = function(e, t) {
            CustomText(e, t)
        }
        ,
        this.upText = function(e) {
            b[e] && b[e].UpText()
        }
        ,
        this.upTexts = function() {
            for (var e in b)
                b.hasOwnProperty(e) && b[e].g("ctxt") && b[e].UpText()
        }
        ,
        this.resize = function() {
            Resize()
        }
        ,
        this.mainresize = function() {
            Resize(),
            ResizeMain()
        }
        ,
        this.resize2 = function() {
            Resize(!0)
        }
        ,
        this.resizeSettings = function() {
            ResizeSettings(settings)
        }
        ,
        this.resizePlaylist = function() {
            ResizeSettings(playlist)
        }
        ,
        this.Play = function() {
            for (var e in b)
                b.hasOwnProperty(e) && ("play" == b[e].g("action") && b[e].On(),
                1 == b[e].s("pp") && b[e].CstmTgl(1),
                1 == b[e].s("rotateplaying") && b[e].Rtt());
            o.vast_loadtxt && o.vast_loadtxt.hide(),
            ClosePl(),
            o.sublist && o.sublist.Play(),
            o.play = !0,
            ShowOrHide(3)
        }
        ,
        this.Pause = function() {
            for (var e in b)
                b.hasOwnProperty(e) && ("pause" != b[e].g("action") && "stop" != b[e].g("action") || b[e].Off(),
                1 == b[e].s("pp") && b[e].CstmTgl(0),
                1 == b[e].s("rotateplaying") && b[e].Rtt2());
            if (playlist && (o.newplay || 1 != v.playlist.openplaylistpause || playlist.empty() || playlist.show()),
            o.play = !1,
            this.StopWaiting(),
            ShowOrHide(),
            1 == v.toolbar.hide && 1 == v.toolbar.hideonpause && HideForce(!0),
            o.media.time() > 0) {
                var t = FindBut("action", "live");
                t && (t.set("iconopacity", .5),
                t.set("saturate", 0))
            }
            o.sublist && o.sublist.Pause()
        }
        ,
        this.Mute = function() {
            for (var e in b)
                b.hasOwnProperty(e) && ("mute" == b[e].g("action") && b[e].On(),
                this.Volume(0));
            ShowOrHide(3)
        }
        ,
        this.Unmute = function() {
            for (var e in b)
                b.hasOwnProperty(e) && "unmute" == b[e].g("action") && b[e].Off();
            v.volume < .1 ? (v.volume = .5,
            o.actions.Volume(v.volume)) : this.Volume(v.volume),
            ShowOrHide(3)
        }
        ,
        this.Volume = function(e, t) {
            for (var o in b)
                b.hasOwnProperty(o) && ("volume" == b[o].g("action") && (b[o].s("customline") && "volume" != b[o].s("customline") || b[o].UpdatePlay(e, 1, "no" != t || t)),
                "mute" == b[o].g("action") && b[o].UpdateVolume(e));
            ShowOrHide(3)
        }
        ,
        this.Fullscreen = function() {
            var e = FindBut("action", "fullscreen");
            e && (e.On(),
            e.set("scale", e.s("scale"))),
            ShowOrHide(),
            resizeonwidth && setTimeout(ShowOrHide, 500),
            o.fullscreen && o.rszr && (o.system.win || o.system.tv) && setTimeout(Resize, 10),
            HideInterval(),
            CloseSttx()
        }
        ,
        this.Normalscreen = function() {
            var e = FindBut("action", "fullscreen");
            e && e.Off(),
            Resize(),
            clearInterval(o.toolbarInterval),
            ShowOrHide(),
            CloseSttx()
        }
        ,
        this.onEnded = function() {
            for (var e in b)
                b.hasOwnProperty(e) && "play" == b[e].g("action") && b[e].ReplayIcon()
        }
        ,
        this.Review = function() {
            ShowOrHide()
        }
        ,
        this.closePl = function() {
            ClosePl()
        }
        ,
        this.Mouse = function(e, t, i) {
            var s = !1
              , r = b[e]
              , n = r.g("action")
              , a = r.s("linkurl");
            if ("over" == t) {
                if (o.hidden_volume && ("volume" == n || "mute" == n || "unmute" == n) && !r.g("cul") && (o.hidden_volume_over = !0,
                o.hidden_volume_over_process = !0,
                s = !0,
                ShowOrHide(),
                1 == v.control_line.hideonvolume)) {
                    var l = FindBut("action", "line");
                    l && hide2(l.c())
                }
                !settings || 1 != v.settings.showovercontrol || "settings" != n && 0 != a.indexOf("setting") && 0 != a.indexOf("settings:") || (clearTimeout(o.settingsovertimer),
                settings.g("show") && _lastactbut == r || (Action(r, t),
                o.overopentimeout = n + a,
                setTimeout((function() {
                    o.overopentimeout = null
                }
                ), 500))),
                playlist && 1 == v.playlist.showovercontrol && "playlist" == n && (clearTimeout(o.playlistovertimer),
                playlist.g("show") && _lastactbut == r || (Action(r, t),
                o.overopentimeout = n,
                setTimeout((function() {
                    o.overopentimeout = null
                }
                ), 500)))
            }
            "out" == t && (o.hidden_volume && ("volume" != n && "mute" != n && "unmute" != n || (o.hidden_volume_over = !1,
            o.hidden_volume_over_process = !0,
            setTimeout((function() {
                if (!o.hidden_volume_over)
                    for (var e in o.hidden_volume_over_process = !1,
                    b)
                        b.hasOwnProperty(e) && (toolbarHidden || "volume" != b[e].g("action") || b[e].g("cul") || (HideControl(b[e]),
                        Resize()),
                        "line" == b[e].g("action") && 1 == v.control_line.hideonvolume && show2(b[e].c()))
            }
            ), 500))),
            "line" == n && o.actions.UpdatePlay(1),
            1 != v.settings.showovercontrol || "settings" != n && 0 != a.indexOf("setting") && 0 != a.indexOf("settings:") || (clearTimeout(o.settingsovertimer),
            o.settingsovertimer = setTimeout((function() {
                o.mouseDown || SettingsClose(1)
            }
            ), v.settings.showoverto > 0 ? 1e3 * v.settings.showoverto : 1e3)),
            playlist && 1 == v.playlist.showovercontrol && "playlist" == n && (clearTimeout(o.playlistovertimer),
            o.playlistovertimer = setTimeout((function() {
                o.mouseDown || playlist.g("show") && playlist.hide(1)
            }
            ), v.playlist.showoverto > 0 ? 1e3 * v.playlist.showoverto : 1e3))),
            s && setTimeout(Resize, 10)
        }
        ,
        this.StageLeave = function() {
            !o.volumewheel || o.fullscreen || o.fullscreen_process || (o.actions.volumewheel(!1),
            o.volumewheel = !1),
            o.poster && v.poster_aover > -1 && isVisible(o.poster) && css(o.poster, {
                opacity: v.poster_a
            }),
            o.play && 1 == v.playonhover && 0 != v.pauseonhover && o.actions.Pause(),
            v.toolbar.hideleavetimeout > 0 ? (clearTimeout(o.leavetimeout),
            o.leavetimeout = setTimeout(ShowOrHide, 1e3 * v.toolbar.hideleavetimeout)) : ShowOrHide()
        }
        ,
        this.StageOver = function() {
            o.poster && v.poster_aover > -1 && isVisible(o.poster) && css(o.poster, {
                opacity: v.poster_aover
            }),
            o.play || 1 != v.playonhover || o.actions.Play(),
            Resize(),
            ShowOrHide(),
            ToolbarDown(!1)
        }
        ,
        this.StageMove = function(e, t) {
            var o;
            for (var i in b)
                b.hasOwnProperty(i) && ("line" != (o = b[i].g("action")) && "volume" != o || b[i].StageMove(e, t))
        }
        ,
        this.StageMove2 = function() {
            if (1 == v.toolbar.hide) {
                if (1 == v.toolbar.hidejustfull && !o.fullscreen)
                    return;
                o.mouseHere && !o.system.mobile || "playing" != o.media.status() || (o.mouseHere = !0,
                ShowOrHide(3),
                MbMv()),
                1 == v.toolbar.hidewithoutmoving && (ShowForce(),
                HideInterval()),
                ToolbarDown(!1)
            }
        }
        ,
        this.StageMouseUp = function(e, t) {
            for (var o in b)
                b.hasOwnProperty(o) && ("line" != b[o].g("action") && "volume" != b[o].g("action") || b[o].StageMouseUp(e, t))
        }
        ,
        this.Played = function(e, t, o) {
            for (var i in b)
                b.hasOwnProperty(i) && ("line" == b[i].g("action") && b[i].UpdatePlay(e, t, o),
                "time" == b[i].g("action") && UpdateTime(b[i], e, t),
                1 == b[i].s("svgtmln") && b[i].Tmln(e, t),
                1 == b[i].s("often") && ("bandwidth" != b[i].s("linkurl") && "bitrate" != b[i].s("linkurl") || "function" == typeof PluginMbps && PluginMbps(b[i]),
                1 == b[i].s("often2") && !b[i].g("show") && toolbarHidden || b[i].g("show") == HideProof(b[i]) && (ShowOrHide(),
                Resize())))
        }
        ,
        this.Loaded = function(e, t) {
            var o = FindBut("action", "line");
            o && o.UpdateLoad(e, t)
        }
        ,
        this.Cut = function(e) {
            if (o.media.duration() > 0) {
                var t = FindBut("action", "line");
                t && t.Cut(e)
            }
        }
        ,
        this.Waiting = function() {
            waiting || (1 == v.hidevideo ? (clearTimeout(wait_to),
            wait_to = setTimeout(Waiting, 500)) : Waiting())
        }
        ,
        this.HideElement = function(e) {
            for (var t in b)
                t == e && b[t].set("hide2")
        }
        ,
        this.StopWaiting = function() {
            if (clearTimeout(wait_to),
            waiting) {
                js("buffered");
                var e = FindBut("action", "buffer");
                e && (e.BufferStop(),
                1 == v.posteronwait && o.play && o.actions.HidePoster());
                var t = FindBut("rotatewait", 1);
                t && t.Rtt2(),
                waiting = !1,
                o.wtcntrl && ShowOrHide()
            }
        }
        ,
        this.volumescroll = function() {
            var e = FindBut("linkurl", "volume scroll");
            e && (e.set("show2"),
            e.UpdateText(Lang("volume") + " " + (o.muted ? 0 : Math.ceil(100 * v.volume)) + "%"),
            clearTimeout(o.volumescroll),
            o.volumescroll = setTimeout(Volumescrolled, 1e3))
        }
        ,
        this.Seek = function(e, t) {
            for (var o in v.delete > 0 && (e -= 1 * v.delete,
            t -= 1 * v.delete),
            b)
                b.hasOwnProperty(o) && 1 == b[o].s("on") && ("line" == b[o].g("action") && (t > 0 && b[o].set("click", e / t),
                b[o].UpdatePlaySeek()),
                "time" == b[o].g("action") && UpdateTime(b[o], e, t),
                "live" == b[o].g("action") && (b[o].set("iconopacity", .5),
                b[o].set("saturate", 0)))
        }
        ,
        this.Duration = function(e, t) {
            for (var o in b)
                b.hasOwnProperty(o) && ("duration" == b[o].g("action") && (v.delete > 0 && (t -= 1 * v.delete),
                b[o].UpdateText(Time(t))),
                "line" == b[o].g("action") && (b[o].UpdatePlay(e, t),
                b[o].PlacePoints(t)),
                "time" == b[o].g("action") && UpdateTime(b[o], e, t))
        }
        ,
        this.Settings = function() {
            o.settings2 || (settings.g("show") ? settings.hide() : settings.show())
        }
        ,
        this.SettingsVisible = function() {
            return !!settings && (o.settings2 ? o.settings2.isVisible() || settings.g("show") : !!settings.g("show"))
        }
        ,
        this.MenuProc = function(e) {
            settings && settings.menuproc(e)
        }
        ,
        this.SettingsClose = function() {
            SettingsClose()
        }
        ,
        this.SettingsTimer = function(e) {
            settings && settings.UpdateTimer(e)
        }
        ,
        this.SettingsSpeed = function() {
            settings && settings.UpdateSpeed()
        }
        ,
        this.SettingsExist = function(e) {
            if (settings)
                return settings.Exist(e)
        }
        ,
        this.Playlist = function() {
            playlist && (playlist.g("show") ? playlist.hide(1) : playlist.show())
        }
        ,
        this.PlaylistShow = function(e) {
            playlist && (playlist.g("show") && 1 != e ? 2 != e && playlist.hide() : setTimeout((function() {
                playlist.show()
            }
            ), 100))
        }
        ,
        this.PlaylistVisible = function() {
            return !!playlist && !!playlist.g("show")
        }
        ,
        this.PlaylistClose = function(e) {
            playlist && playlist.g("show") && playlist.hide(e)
        }
        ,
        this.PlaylistG = function(e) {
            return playlist ? playlist.g(e) : ""
        }
        ,
        this.UpdatePlaylist = function(e) {
            playlist && playlist.updatePlaylist(e)
        }
        ,
        this.PreNewPl = function(e) {
            playlist && playlist.prenewpl(e)
        }
        ,
        this.PlaylistNext = function() {
            playlist && playlist.PlaylistNext()
        }
        ,
        this.PlaylistHere = function() {
            playlist && playlist.PlaylistHere()
        }
        ,
        this.PlaylistControls = function() {
            PlaylistControls()
        }
        ,
        this.PlaylistNextExist = function() {
            return !!playlist && playlist.PlaylistNextExist()
        }
        ,
        this.PlaylistPrevExist = function() {
            return !!playlist && playlist.PlaylistPrevExist()
        }
        ,
        this.PlaylistExist = function() {
            return !!playlist && playlist.PlaylistExist()
        }
        ,
        this.PlaylistRewind = function() {
            playlist && playlist.PlaylistRewind()
        }
        ,
        this.PlaylistPrev = function() {
            playlist && playlist.PlaylistPrev()
        }
        ,
        this.PlaylistPlayId = function(e) {
            e && playlist && playlist.playById(e)
        }
        ,
        this.PlaylistOpenId = function(e) {
            e && playlist && playlist.openById(e)
        }
        ,
        this.PlaylistMove = function(e) {
            e && playlist && (css(playlist.co(), {
                maxHeight: "none",
                "padding-right": playlist.s("bgpaddingright")
            }),
            gebi(e).appendChild(playlist.co()),
            hide2(playlist.c()))
        }
        ,
        this.ShowSettingsBut = function() {}
        ,
        this.QualityChanged = function(e) {
            settings && (settings.SetQuality(),
            settings.g("show") && setTimeout((function() {
                settings.hide()
            }
            ), 200))
        }
        ,
        this.QualityChangedNoHand = function() {
            settings && settings.SetQuality(),
            o.settings2 && o.settings2.update()
        }
        ,
        this.AirplayChanged = function(e) {
            settings && settings.Airplay(),
            Resize(),
            ShowOrHide()
        }
        ,
        this.SettingChanged = function(e) {
            settings && (settings.SetSetting(e),
            settings.g("show") && settings.hide()),
            o.settings2 && o.settings2.update(),
            o.plaudio && "audiotrack" == e && playlist.dropupdate(),
            "speed" == e && SpeedChanged()
        }
        ,
        this.AudioTrackChangedNoHand = function(e) {
            settings && settings.SetSetting("audiotrack"),
            o.settings2 && o.settings2.update(),
            o.plaudio && playlist.dropupdate()
        }
        ,
        this.SubtitleChanged = function() {
            settings && (settings.SetSubtitle(),
            settings.g("show") && setTimeout((function() {
                settings.hide()
            }
            ), 200)),
            o.settings2 && o.settings2.update(),
            o.casting && o.tagvideo && o.chromecast.Sub()
        }
        ,
        this.SubOpt = function() {
            o.settings2 && o.settings2.hide(),
            settings && settings.SubOpt()
        }
        ,
        this.SettingsN = function(e, t, o) {
            for (var i in b)
                b.hasOwnProperty(i) && ("settings" == b[i].g("action") && 1 == b[i].s("hdicon") && b[i].HdIcon(),
                b[i].g("action_settings") == "settings#" + e && (b[i].set("set#visible", t),
                "text" == b[i].g("type") ? o && b[i].UpdateText(NoSpan(o)) : ("subtitle" == v.settings["settings" + e + "action"] && (o == Lang("off") ? b[i].CustomSwitch(0) : b[i].CustomSwitch(1)),
                Resize()),
                ShowOrHideProcessor(b[i])))
        }
        ,
        this.UpdateSettings = function() {
            settings && (settings.SetQuality(),
            settings.SetSetting("audiotrack"),
            settings.SetSetting("download"))
        }
        ,
        this.RenewPoints = function() {
            var e = FindBut("action", "line");
            e && e.RenewPoints()
        }
        ,
        this.resize = function() {
            Resize(),
            toolbarHidden && (o.resizeonmouse = !0)
        }
        ,
        this.resizeFromText = function(e) {
            toolbarHidden && 1 != e ? v.toolbar.resizeme = !0 : (Resize(),
            ShowOrHide())
        }
        ,
        this.startcss = function() {
            var e = FindBut("type", "css");
            e && e.setcss()
        }
        ,
        this.refresh = function() {
            ShowOrHide(),
            Resize(),
            ShowOrHide(),
            o.nativecontrols ? hide2(bg2) : !toolbarHidden && show2(bg2)
        }
        ,
        this.KeyDown = function(e) {
            if (window.pljssglobalid == v.id && 1 == v.hotkey.on) {
                var t = e.which
                  , i = !1;
                if (null == t && (t = e.keyCode),
                exist(o.vast) || exist(o.pass) || 1 == o.stopkeys)
                    return !1;
                if (o.play && 1 == v.hotkey.onplay && (i = !0),
                (1 == v.hotkey.space && 32 == t || 1 == v.hotkey.enter && 13 == t || 1 == v.hotkey.k && 75 == t) && (o.focus || o.mouseHere || i))
                    return 1 == v.hotkey.icons && PluginHotIcon("play", o.play ? 0 : 1),
                    o.actions.Toggle(),
                    e.preventDefault(),
                    !1;
                if (!v.hotkey.vol && (v.hotkey.vol = .2),
                !v.hotkey.scale && (v.hotkey.scale = 5),
                1 == v.hotkey.nums && (o.focus || i) && o.media.duration() > 0)
                    for (var s = 48; s < 58; s++)
                        t == s && o.actions.Seek(o.media.duration() * (t - 48) * 10 / 100, !0);
                (39 == t || 1 == v.hotkey.l && 76 == t) && (o.focus || i) && KeyPlusUp(v.hotkey.leftright),
                (37 == t || 1 == v.hotkey.j && 74 == t) && (o.focus || i) && KeyPlusDown(v.hotkey.leftright),
                38 == t && (o.focus || i) && KeyPlusUp(v.hotkey.updown),
                40 == t && (o.focus || i) && KeyPlusDown(v.hotkey.updown),
                187 == t && (o.focus || i) && KeyPlusUp(v.hotkey.plusminus),
                189 == t && (o.focus || i) && KeyPlusDown(v.hotkey.plusminus)
            }
        }
        ,
        this.KeyUp = function(e) {
            if (window.pljssglobalid == v.id) {
                var t = e.which;
                if (null == t && (t = e.keyCode),
                57 == t && v.log,
                o.fullscreen && 27 == t && o.actions.Normalscreen(),
                exist(o.vast) || exist(o.pass))
                    return !1;
                1 == v.hotkey.on && (1 == v.hotkey.f && 70 == t && 1 != v.hidevideo && (o.focus || o.mouseHere) && (1 == v.hotkey.icons && PluginHotIcon("fullscreen", o.fullscreen ? 0 : 1),
                o.fullscreen ? o.actions.Normalscreen() : o.actions.Fullscreen()),
                1 == v.hotkey.s && 83 == t && (o.focus || o.mouseHere) && o.sbt && (1 == v.hotkey.icons && PluginHotIcon("subtitle", o.subtitle_on ? 0 : 1),
                apiProcessor("togglesubs")),
                1 == v.hotkey.m && 77 == t && (o.focus || o.mouseHere) && (1 == v.hotkey.icons && PluginHotIcon("mute", o.muted ? 1 : 0),
                o.muted ? o.actions.Unmute() : o.actions.Mute()))
            }
        }
        ,
        this.Remove = function() {
            for (var e in clearInterval(o.toolbarInterval),
            o)
                0 == e.indexOf("control") && e.indexOf("Interval") > -1 && clearInterval(o[e]);
            for (var t = 0; t < butNames.length; t++) {
                var i = butNames[t];
                b[i] && b[i].Remove()
            }
            settings && settings.Remove(),
            playlist && playlist.Remove(),
            bg.Remove(),
            bgtop && bgtop.Remove(),
            bg2.parentNode == o.frame ? o.frame.removeChild(bg2) : o.toolbar && o.toolbar.removeChild(bg2)
        }
        ,
        this.ShowForce = function() {
            ShowForce()
        }
        ,
        this.HideForce = function(e) {
            HideForce(),
            !e && ShowOrHide()
        }
        ,
        this.HideInterval = function() {
            HideInterval()
        }
        ,
        this.ToolbarHidden = function() {
            return toolbarHidden
        }
    }
      , Control = function(e) {
        var t, i, s, r, n, a, l, c, d, u, p, f, h, m, g, w, b = [], y = 0, x = 0, k = !0, A = !1, _ = 1, B = 1, j = "", z = !1, C = !1, T = 0, H = 0, q = 0, X = !1, O = !1, M = !1, P = !1, E = !1;
        b = UpdateObject(b, default_style.but);
        var Z = [(b = UpdateObject(b, v[e])).action];
        d = Z[0],
        exist(b.action2) && (Z[1] = b.action2),
        exist(b.opposite) && (Z[1] = b.opposite),
        exist(b.title) && (b.text = b.title),
        exist2(b.scalesmall) && o.small && (b.scale = b.scalesmall),
        "share" == d && (o.shareme = !0),
        exist(b.linkurl) && ("text" == b.type && "" != b.linkurl && exist(v[b.linkurl + "text"]) && (b.text = v[b.linkurl + "text"]),
        0 == b.linkurl.indexOf("settings#") && (j = b.linkurl,
        "" == b.tiptext && -1 == j.indexOf(",") && (b.tiptext = Lang(v.settings["settings" + j.substr(9) + "action"]))),
        b.linkurl.indexOf("captions") > -1 && (v.hlscaptions = !0),
        b.linkurl.indexOf("share:") > -1 && (o.shareme = !0),
        "countdown" == b.linkurl && (b.counter = new PluginCountdown(b)));
        var V = b.tiptext ? b.tiptext.split("///") : [];
        1 == b.liketext && (b.type = "text",
        b.text = Me(0) + (Z.length > 1 ? "///" + Me(1) : ""),
        exist2(b.iconscolor) && (b.color = b.iconscolor)),
        b.it = [],
        b.il = [];
        var S, L = 0, N = new Array, Y = new Array, I = new Array, G = (new Array,
        0);
        if ("text" == b.type) {
            if (b.dom && exist(v[b.dom + "text"]) && (b.text = v[b.dom + "text"]),
            exist(b.text)) {
                N[0] = trim(b.text),
                b.lngth = b.text.length;
                var F = ["/", "|", "-"];
                F.indexOf(b.text.substr(-1)) > -1 && (b.postsmbl = b.text.substr(-1)),
                F.indexOf(b.text.substr(0, 1)) > -1 && (b.presmbl = b.text.substr(0, 1)),
                "time" != d && "duration" != d || (0 == b.text.indexOf("0:") && (b.timeshort = !0),
                3 == b.text.split(":").length ? b.with_hours = !0 : b.text.indexOf("00:00") > -1 && (b.with_min = !0),
                1 == b.dvrtime && (v.dvrtime = 1)),
                1 == b.inversetime && 0 == b.text.indexOf("-") && (b.minus4back = !0),
                b.text.indexOf("///") > 0 && ("custom" == d || 1 == b.liketext) && (b.texts = b.text.split("///"),
                b.text = N[0] = b.texts[0])
            }
            1 == v.fonts && (setTimeout(Oe, 100),
            setTimeout(Oe, 500),
            setTimeout(Oe, 1e3))
        } else
            exist(b.icon) && (N[0] = b.icon,
            N[0].indexOf("///") > 0 && -1 == N[0].indexOf("base64") && (N = b.icon.split("///")),
            exist(b.icon2) && (N[1] = b.icon2),
            1 == b.iconsreplay && exist2(b.icon3) && (N.push(b.icon3),
            G = N.length - 1));
        "custom" == d && 1 == b.link2 && exist(b.linkurl2) && (b.linkurl0 = b.linkurl);
        var K = createElement("div")
          , D = b.position;
        D.indexOf("timeline") > -1 ? (o.timeline ? o.timeline.appendChild(K) : setTimeout((function() {
            o.timeline.appendChild(K)
        }
        ), 100),
        o.rszr = !0) : (o.tlbrhd && (indOf2(D, ["bottom"]) && 1 != b.tofr || indOf2(D, ["control"])) ? o.toolbar.appendChild(K) : o.frame.appendChild(K),
        "buffer" == d && 1 == b.ontop2 && (K.style.zIndex = 2001)),
        1 == b.svgtmln && (b.tmln = new PlgnCntrlTmln(b,K));
        var U = createElement("div");
        K.appendChild(U);
        var W, Q = createElement("div");
        if (css(Q, {
            position: "absolute",
            left: 0,
            top: 0
        }),
        K.appendChild(Q),
        css(K, {
            position: "absolute",
            left: 0,
            top: 0,
            opacity: 1,
            fontSize: "14px",
            lineHeight: "1em"
        }),
        exist2(b.dom) && attr(K, {
            id: v.id + "_control_" + b.dom
        }),
        1 != b.rotateplaying && 1 != b.rotateonhover && 1 != b.rotateshow || css(Q, {
            transition: "transform 0.2s linear"
        }),
        N.length > 0) {
            for (se = 0; se < N.length; se++) {
                if (Y[se] = createElement("div"),
                css(Y[se], {
                    position: "absolute",
                    top: 0,
                    left: 0,
                    pointerEvents: "none",
                    opacity: b.a,
                    transition: "opacity 0.1s linear"
                }),
                b.scaleover > b.scale && css(Y[se], {
                    transition: "opacity 0.1s linear,transform 0.1s linear"
                }),
                "pic" == b.type && "" != b.src && (exist2(b.dom) && (attr(Y[se], {
                    id: v.id + "_control_" + b.dom + "_icon"
                }),
                v[b.dom + "src"] && (b.src = v[b.dom + "src"])),
                indOf2(b.src, [".png", ".jpg", ".webp", "base64", ".gif"]))) {
                    -1 == b.src.indexOf("//") && -1 == b.src.indexOf("base64") && (b.src = "//" + b.src);
                    var R = createElement("img");
                    b.loading = 1,
                    R.addEventListener("load", Ae),
                    R.src = b.src,
                    Y[se].appendChild(R),
                    b.w = Y[se].offsetWidth,
                    b.h = Y[se].offsetHeight,
                    b.picheight > 0 && css(R, {
                        height: b.picheight
                    })
                }
                "text" == b.type && (css(Y[se], {
                    color: b.color,
                    fontSize: b.fontsize * existv(v.globalfs, 1),
                    fontFamily: checkFont(b.font),
                    "letter-spacing": b.letterspacing + "px",
                    padding: "0 3px 0 3px",
                    "white-space": "nowrap"
                }),
                o.small && exist2(b.fontsizesmall) && css(Y[se], {
                    fontSize: b.fontsizesmall * existv(v.globalfs, 1)
                }),
                1 == b.click && (b.text.indexOf("<a ") > -1 || "control_title" == e) && css(Y[se], {
                    pointerEvents: "auto"
                }),
                1 == b.bold && css(Y[se], {
                    "font-weight": "bold"
                }),
                b.wght > 0 && css(Y[se], {
                    "font-weight": b.wght
                }),
                b.lineh && css(Y[se], {
                    lineHeight: b.lineh + "em"
                }),
                "live" == N[se] && (N[se] = Lang("live")),
                Y[se].innerHTML = Ze(N[se]),
                setTimeout(ke, 100),
                b.w = Y[se].offsetWidth,
                b.h = Y[se].offsetHeight,
                exist2(b.dom) && attr(Y[se], {
                    id: v.id + "_control_" + b.dom + "_text"
                })),
                "css" == b.type && o.start && setTimeout(Ee, 200);
                var J = N[se].toString();
                0 == J.indexOf("var:") && (J = existv(window[J.substr(4)], ""));
                var $ = J.indexOf("<svg") > -1 || J.indexOf("<SVG") > -1;
                "svg" == b.type && (J.indexOf("<g>") > -1 || $) && ("mute" != d && "custom" != d || (J = J.replace(/pjs_/g, "pjs_" + v.id + e)),
                J.indexOf("pointer") > -1 && ae(Y[se]),
                Y[se].innerHTML = ($ ? "" : "<svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>") + J + ($ ? "" : "</svg>"),
                Y[se].offsetWidth > 20 && (b.w = Y[se].offsetWidth),
                Y[se].offsetHeight > 20 && (b.h = Y[se].offsetHeight),
                css(Y[se], {
                    width: b.w,
                    height: b.h
                }),
                -1 != b.iconscolor && Se(Y, b.iconscolor),
                exist2(b.dom) && attr(Y[se], {
                    id: v.id + "_control_" + b.dom + "_icon" + se
                })),
                Q.appendChild(Y[se]),
                "openfile" == b.linkurl && "undefined" != typeof PluginOpen && exist(window.FileReader) && !o.upldfl && (o.upldfl = new PluginOpen(Y[se])),
                se > 0 && hide(Y[se])
            }
            if (de(),
            g && Ae(),
            "chromecast" == b.linkurl ? (b.chromecast = 1,
            b.hide = 1,
            o.chromecast && (Y[0].innerHTML = o.chromecast.button(-1 != b.iconscolor ? b.iconscolor : "#ffffff")),
            o.system.mobile ? (Y[0].ontouchstart = ce,
            Y[0].ontouchend = fe,
            Y[0].ontouchmove = le) : (Y[0].onmouseover = pe,
            Y[0].onmouseout = fe,
            Y[0].onmousemove = _e)) : (s.offsetWidth * b.scale < 35 || s.offsetHeight * b.scale < 35) && "text" != b.type ? (ne(),
            ae(r)) : (ae(s),
            1 == b.bttn && (de(),
            ae(s))),
            "custom" == d) {
                var ee = "";
                if (1 == b.link && exist(b.linkurl)) {
                    if (0 == (ee = b.linkurl).indexOf("api:"))
                        if ("api:play" == ee && "api:pause" == b.linkurl2 && (b.pp = 1),
                        2 == (re = ee.substr(4).split(",")).length) {
                            var te = re[1].split("/");
                            2 == te.length && ("hd" == re[0] && (re[0] = "default_quality"),
                            v[re[0]] == te[1] && (b.a = 1,
                            css(Y[0], {
                                opacity: b.a
                            })))
                        }
                    "unblock" != ee && "block" != ee || (o.actions.Curtain(),
                    K.style.zIndex = 2001,
                    o.stopkeys = 1)
                }
                (1 != b.hide || 1 != b.hideafter && 1 != b.hidebefore && 1 != b.hidebefore2) && 0 != ee.indexOf("skip") && "bandwidth" != ee && "bitrate" != ee || (b.often = 1,
                (indOf([b.position], "control") || 1 == b.hideonleaveandplay) && (b.often2 = 1)),
                0 == ee.indexOf("skip") && (K.style.zIndex = 2001)
            }
            for (var oe in b)
                Ve(oe);
            "settings" == d && 1 == b.hdicon && (m = new PluginHdIcon(K,s,b)),
            0 == b.click && Pnt0(K),
            1 == b.loading && hide(s),
            1 == b.tip && function() {
                n = createElement("div"),
                css(n, {
                    position: "absolute",
                    left: 0,
                    top: 0,
                    height: "auto",
                    opacity: 0,
                    transition: "opacity 0.1s linear"
                }),
                a = createElement("div"),
                b = MarginPadding(b, "tippadding", "tippadding"),
                b = MarginPadding(b, "tipmargin", "tipmargin"),
                css(a, {
                    position: "absolute",
                    left: 0,
                    top: 0,
                    width: "100%",
                    height: 30,
                    "background-color": b.tipbgcolor,
                    opacity: b.tipbga,
                    "border-radius": b.tipbgrounding
                }),
                l = createElement("div"),
                css(l, {
                    position: "absolute",
                    left: b.tippaddingleft,
                    top: b.tippaddingtop,
                    color: b.tipcolor,
                    "font-family": checkFont(b.tipfont),
                    "font-size": b.tipfontsize * existv(v.globalfs, 1),
                    "letter-spacing": b.tipletterspacing + "px",
                    "line-height": "1"
                }),
                b.tiptext && 0 == b.tiptext.indexOf("var:") && (b.tipvar = !0);
                b.tipvar || css(l, {
                    "white-space": "nowrap"
                });
                1 == b.tippointer && ((c = createElement("div")).innerHTML = '<svg width="8px" height="6px" viewBox="0 0 8 6" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><polygon id="Rectangle" stroke="none" fill="#' + b.tipbgcolor.replace("#", "") + '" fill-rule="evenodd" points="0 0 8 0 4 6"></polygon></svg>');
                1 == b.tipalways ? (css(n, {
                    opacity: 1
                }),
                ae(n)) : Pnt0(n);
                if (K.appendChild(n),
                l.innerHTML = o.ni + ("" == b.tiptext ? Lang(d) : V[0]) + o.ni2,
                n.appendChild(a),
                n.appendChild(l),
                1 == b.tippointer) {
                    n.appendChild(c);
                    var e = o.doctype ? "-8px" : "-6px"
                      , t = b.tippointeralign;
                    exist(t) || (t = "");
                    var i = t.indexOf("top") > -1;
                    i && He(c, "-180"),
                    css(c, {
                        position: "absolute",
                        right: t.indexOf("right") > -1 ? 10 * b.scale : "auto",
                        left: t.indexOf("left") > -1 ? 10 * b.scale : "" == t || "top" == t ? "50%" : "auto",
                        "margin-left": "" == t || "top" == t ? "-4px" : 0,
                        bottom: i ? "auto" : e,
                        top: i ? e : "auto",
                        opacity: b.tipbga
                    })
                }
                je()
            }(),
            b.position.indexOf("right") > -1 && (H = 1),
            b.position.indexOf("top") > -1 && 1,
            b.position.indexOf("bottom") > -1 && (q = 1,
            "custom" == d && exist2(b.linkurl) && (K.style.zIndex = 2001)),
            b.position.indexOf("control") > -1 && (q = 1),
            ve();
            var ie = "";
            0 != b.rotation && (ie += "rotate(" + b.rotation + "deg)"),
            1 == b.flipx && (ie += " scaleX(-1)"),
            1 == b.flipy && (ie += " scaleY(-1)"),
            "" != ie && css(Q, {
                transform: ie
            }),
            "buffer" == d && Pe();
            var se, re = [];
            if ("playlist" == d)
                for (re = ["autoplaylist", "openplaylistafter", "openplaylistbefore", "openplaylistpause", "openplaylistroot", "playlistrewind"],
                se = 0; se < re.length; se++)
                    exist(b[re[se]]) && !exist(v.playlist[re[se]]) && (v.playlist[re[se]] = b[re[se]]);
            if ("title" == d)
                for (re = ["showtitleplaylist", "addtitleplaylist", "addtitleplaylistbr"],
                se = 0; se < re.length; se++)
                    exist(b[re[se]]) && !exist(options[re[se]]) && (v[re[se]] = b[re[se]]);
            1 == b.tipalways && je(),
            "custom" == d && 0 == b.on && hide2(K),
            1 == b.hide && b.hideuntilto > 0 && setTimeout((function() {
                b.hideuntilto = -1,
                o.controls.refresh()
            }
            ), 1e3 * b.hideuntilto)
        }
        function ne() {
            r && r.parentNode.removeChild(r),
            r = createElement(1 == b.bttn ? "button" : "div"),
            css(r, {
                position: "absolute",
                top: 0,
                left: 0,
                width: "pic" == b.type ? s.offsetWidth : (s.offsetWidth > 35 ? s.offsetWidth : 35) * b.clickscalex,
                height: "pic" == b.type ? s.offsetHeight : (s.offsetHeight > 35 ? s.offsetHeight : 35) * b.clickscaley
            }),
            b = MarginPadding(b, "clickmargin", "clickmargin"),
            K.appendChild(r)
        }
        function ae(e) {
            0 == d.indexOf("time") && 1 == Z.length && (b.click = 0),
            "custom" == d && 0 == b.link && (b.click = 0),
            1 == b.click ? (E = 1 == b.bttn && e == s,
            1 == b.bttn && exist2(b.aria) && attr(e, {
                "aria-label": b.aria
            }),
            1 == b.hand && css(e, {
                cursor: "pointer"
            }),
            css(e, {
                pointerEvents: "auto"
            }),
            o.system.mobile && (e.addEventListener("touchmove", (function(e) {
                le(e)
            }
            ), {
                passive: !1
            }),
            e.addEventListener("touchstart", (function(e) {
                ce(e)
            }
            ), {
                passive: !1
            }),
            e.addEventListener("touchend", (function(e) {
                !function(e) {
                    e.stopPropagation(),
                    e.preventDefault(),
                    1 == b.mobileover && fe(),
                    C || me(e);
                    C = !1
                }(e)
            }
            ), {
                passive: !1
            })),
            e.onclick = me,
            1 != v.toolbar.clickarea && 1 != b.clickarea || css(e, {
                "background-color": "#ff0000",
                opacity: .5
            })) : css(e, {
                cursor: "default"
            }),
            o.system.mobile || (e.onmouseover = pe,
            e.onmouseout = fe),
            e.onmousedown = ge,
            e.onmouseup = we,
            1 != b.hidden && 1 != b.tip || (e.onmousemove = _e)
        }
        function le(t) {
            js("touch_" + e),
            t.stopPropagation(),
            C = !0
        }
        function ce(e) {
            1 == b.mobileover && pe(),
            e.stopPropagation()
        }
        function de() {
            if (s && s.parentNode.removeChild(s),
            s = createElement(E ? "button" : "div"),
            css(s, {
                position: "absolute",
                top: 0,
                left: 0
            }),
            exist2(b.dom) && attr(s, {
                id: v.id + "_control_" + b.dom + "_bg"
            }),
            t = b.w,
            i = b.h,
            b.bgt = -1,
            b.bgl = -1,
            b = MarginPadding(b, "margin", "margin"),
            (b = MarginPadding(b, "marginproc", "marginproc")).mrgnprs && o.small && "0 0 0 0" != b.mrgnprs && (b = MarginPadding(b, "marginproc", "mrgnprs")),
            "text" == b.type && (t = Y[L].offsetWidth,
            i = Y[L].offsetHeight,
            b.minw > 0 && t < b.minw && (t = b.minw)),
            b = MarginPadding(b, "bgpadding", "bgpadding"),
            b = MarginPadding(b, "iconmargin", "iconmargin"),
            exist2(b.dom) && exist(v.custom) && "custom" == b.action && "object" == typeof v.custom)
                for (var e = 0; e < Object.keys(v.custom).length; e++)
                    if (v.custom[e][b.dom])
                        if ("off" == v.custom[e][b.dom])
                            b.on = 0;
                        else {
                            var r = v.custom[e][b.dom].split(":");
                            "margin-left" == r[0] && (r[1].indexOf("%") > 0 ? b.marginprocleft = parseInt(r[1]) : b.marginleft = parseInt(r[1]))
                        }
            b.h = i,
            b.w = t,
            1 == b.bg ? (i = i + b.bgpaddingtop + b.bgpaddingbottom,
            t = t + b.bgpaddingleft + b.bgpaddingright,
            b.h = i,
            b.w = t,
            "text" == b.type && (b.bgh = Y[0].offsetHeight)) : b.bga = 0,
            css(s, {
                width: 1 == b.bgstretch ? 5e3 : t,
                height: i,
                borderRadius: b.bgo * i / 2,
                transition: "background .1s linear, opacity .2s, transform .1s linear" + (exist2(b.bgbrovr) ? ", filter .1s linear" : "")
            }),
            ue(b.bgcolor, b.bga),
            "pic" == b.type && css(s, {
                width: t,
                height: i,
                borderRadius: b.bgo * i / b.scale / 2
            }),
            1 == b.bglines && Bglines(s, b.bgcolor, b.bgline1, b.bgline2),
            1 == b.bgborder && css(s, {
                border: existv(b.bgbrdrw, 1) + "px solid " + b.bgbordercolor
            }),
            1 == b.blur && css(s, {
                "backdrop-filter": "blur(8px)"
            }),
            U.appendChild(s),
            1 == b.bg2 && css(Y[0], {
                background: hex2rgb(existv(b.bg2color, "000000"), existv(b.bg2a, .5), Y[0]),
                "border-radius": existv(b.bg2o, 0),
                padding: MarPad(existv(b.bg2p, 0))
            })
        }
        function ue(e, t) {
            !exist2(e) && (e = b.bgcolor),
            !exist2(t) && (t = b.bga),
            css(s, {
                background: 1 == b.bggr ? "linear-gradient(" + (1 == b.bggrl ? "to right," : "") + hex2rgb(e, t) + "," + hex2rgb(b.bggrc, t) + ")" : hex2rgb(e, t, s)
            })
        }
        function ve() {
            var e = -s.offsetHeight / 2
              , t = -s.offsetWidth / 2;
            if (e == b.bgt && t == b.bgl || (css(s, {
                top: -s.offsetHeight / 2,
                left: -s.offsetWidth / 2
            }),
            b.bgt = e,
            b.bgl = t),
            r) {
                var o = "pic" == b.type || s.offsetWidth > 35 ? s.offsetWidth : 35
                  , i = "pic" == b.type || s.offsetHeight > 35 ? s.offsetHeight : 35;
                css(r, {
                    top: -i / 2 + b.clickmargintop - b.clickmarginbottom,
                    left: -o / 2 + b.clickmarginleft - b.clickmarginright
                })
            }
            for (var n = 0; n < N.length; n++) {
                var a = "svg" == b.type ? Math.round(parseInt(Y[n].style.height)) / 2 : Math.round(Y[n].offsetHeight) / 2
                  , l = "svg" == b.type ? parseInt(Y[n].style.width) / 2 : Y[n].offsetWidth / 2;
                a == b.it[n] && l == b.il[n] || (css(Y[n], {
                    top: -a,
                    left: -l
                }),
                s && css(Y[n], {
                    top: int(Y[n].style.top) + b.bgpaddingtop / 2 - b.bgpaddingbottom / 2 + b.iconmargintop / 2 + b.iconmarginbottom / 2,
                    left: int(Y[n].style.left) + b.bgpaddingleft / 2 - b.bgpaddingright / 2 + b.iconmarginleft / 2 + b.iconmarginright / 2
                }),
                b.it[n] = a,
                b.il[n] = l)
            }
        }
        function pe() {
            var t;
            if (z = !0,
            1 == b.iconsover && (t = f && exist(b.icon2) ? 1 : 0,
            S && I.length > 2 && (t = 2),
            I[t] && (xe(),
            show(Y[I[t]]))),
            1 == b.bg && ((exist2(b.bgcolorover) || exist2(b.bgaover)) && ue(b.bgcolorover, b.bgaover),
            exist2(b.bgbrovr) && css(s, {
                filter: "brightness(" + b.bgbrovr + ")"
            })),
            b.aover > -1 && !A)
                for (t = 0; t < N.length; t++)
                    "hidden" != Y[t].style.visibility && css(Y[t], {
                        opacity: b.aover
                    });
            if (-1 != b.iconscolorover && Se(Y, b.iconscolorover),
            1 == b.rotateonhover && Ce(),
            b.scaleover > b.scale && b.scaleover > -1 && Be(b.scaleover),
            "settings" == d && o.controls.SettingsVisible())
                ;
            else if (1 == b.tip && 1 != b.tipalways) {
                var i = V.length > 1 && !f ? V[1] : V[0];
                i && 0 == i.indexOf("var:") && (l.innerHTML = window[i.substr(4)],
                je()),
                show(n),
                css(n, {
                    opacity: 1
                })
            }
            "mute" == d && (o.actions.volumewheel(!0),
            o.volumewheel = !0),
            o.controlover = !0,
            o.controls.Mouse(e, "over")
        }
        function fe() {
            var t;
            if (we(),
            z = !1,
            1 == b.iconsover && (t = f && exist(b.icon2) ? 1 : 0,
            S && I.length > 2 && (t = 2),
            xe(),
            show(Y[t])),
            1 == b.bg && ((exist2(b.bgcolorover) || exist2(b.bgaover)) && ue(b.bgcolor, b.bga),
            exist2(b.bgbrovr) && css(s, {
                filter: "brightness(1)"
            })),
            b.aover > -1)
                for (t = 0; t < N.length; t++)
                    "hidden" != Y[t].style.visibility && css(Y[t], {
                        opacity: b.a
                    });
            b.scaleover > -1 && Be(b.scale),
            -1 != b.iconscolorover && Se(Y, -1 == b.iconscolor ? "#ffffff" : b.iconscolor),
            1 == b.rotateonhover && Te(),
            "mute" != d || o.fullscreen || (o.actions.volumewheel(!1),
            o.volumewheel = !1),
            he(),
            o.controlover = !1,
            o.controls && o.controls.Mouse(e, "out")
        }
        function he() {
            1 == b.tip && 1 != b.tipalways && (hide(n),
            css(n, {
                opacity: 0
            }))
        }
        function me(t) {
            t && (t.cancelBubble = !0),
            X || (o.controls.ControlClick(e),
            "custom" == d && be(),
            he(),
            1 == b.rotateonclick && (T -= 30,
            He(Y[0], T)),
            M = !0,
            (1 == b.hideafterclick || "control_start" == e && 1 == b.hide && 1 == b.hideonplay) && o.controls.refresh())
        }
        function ge() {
            exist2(b.scldwn) && Be(b.scldwn),
            exist2(b.icnclrdwn) && Se(Y, b.icnclrdwn)
        }
        function we() {
            exist2(b.scldwn) && Be(b.scale),
            exist2(b.icnclrdwn) && Se(Y, exist2v(b.iconscolor, "ffffff"))
        }
        function be() {
            N && (N.length > 1 && (1 == f ? (show(Y[0]),
            hide(Y[1])) : (show(Y[1]),
            hide(Y[0]))),
            1 == b.tip && V.length > 1 && (l.innerHTML = o.ni + (1 == f ? V[0] : V[1]) + o.ni2,
            je())),
            exist(b.linkurl0) && (b.linkurl = 1 == f ? b.linkurl0 : b.linkurl2),
            ye(),
            f = !f,
            b.linkurl && b.linkurl.indexOf(",0/1") > -1 && js(b.linkurl, f ? 1 : 0),
            1 == b.bg && exist(b.bgcolorlink2) && -1 != b.bgcolorlink2 && (f ? (b.bgcolorlink0 = b.bgcolor,
            b.bgcolor = b.bgcolorlink2) : b.bgcolor = b.bgcolorlink0,
            de(),
            ae(s),
            ve(),
            "text" == b.type ? Oe() : Be(b.scale))
        }
        function ye() {
            exist(b.texts) && b.texts.length > 1 && qe(1 == f ? b.texts[0] : b.texts[1])
        }
        function xe() {
            for (var e = 0; e < N.length; e++)
                "hidden" != Y[e].style.visibility && (css(Y[e], {
                    opacity: b.a
                }),
                hide(Y[e]))
        }
        function ke(e) {
            Y[0] && Y[0].offsetWidth > o.screen_w - b.marginleft - b.marginright - b.bgpaddingleft - b.bgpaddingright && (1 == b.marquee ? (e || (e = Y[0].innerHTML),
            Y[0].innerHTML = "<marquee>" + e + "</marquee>") : css(Y[0], {
                "white-space": "normal"
            }),
            css(Y[0], {
                width: o.screen_w - b.marginleft - b.marginright - b.bgpaddingleft - b.bgpaddingright
            }))
        }
        function Ae() {
            s ? (g = !1,
            b.loading = 0,
            hide(s),
            Y[0] && (b.w = Y[0].offsetWidth * b.scale,
            b.h = Y[0].offsetHeight * b.scale,
            Be(b.scale)),
            b.loaded = 0,
            de(),
            ne(),
            ae(r),
            show(s),
            ve(),
            o.controls.resize(),
            isVisible(K) || hide2(K)) : g = !0
        }
        function _e() {
            o.system.mobile || o.controlover || pe(),
            je()
        }
        function Be(e) {
            if (e > 0) {
                for (css(s, {
                    transform: "scale(" + e + ")"
                }),
                se = 0; se < N.length; se++)
                    css(Y[se], {
                        transform: "scale(" + e + ")"
                    });
                b.tmln && b.tmln.scale(e),
                _ = e,
                B = e
            }
        }
        function je() {
            1 == b.tip && (css(n, {
                top: (1 == q ? -i - n.offsetHeight + 3 : -n.offsetHeight / 2) + b.tipmargintop - b.tipmarginbottom,
                left: (1 == H ? -l.offsetWidth : 1 == q ? -t / 2 : +l.offsetWidth) - (1 == q ? 0 : l.offsetWidth / 2 + 5) + b.tipmarginleft - b.tipmarginright,
                height: b.tippaddingtop + l.offsetHeight + b.tippaddingbottom,
                width: b.tippaddingleft + l.offsetWidth + b.tippaddingright
            }),
            css(a, {
                height: n.offsetHeight
            }),
            n.style.zIndex = "1000")
        }
        function ze() {
            X = !1
        }
        function Ce() {
            clearInterval(w),
            w = setInterval((function() {
                He(Q, x),
                x += 5
            }
            ), 1 / existv(b.rttspd, 4) * 100)
        }
        function Te() {
            clearInterval(w)
        }
        function He(e, t) {
            css(e, {
                transform: "rotate(" + t + "deg)" + (e != Y[0] || O || 1 == _ ? "" : " scale(" + _ + ")")
            })
        }
        function qe(e) {
            if ("text" == b.type) {
                exist(e) && (b.with_hours && (4 == e.length && (e = (b.timeshort ? "0:0" : "00:0") + e),
                5 == e.length && (e = (b.timeshort ? "0:" : "00:") + e),
                7 == e.length && (e = (b.timeshort ? "" : "0") + e)),
                b.with_min && 4 == e.length && (e = "0" + e),
                b.lngth = e.length),
                e = (b.presmbl ? b.presmbl + (b.minus4back ? "" : " ") : "") + e + (b.postsmbl ? " " + b.postsmbl : "");
                var t = Y[0].offsetWidth + (1 == b.bg ? b.bgpaddingtop + b.bgpaddingbottom : 0)
                  , i = Y[0].offsetHeight + (1 == b.bg ? b.bgpaddingtop + b.bgpaddingbottom : 0);
                Y[0].innerHTML = o.ni + ("custom" == d ? Ze(e) : e) + o.ni2,
                1 == b.triangle && (Y[0].innerHTML += '<span style="display:inline-block;width:10px"></span><span style="border-top: 3px solid ' + CheckColor(b.color) + ';border-left: 3px solid transparent;border-right: 3px solid transparent;position: absolute;right:3px;top: 50%;margin-top: -1px;"></span>'),
                "title" == d && (css(Y[0], {
                    width: "auto",
                    "white-space": "nowrap"
                }),
                ke(e)),
                b.w = Y[0].offsetWidth + (1 == b.bg ? b.bgpaddingright + b.bgpaddingleft : 0),
                b.h = Y[0].offsetHeight + (1 == b.bg ? b.bgpaddingtop + b.bgpaddingbottom : 0),
                (t != b.w || i != b.h || b.w > 0 && 0 == y) && Oe(),
                Y[0].offsetWidth > 0 ? y = b.w : ("" != j && hide(Y[0]),
                "" != e && setTimeout(Oe, 10))
            }
        }
        function Xe() {
            return !o.media.isLive() && 1 == b.iconsreplay
        }
        function Oe() {
            "text" == b.type && Y[0] && Y[0].offsetWidth > 0 && ("" != j && show(Y[0]),
            t = b.w = Y[0].offsetWidth,
            i = b.h = Y[0].offsetHeight,
            de(),
            ae(s),
            ve(),
            o.controls && (indOf([b.position], "control") ? o.controls.resizeFromText() : o.controls.resize()))
        }
        function Me(e) {
            return o.ni + ("" == b.tiptext ? Lang(Z[e]) : V.length > 1 ? V[e] : V[0]) + o.ni2
        }
        function Pe() {
            hide2(K);
            for (var e = K.getElementsByTagName("*"), t = e.length; t--; )
                css(e[t], {
                    "animation-play-state": "paused"
                });
            k = !1
        }
        function Ee() {
            controlCSS(N[0], b.color, Y[0])
        }
        function Ze(t) {
            var i = t + "";
            if (t.indexOf("{") > -1) {
                if (t.indexOf("{time}") > -1 && exist(o.continue) && (t = t.replace("{time}", timeFormat(o.continue.flag().t))),
                t.indexOf("{title") > -1) {
                    var s = o.titlestore ? o.titlestore : v.title ? v.title : "";
                    t.indexOf("{title2}") > -1 && o.controls && (t = t.replace("{title2}", o.controls.PlaylistG("title2"))),
                    o.butplstart && o.controls && (s = o.controls.PlaylistG("butplstart")),
                    t = t.replace("{title}", s),
                    o.butplstart && !o.controls && setTimeout(qe, 100, i)
                }
                if (t.indexOf("{text") > -1)
                    for (var r = 1; r < 6; r++)
                        t.indexOf("{text" + r + "}") > -1 && (t = exist(v["text" + r]) ? t.replace("{text" + r + "}", v["text" + r]) : t.replace("{text" + r + "}", ""));
                t.indexOf("{next}") > -1 && (o.ctxtnk = e,
                o.controls && (t = t.replace("{next}", o.controls.PlaylistG("nxtttl"))))
            }
            return t
        }
        function Ve(e) {
            if (exist2(b[e + "_var"])) {
                var t = v[b[e + "_var"]];
                exist2(t) && "string" == typeof t && (b[e] = t)
            }
        }
        function Se(e, t) {
            for (var i = 0; i < e.length; i++)
                SvgColor(e[i], t);
            "chromecast" == b.linkurl && o.chromecast && o.chromecast.Color(e[0], t)
        }
        this.Click = function() {
            me()
        }
        ,
        this.c = function() {
            return K
        }
        ,
        this.s = function(e) {
            return "custom" == d && Ve(e),
            b[e]
        }
        ,
        this.ss = function(e, t) {
            return !!exist(b[e]) && b[e][t]
        }
        ,
        this.g = function(o) {
            switch (o) {
            case "width":
                return t;
            case "height":
                return i;
            case "h":
                return existv(b.bgh, i);
            case "x":
                return int(K.style.left);
            case "y":
                return int(K.style.top);
            case "opacity":
                return K.style.opacity ? K.style.opacity : 1;
            case "show":
                return k;
            case "scaleX":
                return _;
            case "scaleY":
                return B;
            case "action":
                return d;
            case "action_settings":
                return j;
            case "clicked":
                return M;
            case "type":
                return b.type;
            case "length":
                return b.lngth ? b.lngth : 0;
            case "key":
                return e;
            case "x0":
                return u;
            case "y0":
                return p;
            case "over":
                return z;
            case "settings#":
                return 0 == j.indexOf("settings#");
            case "settings:":
                return 0 == j.indexOf("settings:");
            case "ctxt":
                return "custom" == d && "text" == b.type;
            case "set#visible":
                return P;
            default:
                return !1
            }
        }
        ,
        this.set = function(t, i) {
            switch (t) {
            case "show":
                z && fe(),
                k = i;
                break;
            case "display":
                !function(t) {
                    t && o.system.mobile && (X = !0,
                    setTimeout(ze, 300));
                    t || Xe() && S && (hide(Y[G]),
                    show(Y[0]),
                    S = !1);
                    1 == b.loading ? t ? show(K) : hide(K) : ("control_time" == e || "control_duration" == e ? t ? show(K) : hide(K) : css(K, {
                        display: t ? "block" : "none"
                    }),
                    k = t,
                    t && show(K));
                    t && b.resizetxt && (b.resizetxt = !1,
                    setTimeout(Oe, 100))
                }(i);
                break;
            case "show2":
                show2(K);
                break;
            case "hide2":
                hide2(K);
                break;
            case "unhidden":
                b.hidden = 0;
                break;
            case "hidetime":
                b.hidesec > 0 && 1 != b.hidden && !h && (clearTimeout(h),
                h = setTimeout((function() {
                    hide2(K),
                    1 != b.hidesec2 && (b.hidden = 1),
                    h = void 0
                }
                ), 1e3 * b.hidesec));
                break;
            case "scale":
                Be(i);
                break;
            case "scale0":
                css(K, {
                    transform: "scale(0)"
                });
                break;
            case "scaleX":
                css(K, {
                    transform: "scaleX(" + i + ")"
                }),
                _ = i;
                break;
            case "scaleY":
                css(K, {
                    transform: "scaleY(" + i + ")"
                }),
                B = i;
                break;
            case "opacity":
                css(K, {
                    opacity: i
                });
                break;
            case "iconopacity":
                css(Y[0], {
                    opacity: i
                });
                break;
            case "saturate":
                css(Y[0], {
                    filter: "saturate(" + i + ")"
                });
                break;
            case "left":
            case "x":
                css(K, {
                    left: i
                });
                break;
            case "top":
            case "y":
                css(K, {
                    top: i
                });
                break;
            case "width":
                css(K, {
                    width: i
                });
                break;
            case "height":
                css(K, {
                    height: i
                });
                break;
            case "over_final":
                b.over_final = i;
                break;
            case "rightside":
                H = i;
                break;
            case "set#visible":
                P = i;
                break;
            case "animation":
                b.animation = i;
                break;
            case "skip":
                b.skip = i;
                break;
            case "x0":
                u = i;
                break;
            case "y0":
                p = i;
                break;
            case "hdnn":
                b.hdnn = i;
                break;
            default:
                return !1
            }
        }
        ,
        this.UpdateText = function(e, t) {
            "" == j || "x" != b.text && "1x" != b.text || (e += "x"),
            t && (e = b.text + e),
            qe(e),
            !isVisible(K) && (b.resizetxt = !0)
        }
        ,
        this.CustomText = function(e) {
            W != e && (b.customtext = e,
            qe(e),
            !isVisible(K) && (b.resizetxt = !0),
            o.controls && o.controls.resize()),
            W = e
        }
        ,
        this.Rtt = function() {
            Ce()
        }
        ,
        this.Rtt2 = function() {
            Te()
        }
        ,
        this.RenewFromTitle = function(e) {
            b.text.indexOf("{title") > -1 && qe(b.text)
        }
        ,
        this.CustomToogle = function() {
            be()
        }
        ,
        this.CstmTgl = function(e) {
            f = 0 == e,
            ye()
        }
        ,
        this.ResizeText = function() {
            Oe()
        }
        ,
        this.UpdateVolume = function(t) {
            if (1 == b.displayvolume) {
                var i = 4;
                if ("control_mute" == e) {
                    if (o.system.mobile)
                        return
                } else
                    i = 8;
                for (var s = [], r = 1; r < i; r++)
                    s[r] = gebi("pjs_".concat(v.id, e, "volume_element", r));
                if (s[1]) {
                    for (r = 1; r < i; r++)
                        s[r] && hide(s[r]);
                    if (4 == i)
                        for (r = 1; r < i; r++)
                            t > r / i && s[r] && show(s[r]);
                    else
                        for (r = i; r > 0; r--)
                            if (1 * t + 1 / i >= r / i && s[r]) {
                                show(s[r]);
                                break
                            }
                }
            }
        }
        ,
        this.On = function() {
            f || (N && N.length > 1 && Z.length > 1 && (hide(Y[0]),
            show(Y[1])),
            Z.length > 1 && (d = Z[1],
            1 == b.tip && (l.innerHTML = Me(1),
            je())),
            Xe() && S && (hide(Y[G]),
            S = !1),
            1 == b.pp && be(),
            ye(),
            f = !0)
        }
        ,
        this.CustomSwitch = function(t) {
            !function(t) {
                var o = gebi("pjs_".concat(v.id, e, "slider"));
                o ? (css(o, {
                    transition: "transform 0.1s ease-out"
                }),
                o.style.transform = 1 == t ? "translate(0, 0)" : "translate(-7px, 0)") : b.a = 1 == t ? 1 : .5;
                f = 1 == t,
                1 == b.tip && V.length > 1 && (l.innerHTML = f ? V[0] : V[1]);
                css(Y[0], {
                    opacity: b.a
                })
            }(t)
        }
        ,
        this.Tmln = function(e, t) {
            b.tmln && b.tmln.update(e, t)
        }
        ,
        this.Off = function() {
            f && (N && N.length > 1 && Z.length > 1 && (show(Y[0]),
            hide(Y[1]),
            css(Y[0], {
                opacity: b.a
            })),
            d = Z[0],
            Z.length > 1 && 1 == b.tip && (l.innerHTML = Me(0),
            je()),
            ye(),
            f = !1,
            S = !1)
        }
        ,
        this.ReplayIcon = function() {
            Xe() && (xe(),
            show(Y[G]),
            S = !0)
        }
        ,
        this.Buffer = function() {
            var e = !1;
            if (1 == b.hide && (1 == b.hidewithposter && isVisible(o.poster) && (e = !0),
            1 != b.hdbfnr || o.fullscreen || (e = !0),
            1 == b.hdbffs && o.fullscreen && (e = !0)),
            !e) {
                show2(K);
                for (var t = K.getElementsByTagName("*"), i = t.length; i--; )
                    css(t[i], {
                        "animation-play-state": "running"
                    });
                k = !0
            }
        }
        ,
        this.BufferStop = function() {
            Pe()
        }
        ,
        this.Remove = function() {
            if (N.length > 0)
                for (se = 0; se < N.length; se++)
                    Y[se].parentNode == K && K.removeChild(Y[se]),
                    Y[se] = null;
            s && (s.removeAttribute("onclick"),
            s.removeAttribute("onmouseover"),
            s.removeAttribute("onmouseout"),
            s.parentNode.removeChild(s),
            s = null),
            b.position.indexOf("timeline") > -1 ? K.parentNode == o.timeline && o.timeline.removeChild(K) : K.parentNode == o.frame ? o.frame.removeChild(K) : o.toolbar && K.parentNode == o.toolbar && o.toolbar.removeChild(K),
            n && n.parentNode == K && K.removeChild(n),
            K = null
        }
        ,
        this.HdIcon = function() {
            m && m.toggle()
        }
        ,
        this.setcss = function() {
            Ee()
        }
        ,
        this.UpText = function() {
            qe(b.text)
        }
    }
      , ControlLine = function(e, t) {
        var i, s, r, n, a, l, c, d, u, p, f, h, m, g, w, b, y, x, k, A = [], _ = !0, B = 1, j = 1, z = 0, C = 0;
        for (i in o.current_thumb = -1,
        default_style.but)
            A[i] = default_style.but[i];
        t = v[e].action,
        v[e].type;
        for (i in default_style[t])
            A[i] = default_style[t][i];
        for (i in v[e])
            A[i] = v[e][i];
        A.w = parseInt(A.w),
        A.h = parseInt(A.h),
        A = MarginPadding(A, "margin", "margin"),
        A = MarginPadding(A, "marginproc", "marginproc"),
        o.small && (A.wps > 0 && (A.w = parseInt(A.wps)),
        A.mrgnprs && "0 0 0 0" != A.mrgnprs && (A = MarginPadding(A, "marginproc", "mrgnprs")));
        var T = createElement("div");
        1 == v.toolbar.hidedown && 1 == v.toolbar.hide ? o.toolbar.appendChild(T) : o.frame.appendChild(T),
        "line" == t && (o.timeline = T);
        var H = !1;
        A.customline && "volume" != A.customline && (H = !0),
        css(T, {
            position: "absolute",
            top: 0,
            left: 0,
            opacity: 1,
            fontSize: "14px",
            lineHeight: "1em"
        }),
        1 == A.ontop && (T.style.zIndex = A.order),
        function() {
            r = createElement(1 == A.bttn ? "button" : "div");
            var e = (A = MarginPadding(A, "bgpadding", "bgpadding")).h + A.bgpaddingtop + A.bgpaddingbottom
              , t = A.w + A.bgpaddingleft + A.bgpaddingright;
            1 == A.bg || (A.bga = 0);
            A = MarginPadding(A, "clickmargin", "clickmargin"),
            (1 == v.toolbar.clickarea || 1 == A.clickarea) && (A.bgcolor = "#ff0000",
            A.bg = 1,
            A.bga = .5);
            css(r, {
                position: "absolute",
                top: 0,
                left: 0,
                width: t,
                height: e * A.clickscaley,
                borderRadius: A.bgo * e / 2,
                background: hex2rgb(A.bgcolor, A.bga),
                pointerEvents: "auto",
                transition: "opacity .1s linear, background .1s linear"
            }),
            1 == A.blur && css(r, {
                "backdrop-filter": "blur(8px)"
            });
            1 == A.bgborder && css(r, {
                border: existv(A.bgbrdrw, 1) + "px solid #" + A.bgbordercolor
            });
            1 == A.click ? (1 == A.hand && css(r, {
                cursor: "pointer"
            }),
            o.system.mobile && 1 != v.desktop || (r.onclick = ie,
            r.onmouseup = se,
            r.onmousedown = re,
            r.onmousemove = ce),
            1 == A.bttn && exist2(A.aria) && attr(r, {
                "aria-label": A.aria
            })) : css(r, {
                cursor: "default"
            });
            o.system.mobile || (r.onmouseover = ee,
            r.onmousemove = ce,
            r.onmouseout = oe);
            o.system.mobtch && 1 == A.click && (r.addEventListener("touchstart", (function(e) {
                e.cancelBubble = !0,
                !exist(e.clientX) && e.touches.length > 0 && (e.clientX = e.touches[0].pageX,
                e.clientY = e.touches[0].pageY),
                o.lntch = !0,
                y = e,
                ee(e),
                re(e)
            }
            ), {
                passive: !1
            }),
            r.addEventListener("touchend", (function(e) {
                e.cancelBubble = !0,
                o.mouseDown = !1,
                setTimeout((function() {
                    o.lntch = !1
                }
                ), 200),
                oe(),
                se(y)
            }
            ), {
                passive: !1
            }),
            r.addEventListener("click", (function(e) {
                e.cancelBubble = !0
            }
            )),
            r.addEventListener("touchmove", (function(e) {
                !exist(e.clientX) && e.touches.length > 0 && (e.clientX = e.touches[0].pageX,
                e.clientY = e.touches[0].pageY),
                y = e,
                o.mouseDown = !0,
                ce(e),
                o.system.mobtch && re(e)
            }
            ), {
                passive: !1
            }));
            css(r, {
                left: Math.ceil(-A.w / 2 - A.bgpaddingleft)
            }),
            css(r, {
                top: Math.ceil(-A.h / 2 - A.bgpaddingtop + A.clickmargintop - A.clickmarginbottom)
            }),
            1 == A.bglines && Bglines(r, A.bgcolor, A.bgline1, A.bgline2);
            T.appendChild(r)
        }();
        var q = createElement("div");
        css(q, {
            position: "absolute",
            bottom: Math.round(-A.h / 2),
            left: Math.round(-A.w / 2)
        }),
        A.rounding > 0 && 1 == A.roundout && css(q, {
            "border-radius": A.rounding * A.h / 2,
            height: A.h,
            overflow: "hidden",
            "pointer-events": "none"
        }),
        exist2(A.dom) && attr(T, {
            id: v.id + "_control_" + A.dom
        }),
        T.appendChild(q),
        "line" == t && 1 == v.thumbs && function() {
            o.thumb = createElement("div"),
            css(o.thumb, {
                position: "absolute",
                left: 0,
                top: 0,
                width: v.thumb_width,
                height: v.thumb_height,
                overflow: "hidden",
                "pointer-events": "none",
                "background-color": "#000",
                "border-radius": v.thumb_radius + "px",
                display: "none"
            }),
            o.thumb.id = "pjs_thumbnail_" + v.id,
            1 == v.thumb_border && css(o.thumb, {
                border: v.thumb_borderwidth + "px solid " + SettingsParser("color", v.thumb_bordercolor)
            });
            1 == v.thumb_shadow && css(o.thumb, {
                "box-shadow": "0px 1px 5px rgba(0,0,0,0.5)"
            });
            o.thumb.style.zIndex = "999",
            T.appendChild(o.thumb)
        }(),
        1 == A.tip && function() {
            h = createElement("div"),
            css(h, {
                position: "absolute",
                left: 0,
                top: 0,
                height: "auto",
                "pointer-events": "none",
                opacity: 0,
                transition: "opacity 0.1s linear"
            }),
            A = MarginPadding(A, "tippadding", "tippadding"),
            m = createElement("div"),
            css(m, {
                position: "absolute",
                "padding-left": A.tippaddingleft,
                "padding-right": A.tippaddingright,
                "padding-top": A.tippaddingtop,
                "padding-bottom": A.tippaddingbottom - 1,
                "text-align": "center",
                color: A.tipcolor,
                "font-family": checkFont(A.tipfont),
                "font-size": A.tipfontsize * existv(v.globalfs, 1),
                "letter-spacing": A.tipletterspacing + "px",
                "line-height": "1",
                "background-color": hex2rgb(A.tipbgcolor, A.tipbga),
                "border-radius": A.tipbgrounding
            }),
            A.linetippointer && (A.tippointer = A.linetippointer),
            1 == A.tippointer && ((g = createElement("div")).innerHTML = '<svg width="8px" height="6px" viewBox="0 0 8 6" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><polygon id="Rectangle" stroke="none" fill="' + CheckColor(A.tipbgcolor) + '" fill-rule="evenodd" points="0 0 8 0 4 6"></polygon></svg>');
            T.appendChild(h),
            h.appendChild(m),
            1 == A.tippointer && (h.appendChild(g),
            css(g, {
                opacity: A.tipbga
            }));
            h.style.zIndex = "1000"
        }();
        var X = createElement("div");
        if (W(0, X, .3, 1 == A.gradient ? "linear-gradient(" + (1 == A.grdlft ? "to left," : "") + CheckColor(A.gradientcolorbg) + ", " + CheckColor(A.colorbg) + ")" : CheckColor(A.colorbg), A.w, A.abg),
        1 == A.customdesign && exist(A.customdesignsvg)) {
            var O = createElement("div");
            O.innerHTML = A.customdesignsvg.replace(/\#FFFFFF/g, CheckColor(A.colorbg)),
            X.appendChild(O),
            css(O, {
                position: "absolute",
                bottom: -Math.round(A.h / 2),
                left: 0,
                "pointer-events": "none"
            }),
            css(X, {
                overflow: "hidden",
                background: "none"
            });
            for (var M = ["path", "polygon", "polyline", "rect", "ellipse"], P = 0; P < M.length; P++) {
                var E = O.querySelectorAll("svg " + M[P]);
                if (E.length > 0)
                    for (var Z = 0; Z < E.length; Z++)
                        E[Z].style.fill = CheckColor(A.colorbg)
            }
        }
        q.appendChild(X);
        var V = createElement("div")
          , S = 1 == A.gradient ? "linear-gradient(" + (1 == A.grdlft ? "to left," : "") + CheckColor(A.gradientcolorload) + ", " + CheckColor(A.colorload) + ")" : A.colorload;
        if (W(1, V, A.linespeed1, S, 0, A.aload),
        q.appendChild(V),
        A.aover > 0) {
            var L = createElement("div");
            W(2, L, A.linespeed2, A.colorover, 0, A.aover),
            q.appendChild(L)
        }
        var N = createElement("div")
          , Y = 1 == A.gradient ? "linear-gradient(" + (1 == A.grdlft ? "to left," : "") + CheckColor(A.gradientcolor) + ", " + CheckColor(A.color) + ")" : A.color;
        if (W(3, N, A.linespeed3, Y, 0, A.a),
        1 == A.customdesign && exist(A.customdesignsvg)) {
            var I = createElement("div");
            I.innerHTML = A.customdesignsvg.replace(/\#FFFFFF/g, CheckColor(A.color)),
            css(I, {
                position: "absolute",
                bottom: -Math.round(A.h / 2),
                left: 0,
                "pointer-events": "none"
            }),
            css(N, {
                overflow: "hidden",
                background: "none"
            }),
            N.appendChild(I)
        }
        if (1 == A.value) {
            var G = createElement("div");
            A = MarginPadding(A, "valuepadding", "valuepadding"),
            A = MarginPadding(A, "valuemargin", "valuemargin"),
            css(G, {
                position: "absolute",
                bottom: A.h / 2,
                left: 0,
                "pointer-events": "none",
                "font-size": A.valuesize * existv(v.globalfs, 1),
                color: A.valuecolor,
                "line-height": "100%",
                "padding-top": A.valuepaddingtop,
                "padding-bottom": A.valuepaddingbottom,
                "padding-left": A.valuepaddingleft,
                "padding-right": A.valuepaddingright,
                "margin-top": A.valuemargintop,
                "margin-bottom": A.valuemarginbottom,
                "margin-left": A.valuemarginleft,
                "margin-right": A.valuemarginright,
                "border-radius": A.valuerounding + "px",
                display: "none"
            }),
            1 == A.valuebg && css(G, {
                background: CheckColor(A.valuebgcolor)
            }),
            N.appendChild(G);
            var F = !1
        }
        if (o.timeline_h = A.h,
        q.appendChild(N),
        1 == A.pointed) {
            var K;
            if ("undefined" != typeof PluginPoints)
                var D = new PluginPoints(T,[],s,A,Y,S)
        }
        if (1 == A.waved && v.waveform && "undefined" != typeof PluginWave && (o.wave = new PluginWave(T,s,A,Y,S)),
        1 == A.handle && (-1 == A.handleicon.toString().indexOf("<svg") && "" == A.handleicon && (A.handleicon = "<svg width='20' height='20'><g><ellipse ry='5' rx='5' cy='10' cx='10' fill='#fff'/></g></svg>"),
        (p = createElement("div")).innerHTML = A.handleicon.toString(),
        A = MarginPadding(A, "handlemargin", "handlemargin"),
        css(p, {
            position: "absolute",
            top: -10 + A.handlemargintop - A.handlemarginbottom,
            left: -1e3,
            "pointer-events": "none",
            height: 20,
            width: A.handle_width,
            opacity: A.handlea,
            transition: "transform 0.1s linear, opacity 0.1s linear"
        }),
        1 == A.handlehide || 1 == A.handlehideinit ? css(p, {
            transform: "scale(0)"
        }) : 1 != A.handlescale && css(p, {
            transform: "scale(" + A.handlescale + ")"
        }),
        1 == A.handshdw && css(p, {
            filter: "drop-shadow(1px 1px 3px rgba(0, 0, 0, .7))"
        }),
        T.appendChild(p),
        -1 != A.handlecolor && SvgColor(p, A.handlecolor),
        A.handlewidth = p.offsetWidth,
        1 == A.handle2 && (f = p.cloneNode(!0),
        T.appendChild(f),
        A.handle2color && -1 != A.handle2color && SvgColor(f, A.handle2color))),
        0 != A.rotation && css(T, {
            transform: "rotate(" + A.rotation + "deg)"
        }),
        1 == A.hidden && (hide(T),
        _ = !1),
        "volume" != t || H || (1 == A.hide && 1 == A.hideoutmute ? (o.hidden_volume = !0,
        A.hidden = !0) : o.hidden_volume = !1),
        A.vertical = 0,
        0 != A.rotation && (A.rotation2 = Math.abs(A.rotation),
        A.rotation2 > 45 && A.rotation2 < 135 && (A.vertical = 90),
        A.rotation2 > 225 && A.rotation2 < 315 && (A.vertical = 270)),
        H && (A.customline && (o["line_" + A.customline] = A.customline),
        s = A.w,
        "speed" == A.customline && fe(1, o.files_speed.slice(-1)[0], "no"),
        "volume2" == A.customline)) {
            var U = v.volume;
            v.pip && (v.pip.volume && (U = v.pip.volume)),
            fe(U, 1, "no")
        }
        function W(e, t, o, i, s, r) {
            css(t, {
                position: "absolute",
                bottom: 0,
                left: 0,
                width: s,
                height: A["h" + e] > 0 ? A["h" + e] : A.h,
                background: i ? i.indexOf("linear") > -1 ? i : CheckColor(i) : "",
                "border-radius": 1 == A.roundout ? 1 : A.rounding * A.h / 2,
                opacity: r,
                "pointer-events": "none",
                transition: "transform 0.2s ease-in-out"
            })
        }
        function Q(e) {
            if (e != s) {
                s = e,
                o.timeline_w = s;
                var i = s / X.offsetWidth;
                css(r, {
                    width: s + A.bgpaddingleft + A.bgpaddingright,
                    left: -s / 2 - A.bgpaddingleft
                }),
                css(q, {
                    left: -s / 2
                }),
                css(X, {
                    width: s
                }),
                css(q, {
                    width: s
                });
                var n = V.offsetWidth * i;
                n > X.offsetWidth && (n = X.offsetWidth),
                css(V, {
                    width: n
                });
                var a = N.offsetWidth * i;
                if (css(N, {
                    width: a
                }),
                J(a),
                "line" == t && function() {
                    if (o.continue && 1 == v.timestore && !o.start && !u) {
                        var e = o.continue.flag();
                        e.t && e.d && (o.stored_dur = e.d,
                        fe(e.t, e.d))
                    }
                }(),
                1 == A.pointed)
                    if (D)
                        R(D.place(s, a));
                    else
                        R(0);
                o.wave && o.wave.Resize(s),
                o.cut && o.cut.Resize()
            }
        }
        function R(e) {
            e > 0 ? (hide(q),
            K = !0) : K && (show(q),
            K = !1)
        }
        function J(e, t) {
            if (1 == A.handle) {
                var o = A.handlewidth / 2;
                e < o && 20 != A.handle_width && (e = o),
                e > s - o && 20 != A.handle_width && (e = s - o);
                var i = e - s / 2 - o + A.handlemarginleft - A.handlemarginright;
                i > s / 2 - o && (i = s / 2 - o),
                2 == t ? f && css(f, {
                    left: i
                }) : css(p, {
                    left: i
                })
            }
        }
        function $(e) {
            css(2 == e ? f : p, {
                transform: "scale(" + A.handlescale + ")"
            })
        }
        function ee(i) {
            if (o.controls.Mouse(e, "over"),
            1 == A.bg) {
                if (-1 != A.bgaover)
                    new Motion({
                        mc: r,
                        type: "alpha_div",
                        to: A.bgaover,
                        time: .1,
                        me: e + "bg"
                    });
                exist2(A.bgcolorover) && css(r, {
                    "background-color": A.bgcolorover
                })
            }
            if (exist2(A.coloroverplay) && css(N, {
                "background-color": A.coloroverplay
            }),
            1 == A.handle) {
                if (1 == A.handleiconsover && exist(A.handleiconover) && (1 == A.handleiconspress && l || (p.innerHTML = "<svg width='" + A.handle_width + "' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>" + A.handleiconover.toString() + "</svg>")),
                1 == A.handlehide)
                    (1 != A.handlehideinit || o.start) && $();
                else if (-1 != A.handleaover)
                    new Motion({
                        mc: p,
                        type: "alpha_div",
                        to: A.handleaover,
                        time: .1,
                        me: e + "handle"
                    });
                f && ($(2),
                J(Zoomed(i.clientX) - C, 2))
            }
            1 == A.tip && (o.media.duration() > 0 || "volume" == t || H) && ve(),
            A.expand > 0 && (css(r, {
                transform: "scaleY(" + ((A.expand - 1) / 5 + 1) + ")"
            }),
            te(A.expand)),
            1 == A.handle && 1 == A.handlemove && J(Zoomed(i.clientX) - C),
            "volume" == t && (o.actions.volumewheel(!0),
            o.volumewheel = !0),
            x = !0,
            o.controlover = !0
        }
        function te(e) {
            css(X, {
                transform: "scaleY(" + e + ")"
            }),
            css(V, {
                transform: "scaleY(" + e + ")"
            }),
            L && css(L, {
                transform: "scaleY(" + e + ")"
            }),
            css(N, {
                transform: "scaleY(" + e + ")"
            })
        }
        function oe() {
            if (!c) {
                if (A.aover > 0 && css(L, {
                    width: 0
                }),
                exist2(A.coloroverplay) && css(N, {
                    "background-color": A.color
                }),
                1 == A.bg) {
                    if (-1 != A.bgaover)
                        new Motion({
                            mc: r,
                            type: "alpha_div",
                            to: A.bga,
                            time: .1,
                            me: e + "bg"
                        });
                    exist2(A.bgcolorover) && css(r, {
                        "background-color": A.bgcolor
                    })
                }
                if (1 == A.handle) {
                    if (1 == A.handleiconsover && exist(A.handleiconover) && (1 == A.handleiconspress && l || (p.innerHTML = "<svg width='" + A.handle_width + "' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>" + A.handleicon.toString() + "</svg>")),
                    1 == A.handlehide)
                        css(p, {
                            transform: "scale(0)"
                        });
                    else if (-1 != A.handleaover)
                        new Motion({
                            mc: p,
                            type: "alpha_div",
                            to: A.handlea,
                            time: .1,
                            me: e + "handle"
                        });
                    f && css(f, {
                        transform: "scale(0)"
                    })
                }
                A.expand > 0 && (css(r, {
                    transform: "scaleY(1)"
                }),
                te(1)),
                "volume" != t || o.fullscreen || (o.actions.volumewheel(!1),
                o.volumewheel = !1),
                o.controls.Mouse(e, "out")
            }
            1 == A.pointed && D && D.out(),
            1 == A.tip && (o.media.duration() > 0 || "volume" == t) && pe(),
            o.thumbs_on && "line" == t && (o.th.hide(),
            o.current_thumb = -1),
            x = !1,
            o.controlover = !1
        }
        function ie(e) {
            e.cancelBubble = !0
        }
        function se(i) {
            "volume" == t && o.hidden_volume_over && (c = !0,
            clearTimeout(k),
            k = setTimeout((function() {
                c = !1,
                oe()
            }
            ), 1e3)),
            ae(),
            o.mouseDown = !1,
            1 == A.handle && 1 == A.handleiconspress && exist(A.handleiconpress) && (p.innerHTML = "<svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>" + A.handleicon.toString() + "</svg>"),
            ne(i.clientX, i.clientY),
            o.controls.ControlClick(e),
            o.controls.StageMouseUp(i.clientX, i.clientY),
            le(),
            i.cancelBubble = !0
        }
        function re(e) {
            l = !0,
            1 == A.handle && 1 == A.handleiconspress && exist(A.handleiconpress) && (p.innerHTML = "<svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>" + A.handleiconpress.toString() + "</svg>"),
            z = Zoomed(findTop(r)),
            C = Zoomed(findLeft(r)),
            ne(e.clientX, e.clientY),
            1 == A.moveseek && 1 == A.mvskps && o.play && (d = !0,
            o.media.Pause("nops")),
            fe(u, 1, "no")
        }
        function ne(e, t) {
            var i;
            e = Zoomed(e),
            t = Zoomed(t);
            var r = Math.max(document.documentElement.scrollLeft, document.body.scrollLeft)
              , n = Math.max(document.documentElement.scrollTop, document.body.scrollTop);
            o.system.mobile || (t += n,
            e += r),
            A.vertical > 0 ? (i = t - z - A.bgpaddingright,
            u = i / s,
            270 == A.vertical && (i = t - z - A.bgpaddingleft,
            u = -1 * ((u = i / s) - 1))) : (i = e - C - A.bgpaddingleft,
            u = i / s,
            A.rotation > 134 && A.rotation < 235 && (i = e - C - A.bgpaddingright,
            u = -1 * ((u = i / s) - 1))),
            u > 1 && (u = 1),
            u < 0 && (u = 0)
        }
        function ae() {
            l = !1,
            le()
        }
        function le() {
            1 == A.moveseek && 1 == A.mvskps && d && (d = !1,
            o.media.Play("nops"))
        }
        function ce(e) {
            if (C = Zoomed(findLeft(r)),
            A.aover > 0) {
                var i = Zoomed(e.clientX) - C;
                css(L, {
                    width: i
                }),
                1 == A.pointed && D && D.overed(i)
            }
            if (1 == A.tip && (o.media.duration() > 0 || "volume" == t || H)) {
                if (ve(),
                z = findTop(r),
                ne(e.clientX, e.clientY),
                "line" == t)
                    if (1 == v.hlsdvrtime)
                        o.media.isLive() && o.media.currentFile().indexOf("?DVR") > 0 ? m.innerHTML = "- " + timeFormat((1 - u) * o.media.duration(!0)) : m.innerHTML = timeFormat(u * o.media.duration());
                    else {
                        var s = o.media.duration();
                        v.delete > 0 && (s -= 1 * v.delete);
                        var n = "";
                        1 == A.pointed && D && "" != (n = D.tip(u * s)) && (n += "<br>"),
                        o.hlsfdt && o.hlsptm ? m.innerHTML = o.hlsfdt.Tm(o.hlsptm + u * s * 1e3) : m.innerHTML = n + timeFormat(u * s)
                    }
                ("volume" == t || H) && (m.innerHTML = he(u)),
                ue(e)
            }
            o.thumbs_on && "line" == t && o.th && (b = e,
            w && 1 == v.thumb_move || de(),
            1 == v.thumb_move && (clearTimeout(w),
            w = setTimeout(de, 50))),
            1 == A.handle && ((1 == A.handlemove || l) && J(Zoomed(e.clientX) - C),
            f && J(Zoomed(e.clientX) - C, 2))
        }
        function de() {
            clearTimeout(w),
            w = void 0,
            0 == A.tip && (z = Zoomed(findTop(r)),
            C = Zoomed(findLeft(r)),
            ne(event.clientX, event.clientY)),
            x && o.th.thumb(b, s, u, C)
        }
        function ue(e, t, i) {
            var r = m.offsetWidth
              , n = -s / 2 + (Zoomed(e.clientX) + document.documentElement.scrollLeft - C) - r / 2 + (i || 0)
              , a = 0;
            1 != v.notofh && (n + s / 2 + r + 10 > o.screen_w && (a = n,
            n = o.screen_w - s / 2 - r - 10),
            n + o.screen_w / 2 < 0 && (a = n,
            n = -o.screen_w / 2)),
            n > s / 2 - r / 2 && (n = s / 2 - r / 2),
            n < -s / 2 && (n = -s / 2);
            var l = {
                top: -m.offsetHeight - 1 * A.linetipmarginbottom - A.tippaddingtop - A.tippaddingbottom - (1 == A.toptip ? A.h / 2 * (A.expand > 0 ? A.expand : 1) : 0) + (t || 0),
                left: n
            };
            css(h, l),
            1 == A.tippointer && css(g, {
                position: "absolute",
                left: m.offsetWidth / 2 - 4 + (0 != a ? a - n : 0),
                top: m.offsetHeight - 6
            })
        }
        function ve() {
            isVisible(h) && 0 != h.style.opacity || (show(h),
            css(h, {
                opacity: 1
            }))
        }
        function pe() {
            hide(h),
            css(h, {
                opacity: 0
            })
        }
        function fe(e, o, i) {
            var r;
            (e < 0 && (e = 0),
            v.delete > 0 && o > 1 && (o -= v.delete,
            e -= v.delete),
            1 == A.handle && 1 == A.handlehideinit && 1 != A.handlehide && !A.handleinit && e > 0 && ($(),
            A.handleinit = !0),
            l && 1 != o) || (o > 0 && e > 0 ? (e > o && (e = o),
            (r = s * (e / o)) == N.offsetWidth && (r = -1)) : r = 0,
            r >= 0 && (css(N, {
                width: r
            }),
            1 == A.handlemove && x && !i || J(r),
            1 == A.pointed && D && D.played(r)),
            exist(G) && (o < 2 && "line" == t ? F && (hide2(G),
            F = !1) : (F || (show2(G),
            F = !0),
            G.innerHTML = "line" == t ? Time(0 == e ? o : e) : he(e))))
        }
        function he(e) {
            var i = Math.round(100 * e);
            if ("volume" == t && v.volumegain > 1 && !H && (i = i * v.volumegain + "%"),
            H) {
                if (o.line_speed)
                    return (H && exist2(A.tiptext) ? A.tiptext + "&nbsp;" : "") + parseFloat(e * o.files_speed.slice(-1)[0]).toFixed(1);
                if (o.line_volume2)
                    return (H && exist2(A.tiptext) ? A.tiptext + "&nbsp;" : "") + o.volume2
            }
            return i
        }
        this.PlacePoints = function() {
            D && R(D.place(s))
        }
        ,
        this.RenewPoints = function() {
            D && R(D.update(s))
        }
        ,
        this.ShowTip = function(e, t, o, i) {
            ve(),
            m.innerHTML = t,
            ue(e, o, i)
        }
        ,
        this.HideTip = function() {
            pe()
        }
        ,
        this.c = function() {
            return T
        }
        ,
        this.s = function(e) {
            return A[e]
        }
        ,
        this.ss = function(e, t) {
            return A[e][t]
        }
        ,
        this.g = function(o) {
            switch (o) {
            case "width":
                return s;
            case "offsetwidth":
                return X.offsetWidth;
            case "height":
                return A.h;
            case "x":
                return int(T.style.left);
            case "y":
                return int(T.style.top);
            case "opacity":
                return T.style.opacity ? T.style.opacity : 1;
            case "show":
                return _;
            case "scaleX":
                return B;
            case "scaleY":
                return j;
            case "action":
                return t;
            case "key":
                return e;
            case "x0":
                return n;
            case "y0":
                return a;
            case "click":
                return u;
            case "cul":
                return H;
            default:
                return !1
            }
        }
        ,
        this.set = function(e, o) {
            switch (e) {
            case "show":
                _ = o;
                break;
            case "mouseDown":
                l = o;
                break;
            case "display":
                "line" == t || 1 == A.hide ? css(T, {
                    visibility: o ? "visible" : "hidden"
                }) : css(T, {
                    display: o ? "block" : "none"
                }),
                _ = o;
                break;
            case "scaleX":
                css(T, {
                    transform: "scaleX(" + o + ")"
                }),
                B = o;
                break;
            case "scaleY":
                css(T, {
                    transform: "scaleY(" + o + ")"
                }),
                j = o;
                break;
            case "opacity":
                css(T, {
                    opacity: o
                });
                break;
            case "left":
            case "x":
                css(T, {
                    left: o
                });
                break;
            case "top":
            case "y":
                css(T, {
                    top: o
                });
                break;
            case "click":
                u = o;
                break;
            case "hiddenwidth":
                A.hiddenwidth = o;
                break;
            case "width":
                css(T, {
                    width: o
                });
                break;
            case "height":
                css(T, {
                    height: o
                });
                break;
            case "over_final":
                A.roundingver_final = o;
                break;
            case "x0":
                n = o;
                break;
            case "y0":
                a = o
            }
        }
        ,
        this.Resize = function(e) {
            Q(e)
        }
        ,
        this.StageLeave = function(e) {}
        ,
        this.StageMove = function(i, s) {
            l && (("volume" == t || H || 1 == A.moveseek) && (ne(i, s),
            o.controls.ControlClick(e)),
            "volume" == t && (o.hidden_volume_over = !0),
            ne(i, s),
            fe(u, 1, "no"))
        }
        ,
        this.StageMouseUp = function(t, i) {
            l && (ae(),
            l = !1,
            ne(t, i),
            o.controls.ControlClick(e),
            fe(u, 1, "no"))
        }
        ,
        this.UpdatePlay = function(e, t, o) {
            (null != t || null != e || o) && fe(e, t, o)
        }
        ,
        this.UpdatePlaySeek = function() {
            u > 1 && (u = 1),
            u < 0 && (u = 0),
            css(N, {
                width: u * s
            })
        }
        ,
        this.UpdateLoad = function(e, t) {
            var o = 0;
            t > 0 && e > 0 ? ((o = s * (e / t)) > s && (o = s),
            css(V, {
                width: int(o)
            }),
            t,
            e,
            1 == A.pointed && D && D.loaded(o)) : (0,
            css(V, {
                width: 0
            })),
            1 == A.pointed && D && D.loaded(o)
        }
        ,
        this.Cut = function(e) {
            1 == A.cut && (o.cut ? exist(e) && 0 != e || !o.cutted ? (!o.cutted || exist(e) && 1 != e && 0 != e) && (o.cut.restart(e),
            o.cutted = !0) : (o.cut.hide(),
            o.cutted = !1) : 0 != e && "undefined" != typeof PluginCut && (o.cut = new PluginCut(T,A,e),
            o.cutted = !0))
        }
        ,
        this.Remove = function() {
            T.removeChild(q),
            r && (r.removeAttribute("onclick"),
            r.removeAttribute("onmouseover"),
            r.removeAttribute("onmouseout"),
            r.parentNode.removeChild(r),
            r = null),
            p && T.removeChild(p),
            f && T.removeChild(f),
            T.parentNode == o.frame ? o.frame.removeChild(T) : o.toolbar && T.parentNode == o.toolbar && o.toolbar.removeChild(T),
            T = null
        }
    }
      , ControlsBg = function(e) {
        var t, i = [], s = !0, r = 1, n = 1, a = 0, l = 0, c = random(1e5, 2e5);
        if (1 == e)
            i.position = "top",
            i.h = existv(v.toolbar.grdth, 50),
            i.a = existv(v.toolbar.grdta, .5),
            i.color = existv(v.toolbar.grdtc, "#000");
        else
            for (var d in i.position = v.toolbar.position,
            v.toolbar)
                v.toolbar.hasOwnProperty(d) && (i[d] = v.toolbar[d]);
        0 == i.show && (v.toolbar.h = i.h = 0,
        i.padding = i.margin = "0 0 0 0",
        i.gradient = 0),
        i.scale = 1,
        i = MarginPadding(i, "margin", "margin"),
        exist2(i.mrgnsmll) && o.small && (i = MarginPadding(i, "margin", "mrgnsmll")),
        1 == i.mrgnp && (i.marginleft += "%",
        i.marginright += "%");
        var u = createElement("div");
        1 == i.blur && 0 == i.gradient ? (i.a < 1 ? i.blra = i.a : i.blra = .2,
        v.toolbar.a = i.a = 1) : i.blur = 0,
        css(u, {
            position: "absolute",
            left: 0,
            top: 0,
            width: 1 == i.stretchonfullscreen || e ? "100%" : o.normal_w,
            opacity: i.a,
            "pointer-events": "none",
            fontSize: "14px",
            lineHeight: "1em"
        }),
        o.frame.appendChild(u);
        var p = createElement("div");
        if (css(p, {
            height: i.h - ("top" != i.position ? i.marginbottom + i.margintop : 0),
            display: "block",
            "margin-left": i.marginleft,
            "margin-right": i.marginright,
            "border-radius": i.rounding
        }),
        i.brd > 0) {
            var f = "1px solid " + hex2rgb(existv(i.brdclr, "ffffff"), i.brd);
            1 == i.brdtop ? css(p, {
                "border-top": f
            }) : css(p, {
                border: f
            })
        }
        if (u.appendChild(p),
        t = u.offsetWidth,
        v.toolbar_margintop = -i.margintop,
        1 == i.gradient || e)
            if ("000000" != i.color && "" == v.toolbar.image || e || 0 != i.marginbottom) {
                var h = (e ? "to top, " : "to bottom, ") + hex2rgb(i.color, 0) + ", " + hex2rgb(i.color, 1);
                css(p, {
                    background: "-moz-linear-gradient(" + h + ")",
                    background: "-webkit-linear-gradient(" + h + ")",
                    background: "-ms-linear-gradient(" + h + ")",
                    background: "-o-linear-gradient(" + h + ")",
                    background: "linear-gradient(" + h + ")"
                })
            } else {
                "top" != i.position && (v.toolbar_margintop = 98 - i.h);
                var m = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADGCAYAAAAT+OqFAAAAdklEQVQoz42QQQ7AIAgEF/T/D+kbq/RWAlnQyyazA4aoAB4FsBSA/bFjuF1EOL7VbrIrBuusmrt4ZZORfb6ehbWdnRHEIiITaEUKa5EJqUakRSaEYBJSCY2dEstQY7AuxahwXFrvZmWl2rh4JZ07z9dLtesfNj5q0FU3A5ObbwAAAABJRU5ErkJggg==";
                v.toolbar.image.indexOf("data:image") > -1 && (m = v.toolbar.image),
                css(p, {
                    height: i.h + ("top" != i.position ? v.toolbar_margintop : 0),
                    background: "url(" + m + ") repeat-x 50% 100%",
                    "background-size": "auto"
                })
            }
        else
            1 == i.blur && (css(u, {
                "backdrop-filter": "blur(8px)"
            }),
            css(p, {
                opacity: i.blra
            })),
            css(p, {
                "background-color": i.color
            });
        e && css(u, {
            transition: "opacity 0.2s ease-out"
        }),
        this.h = function() {
            return i.h - ("top" != i.position ? i.margintop : 0)
        }
        ,
        this.c = function() {
            return u
        }
        ,
        this.s = function(e) {
            return i[e]
        }
        ,
        this.g = function(e) {
            if (!u)
                return !1;
            switch (e) {
            case "w":
                return u.offsetWidth > 0 && (t = u.offsetWidth),
                t;
            case "width":
                return u.offsetWidth;
            case "height":
                return u.offsetHeight;
            case "x":
                return int(u.style.left);
            case "y":
                return int(u.style.top);
            case "opacity":
                return u.style.opacity ? u.style.opacity : 1;
            case "show":
                return s;
            case "scaleX":
                return r;
            case "scaleY":
                return n;
            case "key":
                return "bg";
            case "x0":
                return a;
            case "y0":
                return l;
            case "motion_id":
                return "bg" + c;
            default:
                return !1
            }
        }
        ,
        this.set = function(e, o) {
            switch (e) {
            case "show":
                s = o;
                break;
            case "w":
                t = o;
                break;
            case "display":
                css(u, {
                    display: o && 1 != v.nocontrols ? "block" : "none"
                }),
                s = o;
                break;
            case "scale":
                css(u, {
                    transform: "scale(" + o + ")"
                }),
                r = o,
                n = o;
                break;
            case "scaleX":
                css(u, {
                    transform: "scaleX(" + o + ")"
                }),
                r = o;
                break;
            case "scaleY":
                css(u, {
                    transform: "scaleY(" + o + ")"
                }),
                n = o;
                break;
            case "opacity":
                css(u, {
                    opacity: o
                });
                break;
            case "left":
            case "x":
                css(u, {
                    left: o
                });
                break;
            case "top":
            case "y":
                css(u, {
                    top: o
                });
                break;
            case "width":
                css(u, {
                    width: o
                });
                break;
            case "height":
                css(u, {
                    height: o
                });
                break;
            case "x0":
                a = o;
                break;
            case "y0":
                l = o
            }
        }
        ,
        this.Remove = function() {
            o.frame.removeChild(u),
            u = null
        }
    };
    function VisibleCheck() {
        exist(options.id) && document.getElementById(options.id) && (isHidden(document.getElementById(options.id)) && 1 != options.visible ? setTimeout(VisibleCheck, 50) : 1 == options.fast ? setTimeout(Init, 50) : Init())
    }
    function Init() {
        for (var e = 0; e < window.pljssglobal.length; e++)
            exist(window.pljssglobal[e]) && (window.pljssglobal[e].api("id") == options.id ? window.pljssglobal[e].api("playing") && window.pljssglobal[e].api("stop") : 1 == v.unatpl && 1 == window.pljssglobal[e].api("v", "autoplay") && (options.autoplay = 0));
        window.pljssglobal.push(o.this);
        var t = !1;
        if (o.v0 = copyObject(v),
        options.design && (options.player = options.design),
        exist(options.player))
            for (e = 2; e < 10; e++)
                options.player == e && "" != o["u" + e] && (v = UpdateObject(v, JSON.parse(decode(o["u" + e]))),
                t = !0);
        if ("" == o.u || t || (v = UpdateObject(v, "object" != typeof o.u ? JSON.parse(decode(o.u)) : o.u)),
        "function" != typeof pljscom)
            for (var i in options)
                options.hasOwnProperty(i) && (0 == i.indexOf("rc_") || Vsts(i)) && (options[i] = null);
        v = UpdateObject(v, options),
        o.container = document.getElementById(v.id),
        1 == v.observer && 1 == v.viewinit && "function" == typeof InitVisible ? (Visibility(o.container, "intvsbl"),
        InitVisible() || window.document.addEventListener("scroll", InitVisible, {
            passive: !1
        })) : Init2()
    }
    function Init2() {
        var pstr = v.poster;
        if (1 == v.pstrcnfg && exist(v.poster) && exist(pstr) && "" != v.poster && (v.poster = pstr),
        exist(v.file) && "" != v.file || 1 != v.emptyremove) {
            for (var key in 1 != v.postmessage && 1 != v.pjsframed || window.addEventListener("message", (function(e) {
                var t, i = void 0;
                if ((exist(e.data.time) && (i = e.data.time),
                exist(e.data.volume) && (i = e.data.volume),
                exist(e.data.method) && (t = e.data.method),
                exist(e.data.api) && (t = e.data.api),
                t && exist2(v.postmessages)) && -1 == v.postmessages.replace(/\s+/gi, "").split(",").indexOf(t))
                    return;
                if (1 == v.pjsframed && "function" == typeof PjsFrMsg && PjsFrMsg(e),
                t && o.init) {
                    exist(e.data.set) && (i = e.data.set);
                    var s = apiProcessor(t, i);
                    window.parent.postMessage({
                        event: t,
                        answer: s
                    }, "*")
                }
            }
            )),
            o.compilation)
                o.compilation.hasOwnProperty(key) && "" != o.compilation[key] && (o.compilations += o.compilation[key] + " ");
            if (log(o.version + " " + o.compilations),
            window.pljssglobalid = v.id,
            o.d = location.hostname,
            o.hs = location.hash,
            !v.plstart && indOf([o.hs], "#play-") && (v.plstart = o.hs.substr(o.hs.indexOf("#play-") + 6)),
            parent) {
                var exception = !1;
                try {
                    if (parent)
                        if (parent.document)
                            for (var frames = parent.document.getElementsByTagName("IFRAME"), i = 0; i < frames.length; i++)
                                frames[i].contentWindow === window && (o.parentIframe = frames[i],
                                o.iniframe = !0,
                                1 != v.notframe && css(o.parentIframe, {
                                    border: "none"
                                }),
                                o.parentIframe_style = o.parentIframe.style,
                                log("iframe"));
                        else
                            exception = !0
                } catch (e) {
                    exception = !0
                }
                exception && (o.iniframe = !0,
                log("Cross-domain"))
            }
            if (o.iniframe && document.referrer && (o.domain = document.referrer.split("/")[2]),
            !o.prted && prtObj(),
            "function" != typeof PjsFr || !PjsFr()) {
                o.init = !0,
                CustomFonts();
                var today = new Date;
                if (20 == today.getDate() && 10 == random(1, 20) && 0 != v.srvsga && (Script(o.gaurl, o.gaurl),
                setTimeout((function() {
                    window.ga && (ga("create", "UA-88484718-6", "auto", {
                        name: "pjs",
                        allowLinker: !0
                    }),
                    ga("require", "linker"),
                    ga("linker:autoLink", [o.d]),
                    ga("pjs.send", "event", {
                        eventCategory: "Player",
                        eventAction: "Init",
                        eventLabel: o.d
                    }))
                }
                ), 3e3)),
                !o.container)
                    return v.log = 1,
                    log('id "' + v.id + '" not found'),
                    !1;
                if (o.container.innerHTML = "",
                css(o.container, {
                    padding: 0,
                    "word-spacing": "normal"
                }),
                o.container_h = o.container.offsetHeight,
                o.container_w = o.container.offsetWidth,
                exist(v.playersize) && !exist(v.aspect) && (exist(v.playersize.aspect) && (v.aspect = v.playersize.aspect),
                exist(v.playersize.changeheight) && (v.changeheight = v.playersize.changeheight)),
                o.container.style.width.indexOf("%") > -1 && (o.container_w_procent = o.container.style.width),
                ("off" == v.aspect || o.container.style.height.indexOf("%") > -1) && (v.aspect = "%",
                o.container_h_procent = o.container.style.height,
                o.container_h = 0),
                0 == o.container_w && (o.container.style.width.indexOf("px") > 0 ? o.container_w = parseInt(o.container.style.width) : o.container.parentNode.style.width.indexOf("px") > 0 ? o.container_w = parseInt(o.container.parentNode.style.width) : o.container.parentNode.parentNode.style.width.indexOf("px") > 0 && (o.container_w = parseInt(o.container.parentNode.parentNode.style.width))),
                String(v.aspect).indexOf("x") > 0 ? (o.aspect = v.aspect.split("x")[0] / v.aspect.split("x")[1],
                0 == o.container_h && (o.container_h = o.container_w / o.aspect)) : o.aspect = 0,
                css(o.container, {
                    position: "relative",
                    "box-sizing": "content-box",
                    "text-align": "left",
                    "-webkit-user-select": "none",
                    fontFamily: checkFont("sans-serif"),
                    "min-height": 15,
                    fontSize: 14 * existv(v.globalfs, 1),
                    "line-height": "1em",
                    direction: "ltr",
                    "color-scheme": "none"
                }),
                1 == v.shadow && css(o.container, {
                    "box-shadow": " 0 15px 35px rgba(50,50,93,.1), 0 5px 15px rgba(0,0,0,.07)"
                }),
                o.aspect > 0 ? css(o.container, {
                    height: o.container_h
                }) : css(o.container, {
                    height: 0 == o.container_h ? o.container_h_procent : o.container_h
                }),
                0 == o.container_w && css(o.container, {
                    width: "100%"
                }),
                o.frame = createElement("div"),
                css(o.frame, {
                    position: "absolute",
                    "box-sizing": "content-box",
                    backgroundColor: v.screencolor,
                    color: "#ffffff",
                    width: "100%",
                    height: "100%",
                    left: 0,
                    top: 0,
                    fontSize: "14px",
                    "line-height": "1em"
                }),
                1 != v.notofh && (o.frame.style.overflow = "hidden"),
                1 == v.transbg && (o.frame.style.backgroundColor = "transparent"),
                o.css = document.createElement("style"),
                o.css.type = "text/css",
                o.frame.appendChild(o.css),
                o.frame.setAttribute("id", "oframe" + v.id),
                datetime(1),
                window.MutationObserver) {
                    var obsrvr = new MutationObserver((function(e) {
                        if (e[0].removedNodes.length > 0)
                            for (var t = 0; t < e[0].removedNodes.length; t++)
                                e[0].removedNodes[t] == o.frame && Destroy()
                    }
                    ));
                    obsrvr.observe(o.container, {
                        childList: !0
                    })
                }
                if (o.frameresize = createElement("iframe"),
                attr(o.frameresize, {
                    id: "pjsfrrs" + v.id,
                    scrolling: "no",
                    title: "pjsfrrs" + v.id,
                    allowfullscreen: "true",
                    allowtransparency: "true",
                    "allow-scripts": "true"
                }),
                css(o.frameresize, {
                    position: "absolute",
                    width: "100%",
                    height: "100%",
                    border: 0,
                    "pointer-events": "none"
                }),
                1 == v.border && (1 == v.borderin ? css(o.frameresize, {
                    "box-shadow": "0px 0px 0px " + v.bordersize + "px " + v.bordercolor + " inset",
                    zIndex: 2
                }) : css(o.container, {
                    border: v.bordersize + "px solid " + v.bordercolor
                })),
                !document.querySelector(".pjscssed")) {
                    var tmp = "";
                    if (1 == v.clrs)
                        for (var i = 1; i < 6; i++)
                            exist2(v["color" + i]) && (tmp += "--pjscolor" + i + ":" + hex2rgb(v["color" + i], v["clr" + i + "a"]) + ";");
                    pushCSS("pjsdiv, pjsdiv > *{background:none;border:0;-webkit-backface-visibility: hidden;position: static;top: auto;left: auto;overflow:visible;direction:ltr!important;max-width:none!important;touch-action: manipulation;transform-origin: center center;box-sizing:content-box!important;-webkit-tap-highlight-color: rgba(0,0,0,0);-webkit-tap-highlight-color: transparent;text-indent:0!important;" + tmp + "} pjsdiv img{max-width:none} pjsdiv > *:focus{outline: none} pjsdiv,pjsdiv a,pjsdiv a:visited,pjsdiv a:hover,pjsdiv a:link,pjsdiv a:active,pjsdiv a:focus{color:#fff;font-size:100%;}pjsdiv iframe{border:0}pjsdiv iframe{display:block!important;max-height:none!important;background:transparent}.pjscssed{}pjsdiv svg{margin:0;display:inline}pjsdiv pjshd{display:none}"),
                    o.frame.setAttribute("class", "pjscssed")
                }
                if (o.frame.appendChild(o.frameresize),
                o.effects && o.effects.api("init"),
                o.container.oncontextmenu = function(e) {
                    if (o.rightclick++,
                    5 == o.rightclick && (v.log = 1,
                    log(o.version + " " + o.compilations + " " + o.playerid)),
                    !e)
                        e = window.event;
                    e.cancelBubble = !0,
                    e.stopPropagation && e.stopPropagation();
                    var t = e.pageX - findLeft(o.frame)
                      , i = e.pageY - findTop(o.frame);
                    return 1 == v.rc_custom && exist(v.rc_label) && "" != trim(v.rc_label) && (o.brand = v.rc_label,
                    exist(v.rc_labelurl) && (o.brandurl = v.rc_labelurl),
                    "none" == v.rc_label && (o.brandurl = o.d)),
                    RightMenu(t, i),
                    !1
                }
                ,
                o.system = new System,
                o.system.ios) {
                    var ioscss = 1 == v.hidestartbutios ? "*::-webkit-media-controls-start-playback-button {display: none!important;-webkit-appearance: none;}" : "";
                    (1 != v.nativecontrolsmobile || 1 == v.nativenotios || 1 == v.nativenotiphone && o.system.iphone || 1 == v.nativenotipad && o.system.ipad) && (o.system.ios && 1 == v.nativefullios || (ioscss += "video::-webkit-media-controls {display:none !important;}*::-webkit-media-controls-panel {display: none!important;-webkit-appearance: none;}*::state(webkit-media-controls-play-button){display: none!important;-webkit-appearance: none;}"));
                    var tmp = document.createElement("style");
                    tmp.type = "text/css",
                    tmp.appendChild(document.createTextNode(ioscss)),
                    o.frame.appendChild(tmp)
                }
                o.system.mobiletv && 1 == v.autoplay && 1 == v.autoplaynomobiletv && (v.autoplay = 0),
                0 == o.aspect && 15 == o.frame.offsetHeight && !o.container_h_procent && v.playerheight > 0 && css(o.container, {
                    height: v.playerheight
                }),
                exist(v.autonext) && (v.playlist.autoplaylist = v.autonext),
                exist(v.playlistloop) && (v.playlist.playlistrewind = v.playlistloop),
                exist(v.start) && (o.seekto = v.start),
                exist(window.requestAnimationFrame) && 1 == v.rafinit ? window.requestAnimationFrame(Ready) : Ready()
            }
        } else
            log("remove");
        function RightMenu(e, t) {
            if (-1 == o.brandurl.indexOf(o.d) || 1 == v.rc_anyway || 1 == v.rightmenu) {
                if (exist(o.rightmenu))
                    show2(o.rightmenu);
                else {
                    var i;
                    !v.rmbgcolor && (v.rmbgcolor = "000000"),
                    !v.rmcolor && (v.rmcolor = "ffffff"),
                    o.rightmenu = createElement("div");
                    for (var s = 0, r = 0; r < 10; r++)
                        if ((1 == v["rm" + r] && 1 == v.rightmenu || 9 == r) && (exist(v["rm" + r + "t"]) && exist(v["rm" + r + "a"]) || 9 == r)) {
                            if (i = createElement("div2"),
                            9 == r) {
                                if (1 == v.rc_nobrand)
                                    break;
                                i.innerText = o.brand + (1 == v.rc_version ? " " + o.version : "")
                            } else
                                i.innerText = v["rm" + r + "t"];
                            if (9 != r) {
                                if (v["rm" + r + "a"].indexOf(",0/1") > -1 || v["rm" + r + "a"].indexOf(",1/0") > -1) {
                                    var n = v["rm" + r + "a"].split(",");
                                    i.innerText += " (" + (1 == apiProcessor(n[0].substr(4)) ? Lang("on") : Lang("off")) + ")"
                                }
                                0 == v["rm" + r + "a"].indexOf("share") && (o.shareme = !0,
                                !o.share && o.controls.CrShr())
                            }
                            i.setAttribute("i", r),
                            RightCSS(i),
                            i.addEventListener("click", RightClick),
                            o.rightmenu.appendChild(i),
                            s++
                        }
                    css(o.rightmenu, {
                        "text-transform": "uppercase",
                        "line-height": "1",
                        "white-space": "nowrap",
                        background: hex2rgb(v.rmbgcolor, .7)
                    }),
                    s > 1 && css(o.rightmenu, {
                        padding: "5px"
                    }),
                    o.rightmenu.style.zIndex = "99999",
                    o.rightmenu.onmousemove = RightMove,
                    o.frame.appendChild(o.rightmenu)
                }
                css(o.rightmenu, {
                    position: "absolute",
                    top: t,
                    left: e,
                    "text-align": "left"
                });
                var a = !1;
                o.screen_w - e < o.rightmenu.offsetWidth - 20 && 1 != v.notofh && (css(o.rightmenu, {
                    left: e - o.rightmenu.offsetWidth
                }),
                a = !0),
                (1 == v.rmright || a) && css(o.rightmenu, {
                    "text-align": "right"
                }),
                o.right_x = e,
                o.right_y = t,
                clearTimeout(o.rightout),
                o.rightout = setTimeout((function() {
                    hide2(o.rightmenu)
                }
                ), 2e3)
            }
        }
        function RightMove() {
            clearTimeout(o.rightout),
            o.rightout = setTimeout((function() {
                hide2(o.rightmenu)
            }
            ), 2e3)
        }
        function RightClick(e) {
            var i = e.target.getAttribute("i"), y, dont = !1;
            if (i > 0) {
                if (9 == i)
                    "" != o.brandurl && window.open(o.brandurl);
                else {
                    var x = v["rm" + i + "a"];
                    if (x) {
                        if (0 == x.indexOf("api:"))
                            if (x.indexOf(",0/1") > -1 || x.indexOf(",1/0") > -1) {
                                var z = x.split(",")
                                  , b = o.controls.butByS(x, "linkurl")
                                  , u = apiProcessor(z[0].substr(4), z[1], b);
                                js(z, u),
                                reRightMenu(),
                                RightMenu(o.right_x, o.right_y),
                                dont = !0
                            } else
                                y = x.split(","),
                                apiProcessor(y[0].substr(4), exist(y[1]) ? y[1] : null);
                        0 == x.indexOf("share:") && o.share && o.share.api(x.substr(6)),
                        0 == x.indexOf("js:") && (y = x.split(","),
                        eval(y[0].substr(3) + "(" + (exist(y[1]) ? '"' + y[1] + '"' : "") + (exist(y[2]) ? ',"' + y[2] + '"' : "") + ")")),
                        0 == x.indexOf("url:") && (x = x.replace(/\(url\)/g, Href()),
                        x = x.replace(/\(ref\)/g, encodeURIComponent(exist(v.parent_domain) ? v.parent_domain : document.referrer)),
                        x = x.replace(/\(title\)/g, o.titlestore),
                        x = x.replace(/\(label\)/g, v.label),
                        window.open(x.substr(4)))
                    }
                }
                !dont && hide2(o.rightmenu)
            }
        }
        function RightCSS(e) {
            css(e, {
                padding: "4px 5px",
                "font-size": (v.rmsize ? v.rmsize : "55") * existv(v.globalfs, 1) + "%",
                "letter-spacing": "0.15em",
                opacity: .9,
                color: v.rmcolor
            }),
            e.addEventListener("mouseover", RightOver),
            e.addEventListener("mouseout", RightOut)
        }
        function RightOver(e) {
            css(e.target, {
                opacity: 1
            }),
            css(e.target, {
                background: hex2rgb(v.rmbgcolor, .5)
            })
        }
        function RightOut(e) {
            css(e.target, {
                opacity: .9
            }),
            css(e.target, {
                background: "none"
            })
        }
    }
    function Ready() {
        if (log("Ready"),
        o.actions = new Actions,
        v.file || (v.file = "?"),
        v.pl && (v.file = v.pl + o.pltxt),
        o.sessid = randomstr(),
        o.sesstime = 0,
        o.storage = StorageSupport(),
        o.storage) {
            null != localStorage.getItem("pljsuserid") ? o.userid = localStorage.getItem("pljsuserid") : (o.userid = randomstr(),
            localStorage.setItem("pljsuserid", o.userid)),
            1 == v.qualitystore && null != localStorage.getItem("pljsquality") && (o.default_quality = localStorage.getItem("pljsquality"),
            exist2(v.forbidden_quality) && v.forbidden_quality.indexOf(o.default_quality) > -1 && (o.default_quality = null)),
            1 == v.trackstore && null != localStorage.getItem("pljstrack") && (v.default_audio = localStorage.getItem("pljstrack"));
            for (var i = 0; i < o.vsts.length; i++)
                1 == v["vast_nofirst" + o.vsts[i]] && (null != localStorage.getItem("pljsfirst" + o.vsts[i]) || (v[o.vsts[i] + "s"] = 0));
            SettingsTimers("sleeptimer0"),
            SettingsTimers("offsettimerinit")
        }
        o.href2 = o.href.substr(o.href.indexOf("://") + 3),
        o.href2.indexOf("#") > 0 && (o.href2 = o.href2.substr(0, o.href2.indexOf("#"))),
        o.storage && 1 == v.timestore && (o.continue = new TimeStore),
        1 == v.observer && (o.visibility = v.startvisibility,
        Visibility(o.container, "visibility", !0)),
        1 == v.minify && 1 == v.observer && (o.minify = new PluginMini),
        1 == v.ab && PluginBlock(),
        1 == v.quizes && (o.quiz = new PluginQuiz,
        o.quiz.Start()),
        o.media = new Media(v.file),
        o.system.mobile && 1 != v.desktop || (o.frame.addEventListener("mouseenter", (function() {
            o.mouseHere = !0,
            o.mouseHere2 = !0,
            o.controls && o.controls.StageOver()
        }
        )),
        o.frame.addEventListener("mouseleave", (function(e) {
            o.mouseDown || (v.toolbar.hideleavetimeout > 0 ? (clearTimeout(o.leavetimeout2),
            o.leavetimeout2 = setTimeout((function() {
                o.mouseHere != o.mouseHere2 && (o.mouseHere = o.mouseHere2,
                o.controls.Review())
            }
            ), 1e3 * v.toolbar.hideleavetimeout)) : o.mouseHere = !1,
            o.mouseHere2 = !1,
            o.controls && o.controls.StageLeave())
        }
        ))),
        o.system.mobile || (o.frame.addEventListener("mousedown", (function(e) {
            o.touched || (o.mouseDown = !0)
        }
        )),
        o.frame.addEventListener("mouseup", (function(e) {
            o.touched || (o.mouseDown = !1,
            o.volumewheel || (o.hidden_volume_over = !1,
            o.hidden_volume_over_process = !1),
            o.system.touch && o.system.desktop && o.fullscreen && setTimeout((function() {
                o.mouseHere = !1,
                o.controls.Review()
            }
            ), 500),
            setTimeout((function() {
                o.focus = !0
            }
            ), 500),
            o.system.mobile && o.controls.ToolbarHidden() || o.controls && o.controls.StageMouseUp(e.clientX, e.clientY),
            1 == v.hidevideo && o.controls.SettingsVisible() && o.controls.Settings())
        }
        )),
        o.frame.addEventListener("mousemove", (function(e) {
            o.touched || exist(o.controls) && (o.mouseDown ? o.controls.StageMove(e.clientX, e.clientY) : o.controls.StageMove2())
        }
        ))),
        o.system.mobile && window.addEventListener("orientationchange", OrientationChange, !1),
        1 == v.geo && "function" == typeof PluginGeo && (o.geo = new PluginGeo),
        1 == v.scaled && "function" == typeof PlugScaled && PlugScaled(),
        o.mediacontainer.addEventListener("touchstart", (function(e) {
            e.touches && (o.tchs = e.touches.length),
            o.mouseDown = !0,
            o.mouseHere = !0,
            o.mouseMove = !1,
            Touch("start", e)
        }
        ), {
            passive: !0
        }),
        o.mediacontainer.addEventListener("touchmove", (function(e) {
            e.touches && (o.tchs = e.touches.length,
            o.tchs > 1 && (o.tchs2 = 1)),
            o.mouseDown && (o.mouseMove = !0,
            Touch("move", e))
        }
        ), {
            passive: !0
        }),
        o.mediacontainer.addEventListener("touchend", (function(e) {
            (o.mouseDown = !1,
            clearTimeout(o.leavetimeout2),
            o.leavetimeout2 = setTimeout((function() {
                o.mouseHere = !1
            }
            ), 1e3 * (v.toolbar.hideleavetimeout > 0 ? v.toolbar.hideleavetimeout : .5)),
            1 == v.click0timeout) && ((new Date).getTime() - o.clicktime < 1e3 * (v.dclckto ? v.dclckto : .3) && DoubleClick(e));
            !o.mouseMove && o.tchs < 2 && 1 != o.tchs2 && ScreenClick(e),
            o.mouseMove = !1,
            o.tchs = 0,
            0 == e.touches.length && (o.tchs = 0,
            o.tchs2 = 0),
            Touch("end", e)
        }
        ), {
            passive: !0
        });
        try {
            window.document.addEventListener("mouseup", (function(e) {
                o.focus = !1,
                o.volumewheel || (o.hidden_volume_over = !1,
                o.hidden_volume_over_process = !1),
                o.mouseDown && o.controls && (o.mouseDown = !1,
                o.controls.StageMouseUp(e.clientX, e.clientY),
                o.controls.StageLeave()),
                o.mouseHere || o.system.mobile || o.system.tv || (o.controls.SettingsClose(),
                o.droplist && o.droplist.Close(),
                o.controls.closePl()),
                o.lntch || o.mouseHere || !o.system.mobile || 1 != v.mobtch9 || !o.controls.ToolbarHidden() && o.controls.HideForce()
            }
            ))
        } catch (e) {}
        function FSL(e, t) {
            var o = ["", "moz", "webkit", "ms", "MSFullscreenChange"];
            if (e)
                for (var i = 0; i < o.length; i++)
                    e.addEventListener(o[i] + (i < o.length - 1 ? "fullscreenchange" : ""), t, !1)
        }
        if (window.document.addEventListener("mousemove", (function(e) {
            o.controls && (o.mouseDown ? o.controls.StageMove(e.clientX, e.clientY) : o.fullscreen && o.mobiled && o.controls.StageMove2())
        }
        )),
        o.system.tv || (o.frame.addEventListener("touchstart", (function(e) {
            o.touched = !0,
            o.system.mobile || (log("mobiled"),
            o.mobiled = !0),
            o.touch = !0,
            o.mouseDown = !0
        }
        ), {
            passive: !0
        }),
        o.frame.addEventListener("touchend", (function(e) {
            o.touch = !1,
            o.mouseDown = !1
        }
        ), {
            passive: !0
        }),
        window.document.addEventListener("touchmove", (function(e) {
            o.controls && o.touch && o.controls.StageMove(e.touches[0].pageX, e.touches[0].pageY)
        }
        ), {
            passive: !0
        })),
        window.document.addEventListener("keyup", (function(e) {
            var t = e.target.tagName.toLowerCase();
            "input" != t && "textarea" != t && "pjsin" != t && o.controls && o.controls.KeyUp(e)
        }
        )),
        window.document.addEventListener("keydown", (function(e) {
            var t = e.target.tagName.toLowerCase();
            "input" != t && "textarea" != t && "div" != t && "pjsin" != t && o.controls && o.controls.KeyDown(e)
        }
        )),
        o.parentIframe && FSL(parent.document, ParentFS),
        FSL(document, FullscreenChange),
        exist(o.frameresize.contentWindow)) {
            if (o.frameresize.contentWindow.addEventListener("resize", FrameResizer, !0),
            o.mediacontainer.addEventListener("click", (function(e) {
                !o.touched && ScreenClick(e)
            }
            ), !1),
            1 == v.doubleclick && 1 == v.click0timeout && o.mediacontainer.addEventListener("dblclick", DoubleClick, !1),
            MainUpdateSize(),
            o.storage && 1 == v.scalestore && null != localStorage.getItem("pljssclx") && (o.mediascale.x = 1 * localStorage.getItem("pljssclx"),
            o.mediascale.y = 1 * localStorage.getItem("pljsscly"),
            o.media.scl()),
            v.chromecast && 1 == v.chromecast.on && (o.chromecast = new ChromeCast),
            1 == v.effects && (o.effects = new PluginEffects),
            1 == v.mediatags && (o.mediatags = new PluginMediaTags),
            o.controls = new Controls,
            v.control_title.templated && (o.title_template = v.control_title.template),
            Title(),
            MainResize(),
            o.storage) {
                if (1 != v.volumestore || 0 == v.volume || o.system.mobile || (null != localStorage.getItem("pljsvolume") && (v.volume = localStorage.getItem("pljsvolume")),
                1 == localStorage.getItem("pljsmute") && 1 == v.mutestore && (v.mute = 1)),
                1 == v.speedstore) {
                    var sp = localStorage.getItem("pljsspeed");
                    if (exist(sp))
                        if (sp.indexOf(".") > 0 && o.line_speed)
                            o.actions.SetSpeed(sp, 1);
                        else if (o.files_speed) {
                            var spd = indOf(o.files_speed, sp, !0);
                            -1 != spd && o.controls.SettingsExist("speed") && (o.current_speed = spd,
                            o.media.SetSpeed(o.files_speed[spd])),
                            o.controls.SettingsSpeed()
                        }
                }
                var substore = !1;
                if (1 == v.sub_designstore)
                    for (var j = 0; j < o.sub_options.length; j++)
                        null != localStorage.getItem("pljs" + o.sub_options[j]) && (v[o.sub_options[j]] = localStorage.getItem("pljs" + o.sub_options[j]),
                        substore = !0);
                o.system.mobile && (substore || exist2(v.sub_bottommob) && (v.sub_bottom = v.sub_bottommob),
                exist(v.sub_sizemob) && (v.sub_size = v.sub_sizemob,
                exist2(v.sub_sizemobfull) && (v.sub_size_fullscreen = v.sub_sizemobfull)))
            }
            if (o.continue) {
                var f = o.continue.flag();
                f.t && f.d && (o.controls.Played(f.t, f.d),
                o.controls.Duration(f.t, f.d),
                v.duration = f.d)
            }
            o.actions.Volume(v.volume),
            1 == v.mute && (o.actions.Mute(),
            o.controls.refresh()),
            exist(v.default_speed) && apiProcessor("speed", v.default_speed),
            o.alert = new Alert,
            v.rounding > 0 && (css(o.container, {
                "border-radius": v.rounding + "px"
            }),
            css(o.frame, {
                "border-radius": v.rounding + "px"
            })),
            exist(v.midroll) && str2obj("midroll"),
            exist(v.overlay) && str2obj("overlay"),
            exist(o.playlist) && js("playlist"),
            1 == v.pass && 1 == v.passonstart && o.actions.Password();
            for (var i = 2; i < 10; i++)
                exist(v["design" + i]) && "mobile" == v["design" + i] && o.system.mobile && apiProcessor("design", i);
            setTimeout(FrameResizer, 500, !0),
            setTimeout((function() {
                js("init"),
                v.ready && ("function" == typeof v.ready && (v.ready = v.ready.name),
                eval(v.ready + (-1 == v.ready.indexOf("()") ? '("' + v.id + '")' : "")))
            }
            ), 1)
        } else
            log("Local")
    }
    function ScreenClick(e) {
        if (!(o.moving[o.mediacontainer] > 2)) {
            if (o.acted = !0,
            0 == v.dclckto && (v.click0timeout = 1),
            o.click_t && 1 == v.screenclick && !o.system.tv)
                DoubleClick(e);
            else {
                var t = 1e3 * (v.dclckto ? v.dclckto : .35);
                ClearClick(),
                clearTimeout(o.click_t2),
                o.click_t2 = setTimeout((function() {
                    o.clicks = 0
                }
                ), t + 200),
                1 == v.click0timeout || 0 == v.doubleclick && 1 != v.hotkey.seeksides ? ScreenClick2() : o.click_t = setTimeout(ScreenClick2, t)
            }
            o.clicks++,
            JsClk()
        }
    }
    function ScreenClick2() {
        if (ClearClick(),
        o.system.mobile) {
            if (o.controls.ToolbarHidden() && (o.controls.StageMove2(),
            o.muted && 1 == v.unmuteonclick && (o.actions.Unmute(),
            v.unmuteonclick = 0),
            1 != v.mobtch1))
                return;
            if (o.nativefull) {
                if (1 == v.nativefulldroid && 1 == v.nfscldr && o.system.android)
                    return;
                if (1 == v.nativefullios && 1 == v.nfsclios && o.system.ios)
                    return
            }
        }
        o.clicks > 1 && 1 == v.hotkey.seeksides ? o.clicks = 0 : (o.clicks = 0,
        1 == v.screenclick && (o.system.mobile && 1 == v.nombclck || 1 == v.nodtclck ? !o.controls.ToolbarHidden() && o.controls.HideForce(1) : 1 == v.autoplay && 1 == v.frstclkply ? (o.actions.Seek(0),
        o.controls.Ply(),
        v.frstclkply = 0) : o.actions.ScreenClick()))
    }
    function DoubleClick(e) {
        ClearClick();
        var t, i = !1;
        1 == v.hotkey.seeksides && (e && (1 != v.hotkey.seeksidesmob || o.system.mobile) && (o.system.mobile ? (t = e.layerX) || e.changedTouches && (t = e.changedTouches[0].pageX - findLeft(o.frame)) : t = e.offsetX,
        v.zm && 1 != v.zm && (t /= v.zm),
        t && (t < o.screen_w / 2 ? t < 20 * o.screen_w / 100 && (apiProcessor("seek", "-" + existv(v.hotkey.seeksidesec, 10) * o.clicks),
        1 == v.hotkey.icons && 1 == v.hotkey.seekicon && PluginHotIcon("seek", 0),
        i = !0) : t > o.screen_w - 20 * o.screen_w / 100 && (apiProcessor("seek", "+" + existv(v.hotkey.seeksidesec, 10) * o.clicks),
        1 == v.hotkey.icons && 1 == v.hotkey.seekicon && PluginHotIcon("seek", 1),
        i = !0),
        i && e.stopPropagation && e.stopPropagation())));
        i || 1 == v.doubleclick && (1 == v.nativecontrolsmobile && o.system.mobile || (o.fullscreen ? o.actions.Normalscreen() : o.actions.Fullscreen()))
    }
    function ClearClick() {
        clearTimeout(o.click_t),
        o.click_t = void 0
    }
    function FrameResizer(e) {
        o.screen_lw != o.frame.offsetWidth ? (e && (o.screen_lw = o.frame.offsetWidth),
        FrameResizer()) : MainResize()
    }
    function MainResize() {
        var e = !1;
        o.normal_w == o.frame.offsetWidth && o.normal_h == o.frame.offsetHeight || (e = !0),
        MainUpdateSize(),
        o.controls && o.controls.mainresize(),
        o.media.resize(),
        e && !o.fullscreen && js("resize", o.normal_w + "," + o.normal_h)
    }
    function MainUpdateSize() {
        var e, t = o.frame.offsetWidth, i = o.frame.offsetHeight;
        if (o.controls) {
            if (1 == v.change2playlist && "bottom" != v.playlist.position) {
                var s = o.controls.PlaylistG("scroll_height") + o.controls.PlaylistG("top") + 5 + o.controls.PlaylistG("margin_bottom") + existv(v.change2playlist_bottom, 0);
                css(o.container, {
                    height: s
                })
            }
            o.controls.ToolbarHidden() && (o.cntrlrsz = !0)
        }
        (o.aspect > 0 && !o.fullscreen && !o.fullscreen_start && (i = t / o.aspect + existv(v.screenmarginbottom, 0),
        css(o.container, {
            height: i
        })),
        o.fullscreen || o.fullscreen_start || o.fullscreen_process || (o.normal_w = Math.round(t),
        o.normal_h = Math.round(i)),
        o.system.mobile && o.fullscreen && 1 == v.landfullmobile && screen.orientation) && (exist(screen.orientation.lock) && (o.aspect > 0 && (o.aspect < 1 || o.media.ratio() < 1) ? void 0 !== (e = screen.orientation.lock("portrait")) && e.then((function() {}
        )).catch((function(e) {}
        )) : void 0 !== (e = screen.orientation.lock("landscape")) && e.then((function() {}
        )).catch((function(e) {}
        ))));
        if (o.screen_w = t,
        o.screen_h = i,
        exist(v.title) && o.controls && "" != v.title && o.controls.updateTitle(),
        exist(o.custom_aspect) && o.media.scale(o.custom_aspect),
        o.vast && !o.fullscreen && o.vast.Resize(),
        1 == v.vast_ima && exist(o.ima))
            try {
                o.ima.Resize()
            } catch (e) {
                console.log(e)
            }
        o.droplist && o.droplist.Resize(),
        o.quiz && o.quiz.Resize(),
        o.effects && o.effects.api("resize"),
        o.rel && o.rel.Resize()
    }
    function Title() {
        for (var e in o.actions.TitleTemplate(v),
        v)
            v.hasOwnProperty(e) && 0 == e.indexOf("title") && "" != v[e] && (o.maintitle = v[e],
            o.actions.Title(e));
        o.mediatags && o.mediatags.read()
    }
    function Poster(e, t, i) {
        if (e && "" != e)
            if (1 == v.fplace && (e = fplace(e)),
            t == o.poster && e == o.currentposter)
                ;
            else {
                0 == e.indexOf("#" + v.enc2) && (e = o[o.fd[0]](e)),
                0 == e.indexOf("#0") && (e = fd0(e)),
                e = checkBase64(e),
                exist(v.preposter) && -1 == e.indexOf("//") && (e = v.preposter + e);
                var s = "contain";
                if ("fill" == i && (s = "cover"),
                "none" == i && (s = "auto"),
                "stretch" == i && (s = "100% 100%"),
                e.indexOf(" and ") > 0 && t == o.poster && (o.pstrs = e.split(" and "),
                clearInterval(o.pstrsin),
                o.pstrsin = setInterval(Posters, 1e3 * existv(v.posterstime, 2)),
                o.pstrsi = 0,
                e = o.pstrs[0]),
                1 == v.pstrvd && indOf([e], ".mp4")) {
                    e = e.replace(/\s/g, "%20");
                    var r = "pjs" + v.id + "_vdpsrt";
                    t.innerHTML = '<video id="' + r + '" src="' + e + '" loop=1 playsinline=1 autoplay=1 muted=1 style="' + (1 == v.pstrvc ? "object-fit:cover;" : "") + 'width:100%;height:100%"></video>',
                    o.pstrv = document.getElementById(r)
                } else
                    e.indexOf(" or ") > -1 ? (o.pstrurls = e.split(" or "),
                    PstrLd(0, t, s)) : PstrLdd(e, t, s);
                show(t),
                t == o.poster && (o.currentposter = e)
            }
    }
    function PstrLd(e, t, i) {
        if (o.pstrurls) {
            var s = o.pstrurls[e]
              , r = new Image;
            r.onload = function(e) {
                PstrLdd(s, t, i)
            }
            ,
            r.onerror = function(s) {
                o.pstrurls.length > e + 1 && PstrLd(e + 1, t, i)
            }
            ,
            r.src = s,
            r.complete && r.onload()
        }
    }
    function PstrLdd(e, t, i) {
        o.pstrv = void 0,
        o.pstrurls = void 0,
        t.innerHTML = "",
        e = e.replace(/\s/g, "%20"),
        css(t, {
            "background-image": 'url("' + e + '")',
            "background-repeat": "no-repeat",
            "background-position": "center",
            "background-size": i
        })
    }
    function Posters() {
        exist(o.pstrs) && exist(o.pstrsi) && (o.pstrsi++,
        o.pstrsi >= o.pstrs.length && (o.pstrsi = 0),
        Poster(o.pstrs[o.pstrsi], o.poster, v.poster_scale))
    }
    function FullscreenChange() {
        o.fullscreen && !isFullscreen() ? (o.actions.NormalscreenUI(!0),
        o.system.ff && MainResize()) : (o.fullscreen_start || o.mouseHere) && (isFullscreen() && (o.fullscreen = !0),
        o.actions.FullscreenUI()),
        log("fullscreen", o.fullscreen)
    }
    function ParentFS() {
        1 == v.observer && Visibility(o.container, "visibility", !0)
    }
    function Orientation() {
        log("orientation " + screen.orientation.angle)
    }
    function OrientationChange() {
        if (90 === Math.abs(window.orientation)) {
            if (log("landscape"),
            1 == v.landscapefull) {
                var e = !0;
                1 != v.lsfullstart || o.start || (e = !1),
                1 != v.lsfullplay || o.play || (e = !1),
                o.ispipkit && (e = !1),
                o.vast && (e = !0),
                !o.fullscreen && e && o.actions.Fullscreen()
            }
        } else
            log("portrait"),
            1 == v.landscapefull && o.fullscreen && 1 != v.landfullmobile && o.actions.Normalscreen()
    }
    function isFullscreen(e) {
        !e && (e = document);
        var t = !1;
        try {
            t = !!(e.webkitFullscreenElement || e.webkitIsFullScreen || e.mozFullScreen || e.msFullscreenElement || null != e.fullscreenElement)
        } catch (e) {
            t = !1
        }
        return t
    }
    function isHidden(e) {
        return 0 == e.offsetWidth && 0 == e.offsetHeight
    }
    function Destroy() {
        for (var e in o)
            o.hasOwnProperty(e) && (e.indexOf("Interval") > -1 && clearInterval(o[e]),
            e.indexOf("timeout") > -1 && clearTimeout(o[e]));
        log("Destroyed")
    }
    "string" == typeof options && optStr(),
    o.this = this,
    options.id ? document.getElementById(options.id) ? VisibleCheck() : document.addEventListener("DOMContentLoaded", Init) : "function" == typeof PluginReplace && PluginReplace()
}
window.pljssglobal || (window.pljssglobal = [],
window.pljssglobalid),
window.PlayerjsAsync && setTimeout(PlayerjsAsync, 1);
!function t(e) {
    var r, i;
    r = this,
    i = function() {
        "use strict";
        function r(t, e) {
            var r = Object.keys(t);
            if (Object.getOwnPropertySymbols) {
                var i = Object.getOwnPropertySymbols(t);
                e && (i = i.filter((function(e) {
                    return Object.getOwnPropertyDescriptor(t, e).enumerable
                }
                ))),
                r.push.apply(r, i)
            }
            return r
        }
        function i(t) {
            for (var e = 1; e < arguments.length; e++) {
                var i = null != arguments[e] ? arguments[e] : {};
                e % 2 ? r(Object(i), !0).forEach((function(e) {
                    var r, a, s;
                    r = t,
                    a = e,
                    s = i[e],
                    (a = n(a))in r ? Object.defineProperty(r, a, {
                        value: s,
                        enumerable: !0,
                        configurable: !0,
                        writable: !0
                    }) : r[a] = s
                }
                )) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(i)) : r(Object(i)).forEach((function(e) {
                    Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(i, e))
                }
                ))
            }
            return t
        }
        function n(t) {
            var e = function(t, e) {
                if ("object" != typeof t || !t)
                    return t;
                var r = t[Symbol.toPrimitive];
                if (void 0 !== r) {
                    var i = r.call(t, e || "default");
                    if ("object" != typeof i)
                        return i;
                    throw new TypeError("@@toPrimitive must return a primitive value.")
                }
                return ("string" === e ? String : Number)(t)
            }(t, "string");
            return "symbol" == typeof e ? e : String(e)
        }
        function a(t, e) {
            for (var r = 0; r < e.length; r++) {
                var i = e[r];
                i.enumerable = i.enumerable || !1,
                i.configurable = !0,
                "value"in i && (i.writable = !0),
                Object.defineProperty(t, n(i.key), i)
            }
        }
        function s(t, e, r) {
            return e && a(t.prototype, e),
            r && a(t, r),
            Object.defineProperty(t, "prototype", {
                writable: !1
            }),
            t
        }
        function o() {
            return o = Object.assign ? Object.assign.bind() : function(t) {
                for (var e = 1; e < arguments.length; e++) {
                    var r = arguments[e];
                    for (var i in r)
                        Object.prototype.hasOwnProperty.call(r, i) && (t[i] = r[i])
                }
                return t
            }
            ,
            o.apply(this, arguments)
        }
        function l(t, e) {
            t.prototype = Object.create(e.prototype),
            t.prototype.constructor = t,
            h(t, e)
        }
        function u(t) {
            return u = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
                return t.__proto__ || Object.getPrototypeOf(t)
            }
            ,
            u(t)
        }
        function h(t, e) {
            return h = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
                return t.__proto__ = e,
                t
            }
            ,
            h(t, e)
        }
        function d(t, e, r) {
            return d = function() {
                if ("undefined" == typeof Reflect || !Reflect.construct)
                    return !1;
                if (Reflect.construct.sham)
                    return !1;
                if ("function" == typeof Proxy)
                    return !0;
                try {
                    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function() {}
                    ))),
                    !0
                } catch (t) {
                    return !1
                }
            }() ? Reflect.construct.bind() : function(t, e, r) {
                var i = [null];
                i.push.apply(i, e);
                var n = new (Function.bind.apply(t, i));
                return r && h(n, r.prototype),
                n
            }
            ,
            d.apply(null, arguments)
        }
        function c(t) {
            var e = "function" == typeof Map ? new Map : void 0;
            return c = function(t) {
                if (null === t || !function(t) {
                    try {
                        return -1 !== Function.toString.call(t).indexOf("[native code]")
                    } catch (e) {
                        return "function" == typeof t
                    }
                }(t))
                    return t;
                if ("function" != typeof t)
                    throw new TypeError("Super expression must either be null or a function");
                if (void 0 !== e) {
                    if (e.has(t))
                        return e.get(t);
                    e.set(t, r)
                }
                function r() {
                    return d(t, arguments, u(this).constructor)
                }
                return r.prototype = Object.create(t.prototype, {
                    constructor: {
                        value: r,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }),
                h(r, t)
            }
            ,
            c(t)
        }
        function f(t, e) {
            (null == e || e > t.length) && (e = t.length);
            for (var r = 0, i = new Array(e); r < e; r++)
                i[r] = t[r];
            return i
        }
        function g(t, e) {
            var r = "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"];
            if (r)
                return (r = r.call(t)).next.bind(r);
            if (Array.isArray(t) || (r = function(t, e) {
                if (t) {
                    if ("string" == typeof t)
                        return f(t, e);
                    var r = Object.prototype.toString.call(t).slice(8, -1);
                    return "Object" === r && t.constructor && (r = t.constructor.name),
                    "Map" === r || "Set" === r ? Array.from(t) : "Arguments" === r || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r) ? f(t, e) : void 0
                }
            }(t)) || e && t && "number" == typeof t.length) {
                r && (t = r);
                var i = 0;
                return function() {
                    return i >= t.length ? {
                        done: !0
                    } : {
                        done: !1,
                        value: t[i++]
                    }
                }
            }
            throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
        }
        function v(t) {
            return t && t.__esModule && Object.prototype.hasOwnProperty.call(t, "default") ? t.default : t
        }
        var m = {
            exports: {}
        };
        !function(t, e) {
            var r, i, n, a, s;
            r = /^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,
            i = /^(?=([^\/?#]*))\1([^]*)$/,
            n = /(?:\/|^)\.(?=\/)/g,
            a = /(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,
            s = {
                buildAbsoluteURL: function(t, e, r) {
                    if (r = r || {},
                    t = t.trim(),
                    !(e = e.trim())) {
                        if (!r.alwaysNormalize)
                            return t;
                        var n = s.parseURL(t);
                        if (!n)
                            throw new Error("Error trying to parse base URL.");
                        return n.path = s.normalizePath(n.path),
                        s.buildURLFromParts(n)
                    }
                    var a = s.parseURL(e);
                    if (!a)
                        throw new Error("Error trying to parse relative URL.");
                    if (a.scheme)
                        return r.alwaysNormalize ? (a.path = s.normalizePath(a.path),
                        s.buildURLFromParts(a)) : e;
                    var o = s.parseURL(t);
                    if (!o)
                        throw new Error("Error trying to parse base URL.");
                    if (!o.netLoc && o.path && "/" !== o.path[0]) {
                        var l = i.exec(o.path);
                        o.netLoc = l[1],
                        o.path = l[2]
                    }
                    o.netLoc && !o.path && (o.path = "/");
                    var u = {
                        scheme: o.scheme,
                        netLoc: a.netLoc,
                        path: null,
                        params: a.params,
                        query: a.query,
                        fragment: a.fragment
                    };
                    if (!a.netLoc && (u.netLoc = o.netLoc,
                    "/" !== a.path[0]))
                        if (a.path) {
                            var h = o.path
                              , d = h.substring(0, h.lastIndexOf("/") + 1) + a.path;
                            u.path = s.normalizePath(d)
                        } else
                            u.path = o.path,
                            a.params || (u.params = o.params,
                            a.query || (u.query = o.query));
                    return null === u.path && (u.path = r.alwaysNormalize ? s.normalizePath(a.path) : a.path),
                    s.buildURLFromParts(u)
                },
                parseURL: function(t) {
                    var e = r.exec(t);
                    return e ? {
                        scheme: e[1] || "",
                        netLoc: e[2] || "",
                        path: e[3] || "",
                        params: e[4] || "",
                        query: e[5] || "",
                        fragment: e[6] || ""
                    } : null
                },
                normalizePath: function(t) {
                    for (t = t.split("").reverse().join("").replace(n, ""); t.length !== (t = t.replace(a, "")).length; )
                        ;
                    return t.split("").reverse().join("")
                },
                buildURLFromParts: function(t) {
                    return t.scheme + t.netLoc + t.path + t.params + t.query + t.fragment
                }
            },
            t.exports = s
        }(m);
        var p = m.exports
          , y = Number.isFinite || function(t) {
            return "number" == typeof t && isFinite(t)
        }
          , E = Number.isSafeInteger || function(t) {
            return "number" == typeof t && Math.abs(t) <= T
        }
          , T = Number.MAX_SAFE_INTEGER || 9007199254740991
          , S = function(t) {
            return t.MEDIA_ATTACHING = "hlsMediaAttaching",
            t.MEDIA_ATTACHED = "hlsMediaAttached",
            t.MEDIA_DETACHING = "hlsMediaDetaching",
            t.MEDIA_DETACHED = "hlsMediaDetached",
            t.BUFFER_RESET = "hlsBufferReset",
            t.BUFFER_CODECS = "hlsBufferCodecs",
            t.BUFFER_CREATED = "hlsBufferCreated",
            t.BUFFER_APPENDING = "hlsBufferAppending",
            t.BUFFER_APPENDED = "hlsBufferAppended",
            t.BUFFER_EOS = "hlsBufferEos",
            t.BUFFER_FLUSHING = "hlsBufferFlushing",
            t.BUFFER_FLUSHED = "hlsBufferFlushed",
            t.MANIFEST_LOADING = "hlsManifestLoading",
            t.MANIFEST_LOADED = "hlsManifestLoaded",
            t.MANIFEST_PARSED = "hlsManifestParsed",
            t.LEVEL_SWITCHING = "hlsLevelSwitching",
            t.LEVEL_SWITCHED = "hlsLevelSwitched",
            t.LEVEL_LOADING = "hlsLevelLoading",
            t.LEVEL_LOADED = "hlsLevelLoaded",
            t.LEVEL_UPDATED = "hlsLevelUpdated",
            t.LEVEL_PTS_UPDATED = "hlsLevelPtsUpdated",
            t.LEVELS_UPDATED = "hlsLevelsUpdated",
            t.AUDIO_TRACKS_UPDATED = "hlsAudioTracksUpdated",
            t.AUDIO_TRACK_SWITCHING = "hlsAudioTrackSwitching",
            t.AUDIO_TRACK_SWITCHED = "hlsAudioTrackSwitched",
            t.AUDIO_TRACK_LOADING = "hlsAudioTrackLoading",
            t.AUDIO_TRACK_LOADED = "hlsAudioTrackLoaded",
            t.SUBTITLE_TRACKS_UPDATED = "hlsSubtitleTracksUpdated",
            t.SUBTITLE_TRACKS_CLEARED = "hlsSubtitleTracksCleared",
            t.SUBTITLE_TRACK_SWITCH = "hlsSubtitleTrackSwitch",
            t.SUBTITLE_TRACK_LOADING = "hlsSubtitleTrackLoading",
            t.SUBTITLE_TRACK_LOADED = "hlsSubtitleTrackLoaded",
            t.SUBTITLE_FRAG_PROCESSED = "hlsSubtitleFragProcessed",
            t.CUES_PARSED = "hlsCuesParsed",
            t.NON_NATIVE_TEXT_TRACKS_FOUND = "hlsNonNativeTextTracksFound",
            t.INIT_PTS_FOUND = "hlsInitPtsFound",
            t.FRAG_LOADING = "hlsFragLoading",
            t.FRAG_LOAD_EMERGENCY_ABORTED = "hlsFragLoadEmergencyAborted",
            t.FRAG_LOADED = "hlsFragLoaded",
            t.FRAG_DECRYPTED = "hlsFragDecrypted",
            t.FRAG_PARSING_INIT_SEGMENT = "hlsFragParsingInitSegment",
            t.FRAG_PARSING_USERDATA = "hlsFragParsingUserdata",
            t.FRAG_PARSING_METADATA = "hlsFragParsingMetadata",
            t.FRAG_PARSED = "hlsFragParsed",
            t.FRAG_BUFFERED = "hlsFragBuffered",
            t.FRAG_CHANGED = "hlsFragChanged",
            t.FPS_DROP = "hlsFpsDrop",
            t.FPS_DROP_LEVEL_CAPPING = "hlsFpsDropLevelCapping",
            t.MAX_AUTO_LEVEL_UPDATED = "hlsMaxAutoLevelUpdated",
            t.ERROR = "hlsError",
            t.DESTROYING = "hlsDestroying",
            t.KEY_LOADING = "hlsKeyLoading",
            t.KEY_LOADED = "hlsKeyLoaded",
            t.LIVE_BACK_BUFFER_REACHED = "hlsLiveBackBufferReached",
            t.BACK_BUFFER_REACHED = "hlsBackBufferReached",
            t.STEERING_MANIFEST_LOADED = "hlsSteeringManifestLoaded",
            t
        }({})
          , L = function(t) {
            return t.NETWORK_ERROR = "networkError",
            t.MEDIA_ERROR = "mediaError",
            t.KEY_SYSTEM_ERROR = "keySystemError",
            t.MUX_ERROR = "muxError",
            t.OTHER_ERROR = "otherError",
            t
        }({})
          , A = function(t) {
            return t.KEY_SYSTEM_NO_KEYS = "keySystemNoKeys",
            t.KEY_SYSTEM_NO_ACCESS = "keySystemNoAccess",
            t.KEY_SYSTEM_NO_SESSION = "keySystemNoSession",
            t.KEY_SYSTEM_NO_CONFIGURED_LICENSE = "keySystemNoConfiguredLicense",
            t.KEY_SYSTEM_LICENSE_REQUEST_FAILED = "keySystemLicenseRequestFailed",
            t.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED = "keySystemServerCertificateRequestFailed",
            t.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED = "keySystemServerCertificateUpdateFailed",
            t.KEY_SYSTEM_SESSION_UPDATE_FAILED = "keySystemSessionUpdateFailed",
            t.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED = "keySystemStatusOutputRestricted",
            t.KEY_SYSTEM_STATUS_INTERNAL_ERROR = "keySystemStatusInternalError",
            t.MANIFEST_LOAD_ERROR = "manifestLoadError",
            t.MANIFEST_LOAD_TIMEOUT = "manifestLoadTimeOut",
            t.MANIFEST_PARSING_ERROR = "manifestParsingError",
            t.MANIFEST_INCOMPATIBLE_CODECS_ERROR = "manifestIncompatibleCodecsError",
            t.LEVEL_EMPTY_ERROR = "levelEmptyError",
            t.LEVEL_LOAD_ERROR = "levelLoadError",
            t.LEVEL_LOAD_TIMEOUT = "levelLoadTimeOut",
            t.LEVEL_PARSING_ERROR = "levelParsingError",
            t.LEVEL_SWITCH_ERROR = "levelSwitchError",
            t.AUDIO_TRACK_LOAD_ERROR = "audioTrackLoadError",
            t.AUDIO_TRACK_LOAD_TIMEOUT = "audioTrackLoadTimeOut",
            t.SUBTITLE_LOAD_ERROR = "subtitleTrackLoadError",
            t.SUBTITLE_TRACK_LOAD_TIMEOUT = "subtitleTrackLoadTimeOut",
            t.FRAG_LOAD_ERROR = "fragLoadError",
            t.FRAG_LOAD_TIMEOUT = "fragLoadTimeOut",
            t.FRAG_DECRYPT_ERROR = "fragDecryptError",
            t.FRAG_PARSING_ERROR = "fragParsingError",
            t.FRAG_GAP = "fragGap",
            t.REMUX_ALLOC_ERROR = "remuxAllocError",
            t.KEY_LOAD_ERROR = "keyLoadError",
            t.KEY_LOAD_TIMEOUT = "keyLoadTimeOut",
            t.BUFFER_ADD_CODEC_ERROR = "bufferAddCodecError",
            t.BUFFER_INCOMPATIBLE_CODECS_ERROR = "bufferIncompatibleCodecsError",
            t.BUFFER_APPEND_ERROR = "bufferAppendError",
            t.BUFFER_APPENDING_ERROR = "bufferAppendingError",
            t.BUFFER_STALLED_ERROR = "bufferStalledError",
            t.BUFFER_FULL_ERROR = "bufferFullError",
            t.BUFFER_SEEK_OVER_HOLE = "bufferSeekOverHole",
            t.BUFFER_NUDGE_ON_STALL = "bufferNudgeOnStall",
            t.INTERNAL_EXCEPTION = "internalException",
            t.INTERNAL_ABORTED = "aborted",
            t.UNKNOWN = "unknown",
            t
        }({})
          , R = function() {}
          , k = {
            trace: R,
            debug: R,
            log: R,
            warn: R,
            info: R,
            error: R
        }
          , b = k;
        function D(t) {
            for (var e = arguments.length, r = new Array(e > 1 ? e - 1 : 0), i = 1; i < e; i++)
                r[i - 1] = arguments[i];
            r.forEach((function(e) {
                b[e] = t[e] ? t[e].bind(t) : function(t) {
                    var e = self.console[t];
                    return e ? e.bind(self.console, "[" + t + "] >") : R
                }(e)
            }
            ))
        }
        function I(t, e) {
            if ("object" == typeof console && !0 === t || "object" == typeof t) {
                D(t, "debug", "log", "info", "warn", "error");
                try {
                    b.log('Debug logs enabled for "' + e + '" in hls.js version 1.5.7')
                } catch (t) {
                    b = k
                }
            } else
                b = k
        }
        var w = b
          , C = /^(\d+)x(\d+)$/
          , _ = /(.+?)=(".*?"|.*?)(?:,|$)/g
          , x = function() {
            function t(e) {
                "string" == typeof e && (e = t.parseAttrList(e)),
                o(this, e)
            }
            var e = t.prototype;
            return e.decimalInteger = function(t) {
                var e = parseInt(this[t], 10);
                return e > Number.MAX_SAFE_INTEGER ? 1 / 0 : e
            }
            ,
            e.hexadecimalInteger = function(t) {
                if (this[t]) {
                    var e = (this[t] || "0x").slice(2);
                    e = (1 & e.length ? "0" : "") + e;
                    for (var r = new Uint8Array(e.length / 2), i = 0; i < e.length / 2; i++)
                        r[i] = parseInt(e.slice(2 * i, 2 * i + 2), 16);
                    return r
                }
                return null
            }
            ,
            e.hexadecimalIntegerAsNumber = function(t) {
                var e = parseInt(this[t], 16);
                return e > Number.MAX_SAFE_INTEGER ? 1 / 0 : e
            }
            ,
            e.decimalFloatingPoint = function(t) {
                return parseFloat(this[t])
            }
            ,
            e.optionalFloat = function(t, e) {
                var r = this[t];
                return r ? parseFloat(r) : e
            }
            ,
            e.enumeratedString = function(t) {
                return this[t]
            }
            ,
            e.bool = function(t) {
                return "YES" === this[t]
            }
            ,
            e.decimalResolution = function(t) {
                var e = C.exec(this[t]);
                if (null !== e)
                    return {
                        width: parseInt(e[1], 10),
                        height: parseInt(e[2], 10)
                    }
            }
            ,
            t.parseAttrList = function(t) {
                var e, r = {};
                for (_.lastIndex = 0; null !== (e = _.exec(t)); ) {
                    var i = e[2];
                    0 === i.indexOf('"') && i.lastIndexOf('"') === i.length - 1 && (i = i.slice(1, -1)),
                    r[e[1].trim()] = i
                }
                return r
            }
            ,
            s(t, [{
                key: "clientAttrs",
                get: function() {
                    return Object.keys(this).filter((function(t) {
                        return "X-" === t.substring(0, 2)
                    }
                    ))
                }
            }]),
            t
        }();
        function P(t) {
            return "SCTE35-OUT" === t || "SCTE35-IN" === t
        }
        var F = function() {
            function t(t, e) {
                if (this.attr = void 0,
                this._startDate = void 0,
                this._endDate = void 0,
                this._badValueForSameId = void 0,
                e) {
                    var r = e.attr;
                    for (var i in r)
                        if (Object.prototype.hasOwnProperty.call(t, i) && t[i] !== r[i]) {
                            w.warn('DATERANGE tag attribute: "' + i + '" does not match for tags with ID: "' + t.ID + '"'),
                            this._badValueForSameId = i;
                            break
                        }
                    t = o(new x({}), r, t)
                }
                if (this.attr = t,
                this._startDate = new Date(t["START-DATE"]),
                "END-DATE"in this.attr) {
                    var n = new Date(this.attr["END-DATE"]);
                    y(n.getTime()) && (this._endDate = n)
                }
            }
            return s(t, [{
                key: "id",
                get: function() {
                    return this.attr.ID
                }
            }, {
                key: "class",
                get: function() {
                    return this.attr.CLASS
                }
            }, {
                key: "startDate",
                get: function() {
                    return this._startDate
                }
            }, {
                key: "endDate",
                get: function() {
                    if (this._endDate)
                        return this._endDate;
                    var t = this.duration;
                    return null !== t ? new Date(this._startDate.getTime() + 1e3 * t) : null
                }
            }, {
                key: "duration",
                get: function() {
                    if ("DURATION"in this.attr) {
                        var t = this.attr.decimalFloatingPoint("DURATION");
                        if (y(t))
                            return t
                    } else if (this._endDate)
                        return (this._endDate.getTime() - this._startDate.getTime()) / 1e3;
                    return null
                }
            }, {
                key: "plannedDuration",
                get: function() {
                    return "PLANNED-DURATION"in this.attr ? this.attr.decimalFloatingPoint("PLANNED-DURATION") : null
                }
            }, {
                key: "endOnNext",
                get: function() {
                    return this.attr.bool("END-ON-NEXT")
                }
            }, {
                key: "isValid",
                get: function() {
                    return !!this.id && !this._badValueForSameId && y(this.startDate.getTime()) && (null === this.duration || this.duration >= 0) && (!this.endOnNext || !!this.class)
                }
            }]),
            t
        }()
          , M = function() {
            this.aborted = !1,
            this.loaded = 0,
            this.retry = 0,
            this.total = 0,
            this.chunkCount = 0,
            this.bwEstimate = 0,
            this.loading = {
                start: 0,
                first: 0,
                end: 0
            },
            this.parsing = {
                start: 0,
                end: 0
            },
            this.buffering = {
                start: 0,
                first: 0,
                end: 0
            }
        }
          , O = "audio"
          , N = "video"
          , U = "audiovideo"
          , B = function() {
            function t(t) {
                var e;
                this._byteRange = null,
                this._url = null,
                this.baseurl = void 0,
                this.relurl = void 0,
                this.elementaryStreams = ((e = {})[O] = null,
                e[N] = null,
                e[U] = null,
                e),
                this.baseurl = t
            }
            return t.prototype.setByteRange = function(t, e) {
                var r, i = t.split("@", 2);
                r = 1 === i.length ? (null == e ? void 0 : e.byteRangeEndOffset) || 0 : parseInt(i[1]),
                this._byteRange = [r, parseInt(i[0]) + r]
            }
            ,
            s(t, [{
                key: "byteRange",
                get: function() {
                    return this._byteRange ? this._byteRange : []
                }
            }, {
                key: "byteRangeStartOffset",
                get: function() {
                    return this.byteRange[0]
                }
            }, {
                key: "byteRangeEndOffset",
                get: function() {
                    return this.byteRange[1]
                }
            }, {
                key: "url",
                get: function() {
                    return !this._url && this.baseurl && this.relurl && (this._url = p.buildAbsoluteURL(this.baseurl, this.relurl, {
                        alwaysNormalize: !0
                    })),
                    this._url || ""
                },
                set: function(t) {
                    this._url = t
                }
            }]),
            t
        }()
          , G = function(t) {
            function e(e, r) {
                var i;
                return (i = t.call(this, r) || this)._decryptdata = null,
                i.rawProgramDateTime = null,
                i.programDateTime = null,
                i.tagList = [],
                i.duration = 0,
                i.sn = 0,
                i.levelkeys = void 0,
                i.type = void 0,
                i.loader = null,
                i.keyLoader = null,
                i.level = -1,
                i.cc = 0,
                i.startPTS = void 0,
                i.endPTS = void 0,
                i.startDTS = void 0,
                i.endDTS = void 0,
                i.start = 0,
                i.deltaPTS = void 0,
                i.maxStartPTS = void 0,
                i.minEndPTS = void 0,
                i.stats = new M,
                i.data = void 0,
                i.bitrateTest = !1,
                i.title = null,
                i.initSegment = null,
                i.endList = void 0,
                i.gap = void 0,
                i.urlId = 0,
                i.type = e,
                i
            }
            l(e, t);
            var r = e.prototype;
            return r.setKeyFormat = function(t) {
                if (this.levelkeys) {
                    var e = this.levelkeys[t];
                    e && !this._decryptdata && (this._decryptdata = e.getDecryptData(this.sn))
                }
            }
            ,
            r.abortRequests = function() {
                var t, e;
                null == (t = this.loader) || t.abort(),
                null == (e = this.keyLoader) || e.abort()
            }
            ,
            r.setElementaryStreamInfo = function(t, e, r, i, n, a) {
                void 0 === a && (a = !1);
                var s = this.elementaryStreams
                  , o = s[t];
                o ? (o.startPTS = Math.min(o.startPTS, e),
                o.endPTS = Math.max(o.endPTS, r),
                o.startDTS = Math.min(o.startDTS, i),
                o.endDTS = Math.max(o.endDTS, n)) : s[t] = {
                    startPTS: e,
                    endPTS: r,
                    startDTS: i,
                    endDTS: n,
                    partial: a
                }
            }
            ,
            r.clearElementaryStreamInfo = function() {
                var t = this.elementaryStreams;
                t[O] = null,
                t[N] = null,
                t[U] = null
            }
            ,
            s(e, [{
                key: "decryptdata",
                get: function() {
                    if (!this.levelkeys && !this._decryptdata)
                        return null;
                    if (!this._decryptdata && this.levelkeys && !this.levelkeys.NONE) {
                        var t = this.levelkeys.identity;
                        if (t)
                            this._decryptdata = t.getDecryptData(this.sn);
                        else {
                            var e = Object.keys(this.levelkeys);
                            if (1 === e.length)
                                return this._decryptdata = this.levelkeys[e[0]].getDecryptData(this.sn)
                        }
                    }
                    return this._decryptdata
                }
            }, {
                key: "end",
                get: function() {
                    return this.start + this.duration
                }
            }, {
                key: "endProgramDateTime",
                get: function() {
                    if (null === this.programDateTime)
                        return null;
                    if (!y(this.programDateTime))
                        return null;
                    var t = y(this.duration) ? this.duration : 0;
                    return this.programDateTime + 1e3 * t
                }
            }, {
                key: "encrypted",
                get: function() {
                    var t;
                    if (null != (t = this._decryptdata) && t.encrypted)
                        return !0;
                    if (this.levelkeys) {
                        var e = Object.keys(this.levelkeys)
                          , r = e.length;
                        if (r > 1 || 1 === r && this.levelkeys[e[0]].encrypted)
                            return !0
                    }
                    return !1
                }
            }]),
            e
        }(B)
          , K = function(t) {
            function e(e, r, i, n, a) {
                var s;
                (s = t.call(this, i) || this).fragOffset = 0,
                s.duration = 0,
                s.gap = !1,
                s.independent = !1,
                s.relurl = void 0,
                s.fragment = void 0,
                s.index = void 0,
                s.stats = new M,
                s.duration = e.decimalFloatingPoint("DURATION"),
                s.gap = e.bool("GAP"),
                s.independent = e.bool("INDEPENDENT"),
                s.relurl = e.enumeratedString("URI"),
                s.fragment = r,
                s.index = n;
                var o = e.enumeratedString("BYTERANGE");
                return o && s.setByteRange(o, a),
                a && (s.fragOffset = a.fragOffset + a.duration),
                s
            }
            return l(e, t),
            s(e, [{
                key: "start",
                get: function() {
                    return this.fragment.start + this.fragOffset
                }
            }, {
                key: "end",
                get: function() {
                    return this.start + this.duration
                }
            }, {
                key: "loaded",
                get: function() {
                    var t = this.elementaryStreams;
                    return !!(t.audio || t.video || t.audiovideo)
                }
            }]),
            e
        }(B)
          , H = function() {
            function t(t) {
                this.PTSKnown = !1,
                this.alignedSliding = !1,
                this.averagetargetduration = void 0,
                this.endCC = 0,
                this.endSN = 0,
                this.fragments = void 0,
                this.fragmentHint = void 0,
                this.partList = null,
                this.dateRanges = void 0,
                this.live = !0,
                this.ageHeader = 0,
                this.advancedDateTime = void 0,
                this.updated = !0,
                this.advanced = !0,
                this.availabilityDelay = void 0,
                this.misses = 0,
                this.startCC = 0,
                this.startSN = 0,
                this.startTimeOffset = null,
                this.targetduration = 0,
                this.totalduration = 0,
                this.type = null,
                this.url = void 0,
                this.m3u8 = "",
                this.version = null,
                this.canBlockReload = !1,
                this.canSkipUntil = 0,
                this.canSkipDateRanges = !1,
                this.skippedSegments = 0,
                this.recentlyRemovedDateranges = void 0,
                this.partHoldBack = 0,
                this.holdBack = 0,
                this.partTarget = 0,
                this.preloadHint = void 0,
                this.renditionReports = void 0,
                this.tuneInGoal = 0,
                this.deltaUpdateFailed = void 0,
                this.driftStartTime = 0,
                this.driftEndTime = 0,
                this.driftStart = 0,
                this.driftEnd = 0,
                this.encryptedFragments = void 0,
                this.playlistParsingError = null,
                this.variableList = null,
                this.hasVariableRefs = !1,
                this.fragments = [],
                this.encryptedFragments = [],
                this.dateRanges = {},
                this.url = t
            }
            return t.prototype.reloaded = function(t) {
                if (!t)
                    return this.advanced = !0,
                    void (this.updated = !0);
                var e = this.lastPartSn - t.lastPartSn
                  , r = this.lastPartIndex - t.lastPartIndex;
                this.updated = this.endSN !== t.endSN || !!r || !!e || !this.live,
                this.advanced = this.endSN > t.endSN || e > 0 || 0 === e && r > 0,
                this.updated || this.advanced ? this.misses = Math.floor(.6 * t.misses) : this.misses = t.misses + 1,
                this.availabilityDelay = t.availabilityDelay
            }
            ,
            s(t, [{
                key: "hasProgramDateTime",
                get: function() {
                    return !!this.fragments.length && y(this.fragments[this.fragments.length - 1].programDateTime)
                }
            }, {
                key: "levelTargetDuration",
                get: function() {
                    return this.averagetargetduration || this.targetduration || 10
                }
            }, {
                key: "drift",
                get: function() {
                    var t = this.driftEndTime - this.driftStartTime;
                    return t > 0 ? 1e3 * (this.driftEnd - this.driftStart) / t : 1
                }
            }, {
                key: "edge",
                get: function() {
                    return this.partEnd || this.fragmentEnd
                }
            }, {
                key: "partEnd",
                get: function() {
                    var t;
                    return null != (t = this.partList) && t.length ? this.partList[this.partList.length - 1].end : this.fragmentEnd
                }
            }, {
                key: "fragmentEnd",
                get: function() {
                    var t;
                    return null != (t = this.fragments) && t.length ? this.fragments[this.fragments.length - 1].end : 0
                }
            }, {
                key: "age",
                get: function() {
                    return this.advancedDateTime ? Math.max(Date.now() - this.advancedDateTime, 0) / 1e3 : 0
                }
            }, {
                key: "lastPartIndex",
                get: function() {
                    var t;
                    return null != (t = this.partList) && t.length ? this.partList[this.partList.length - 1].index : -1
                }
            }, {
                key: "lastPartSn",
                get: function() {
                    var t;
                    return null != (t = this.partList) && t.length ? this.partList[this.partList.length - 1].fragment.sn : this.endSN
                }
            }]),
            t
        }();
        function V(t) {
            return Uint8Array.from(atob(t), (function(t) {
                return t.charCodeAt(0)
            }
            ))
        }
        function Y(t) {
            var e, r, i = t.split(":"), n = null;
            if ("data" === i[0] && 2 === i.length) {
                var a = i[1].split(";")
                  , s = a[a.length - 1].split(",");
                if (2 === s.length) {
                    var o = "base64" === s[0]
                      , l = s[1];
                    o ? (a.splice(-1, 1),
                    n = V(l)) : (e = W(l).subarray(0, 16),
                    (r = new Uint8Array(16)).set(e, 16 - e.length),
                    n = r)
                }
            }
            return n
        }
        function W(t) {
            return Uint8Array.from(unescape(encodeURIComponent(t)), (function(t) {
                return t.charCodeAt(0)
            }
            ))
        }
        var j = "undefined" != typeof self ? self : void 0
          , q = {
            CLEARKEY: "org.w3.clearkey",
            FAIRPLAY: "com.apple.fps",
            PLAYREADY: "com.microsoft.playready",
            WIDEVINE: "com.widevine.alpha"
        }
          , X = "org.w3.clearkey"
          , z = "com.apple.streamingkeydelivery"
          , Q = "com.microsoft.playready"
          , J = "urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";
        function $(t) {
            switch (t) {
            case z:
                return q.FAIRPLAY;
            case Q:
                return q.PLAYREADY;
            case J:
                return q.WIDEVINE;
            case X:
                return q.CLEARKEY
            }
        }
        var Z = "edef8ba979d64acea3c827dcd51d21ed";
        function tt(t) {
            switch (t) {
            case q.FAIRPLAY:
                return z;
            case q.PLAYREADY:
                return Q;
            case q.WIDEVINE:
                return J;
            case q.CLEARKEY:
                return X
            }
        }
        function et(t) {
            var e = t.drmSystems
              , r = t.widevineLicenseUrl
              , i = e ? [q.FAIRPLAY, q.WIDEVINE, q.PLAYREADY, q.CLEARKEY].filter((function(t) {
                return !!e[t]
            }
            )) : [];
            return !i[q.WIDEVINE] && r && i.push(q.WIDEVINE),
            i
        }
        var rt, it = null != j && null != (rt = j.navigator) && rt.requestMediaKeySystemAccess ? self.navigator.requestMediaKeySystemAccess.bind(self.navigator) : null;
        function nt(t, e, r) {
            return Uint8Array.prototype.slice ? t.slice(e, r) : new Uint8Array(Array.prototype.slice.call(t, e, r))
        }
        var at, st = function(t, e) {
            return e + 10 <= t.length && 73 === t[e] && 68 === t[e + 1] && 51 === t[e + 2] && t[e + 3] < 255 && t[e + 4] < 255 && t[e + 6] < 128 && t[e + 7] < 128 && t[e + 8] < 128 && t[e + 9] < 128
        }, ot = function(t, e) {
            return e + 10 <= t.length && 51 === t[e] && 68 === t[e + 1] && 73 === t[e + 2] && t[e + 3] < 255 && t[e + 4] < 255 && t[e + 6] < 128 && t[e + 7] < 128 && t[e + 8] < 128 && t[e + 9] < 128
        }, lt = function(t, e) {
            for (var r = e, i = 0; st(t, e); )
                i += 10,
                i += ut(t, e + 6),
                ot(t, e + 10) && (i += 10),
                e += i;
            if (i > 0)
                return t.subarray(r, r + i)
        }, ut = function(t, e) {
            var r = 0;
            return r = (127 & t[e]) << 21,
            r |= (127 & t[e + 1]) << 14,
            r |= (127 & t[e + 2]) << 7,
            r |= 127 & t[e + 3]
        }, ht = function(t, e) {
            return st(t, e) && ut(t, e + 6) + 10 <= t.length - e
        }, dt = function(t) {
            for (var e = gt(t), r = 0; r < e.length; r++) {
                var i = e[r];
                if (ct(i))
                    return Et(i)
            }
        }, ct = function(t) {
            return t && "PRIV" === t.key && "com.apple.streaming.transportStreamTimestamp" === t.info
        }, ft = function(t) {
            var e = String.fromCharCode(t[0], t[1], t[2], t[3])
              , r = ut(t, 4);
            return {
                type: e,
                size: r,
                data: t.subarray(10, 10 + r)
            }
        }, gt = function(t) {
            for (var e = 0, r = []; st(t, e); ) {
                for (var i = ut(t, e + 6), n = (e += 10) + i; e + 8 < n; ) {
                    var a = ft(t.subarray(e))
                      , s = vt(a);
                    s && r.push(s),
                    e += a.size + 10
                }
                ot(t, e) && (e += 10)
            }
            return r
        }, vt = function(t) {
            return "PRIV" === t.type ? mt(t) : "W" === t.type[0] ? yt(t) : pt(t)
        }, mt = function(t) {
            if (!(t.size < 2)) {
                var e = Tt(t.data, !0)
                  , r = new Uint8Array(t.data.subarray(e.length + 1));
                return {
                    key: t.type,
                    info: e,
                    data: r.buffer
                }
            }
        }, pt = function(t) {
            if (!(t.size < 2)) {
                if ("TXXX" === t.type) {
                    var e = 1
                      , r = Tt(t.data.subarray(e), !0);
                    e += r.length + 1;
                    var i = Tt(t.data.subarray(e));
                    return {
                        key: t.type,
                        info: r,
                        data: i
                    }
                }
                var n = Tt(t.data.subarray(1));
                return {
                    key: t.type,
                    data: n
                }
            }
        }, yt = function(t) {
            if ("WXXX" === t.type) {
                if (t.size < 2)
                    return;
                var e = 1
                  , r = Tt(t.data.subarray(e), !0);
                e += r.length + 1;
                var i = Tt(t.data.subarray(e));
                return {
                    key: t.type,
                    info: r,
                    data: i
                }
            }
            var n = Tt(t.data);
            return {
                key: t.type,
                data: n
            }
        }, Et = function(t) {
            if (8 === t.data.byteLength) {
                var e = new Uint8Array(t.data)
                  , r = 1 & e[3]
                  , i = (e[4] << 23) + (e[5] << 15) + (e[6] << 7) + e[7];
                return i /= 45,
                r && (i += 47721858.84),
                Math.round(i)
            }
        }, Tt = function(t, e) {
            void 0 === e && (e = !1);
            var r = St();
            if (r) {
                var i = r.decode(t);
                if (e) {
                    var n = i.indexOf("\0");
                    return -1 !== n ? i.substring(0, n) : i
                }
                return i.replace(/\0/g, "")
            }
            for (var a, s, o, l = t.length, u = "", h = 0; h < l; ) {
                if (0 === (a = t[h++]) && e)
                    return u;
                if (0 !== a && 3 !== a)
                    switch (a >> 4) {
                    case 0:
                    case 1:
                    case 2:
                    case 3:
                    case 4:
                    case 5:
                    case 6:
                    case 7:
                        u += String.fromCharCode(a);
                        break;
                    case 12:
                    case 13:
                        s = t[h++],
                        u += String.fromCharCode((31 & a) << 6 | 63 & s);
                        break;
                    case 14:
                        s = t[h++],
                        o = t[h++],
                        u += String.fromCharCode((15 & a) << 12 | (63 & s) << 6 | (63 & o) << 0)
                    }
            }
            return u
        };
        function St() {
            if (!navigator.userAgent.includes("PlayStation 4"))
                return at || void 0 === self.TextDecoder || (at = new self.TextDecoder("utf-8")),
                at
        }
        var Lt = function(t) {
            for (var e = "", r = 0; r < t.length; r++) {
                var i = t[r].toString(16);
                i.length < 2 && (i = "0" + i),
                e += i
            }
            return e
        }
          , At = Math.pow(2, 32) - 1
          , Rt = [].push
          , kt = {
            video: 1,
            audio: 2,
            id3: 3,
            text: 4
        };
        function bt(t) {
            return String.fromCharCode.apply(null, t)
        }
        function Dt(t, e) {
            var r = t[e] << 8 | t[e + 1];
            return r < 0 ? 65536 + r : r
        }
        function It(t, e) {
            var r = Ct(t, e);
            return r < 0 ? 4294967296 + r : r
        }
        function wt(t, e) {
            var r = It(t, e);
            return r *= Math.pow(2, 32),
            r += It(t, e + 4)
        }
        function Ct(t, e) {
            return t[e] << 24 | t[e + 1] << 16 | t[e + 2] << 8 | t[e + 3]
        }
        function _t(t, e, r) {
            t[e] = r >> 24,
            t[e + 1] = r >> 16 & 255,
            t[e + 2] = r >> 8 & 255,
            t[e + 3] = 255 & r
        }
        function xt(t, e) {
            var r = [];
            if (!e.length)
                return r;
            for (var i = t.byteLength, n = 0; n < i; ) {
                var a = It(t, n)
                  , s = a > 1 ? n + a : i;
                if (bt(t.subarray(n + 4, n + 8)) === e[0])
                    if (1 === e.length)
                        r.push(t.subarray(n + 8, s));
                    else {
                        var o = xt(t.subarray(n + 8, s), e.slice(1));
                        o.length && Rt.apply(r, o)
                    }
                n = s
            }
            return r
        }
        function Pt(t) {
            var e = []
              , r = t[0]
              , i = 8
              , n = It(t, i);
            i += 4;
            var a = 0
              , s = 0;
            0 === r ? (a = It(t, i),
            s = It(t, i + 4),
            i += 8) : (a = wt(t, i),
            s = wt(t, i + 8),
            i += 16),
            i += 2;
            var o = t.length + s
              , l = Dt(t, i);
            i += 2;
            for (var u = 0; u < l; u++) {
                var h = i
                  , d = It(t, h);
                h += 4;
                var c = 2147483647 & d;
                if (1 == (2147483648 & d) >>> 31)
                    return w.warn("SIDX has hierarchical references (not supported)"),
                    null;
                var f = It(t, h);
                h += 4,
                e.push({
                    referenceSize: c,
                    subsegmentDuration: f,
                    info: {
                        duration: f / n,
                        start: o,
                        end: o + c - 1
                    }
                }),
                o += c,
                i = h += 4
            }
            return {
                earliestPresentationTime: a,
                timescale: n,
                version: r,
                referencesCount: l,
                references: e
            }
        }
        function Ft(t) {
            for (var e = [], r = xt(t, ["moov", "trak"]), n = 0; n < r.length; n++) {
                var a = r[n]
                  , s = xt(a, ["tkhd"])[0];
                if (s) {
                    var o = s[0]
                      , l = It(s, 0 === o ? 12 : 20)
                      , u = xt(a, ["mdia", "mdhd"])[0];
                    if (u) {
                        var h = It(u, 0 === (o = u[0]) ? 12 : 20)
                          , d = xt(a, ["mdia", "hdlr"])[0];
                        if (d) {
                            var c = bt(d.subarray(8, 12))
                              , f = {
                                soun: O,
                                vide: N
                            }[c];
                            if (f) {
                                var g = Mt(xt(a, ["mdia", "minf", "stbl", "stsd"])[0]);
                                e[l] = {
                                    timescale: h,
                                    type: f
                                },
                                e[f] = i({
                                    timescale: h,
                                    id: l
                                }, g)
                            }
                        }
                    }
                }
            }
            return xt(t, ["moov", "mvex", "trex"]).forEach((function(t) {
                var r = It(t, 4)
                  , i = e[r];
                i && (i.default = {
                    duration: It(t, 12),
                    flags: It(t, 20)
                })
            }
            )),
            e
        }
        function Mt(t) {
            var e = t.subarray(8)
              , r = e.subarray(86)
              , i = bt(e.subarray(4, 8))
              , n = i
              , a = "enca" === i || "encv" === i;
            if (a) {
                var s = xt(e, [i])[0];
                xt(s.subarray("enca" === i ? 28 : 78), ["sinf"]).forEach((function(t) {
                    var e = xt(t, ["schm"])[0];
                    if (e) {
                        var r = bt(e.subarray(4, 8));
                        if ("cbcs" === r || "cenc" === r) {
                            var i = xt(t, ["frma"])[0];
                            i && (n = bt(i))
                        }
                    }
                }
                ))
            }
            switch (n) {
            case "avc1":
            case "avc2":
            case "avc3":
            case "avc4":
                var o = xt(r, ["avcC"])[0];
                n += "." + Nt(o[1]) + Nt(o[2]) + Nt(o[3]);
                break;
            case "mp4a":
                var l = xt(e, [i])[0]
                  , u = xt(l.subarray(28), ["esds"])[0];
                if (u && u.length > 12) {
                    var h = 4;
                    if (3 !== u[h++])
                        break;
                    h = Ot(u, h),
                    h += 2;
                    var d = u[h++];
                    if (128 & d && (h += 2),
                    64 & d && (h += u[h++]),
                    4 !== u[h++])
                        break;
                    h = Ot(u, h);
                    var c = u[h++];
                    if (64 !== c)
                        break;
                    if (n += "." + Nt(c),
                    h += 12,
                    5 !== u[h++])
                        break;
                    h = Ot(u, h);
                    var f = u[h++]
                      , g = (248 & f) >> 3;
                    31 === g && (g += 1 + ((7 & f) << 3) + ((224 & u[h]) >> 5)),
                    n += "." + g
                }
                break;
            case "hvc1":
            case "hev1":
                var v = xt(r, ["hvcC"])[0]
                  , m = v[1]
                  , p = ["", "A", "B", "C"][m >> 6]
                  , y = 31 & m
                  , E = It(v, 2)
                  , T = (32 & m) >> 5 ? "H" : "L"
                  , S = v[12]
                  , L = v.subarray(6, 12);
                n += "." + p + y,
                n += "." + E.toString(16).toUpperCase(),
                n += "." + T + S;
                for (var A = "", R = L.length; R--; ) {
                    var k = L[R];
                    (k || A) && (A = "." + k.toString(16).toUpperCase() + A)
                }
                n += A;
                break;
            case "dvh1":
            case "dvhe":
                var b = xt(r, ["dvcC"])[0]
                  , D = b[2] >> 1 & 127
                  , I = b[2] << 5 & 32 | b[3] >> 3 & 31;
                n += "." + Ut(D) + "." + Ut(I);
                break;
            case "vp09":
                var w = xt(r, ["vpcC"])[0]
                  , C = w[4]
                  , _ = w[5]
                  , x = w[6] >> 4 & 15;
                n += "." + Ut(C) + "." + Ut(_) + "." + Ut(x);
                break;
            case "av01":
                var P = xt(r, ["av1C"])[0]
                  , F = P[1] >>> 5
                  , M = 31 & P[1]
                  , O = P[2] >>> 7 ? "H" : "M"
                  , N = (64 & P[2]) >> 6
                  , U = (32 & P[2]) >> 5
                  , B = 2 === F && N ? U ? 12 : 10 : N ? 10 : 8
                  , G = (16 & P[2]) >> 4
                  , K = (8 & P[2]) >> 3
                  , H = (4 & P[2]) >> 2
                  , V = 3 & P[2];
                n += "." + F + "." + Ut(M) + O + "." + Ut(B) + "." + G + "." + K + H + V + "." + Ut(1) + "." + Ut(1) + "." + Ut(1) + ".0"
            }
            return {
                codec: n,
                encrypted: a
            }
        }
        function Ot(t, e) {
            for (var r = e + 5; 128 & t[e++] && e < r; )
                ;
            return e
        }
        function Nt(t) {
            return ("0" + t.toString(16).toUpperCase()).slice(-2)
        }
        function Ut(t) {
            return (t < 10 ? "0" : "") + t
        }
        function Bt(t) {
            var e = xt(t, ["schm"])[0];
            if (e) {
                var r = bt(e.subarray(4, 8));
                if ("cbcs" === r || "cenc" === r)
                    return xt(t, ["schi", "tenc"])[0]
            }
            return w.error("[eme] missing 'schm' box"),
            null
        }
        function Gt(t) {
            var e = It(t, 0)
              , r = 8;
            1 & e && (r += 4),
            4 & e && (r += 4);
            for (var i = 0, n = It(t, 4), a = 0; a < n; a++)
                256 & e && (i += It(t, r),
                r += 4),
                512 & e && (r += 4),
                1024 & e && (r += 4),
                2048 & e && (r += 4);
            return i
        }
        function Kt(t, e) {
            var r = new Uint8Array(t.length + e.length);
            return r.set(t),
            r.set(e, t.length),
            r
        }
        function Ht(t, e) {
            var r = []
              , i = e.samples
              , n = e.timescale
              , a = e.id
              , s = !1;
            return xt(i, ["moof"]).map((function(o) {
                var l = o.byteOffset - 8;
                xt(o, ["traf"]).map((function(o) {
                    var u = xt(o, ["tfdt"]).map((function(t) {
                        var e = t[0]
                          , r = It(t, 4);
                        return 1 === e && (r *= Math.pow(2, 32),
                        r += It(t, 8)),
                        r / n
                    }
                    ))[0];
                    return void 0 !== u && (t = u),
                    xt(o, ["tfhd"]).map((function(u) {
                        var h = It(u, 4)
                          , d = 16777215 & It(u, 0)
                          , c = 0
                          , f = 0 != (16 & d)
                          , g = 0
                          , v = 0 != (32 & d)
                          , m = 8;
                        h === a && (0 != (1 & d) && (m += 8),
                        0 != (2 & d) && (m += 4),
                        0 != (8 & d) && (c = It(u, m),
                        m += 4),
                        f && (g = It(u, m),
                        m += 4),
                        v && (m += 4),
                        "video" === e.type && (s = function(t) {
                            if (!t)
                                return !1;
                            var e = t.indexOf(".")
                              , r = e < 0 ? t : t.substring(0, e);
                            return "hvc1" === r || "hev1" === r || "dvh1" === r || "dvhe" === r
                        }(e.codec)),
                        xt(o, ["trun"]).map((function(a) {
                            var o = a[0]
                              , u = 16777215 & It(a, 0)
                              , h = 0 != (1 & u)
                              , d = 0
                              , f = 0 != (4 & u)
                              , v = 0 != (256 & u)
                              , m = 0
                              , p = 0 != (512 & u)
                              , y = 0
                              , E = 0 != (1024 & u)
                              , T = 0 != (2048 & u)
                              , S = 0
                              , L = It(a, 4)
                              , A = 8;
                            h && (d = It(a, A),
                            A += 4),
                            f && (A += 4);
                            for (var R = d + l, k = 0; k < L; k++) {
                                if (v ? (m = It(a, A),
                                A += 4) : m = c,
                                p ? (y = It(a, A),
                                A += 4) : y = g,
                                E && (A += 4),
                                T && (S = 0 === o ? It(a, A) : Ct(a, A),
                                A += 4),
                                e.type === N)
                                    for (var b = 0; b < y; ) {
                                        var D = It(i, R);
                                        Vt(s, i[R += 4]) && Yt(i.subarray(R, R + D), s ? 2 : 1, t + S / n, r),
                                        R += D,
                                        b += D + 4
                                    }
                                t += m / n
                            }
                        }
                        )))
                    }
                    ))
                }
                ))
            }
            )),
            r
        }
        function Vt(t, e) {
            if (t) {
                var r = e >> 1 & 63;
                return 39 === r || 40 === r
            }
            return 6 == (31 & e)
        }
        function Yt(t, e, r, i) {
            var n = Wt(t)
              , a = 0;
            a += e;
            for (var s = 0, o = 0, l = 0; a < n.length; ) {
                s = 0;
                do {
                    if (a >= n.length)
                        break;
                    s += l = n[a++]
                } while (255 === l);
                o = 0;
                do {
                    if (a >= n.length)
                        break;
                    o += l = n[a++]
                } while (255 === l);
                var u = n.length - a
                  , h = a;
                if (o < u)
                    a += o;
                else if (o > u) {
                    w.error("Malformed SEI payload. " + o + " is too small, only " + u + " bytes left to parse.");
                    break
                }
                if (4 === s) {
                    if (181 === n[h++]) {
                        var d = Dt(n, h);
                        if (h += 2,
                        49 === d) {
                            var c = It(n, h);
                            if (h += 4,
                            1195456820 === c) {
                                var f = n[h++];
                                if (3 === f) {
                                    var g = n[h++]
                                      , v = 64 & g
                                      , m = v ? 2 + 3 * (31 & g) : 0
                                      , p = new Uint8Array(m);
                                    if (v) {
                                        p[0] = g;
                                        for (var y = 1; y < m; y++)
                                            p[y] = n[h++]
                                    }
                                    i.push({
                                        type: f,
                                        payloadType: s,
                                        pts: r,
                                        bytes: p
                                    })
                                }
                            }
                        }
                    }
                } else if (5 === s && o > 16) {
                    for (var E = [], T = 0; T < 16; T++) {
                        var S = n[h++].toString(16);
                        E.push(1 == S.length ? "0" + S : S),
                        3 !== T && 5 !== T && 7 !== T && 9 !== T || E.push("-")
                    }
                    for (var L = o - 16, A = new Uint8Array(L), R = 0; R < L; R++)
                        A[R] = n[h++];
                    i.push({
                        payloadType: s,
                        pts: r,
                        uuid: E.join(""),
                        userData: Tt(A),
                        userDataBytes: A
                    })
                }
            }
        }
        function Wt(t) {
            for (var e = t.byteLength, r = [], i = 1; i < e - 2; )
                0 === t[i] && 0 === t[i + 1] && 3 === t[i + 2] ? (r.push(i + 2),
                i += 2) : i++;
            if (0 === r.length)
                return t;
            var n = e - r.length
              , a = new Uint8Array(n)
              , s = 0;
            for (i = 0; i < n; s++,
            i++)
                s === r[0] && (s++,
                r.shift()),
                a[i] = t[s];
            return a
        }
        function jt(t, e, r) {
            if (16 !== t.byteLength)
                throw new RangeError("Invalid system id");
            var i, n, a;
            if (e) {
                i = 1,
                n = new Uint8Array(16 * e.length);
                for (var s = 0; s < e.length; s++) {
                    var o = e[s];
                    if (16 !== o.byteLength)
                        throw new RangeError("Invalid key");
                    n.set(o, 16 * s)
                }
            } else
                i = 0,
                n = new Uint8Array;
            i > 0 ? (a = new Uint8Array(4),
            e.length > 0 && new DataView(a.buffer).setUint32(0, e.length, !1)) : a = new Uint8Array;
            var l = new Uint8Array(4);
            return r && r.byteLength > 0 && new DataView(l.buffer).setUint32(0, r.byteLength, !1),
            function(t) {
                for (var e = arguments.length, r = new Array(e > 1 ? e - 1 : 0), i = 1; i < e; i++)
                    r[i - 1] = arguments[i];
                for (var n = r.length, a = 8, s = n; s--; )
                    a += r[s].byteLength;
                var o = new Uint8Array(a);
                for (o[0] = a >> 24 & 255,
                o[1] = a >> 16 & 255,
                o[2] = a >> 8 & 255,
                o[3] = 255 & a,
                o.set(t, 4),
                s = 0,
                a = 8; s < n; s++)
                    o.set(r[s], a),
                    a += r[s].byteLength;
                return o
            }([112, 115, 115, 104], new Uint8Array([i, 0, 0, 0]), t, a, n, l, r || new Uint8Array)
        }
        var qt = {}
          , Xt = function() {
            function t(t, e, r, i, n) {
                void 0 === i && (i = [1]),
                void 0 === n && (n = null),
                this.uri = void 0,
                this.method = void 0,
                this.keyFormat = void 0,
                this.keyFormatVersions = void 0,
                this.encrypted = void 0,
                this.isCommonEncryption = void 0,
                this.iv = null,
                this.key = null,
                this.keyId = null,
                this.pssh = null,
                this.method = t,
                this.uri = e,
                this.keyFormat = r,
                this.keyFormatVersions = i,
                this.iv = n,
                this.encrypted = !!t && "NONE" !== t,
                this.isCommonEncryption = this.encrypted && "AES-128" !== t
            }
            t.clearKeyUriToKeyIdMap = function() {
                qt = {}
            }
            ;
            var e = t.prototype;
            return e.isSupported = function() {
                if (this.method) {
                    if ("AES-128" === this.method || "NONE" === this.method)
                        return !0;
                    if ("identity" === this.keyFormat)
                        return "SAMPLE-AES" === this.method;
                    switch (this.keyFormat) {
                    case z:
                    case J:
                    case Q:
                    case X:
                        return -1 !== ["ISO-23001-7", "SAMPLE-AES", "SAMPLE-AES-CENC", "SAMPLE-AES-CTR"].indexOf(this.method)
                    }
                }
                return !1
            }
            ,
            e.getDecryptData = function(e) {
                if (!this.encrypted || !this.uri)
                    return null;
                if ("AES-128" === this.method && this.uri && !this.iv) {
                    "number" != typeof e && ("AES-128" !== this.method || this.iv || w.warn('missing IV for initialization segment with method="' + this.method + '" - compliance issue'),
                    e = 0);
                    var r = function(t) {
                        for (var e = new Uint8Array(16), r = 12; r < 16; r++)
                            e[r] = t >> 8 * (15 - r) & 255;
                        return e
                    }(e);
                    return new t(this.method,this.uri,"identity",this.keyFormatVersions,r)
                }
                var i = Y(this.uri);
                if (i)
                    switch (this.keyFormat) {
                    case J:
                        this.pssh = i,
                        i.length >= 22 && (this.keyId = i.subarray(i.length - 22, i.length - 6));
                        break;
                    case Q:
                        var n = new Uint8Array([154, 4, 240, 121, 152, 64, 66, 134, 171, 146, 230, 91, 224, 136, 95, 149]);
                        this.pssh = jt(n, null, i);
                        var a = new Uint16Array(i.buffer,i.byteOffset,i.byteLength / 2)
                          , s = String.fromCharCode.apply(null, Array.from(a))
                          , o = s.substring(s.indexOf("<"), s.length)
                          , l = (new DOMParser).parseFromString(o, "text/xml").getElementsByTagName("KID")[0];
                        if (l) {
                            var u = l.childNodes[0] ? l.childNodes[0].nodeValue : l.getAttribute("VALUE");
                            if (u) {
                                var h = V(u).subarray(0, 16);
                                !function(t) {
                                    var e = function(t, e, r) {
                                        var i = t[e];
                                        t[e] = t[r],
                                        t[r] = i
                                    };
                                    e(t, 0, 3),
                                    e(t, 1, 2),
                                    e(t, 4, 5),
                                    e(t, 6, 7)
                                }(h),
                                this.keyId = h
                            }
                        }
                        break;
                    default:
                        var d = i.subarray(0, 16);
                        if (16 !== d.length) {
                            var c = new Uint8Array(16);
                            c.set(d, 16 - d.length),
                            d = c
                        }
                        this.keyId = d
                    }
                if (!this.keyId || 16 !== this.keyId.byteLength) {
                    var f = qt[this.uri];
                    if (!f) {
                        var g = Object.keys(qt).length % Number.MAX_SAFE_INTEGER;
                        f = new Uint8Array(16),
                        new DataView(f.buffer,12,4).setUint32(0, g),
                        qt[this.uri] = f
                    }
                    this.keyId = f
                }
                return this
            }
            ,
            t
        }()
          , zt = /\{\$([a-zA-Z0-9-_]+)\}/g;
        function Qt(t) {
            return zt.test(t)
        }
        function Jt(t, e, r) {
            if (null !== t.variableList || t.hasVariableRefs)
                for (var i = r.length; i--; ) {
                    var n = r[i]
                      , a = e[n];
                    a && (e[n] = $t(t, a))
                }
        }
        function $t(t, e) {
            if (null !== t.variableList || t.hasVariableRefs) {
                var r = t.variableList;
                return e.replace(zt, (function(e) {
                    var i = e.substring(2, e.length - 1)
                      , n = null == r ? void 0 : r[i];
                    return void 0 === n ? (t.playlistParsingError || (t.playlistParsingError = new Error('Missing preceding EXT-X-DEFINE tag for Variable Reference: "' + i + '"')),
                    e) : n
                }
                ))
            }
            return e
        }
        function Zt(t, e, r) {
            var i, n, a = t.variableList;
            if (a || (t.variableList = a = {}),
            "QUERYPARAM"in e) {
                i = e.QUERYPARAM;
                try {
                    var s = new self.URL(r).searchParams;
                    if (!s.has(i))
                        throw new Error('"' + i + '" does not match any query parameter in URI: "' + r + '"');
                    n = s.get(i)
                } catch (e) {
                    t.playlistParsingError || (t.playlistParsingError = new Error("EXT-X-DEFINE QUERYPARAM: " + e.message))
                }
            } else
                i = e.NAME,
                n = e.VALUE;
            i in a ? t.playlistParsingError || (t.playlistParsingError = new Error('EXT-X-DEFINE duplicate Variable Name declarations: "' + i + '"')) : a[i] = n || ""
        }
        function te(t, e, r) {
            var i = e.IMPORT;
            if (r && i in r) {
                var n = t.variableList;
                n || (t.variableList = n = {}),
                n[i] = r[i]
            } else
                t.playlistParsingError || (t.playlistParsingError = new Error('EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "' + i + '"'))
        }
        function ee(t) {
            if (void 0 === t && (t = !0),
            "undefined" != typeof self)
                return (t || !self.MediaSource) && self.ManagedMediaSource || self.MediaSource || self.WebKitMediaSource
        }
        var re = {
            audio: {
                a3ds: 1,
                "ac-3": .95,
                "ac-4": 1,
                alac: .9,
                alaw: 1,
                dra1: 1,
                "dts+": 1,
                "dts-": 1,
                dtsc: 1,
                dtse: 1,
                dtsh: 1,
                "ec-3": .9,
                enca: 1,
                fLaC: .9,
                flac: .9,
                FLAC: .9,
                g719: 1,
                g726: 1,
                m4ae: 1,
                mha1: 1,
                mha2: 1,
                mhm1: 1,
                mhm2: 1,
                mlpa: 1,
                mp4a: 1,
                "raw ": 1,
                Opus: 1,
                opus: 1,
                samr: 1,
                sawb: 1,
                sawp: 1,
                sevc: 1,
                sqcp: 1,
                ssmv: 1,
                twos: 1,
                ulaw: 1
            },
            video: {
                avc1: 1,
                avc2: 1,
                avc3: 1,
                avc4: 1,
                avcp: 1,
                av01: .8,
                drac: 1,
                dva1: 1,
                dvav: 1,
                dvh1: .7,
                dvhe: .7,
                encv: 1,
                hev1: .75,
                hvc1: .75,
                mjp2: 1,
                mp4v: 1,
                mvc1: 1,
                mvc2: 1,
                mvc3: 1,
                mvc4: 1,
                resv: 1,
                rv60: 1,
                s263: 1,
                svc1: 1,
                svc2: 1,
                "vc-1": 1,
                vp08: 1,
                vp09: .9
            },
            text: {
                stpp: 1,
                wvtt: 1
            }
        };
        function ie(t, e, r) {
            return void 0 === r && (r = !0),
            !t.split(",").some((function(t) {
                return !ne(t, e, r)
            }
            ))
        }
        function ne(t, e, r) {
            var i;
            void 0 === r && (r = !0);
            var n = ee(r);
            return null != (i = null == n ? void 0 : n.isTypeSupported(ae(t, e))) && i
        }
        function ae(t, e) {
            return e + '/mp4;codecs="' + t + '"'
        }
        function se(t) {
            if (t) {
                var e = t.substring(0, 4);
                return re.video[e]
            }
            return 2
        }
        function oe(t) {
            return t.split(",").reduce((function(t, e) {
                var r = re.video[e];
                return r ? (2 * r + t) / (t ? 3 : 2) : (re.audio[e] + t) / (t ? 2 : 1)
            }
            ), 0)
        }
        var le = {}
          , ue = /flac|opus/i;
        function he(t, e) {
            return void 0 === e && (e = !0),
            t.replace(ue, (function(t) {
                return function(t, e) {
                    if (void 0 === e && (e = !0),
                    le[t])
                        return le[t];
                    for (var r = {
                        flac: ["flac", "fLaC", "FLAC"],
                        opus: ["opus", "Opus"]
                    }[t], i = 0; i < r.length; i++)
                        if (ne(r[i], "audio", e))
                            return le[t] = r[i],
                            r[i];
                    return t
                }(t.toLowerCase(), e)
            }
            ))
        }
        function de(t, e) {
            return t && "mp4a" !== t ? t : e
        }
        var ce = /#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g
          , fe = /#EXT-X-MEDIA:(.*)/g
          , ge = /^#EXT(?:INF|-X-TARGETDURATION):/m
          , ve = new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source, /(?!#) *(\S[\S ]*)/.source, /#EXT-X-BYTERANGE:*(.+)/.source, /#EXT-X-PROGRAM-DATE-TIME:(.+)/.source, /#.*/.source].join("|"),"g")
          , me = new RegExp([/#(EXTM3U)/.source, /#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source, /#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source, /#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source, /(#)([^:]*):(.*)/.source, /(#)(.*)(?:.*)\r?\n?/.source].join("|"))
          , pe = function() {
            function t() {}
            return t.findGroup = function(t, e) {
                for (var r = 0; r < t.length; r++) {
                    var i = t[r];
                    if (i.id === e)
                        return i
                }
            }
            ,
            t.resolve = function(t, e) {
                return p.buildAbsoluteURL(e, t, {
                    alwaysNormalize: !0
                })
            }
            ,
            t.isMediaPlaylist = function(t) {
                return ge.test(t)
            }
            ,
            t.parseMasterPlaylist = function(e, r) {
                var i, n = {
                    contentSteering: null,
                    levels: [],
                    playlistParsingError: null,
                    sessionData: null,
                    sessionKeys: null,
                    startTimeOffset: null,
                    variableList: null,
                    hasVariableRefs: Qt(e)
                }, a = [];
                for (ce.lastIndex = 0; null != (i = ce.exec(e)); )
                    if (i[1]) {
                        var s, o = new x(i[1]);
                        Jt(n, o, ["CODECS", "SUPPLEMENTAL-CODECS", "ALLOWED-CPC", "PATHWAY-ID", "STABLE-VARIANT-ID", "AUDIO", "VIDEO", "SUBTITLES", "CLOSED-CAPTIONS", "NAME"]);
                        var l = $t(n, i[2])
                          , u = {
                            attrs: o,
                            bitrate: o.decimalInteger("BANDWIDTH") || o.decimalInteger("AVERAGE-BANDWIDTH"),
                            name: o.NAME,
                            url: t.resolve(l, r)
                        }
                          , h = o.decimalResolution("RESOLUTION");
                        h && (u.width = h.width,
                        u.height = h.height),
                        Te(o.CODECS, u),
                        null != (s = u.unknownCodecs) && s.length || a.push(u),
                        n.levels.push(u)
                    } else if (i[3]) {
                        var d = i[3]
                          , c = i[4];
                        switch (d) {
                        case "SESSION-DATA":
                            var f = new x(c);
                            Jt(n, f, ["DATA-ID", "LANGUAGE", "VALUE", "URI"]);
                            var g = f["DATA-ID"];
                            g && (null === n.sessionData && (n.sessionData = {}),
                            n.sessionData[g] = f);
                            break;
                        case "SESSION-KEY":
                            var v = ye(c, r, n);
                            v.encrypted && v.isSupported() ? (null === n.sessionKeys && (n.sessionKeys = []),
                            n.sessionKeys.push(v)) : w.warn('[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "' + c + '"');
                            break;
                        case "DEFINE":
                            var m = new x(c);
                            Jt(n, m, ["NAME", "VALUE", "QUERYPARAM"]),
                            Zt(n, m, r);
                            break;
                        case "CONTENT-STEERING":
                            var p = new x(c);
                            Jt(n, p, ["SERVER-URI", "PATHWAY-ID"]),
                            n.contentSteering = {
                                uri: t.resolve(p["SERVER-URI"], r),
                                pathwayId: p["PATHWAY-ID"] || "."
                            };
                            break;
                        case "START":
                            n.startTimeOffset = Ee(c)
                        }
                    }
                var y = a.length > 0 && a.length < n.levels.length;
                return n.levels = y ? a : n.levels,
                0 === n.levels.length && (n.playlistParsingError = new Error("no levels found in manifest")),
                n
            }
            ,
            t.parseMasterPlaylistMedia = function(e, r, i) {
                var n, a = {}, s = i.levels, o = {
                    AUDIO: s.map((function(t) {
                        return {
                            id: t.attrs.AUDIO,
                            audioCodec: t.audioCodec
                        }
                    }
                    )),
                    SUBTITLES: s.map((function(t) {
                        return {
                            id: t.attrs.SUBTITLES,
                            textCodec: t.textCodec
                        }
                    }
                    )),
                    "CLOSED-CAPTIONS": []
                }, l = 0;
                for (fe.lastIndex = 0; null !== (n = fe.exec(e)); ) {
                    var u = new x(n[1])
                      , h = u.TYPE;
                    if (h) {
                        var d = o[h]
                          , c = a[h] || [];
                        a[h] = c,
                        Jt(i, u, ["URI", "GROUP-ID", "LANGUAGE", "ASSOC-LANGUAGE", "STABLE-RENDITION-ID", "NAME", "INSTREAM-ID", "CHARACTERISTICS", "CHANNELS"]);
                        var f = u.LANGUAGE
                          , g = u["ASSOC-LANGUAGE"]
                          , v = u.CHANNELS
                          , m = u.CHARACTERISTICS
                          , p = u["INSTREAM-ID"]
                          , y = {
                            attrs: u,
                            bitrate: 0,
                            id: l++,
                            groupId: u["GROUP-ID"] || "",
                            name: u.NAME || f || "",
                            type: h,
                            default: u.bool("DEFAULT"),
                            autoselect: u.bool("AUTOSELECT"),
                            forced: u.bool("FORCED"),
                            lang: f,
                            url: u.URI ? t.resolve(u.URI, r) : ""
                        };
                        if (g && (y.assocLang = g),
                        v && (y.channels = v),
                        m && (y.characteristics = m),
                        p && (y.instreamId = p),
                        null != d && d.length) {
                            var E = t.findGroup(d, y.groupId) || d[0];
                            Se(y, E, "audioCodec"),
                            Se(y, E, "textCodec")
                        }
                        c.push(y)
                    }
                }
                return a
            }
            ,
            t.parseLevelPlaylist = function(t, e, r, i, n, a) {
                var s, l, u, h = new H(e), d = h.fragments, c = null, f = 0, g = 0, v = 0, m = 0, p = null, E = new G(i,e), T = -1, S = !1, L = null;
                for (ve.lastIndex = 0,
                h.m3u8 = t,
                h.hasVariableRefs = Qt(t); null !== (s = ve.exec(t)); ) {
                    S && (S = !1,
                    (E = new G(i,e)).start = v,
                    E.sn = f,
                    E.cc = m,
                    E.level = r,
                    c && (E.initSegment = c,
                    E.rawProgramDateTime = c.rawProgramDateTime,
                    c.rawProgramDateTime = null,
                    L && (E.setByteRange(L),
                    L = null)));
                    var A = s[1];
                    if (A) {
                        E.duration = parseFloat(A);
                        var R = (" " + s[2]).slice(1);
                        E.title = R || null,
                        E.tagList.push(R ? ["INF", A, R] : ["INF", A])
                    } else if (s[3]) {
                        if (y(E.duration)) {
                            E.start = v,
                            u && Re(E, u, h),
                            E.sn = f,
                            E.level = r,
                            E.cc = m,
                            d.push(E);
                            var k = (" " + s[3]).slice(1);
                            E.relurl = $t(h, k),
                            Le(E, p),
                            p = E,
                            v += E.duration,
                            f++,
                            g = 0,
                            S = !0
                        }
                    } else if (s[4]) {
                        var b = (" " + s[4]).slice(1);
                        p ? E.setByteRange(b, p) : E.setByteRange(b)
                    } else if (s[5])
                        E.rawProgramDateTime = (" " + s[5]).slice(1),
                        E.tagList.push(["PROGRAM-DATE-TIME", E.rawProgramDateTime]),
                        -1 === T && (T = d.length);
                    else {
                        if (!(s = s[0].match(me))) {
                            w.warn("No matches on slow regex match for level playlist!");
                            continue
                        }
                        for (l = 1; l < s.length && void 0 === s[l]; l++)
                            ;
                        var D = (" " + s[l]).slice(1)
                          , I = (" " + s[l + 1]).slice(1)
                          , C = s[l + 2] ? (" " + s[l + 2]).slice(1) : "";
                        switch (D) {
                        case "PLAYLIST-TYPE":
                            h.type = I.toUpperCase();
                            break;
                        case "MEDIA-SEQUENCE":
                            f = h.startSN = parseInt(I);
                            break;
                        case "SKIP":
                            var _ = new x(I);
                            Jt(h, _, ["RECENTLY-REMOVED-DATERANGES"]);
                            var P = _.decimalInteger("SKIPPED-SEGMENTS");
                            if (y(P)) {
                                h.skippedSegments = P;
                                for (var M = P; M--; )
                                    d.unshift(null);
                                f += P
                            }
                            var O = _.enumeratedString("RECENTLY-REMOVED-DATERANGES");
                            O && (h.recentlyRemovedDateranges = O.split("\t"));
                            break;
                        case "TARGETDURATION":
                            h.targetduration = Math.max(parseInt(I), 1);
                            break;
                        case "VERSION":
                            h.version = parseInt(I);
                            break;
                        case "INDEPENDENT-SEGMENTS":
                        case "EXTM3U":
                            break;
                        case "ENDLIST":
                            h.live = !1;
                            break;
                        case "#":
                            (I || C) && E.tagList.push(C ? [I, C] : [I]);
                            break;
                        case "DISCONTINUITY":
                            m++,
                            E.tagList.push(["DIS"]);
                            break;
                        case "GAP":
                            E.gap = !0,
                            E.tagList.push([D]);
                            break;
                        case "BITRATE":
                            E.tagList.push([D, I]);
                            break;
                        case "DATERANGE":
                            var N = new x(I);
                            Jt(h, N, ["ID", "CLASS", "START-DATE", "END-DATE", "SCTE35-CMD", "SCTE35-OUT", "SCTE35-IN"]),
                            Jt(h, N, N.clientAttrs);
                            var U = new F(N,h.dateRanges[N.ID]);
                            U.isValid || h.skippedSegments ? h.dateRanges[U.id] = U : w.warn('Ignoring invalid DATERANGE tag: "' + I + '"'),
                            E.tagList.push(["EXT-X-DATERANGE", I]);
                            break;
                        case "DEFINE":
                            var B = new x(I);
                            Jt(h, B, ["NAME", "VALUE", "IMPORT", "QUERYPARAM"]),
                            "IMPORT"in B ? te(h, B, a) : Zt(h, B, e);
                            break;
                        case "DISCONTINUITY-SEQUENCE":
                            m = parseInt(I);
                            break;
                        case "KEY":
                            var V = ye(I, e, h);
                            if (V.isSupported()) {
                                if ("NONE" === V.method) {
                                    u = void 0;
                                    break
                                }
                                u || (u = {}),
                                u[V.keyFormat] && (u = o({}, u)),
                                u[V.keyFormat] = V
                            } else
                                w.warn('[Keys] Ignoring invalid EXT-X-KEY tag: "' + I + '"');
                            break;
                        case "START":
                            h.startTimeOffset = Ee(I);
                            break;
                        case "MAP":
                            var Y = new x(I);
                            if (Jt(h, Y, ["BYTERANGE", "URI"]),
                            E.duration) {
                                var W = new G(i,e);
                                Ae(W, Y, r, u),
                                c = W,
                                E.initSegment = c,
                                c.rawProgramDateTime && !E.rawProgramDateTime && (E.rawProgramDateTime = c.rawProgramDateTime)
                            } else {
                                var j = E.byteRangeEndOffset;
                                if (j) {
                                    var q = E.byteRangeStartOffset;
                                    L = j - q + "@" + q
                                } else
                                    L = null;
                                Ae(E, Y, r, u),
                                c = E,
                                S = !0
                            }
                            break;
                        case "SERVER-CONTROL":
                            var X = new x(I);
                            h.canBlockReload = X.bool("CAN-BLOCK-RELOAD"),
                            h.canSkipUntil = X.optionalFloat("CAN-SKIP-UNTIL", 0),
                            h.canSkipDateRanges = h.canSkipUntil > 0 && X.bool("CAN-SKIP-DATERANGES"),
                            h.partHoldBack = X.optionalFloat("PART-HOLD-BACK", 0),
                            h.holdBack = X.optionalFloat("HOLD-BACK", 0);
                            break;
                        case "PART-INF":
                            var z = new x(I);
                            h.partTarget = z.decimalFloatingPoint("PART-TARGET");
                            break;
                        case "PART":
                            var Q = h.partList;
                            Q || (Q = h.partList = []);
                            var J = g > 0 ? Q[Q.length - 1] : void 0
                              , $ = g++
                              , Z = new x(I);
                            Jt(h, Z, ["BYTERANGE", "URI"]);
                            var tt = new K(Z,E,e,$,J);
                            Q.push(tt),
                            E.duration += tt.duration;
                            break;
                        case "PRELOAD-HINT":
                            var et = new x(I);
                            Jt(h, et, ["URI"]),
                            h.preloadHint = et;
                            break;
                        case "RENDITION-REPORT":
                            var rt = new x(I);
                            Jt(h, rt, ["URI"]),
                            h.renditionReports = h.renditionReports || [],
                            h.renditionReports.push(rt);
                            break;
                        default:
                            w.warn("line parsed but not handled: " + s)
                        }
                    }
                }
                p && !p.relurl ? (d.pop(),
                v -= p.duration,
                h.partList && (h.fragmentHint = p)) : h.partList && (Le(E, p),
                E.cc = m,
                h.fragmentHint = E,
                u && Re(E, u, h));
                var it = d.length
                  , nt = d[0]
                  , at = d[it - 1];
                if ((v += h.skippedSegments * h.targetduration) > 0 && it && at) {
                    h.averagetargetduration = v / it;
                    var st = at.sn;
                    h.endSN = "initSegment" !== st ? st : 0,
                    h.live || (at.endList = !0),
                    nt && (h.startCC = nt.cc)
                } else
                    h.endSN = 0,
                    h.startCC = 0;
                return h.fragmentHint && (v += h.fragmentHint.duration),
                h.totalduration = v,
                h.endCC = m,
                T > 0 && function(t, e) {
                    for (var r = t[e], i = e; i--; ) {
                        var n = t[i];
                        if (!n)
                            return;
                        n.programDateTime = r.programDateTime - 1e3 * n.duration,
                        r = n
                    }
                }(d, T),
                h
            }
            ,
            t
        }();
        function ye(t, e, r) {
            var i, n, a = new x(t);
            Jt(r, a, ["KEYFORMAT", "KEYFORMATVERSIONS", "URI", "IV", "URI"]);
            var s = null != (i = a.METHOD) ? i : ""
              , o = a.URI
              , l = a.hexadecimalInteger("IV")
              , u = a.KEYFORMATVERSIONS
              , h = null != (n = a.KEYFORMAT) ? n : "identity";
            o && a.IV && !l && w.error("Invalid IV: " + a.IV);
            var d = o ? pe.resolve(o, e) : ""
              , c = (u || "1").split("/").map(Number).filter(Number.isFinite);
            return new Xt(s,d,h,c,l)
        }
        function Ee(t) {
            var e = new x(t).decimalFloatingPoint("TIME-OFFSET");
            return y(e) ? e : null
        }
        function Te(t, e) {
            var r = (t || "").split(/[ ,]+/).filter((function(t) {
                return t
            }
            ));
            ["video", "audio", "text"].forEach((function(t) {
                var i = r.filter((function(e) {
                    return function(t, e) {
                        var r = re[e];
                        return !!r && !!r[t.slice(0, 4)]
                    }(e, t)
                }
                ));
                i.length && (e[t + "Codec"] = i.join(","),
                r = r.filter((function(t) {
                    return -1 === i.indexOf(t)
                }
                )))
            }
            )),
            e.unknownCodecs = r
        }
        function Se(t, e, r) {
            var i = e[r];
            i && (t[r] = i)
        }
        function Le(t, e) {
            t.rawProgramDateTime ? t.programDateTime = Date.parse(t.rawProgramDateTime) : null != e && e.programDateTime && (t.programDateTime = e.endProgramDateTime),
            y(t.programDateTime) || (t.programDateTime = null,
            t.rawProgramDateTime = null)
        }
        function Ae(t, e, r, i) {
            t.relurl = e.URI,
            e.BYTERANGE && t.setByteRange(e.BYTERANGE),
            t.level = r,
            t.sn = "initSegment",
            i && (t.levelkeys = i),
            t.initSegment = null
        }
        function Re(t, e, r) {
            t.levelkeys = e;
            var i = r.encryptedFragments;
            i.length && i[i.length - 1].levelkeys === e || !Object.keys(e).some((function(t) {
                return e[t].isCommonEncryption
            }
            )) || i.push(t)
        }
        var ke = "manifest"
          , be = "level"
          , De = "audioTrack"
          , Ie = "subtitleTrack"
          , we = "main"
          , Ce = "audio"
          , _e = "subtitle";
        function xe(t) {
            switch (t.type) {
            case De:
                return Ce;
            case Ie:
                return _e;
            default:
                return we
            }
        }
        function Pe(t, e) {
            var r = t.url;
            return void 0 !== r && 0 !== r.indexOf("data:") || (r = e.url),
            r
        }
        var Fe = function() {
            function t(t) {
                this.hls = void 0,
                this.loaders = Object.create(null),
                this.variableList = null,
                this.hls = t,
                this.registerListeners()
            }
            var e = t.prototype;
            return e.startLoad = function(t) {}
            ,
            e.stopLoad = function() {
                this.destroyInternalLoaders()
            }
            ,
            e.registerListeners = function() {
                var t = this.hls;
                t.on(S.MANIFEST_LOADING, this.onManifestLoading, this),
                t.on(S.LEVEL_LOADING, this.onLevelLoading, this),
                t.on(S.AUDIO_TRACK_LOADING, this.onAudioTrackLoading, this),
                t.on(S.SUBTITLE_TRACK_LOADING, this.onSubtitleTrackLoading, this)
            }
            ,
            e.unregisterListeners = function() {
                var t = this.hls;
                t.off(S.MANIFEST_LOADING, this.onManifestLoading, this),
                t.off(S.LEVEL_LOADING, this.onLevelLoading, this),
                t.off(S.AUDIO_TRACK_LOADING, this.onAudioTrackLoading, this),
                t.off(S.SUBTITLE_TRACK_LOADING, this.onSubtitleTrackLoading, this)
            }
            ,
            e.createInternalLoader = function(t) {
                var e = this.hls.config
                  , r = e.pLoader
                  , i = e.loader
                  , n = new (r || i)(e);
                return this.loaders[t.type] = n,
                n
            }
            ,
            e.getInternalLoader = function(t) {
                return this.loaders[t.type]
            }
            ,
            e.resetInternalLoader = function(t) {
                this.loaders[t] && delete this.loaders[t]
            }
            ,
            e.destroyInternalLoaders = function() {
                for (var t in this.loaders) {
                    var e = this.loaders[t];
                    e && e.destroy(),
                    this.resetInternalLoader(t)
                }
            }
            ,
            e.destroy = function() {
                this.variableList = null,
                this.unregisterListeners(),
                this.destroyInternalLoaders()
            }
            ,
            e.onManifestLoading = function(t, e) {
                var r = e.url;
                this.variableList = null,
                this.load({
                    id: null,
                    level: 0,
                    responseType: "text",
                    type: ke,
                    url: r,
                    deliveryDirectives: null
                })
            }
            ,
            e.onLevelLoading = function(t, e) {
                var r = e.id
                  , i = e.level
                  , n = e.pathwayId
                  , a = e.url
                  , s = e.deliveryDirectives;
                this.load({
                    id: r,
                    level: i,
                    pathwayId: n,
                    responseType: "text",
                    type: be,
                    url: a,
                    deliveryDirectives: s
                })
            }
            ,
            e.onAudioTrackLoading = function(t, e) {
                var r = e.id
                  , i = e.groupId
                  , n = e.url
                  , a = e.deliveryDirectives;
                this.load({
                    id: r,
                    groupId: i,
                    level: null,
                    responseType: "text",
                    type: De,
                    url: n,
                    deliveryDirectives: a
                })
            }
            ,
            e.onSubtitleTrackLoading = function(t, e) {
                var r = e.id
                  , i = e.groupId
                  , n = e.url
                  , a = e.deliveryDirectives;
                this.load({
                    id: r,
                    groupId: i,
                    level: null,
                    responseType: "text",
                    type: Ie,
                    url: n,
                    deliveryDirectives: a
                })
            }
            ,
            e.load = function(t) {
                var e, r, i, n = this, a = this.hls.config, s = this.getInternalLoader(t);
                if (s) {
                    var l = s.context;
                    if (l && l.url === t.url && l.level === t.level)
                        return void w.trace("[playlist-loader]: playlist request ongoing");
                    w.log("[playlist-loader]: aborting previous loader for type: " + t.type),
                    s.abort()
                }
                if (r = t.type === ke ? a.manifestLoadPolicy.default : o({}, a.playlistLoadPolicy.default, {
                    timeoutRetry: null,
                    errorRetry: null
                }),
                s = this.createInternalLoader(t),
                y(null == (e = t.deliveryDirectives) ? void 0 : e.part) && (t.type === be && null !== t.level ? i = this.hls.levels[t.level].details : t.type === De && null !== t.id ? i = this.hls.audioTracks[t.id].details : t.type === Ie && null !== t.id && (i = this.hls.subtitleTracks[t.id].details),
                i)) {
                    var u = i.partTarget
                      , h = i.targetduration;
                    if (u && h) {
                        var d = 1e3 * Math.max(3 * u, .8 * h);
                        r = o({}, r, {
                            maxTimeToFirstByteMs: Math.min(d, r.maxTimeToFirstByteMs),
                            maxLoadTimeMs: Math.min(d, r.maxTimeToFirstByteMs)
                        })
                    }
                }
                var c = r.errorRetry || r.timeoutRetry || {}
                  , f = {
                    loadPolicy: r,
                    timeout: r.maxLoadTimeMs,
                    maxRetry: c.maxNumRetry || 0,
                    retryDelay: c.retryDelayMs || 0,
                    maxRetryDelay: c.maxRetryDelayMs || 0
                }
                  , g = {
                    onSuccess: function(t, e, r, i) {
                        var a = n.getInternalLoader(r);
                        n.resetInternalLoader(r.type);
                        var s = t.data;
                        0 === s.indexOf("#EXTM3U") ? (e.parsing.start = performance.now(),
                        pe.isMediaPlaylist(s) ? n.handleTrackOrLevelPlaylist(t, e, r, i || null, a) : n.handleMasterPlaylist(t, e, r, i)) : n.handleManifestParsingError(t, r, new Error("no EXTM3U delimiter"), i || null, e)
                    },
                    onError: function(t, e, r, i) {
                        n.handleNetworkError(e, r, !1, t, i)
                    },
                    onTimeout: function(t, e, r) {
                        n.handleNetworkError(e, r, !0, void 0, t)
                    }
                };
                s.load(t, f, g)
            }
            ,
            e.handleMasterPlaylist = function(t, e, r, i) {
                var n = this.hls
                  , a = t.data
                  , s = Pe(t, r)
                  , o = pe.parseMasterPlaylist(a, s);
                if (o.playlistParsingError)
                    this.handleManifestParsingError(t, r, o.playlistParsingError, i, e);
                else {
                    var l = o.contentSteering
                      , u = o.levels
                      , h = o.sessionData
                      , d = o.sessionKeys
                      , c = o.startTimeOffset
                      , f = o.variableList;
                    this.variableList = f;
                    var g = pe.parseMasterPlaylistMedia(a, s, o)
                      , v = g.AUDIO
                      , m = void 0 === v ? [] : v
                      , p = g.SUBTITLES
                      , y = g["CLOSED-CAPTIONS"];
                    m.length && (m.some((function(t) {
                        return !t.url
                    }
                    )) || !u[0].audioCodec || u[0].attrs.AUDIO || (w.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),
                    m.unshift({
                        type: "main",
                        name: "main",
                        groupId: "main",
                        default: !1,
                        autoselect: !1,
                        forced: !1,
                        id: -1,
                        attrs: new x({}),
                        bitrate: 0,
                        url: ""
                    }))),
                    n.trigger(S.MANIFEST_LOADED, {
                        levels: u,
                        audioTracks: m,
                        subtitles: p,
                        captions: y,
                        contentSteering: l,
                        url: s,
                        stats: e,
                        networkDetails: i,
                        sessionData: h,
                        sessionKeys: d,
                        startTimeOffset: c,
                        variableList: f
                    })
                }
            }
            ,
            e.handleTrackOrLevelPlaylist = function(t, e, r, i, n) {
                var a = this.hls
                  , s = r.id
                  , o = r.level
                  , l = r.type
                  , u = Pe(t, r)
                  , h = y(o) ? o : y(s) ? s : 0
                  , d = xe(r)
                  , c = pe.parseLevelPlaylist(t.data, u, h, d, 0, this.variableList);
                if (l === ke) {
                    var f = {
                        attrs: new x({}),
                        bitrate: 0,
                        details: c,
                        name: "",
                        url: u
                    };
                    a.trigger(S.MANIFEST_LOADED, {
                        levels: [f],
                        audioTracks: [],
                        url: u,
                        stats: e,
                        networkDetails: i,
                        sessionData: null,
                        sessionKeys: null,
                        contentSteering: null,
                        startTimeOffset: null,
                        variableList: null
                    })
                }
                e.parsing.end = performance.now(),
                r.levelDetails = c,
                this.handlePlaylistLoaded(c, t, e, r, i, n)
            }
            ,
            e.handleManifestParsingError = function(t, e, r, i, n) {
                this.hls.trigger(S.ERROR, {
                    type: L.NETWORK_ERROR,
                    details: A.MANIFEST_PARSING_ERROR,
                    fatal: e.type === ke,
                    url: t.url,
                    err: r,
                    error: r,
                    reason: r.message,
                    response: t,
                    context: e,
                    networkDetails: i,
                    stats: n
                })
            }
            ,
            e.handleNetworkError = function(t, e, r, n, a) {
                void 0 === r && (r = !1);
                var s = "A network " + (r ? "timeout" : "error" + (n ? " (status " + n.code + ")" : "")) + " occurred while loading " + t.type;
                t.type === be ? s += ": " + t.level + " id: " + t.id : t.type !== De && t.type !== Ie || (s += " id: " + t.id + ' group-id: "' + t.groupId + '"');
                var o = new Error(s);
                w.warn("[playlist-loader]: " + s);
                var l = A.UNKNOWN
                  , u = !1
                  , h = this.getInternalLoader(t);
                switch (t.type) {
                case ke:
                    l = r ? A.MANIFEST_LOAD_TIMEOUT : A.MANIFEST_LOAD_ERROR,
                    u = !0;
                    break;
                case be:
                    l = r ? A.LEVEL_LOAD_TIMEOUT : A.LEVEL_LOAD_ERROR,
                    u = !1;
                    break;
                case De:
                    l = r ? A.AUDIO_TRACK_LOAD_TIMEOUT : A.AUDIO_TRACK_LOAD_ERROR,
                    u = !1;
                    break;
                case Ie:
                    l = r ? A.SUBTITLE_TRACK_LOAD_TIMEOUT : A.SUBTITLE_LOAD_ERROR,
                    u = !1
                }
                h && this.resetInternalLoader(t.type);
                var d = {
                    type: L.NETWORK_ERROR,
                    details: l,
                    fatal: u,
                    url: t.url,
                    loader: h,
                    context: t,
                    error: o,
                    networkDetails: e,
                    stats: a
                };
                if (n) {
                    var c = (null == e ? void 0 : e.url) || t.url;
                    d.response = i({
                        url: c,
                        data: void 0
                    }, n)
                }
                this.hls.trigger(S.ERROR, d)
            }
            ,
            e.handlePlaylistLoaded = function(t, e, r, i, n, a) {
                var s = this.hls
                  , o = i.type
                  , l = i.level
                  , u = i.id
                  , h = i.groupId
                  , d = i.deliveryDirectives
                  , c = Pe(e, i)
                  , f = xe(i)
                  , g = "number" == typeof i.level && f === we ? l : void 0;
                if (t.fragments.length) {
                    t.targetduration || (t.playlistParsingError = new Error("Missing Target Duration"));
                    var v = t.playlistParsingError;
                    if (v)
                        s.trigger(S.ERROR, {
                            type: L.NETWORK_ERROR,
                            details: A.LEVEL_PARSING_ERROR,
                            fatal: !1,
                            url: c,
                            error: v,
                            reason: v.message,
                            response: e,
                            context: i,
                            level: g,
                            parent: f,
                            networkDetails: n,
                            stats: r
                        });
                    else
                        switch (t.live && a && (a.getCacheAge && (t.ageHeader = a.getCacheAge() || 0),
                        a.getCacheAge && !isNaN(t.ageHeader) || (t.ageHeader = 0)),
                        o) {
                        case ke:
                        case be:
                            s.trigger(S.LEVEL_LOADED, {
                                details: t,
                                level: g || 0,
                                id: u || 0,
                                stats: r,
                                networkDetails: n,
                                deliveryDirectives: d
                            });
                            break;
                        case De:
                            s.trigger(S.AUDIO_TRACK_LOADED, {
                                details: t,
                                id: u || 0,
                                groupId: h || "",
                                stats: r,
                                networkDetails: n,
                                deliveryDirectives: d
                            });
                            break;
                        case Ie:
                            s.trigger(S.SUBTITLE_TRACK_LOADED, {
                                details: t,
                                id: u || 0,
                                groupId: h || "",
                                stats: r,
                                networkDetails: n,
                                deliveryDirectives: d
                            })
                        }
                } else {
                    var m = new Error("No Segments found in Playlist");
                    s.trigger(S.ERROR, {
                        type: L.NETWORK_ERROR,
                        details: A.LEVEL_EMPTY_ERROR,
                        fatal: !1,
                        url: c,
                        error: m,
                        reason: m.message,
                        response: e,
                        context: i,
                        level: g,
                        parent: f,
                        networkDetails: n,
                        stats: r
                    })
                }
            }
            ,
            t
        }();
        function Me(t, e) {
            var r;
            try {
                r = new Event("addtrack")
            } catch (t) {
                (r = document.createEvent("Event")).initEvent("addtrack", !1, !1)
            }
            r.track = t,
            e.dispatchEvent(r)
        }
        function Oe(t, e) {
            var r = t.mode;
            if ("disabled" === r && (t.mode = "hidden"),
            t.cues && !t.cues.getCueById(e.id))
                try {
                    if (t.addCue(e),
                    !t.cues.getCueById(e.id))
                        throw new Error("addCue is failed for: " + e)
                } catch (r) {
                    w.debug("[texttrack-utils]: " + r);
                    try {
                        var i = new self.TextTrackCue(e.startTime,e.endTime,e.text);
                        i.id = e.id,
                        t.addCue(i)
                    } catch (t) {
                        w.debug("[texttrack-utils]: Legacy TextTrackCue fallback failed: " + t)
                    }
                }
            "disabled" === r && (t.mode = r)
        }
        function Ne(t) {
            var e = t.mode;
            if ("disabled" === e && (t.mode = "hidden"),
            t.cues)
                for (var r = t.cues.length; r--; )
                    t.removeCue(t.cues[r]);
            "disabled" === e && (t.mode = e)
        }
        function Ue(t, e, r, i) {
            var n = t.mode;
            if ("disabled" === n && (t.mode = "hidden"),
            t.cues && t.cues.length > 0)
                for (var a = function(t, e, r) {
                    var i = []
                      , n = function(t, e) {
                        if (e < t[0].startTime)
                            return 0;
                        var r = t.length - 1;
                        if (e > t[r].endTime)
                            return -1;
                        for (var i = 0, n = r; i <= n; ) {
                            var a = Math.floor((n + i) / 2);
                            if (e < t[a].startTime)
                                n = a - 1;
                            else {
                                if (!(e > t[a].startTime && i < r))
                                    return a;
                                i = a + 1
                            }
                        }
                        return t[i].startTime - e < e - t[n].startTime ? i : n
                    }(t, e);
                    if (n > -1)
                        for (var a = n, s = t.length; a < s; a++) {
                            var o = t[a];
                            if (o.startTime >= e && o.endTime <= r)
                                i.push(o);
                            else if (o.startTime > r)
                                return i
                        }
                    return i
                }(t.cues, e, r), s = 0; s < a.length; s++)
                    i && !i(a[s]) || t.removeCue(a[s]);
            "disabled" === n && (t.mode = n)
        }
        function Be(t) {
            for (var e = [], r = 0; r < t.length; r++) {
                var i = t[r];
                "subtitles" !== i.kind && "captions" !== i.kind || !i.label || e.push(t[r])
            }
            return e
        }
        var Ge = "org.id3"
          , Ke = "com.apple.quicktime.HLS"
          , He = "https://aomedia.org/emsg/ID3";
        function Ve() {
            if ("undefined" != typeof self)
                return self.VTTCue || self.TextTrackCue
        }
        function Ye(t, e, r, n, a) {
            var s = new t(e,r,"");
            try {
                s.value = n,
                a && (s.type = a)
            } catch (o) {
                s = new t(e,r,JSON.stringify(a ? i({
                    type: a
                }, n) : n))
            }
            return s
        }
        var We = function() {
            var t = Ve();
            try {
                t && new t(0,Number.POSITIVE_INFINITY,"")
            } catch (t) {
                return Number.MAX_VALUE
            }
            return Number.POSITIVE_INFINITY
        }();
        function je(t, e) {
            return t.getTime() / 1e3 - e
        }
        var qe = function() {
            function t(t) {
                this.hls = void 0,
                this.id3Track = null,
                this.media = null,
                this.dateRangeCuesAppended = {},
                this.hls = t,
                this._registerListeners()
            }
            var e = t.prototype;
            return e.destroy = function() {
                this._unregisterListeners(),
                this.id3Track = null,
                this.media = null,
                this.dateRangeCuesAppended = {},
                this.hls = null
            }
            ,
            e._registerListeners = function() {
                var t = this.hls;
                t.on(S.MEDIA_ATTACHED, this.onMediaAttached, this),
                t.on(S.MEDIA_DETACHING, this.onMediaDetaching, this),
                t.on(S.MANIFEST_LOADING, this.onManifestLoading, this),
                t.on(S.FRAG_PARSING_METADATA, this.onFragParsingMetadata, this),
                t.on(S.BUFFER_FLUSHING, this.onBufferFlushing, this),
                t.on(S.LEVEL_UPDATED, this.onLevelUpdated, this)
            }
            ,
            e._unregisterListeners = function() {
                var t = this.hls;
                t.off(S.MEDIA_ATTACHED, this.onMediaAttached, this),
                t.off(S.MEDIA_DETACHING, this.onMediaDetaching, this),
                t.off(S.MANIFEST_LOADING, this.onManifestLoading, this),
                t.off(S.FRAG_PARSING_METADATA, this.onFragParsingMetadata, this),
                t.off(S.BUFFER_FLUSHING, this.onBufferFlushing, this),
                t.off(S.LEVEL_UPDATED, this.onLevelUpdated, this)
            }
            ,
            e.onMediaAttached = function(t, e) {
                this.media = e.media
            }
            ,
            e.onMediaDetaching = function() {
                this.id3Track && (Ne(this.id3Track),
                this.id3Track = null,
                this.media = null,
                this.dateRangeCuesAppended = {})
            }
            ,
            e.onManifestLoading = function() {
                this.dateRangeCuesAppended = {}
            }
            ,
            e.createTrack = function(t) {
                var e = this.getID3Track(t.textTracks);
                return e.mode = "hidden",
                e
            }
            ,
            e.getID3Track = function(t) {
                if (this.media) {
                    for (var e = 0; e < t.length; e++) {
                        var r = t[e];
                        if ("metadata" === r.kind && "id3" === r.label)
                            return Me(r, this.media),
                            r
                    }
                    return this.media.addTextTrack("metadata", "id3")
                }
            }
            ,
            e.onFragParsingMetadata = function(t, e) {
                if (this.media) {
                    var r = this.hls.config
                      , i = r.enableEmsgMetadataCues
                      , n = r.enableID3MetadataCues;
                    if (i || n) {
                        var a = e.samples;
                        this.id3Track || (this.id3Track = this.createTrack(this.media));
                        var s = Ve();
                        if (s)
                            for (var o = 0; o < a.length; o++) {
                                var l = a[o].type;
                                if ((l !== He || i) && n) {
                                    var u = gt(a[o].data);
                                    if (u) {
                                        var h = a[o].pts
                                          , d = h + a[o].duration;
                                        d > We && (d = We),
                                        d - h <= 0 && (d = h + .25);
                                        for (var c = 0; c < u.length; c++) {
                                            var f = u[c];
                                            if (!ct(f)) {
                                                this.updateId3CueEnds(h, l);
                                                var g = Ye(s, h, d, f, l);
                                                g && this.id3Track.addCue(g)
                                            }
                                        }
                                    }
                                }
                            }
                    }
                }
            }
            ,
            e.updateId3CueEnds = function(t, e) {
                var r, i = null == (r = this.id3Track) ? void 0 : r.cues;
                if (i)
                    for (var n = i.length; n--; ) {
                        var a = i[n];
                        a.type === e && a.startTime < t && a.endTime === We && (a.endTime = t)
                    }
            }
            ,
            e.onBufferFlushing = function(t, e) {
                var r = e.startOffset
                  , i = e.endOffset
                  , n = e.type
                  , a = this.id3Track
                  , s = this.hls;
                if (s) {
                    var o = s.config
                      , l = o.enableEmsgMetadataCues
                      , u = o.enableID3MetadataCues;
                    a && (l || u) && Ue(a, r, i, "audio" === n ? function(t) {
                        return t.type === Ge && u
                    }
                    : "video" === n ? function(t) {
                        return t.type === He && l
                    }
                    : function(t) {
                        return t.type === Ge && u || t.type === He && l
                    }
                    )
                }
            }
            ,
            e.onLevelUpdated = function(t, e) {
                var r = this
                  , i = e.details;
                if (this.media && i.hasProgramDateTime && this.hls.config.enableDateRangeMetadataCues) {
                    var n = this.dateRangeCuesAppended
                      , a = this.id3Track
                      , s = i.dateRanges
                      , o = Object.keys(s);
                    if (a)
                        for (var l = Object.keys(n).filter((function(t) {
                            return !o.includes(t)
                        }
                        )), u = function() {
                            var t = l[h];
                            Object.keys(n[t].cues).forEach((function(e) {
                                a.removeCue(n[t].cues[e])
                            }
                            )),
                            delete n[t]
                        }, h = l.length; h--; )
                            u();
                    var d = i.fragments[i.fragments.length - 1];
                    if (0 !== o.length && y(null == d ? void 0 : d.programDateTime)) {
                        this.id3Track || (this.id3Track = this.createTrack(this.media));
                        for (var c = d.programDateTime / 1e3 - d.start, f = Ve(), g = function() {
                            var t = o[v]
                              , e = s[t]
                              , i = je(e.startDate, c)
                              , a = n[t]
                              , l = (null == a ? void 0 : a.cues) || {}
                              , u = (null == a ? void 0 : a.durationKnown) || !1
                              , h = We
                              , d = e.endDate;
                            if (d)
                                h = je(d, c),
                                u = !0;
                            else if (e.endOnNext && !u) {
                                var g = o.reduce((function(t, r) {
                                    if (r !== e.id) {
                                        var i = s[r];
                                        if (i.class === e.class && i.startDate > e.startDate && (!t || e.startDate < t.startDate))
                                            return i
                                    }
                                    return t
                                }
                                ), null);
                                g && (h = je(g.startDate, c),
                                u = !0)
                            }
                            for (var m, p, y = Object.keys(e.attr), E = 0; E < y.length; E++) {
                                var T = y[E];
                                if ("ID" !== (p = T) && "CLASS" !== p && "START-DATE" !== p && "DURATION" !== p && "END-DATE" !== p && "END-ON-NEXT" !== p) {
                                    var S = l[T];
                                    if (S)
                                        u && !a.durationKnown && (S.endTime = h);
                                    else if (f) {
                                        var L = e.attr[T];
                                        P(T) && (m = L,
                                        L = Uint8Array.from(m.replace(/^0x/, "").replace(/([\da-fA-F]{2}) ?/g, "0x$1 ").replace(/ +$/, "").split(" ")).buffer);
                                        var A = Ye(f, i, h, {
                                            key: T,
                                            data: L
                                        }, Ke);
                                        A && (A.id = t,
                                        r.id3Track.addCue(A),
                                        l[T] = A)
                                    }
                                }
                            }
                            n[t] = {
                                cues: l,
                                dateRange: e,
                                durationKnown: u
                            }
                        }, v = 0; v < o.length; v++)
                            g()
                    }
                }
            }
            ,
            t
        }()
          , Xe = function() {
            function t(t) {
                var e = this;
                this.hls = void 0,
                this.config = void 0,
                this.media = null,
                this.levelDetails = null,
                this.currentTime = 0,
                this.stallCount = 0,
                this._latency = null,
                this.timeupdateHandler = function() {
                    return e.timeupdate()
                }
                ,
                this.hls = t,
                this.config = t.config,
                this.registerListeners()
            }
            var e = t.prototype;
            return e.destroy = function() {
                this.unregisterListeners(),
                this.onMediaDetaching(),
                this.levelDetails = null,
                this.hls = this.timeupdateHandler = null
            }
            ,
            e.registerListeners = function() {
                this.hls.on(S.MEDIA_ATTACHED, this.onMediaAttached, this),
                this.hls.on(S.MEDIA_DETACHING, this.onMediaDetaching, this),
                this.hls.on(S.MANIFEST_LOADING, this.onManifestLoading, this),
                this.hls.on(S.LEVEL_UPDATED, this.onLevelUpdated, this),
                this.hls.on(S.ERROR, this.onError, this)
            }
            ,
            e.unregisterListeners = function() {
                this.hls.off(S.MEDIA_ATTACHED, this.onMediaAttached, this),
                this.hls.off(S.MEDIA_DETACHING, this.onMediaDetaching, this),
                this.hls.off(S.MANIFEST_LOADING, this.onManifestLoading, this),
                this.hls.off(S.LEVEL_UPDATED, this.onLevelUpdated, this),
                this.hls.off(S.ERROR, this.onError, this)
            }
            ,
            e.onMediaAttached = function(t, e) {
                this.media = e.media,
                this.media.addEventListener("timeupdate", this.timeupdateHandler)
            }
            ,
            e.onMediaDetaching = function() {
                this.media && (this.media.removeEventListener("timeupdate", this.timeupdateHandler),
                this.media = null)
            }
            ,
            e.onManifestLoading = function() {
                this.levelDetails = null,
                this._latency = null,
                this.stallCount = 0
            }
            ,
            e.onLevelUpdated = function(t, e) {
                var r = e.details;
                this.levelDetails = r,
                r.advanced && this.timeupdate(),
                !r.live && this.media && this.media.removeEventListener("timeupdate", this.timeupdateHandler)
            }
            ,
            e.onError = function(t, e) {
                var r;
                e.details === A.BUFFER_STALLED_ERROR && (this.stallCount++,
                null != (r = this.levelDetails) && r.live && w.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))
            }
            ,
            e.timeupdate = function() {
                var t = this.media
                  , e = this.levelDetails;
                if (t && e) {
                    this.currentTime = t.currentTime;
                    var r = this.computeLatency();
                    if (null !== r) {
                        this._latency = r;
                        var i = this.config
                          , n = i.lowLatencyMode
                          , a = i.maxLiveSyncPlaybackRate;
                        if (n && 1 !== a && e.live) {
                            var s = this.targetLatency;
                            if (null !== s) {
                                var o = r - s;
                                if (o < Math.min(this.maxLatency, s + e.targetduration) && o > .05 && this.forwardBufferLength > 1) {
                                    var l = Math.min(2, Math.max(1, a))
                                      , u = Math.round(2 / (1 + Math.exp(-.75 * o - this.edgeStalled)) * 20) / 20;
                                    t.playbackRate = Math.min(l, Math.max(1, u))
                                } else
                                    1 !== t.playbackRate && 0 !== t.playbackRate && (t.playbackRate = 1)
                            }
                        }
                    }
                }
            }
            ,
            e.estimateLiveEdge = function() {
                var t = this.levelDetails;
                return null === t ? null : t.edge + t.age
            }
            ,
            e.computeLatency = function() {
                var t = this.estimateLiveEdge();
                return null === t ? null : t - this.currentTime
            }
            ,
            s(t, [{
                key: "latency",
                get: function() {
                    return this._latency || 0
                }
            }, {
                key: "maxLatency",
                get: function() {
                    var t = this.config
                      , e = this.levelDetails;
                    return void 0 !== t.liveMaxLatencyDuration ? t.liveMaxLatencyDuration : e ? t.liveMaxLatencyDurationCount * e.targetduration : 0
                }
            }, {
                key: "targetLatency",
                get: function() {
                    var t = this.levelDetails;
                    if (null === t)
                        return null;
                    var e = t.holdBack
                      , r = t.partHoldBack
                      , i = t.targetduration
                      , n = this.config
                      , a = n.liveSyncDuration
                      , s = n.liveSyncDurationCount
                      , o = n.lowLatencyMode
                      , l = this.hls.userConfig
                      , u = o && r || e;
                    (l.liveSyncDuration || l.liveSyncDurationCount || 0 === u) && (u = void 0 !== a ? a : s * i);
                    var h = i;
                    return u + Math.min(1 * this.stallCount, h)
                }
            }, {
                key: "liveSyncPosition",
                get: function() {
                    var t = this.estimateLiveEdge()
                      , e = this.targetLatency
                      , r = this.levelDetails;
                    if (null === t || null === e || null === r)
                        return null;
                    var i = r.edge
                      , n = t - e - this.edgeStalled
                      , a = i - r.totalduration
                      , s = i - (this.config.lowLatencyMode && r.partTarget || r.targetduration);
                    return Math.min(Math.max(a, n), s)
                }
            }, {
                key: "drift",
                get: function() {
                    var t = this.levelDetails;
                    return null === t ? 1 : t.drift
                }
            }, {
                key: "edgeStalled",
                get: function() {
                    var t = this.levelDetails;
                    if (null === t)
                        return 0;
                    var e = 3 * (this.config.lowLatencyMode && t.partTarget || t.targetduration);
                    return Math.max(t.age - e, 0)
                }
            }, {
                key: "forwardBufferLength",
                get: function() {
                    var t = this.media
                      , e = this.levelDetails;
                    if (!t || !e)
                        return 0;
                    var r = t.buffered.length;
                    return (r ? t.buffered.end(r - 1) : e.edge) - this.currentTime
                }
            }]),
            t
        }()
          , ze = ["NONE", "TYPE-0", "TYPE-1", null]
          , Qe = ["SDR", "PQ", "HLG"]
          , Je = ""
          , $e = "YES"
          , Ze = "v2"
          , tr = function() {
            function t(t, e, r) {
                this.msn = void 0,
                this.part = void 0,
                this.skip = void 0,
                this.msn = t,
                this.part = e,
                this.skip = r
            }
            return t.prototype.addDirectives = function(t) {
                var e = new self.URL(t);
                return void 0 !== this.msn && e.searchParams.set("_HLS_msn", this.msn.toString()),
                void 0 !== this.part && e.searchParams.set("_HLS_part", this.part.toString()),
                this.skip && e.searchParams.set("_HLS_skip", this.skip),
                e.href
            }
            ,
            t
        }()
          , er = function() {
            function t(t) {
                this._attrs = void 0,
                this.audioCodec = void 0,
                this.bitrate = void 0,
                this.codecSet = void 0,
                this.url = void 0,
                this.frameRate = void 0,
                this.height = void 0,
                this.id = void 0,
                this.name = void 0,
                this.videoCodec = void 0,
                this.width = void 0,
                this.details = void 0,
                this.fragmentError = 0,
                this.loadError = 0,
                this.loaded = void 0,
                this.realBitrate = 0,
                this.supportedPromise = void 0,
                this.supportedResult = void 0,
                this._avgBitrate = 0,
                this._audioGroups = void 0,
                this._subtitleGroups = void 0,
                this._urlId = 0,
                this.url = [t.url],
                this._attrs = [t.attrs],
                this.bitrate = t.bitrate,
                t.details && (this.details = t.details),
                this.id = t.id || 0,
                this.name = t.name,
                this.width = t.width || 0,
                this.height = t.height || 0,
                this.frameRate = t.attrs.optionalFloat("FRAME-RATE", 0),
                this._avgBitrate = t.attrs.decimalInteger("AVERAGE-BANDWIDTH"),
                this.audioCodec = t.audioCodec,
                this.videoCodec = t.videoCodec,
                this.codecSet = [t.videoCodec, t.audioCodec].filter((function(t) {
                    return !!t
                }
                )).map((function(t) {
                    return t.substring(0, 4)
                }
                )).join(","),
                this.addGroupId("audio", t.attrs.AUDIO),
                this.addGroupId("text", t.attrs.SUBTITLES)
            }
            var e = t.prototype;
            return e.hasAudioGroup = function(t) {
                return rr(this._audioGroups, t)
            }
            ,
            e.hasSubtitleGroup = function(t) {
                return rr(this._subtitleGroups, t)
            }
            ,
            e.addGroupId = function(t, e) {
                if (e)
                    if ("audio" === t) {
                        var r = this._audioGroups;
                        r || (r = this._audioGroups = []),
                        -1 === r.indexOf(e) && r.push(e)
                    } else if ("text" === t) {
                        var i = this._subtitleGroups;
                        i || (i = this._subtitleGroups = []),
                        -1 === i.indexOf(e) && i.push(e)
                    }
            }
            ,
            e.addFallback = function() {}
            ,
            s(t, [{
                key: "maxBitrate",
                get: function() {
                    return Math.max(this.realBitrate, this.bitrate)
                }
            }, {
                key: "averageBitrate",
                get: function() {
                    return this._avgBitrate || this.realBitrate || this.bitrate
                }
            }, {
                key: "attrs",
                get: function() {
                    return this._attrs[0]
                }
            }, {
                key: "codecs",
                get: function() {
                    return this.attrs.CODECS || ""
                }
            }, {
                key: "pathwayId",
                get: function() {
                    return this.attrs["PATHWAY-ID"] || "."
                }
            }, {
                key: "videoRange",
                get: function() {
                    return this.attrs["VIDEO-RANGE"] || "SDR"
                }
            }, {
                key: "score",
                get: function() {
                    return this.attrs.optionalFloat("SCORE", 0)
                }
            }, {
                key: "uri",
                get: function() {
                    return this.url[0] || ""
                }
            }, {
                key: "audioGroups",
                get: function() {
                    return this._audioGroups
                }
            }, {
                key: "subtitleGroups",
                get: function() {
                    return this._subtitleGroups
                }
            }, {
                key: "urlId",
                get: function() {
                    return 0
                },
                set: function(t) {}
            }, {
                key: "audioGroupIds",
                get: function() {
                    return this.audioGroups ? [this.audioGroupId] : void 0
                }
            }, {
                key: "textGroupIds",
                get: function() {
                    return this.subtitleGroups ? [this.textGroupId] : void 0
                }
            }, {
                key: "audioGroupId",
                get: function() {
                    var t;
                    return null == (t = this.audioGroups) ? void 0 : t[0]
                }
            }, {
                key: "textGroupId",
                get: function() {
                    var t;
                    return null == (t = this.subtitleGroups) ? void 0 : t[0]
                }
            }]),
            t
        }();
        function rr(t, e) {
            return !(!e || !t) && -1 !== t.indexOf(e)
        }
        function ir(t, e) {
            var r = e.startPTS;
            if (y(r)) {
                var i, n = 0;
                e.sn > t.sn ? (n = r - t.start,
                i = t) : (n = t.start - r,
                i = e),
                i.duration !== n && (i.duration = n)
            } else
                e.sn > t.sn ? t.cc === e.cc && t.minEndPTS ? e.start = t.start + (t.minEndPTS - t.start) : e.start = t.start + t.duration : e.start = Math.max(t.start - e.duration, 0)
        }
        function nr(t, e, r, i, n, a) {
            i - r <= 0 && (w.warn("Fragment should have a positive duration", e),
            i = r + e.duration,
            a = n + e.duration);
            var s = r
              , o = i
              , l = e.startPTS
              , u = e.endPTS;
            if (y(l)) {
                var h = Math.abs(l - r);
                y(e.deltaPTS) ? e.deltaPTS = Math.max(h, e.deltaPTS) : e.deltaPTS = h,
                s = Math.max(r, l),
                r = Math.min(r, l),
                n = Math.min(n, e.startDTS),
                o = Math.min(i, u),
                i = Math.max(i, u),
                a = Math.max(a, e.endDTS)
            }
            var d = r - e.start;
            0 !== e.start && (e.start = r),
            e.duration = i - e.start,
            e.startPTS = r,
            e.maxStartPTS = s,
            e.startDTS = n,
            e.endPTS = i,
            e.minEndPTS = o,
            e.endDTS = a;
            var c, f = e.sn;
            if (!t || f < t.startSN || f > t.endSN)
                return 0;
            var g = f - t.startSN
              , v = t.fragments;
            for (v[g] = e,
            c = g; c > 0; c--)
                ir(v[c], v[c - 1]);
            for (c = g; c < v.length - 1; c++)
                ir(v[c], v[c + 1]);
            return t.fragmentHint && ir(v[v.length - 1], t.fragmentHint),
            t.PTSKnown = t.alignedSliding = !0,
            d
        }
        function ar(t, e) {
            for (var r = null, i = t.fragments, n = i.length - 1; n >= 0; n--) {
                var a = i[n].initSegment;
                if (a) {
                    r = a;
                    break
                }
            }
            t.fragmentHint && delete t.fragmentHint.endPTS;
            var s, l, u, h, d, c = 0;
            if (function(t, e, r) {
                for (var i = e.skippedSegments, n = Math.max(t.startSN, e.startSN) - e.startSN, a = (t.fragmentHint ? 1 : 0) + (i ? e.endSN : Math.min(t.endSN, e.endSN)) - e.startSN, s = e.startSN - t.startSN, o = e.fragmentHint ? e.fragments.concat(e.fragmentHint) : e.fragments, l = t.fragmentHint ? t.fragments.concat(t.fragmentHint) : t.fragments, u = n; u <= a; u++) {
                    var h = l[s + u]
                      , d = o[u];
                    i && !d && u < i && (d = e.fragments[u] = h),
                    h && d && r(h, d)
                }
            }(t, e, (function(t, i) {
                t.relurl && (c = t.cc - i.cc),
                y(t.startPTS) && y(t.endPTS) && (i.start = i.startPTS = t.startPTS,
                i.startDTS = t.startDTS,
                i.maxStartPTS = t.maxStartPTS,
                i.endPTS = t.endPTS,
                i.endDTS = t.endDTS,
                i.minEndPTS = t.minEndPTS,
                i.duration = t.endPTS - t.startPTS,
                i.duration && (s = i),
                e.PTSKnown = e.alignedSliding = !0),
                i.elementaryStreams = t.elementaryStreams,
                i.loader = t.loader,
                i.stats = t.stats,
                t.initSegment && (i.initSegment = t.initSegment,
                r = t.initSegment)
            }
            )),
            r && (e.fragmentHint ? e.fragments.concat(e.fragmentHint) : e.fragments).forEach((function(t) {
                var e;
                !t || t.initSegment && t.initSegment.relurl !== (null == (e = r) ? void 0 : e.relurl) || (t.initSegment = r)
            }
            )),
            e.skippedSegments)
                if (e.deltaUpdateFailed = e.fragments.some((function(t) {
                    return !t
                }
                )),
                e.deltaUpdateFailed) {
                    w.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");
                    for (var f = e.skippedSegments; f--; )
                        e.fragments.shift();
                    e.startSN = e.fragments[0].sn,
                    e.startCC = e.fragments[0].cc
                } else
                    e.canSkipDateRanges && (e.dateRanges = (l = t.dateRanges,
                    u = e.dateRanges,
                    h = e.recentlyRemovedDateranges,
                    d = o({}, l),
                    h && h.forEach((function(t) {
                        delete d[t]
                    }
                    )),
                    Object.keys(u).forEach((function(t) {
                        var e = new F(u[t].attr,d[t]);
                        e.isValid ? d[t] = e : w.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "' + JSON.stringify(u[t].attr) + '"')
                    }
                    )),
                    d));
            var g = e.fragments;
            if (c) {
                w.warn("discontinuity sliding from playlist, take drift into account");
                for (var v = 0; v < g.length; v++)
                    g[v].cc += c
            }
            e.skippedSegments && (e.startCC = e.fragments[0].cc),
            function(t, e, r) {
                if (t && e)
                    for (var i = 0, n = 0, a = t.length; n <= a; n++) {
                        var s = t[n]
                          , o = e[n + i];
                        s && o && s.index === o.index && s.fragment.sn === o.fragment.sn ? r(s, o) : i--
                    }
            }(t.partList, e.partList, (function(t, e) {
                e.elementaryStreams = t.elementaryStreams,
                e.stats = t.stats
            }
            )),
            s ? nr(e, s, s.startPTS, s.endPTS, s.startDTS, s.endDTS) : sr(t, e),
            g.length && (e.totalduration = e.edge - g[0].start),
            e.driftStartTime = t.driftStartTime,
            e.driftStart = t.driftStart;
            var m = e.advancedDateTime;
            if (e.advanced && m) {
                var p = e.edge;
                e.driftStart || (e.driftStartTime = m,
                e.driftStart = p),
                e.driftEndTime = m,
                e.driftEnd = p
            } else
                e.driftEndTime = t.driftEndTime,
                e.driftEnd = t.driftEnd,
                e.advancedDateTime = t.advancedDateTime
        }
        function sr(t, e) {
            var r = e.startSN + e.skippedSegments - t.startSN
              , i = t.fragments;
            r < 0 || r >= i.length || or(e, i[r].start)
        }
        function or(t, e) {
            if (e) {
                for (var r = t.fragments, i = t.skippedSegments; i < r.length; i++)
                    r[i].start += e;
                t.fragmentHint && (t.fragmentHint.start += e)
            }
        }
        function lr(t, e, r) {
            var i;
            return null != t && t.details ? ur(null == (i = t.details) ? void 0 : i.partList, e, r) : null
        }
        function ur(t, e, r) {
            if (t)
                for (var i = t.length; i--; ) {
                    var n = t[i];
                    if (n.index === r && n.fragment.sn === e)
                        return n
                }
            return null
        }
        function hr(t) {
            t.forEach((function(t, e) {
                var r = t.details;
                null != r && r.fragments && r.fragments.forEach((function(t) {
                    t.level = e
                }
                ))
            }
            ))
        }
        function dr(t) {
            switch (t.details) {
            case A.FRAG_LOAD_TIMEOUT:
            case A.KEY_LOAD_TIMEOUT:
            case A.LEVEL_LOAD_TIMEOUT:
            case A.MANIFEST_LOAD_TIMEOUT:
                return !0
            }
            return !1
        }
        function cr(t, e) {
            var r = dr(e);
            return t.default[(r ? "timeout" : "error") + "Retry"]
        }
        function fr(t, e) {
            var r = "linear" === t.backoff ? 1 : Math.pow(2, e);
            return Math.min(r * t.retryDelayMs, t.maxRetryDelayMs)
        }
        function gr(t) {
            return i(i({}, t), {
                errorRetry: null,
                timeoutRetry: null
            })
        }
        function vr(t, e, r, i) {
            if (!t)
                return !1;
            var n = null == i ? void 0 : i.code
              , a = e < t.maxNumRetry && (function(t) {
                return 0 === t && !1 === navigator.onLine || !!t && (t < 400 || t > 499)
            }(n) || !!r);
            return t.shouldRetry ? t.shouldRetry(t, e, r, i, a) : a
        }
        var mr = function(t, e) {
            for (var r = 0, i = t.length - 1, n = null, a = null; r <= i; ) {
                var s = e(a = t[n = (r + i) / 2 | 0]);
                if (s > 0)
                    r = n + 1;
                else {
                    if (!(s < 0))
                        return a;
                    i = n - 1
                }
            }
            return null
        };
        function pr(t, e, r, i) {
            void 0 === r && (r = 0),
            void 0 === i && (i = 0);
            var n = null;
            if (t) {
                n = e[t.sn - e[0].sn + 1] || null;
                var a = t.endDTS - r;
                a > 0 && a < 15e-7 && (r += 15e-7)
            } else
                0 === r && 0 === e[0].start && (n = e[0]);
            if (n && (!t || t.level === n.level) && 0 === yr(r, i, n))
                return n;
            var s = mr(e, yr.bind(null, r, i));
            return !s || s === t && n ? n : s
        }
        function yr(t, e, r) {
            if (void 0 === t && (t = 0),
            void 0 === e && (e = 0),
            r.start <= t && r.start + r.duration > t)
                return 0;
            var i = Math.min(e, r.duration + (r.deltaPTS ? r.deltaPTS : 0));
            return r.start + r.duration - i <= t ? 1 : r.start - i > t && r.start ? -1 : 0
        }
        function Er(t, e, r) {
            var i = 1e3 * Math.min(e, r.duration + (r.deltaPTS ? r.deltaPTS : 0));
            return (r.endProgramDateTime || 0) - i > t
        }
        var Tr = 0
          , Sr = 2
          , Lr = 3
          , Ar = 5
          , Rr = 0
          , kr = 1
          , br = 2
          , Dr = function() {
            function t(t) {
                this.hls = void 0,
                this.playlistError = 0,
                this.penalizedRenditions = {},
                this.log = void 0,
                this.warn = void 0,
                this.error = void 0,
                this.hls = t,
                this.log = w.log.bind(w, "[info]:"),
                this.warn = w.warn.bind(w, "[warning]:"),
                this.error = w.error.bind(w, "[error]:"),
                this.registerListeners()
            }
            var e = t.prototype;
            return e.registerListeners = function() {
                var t = this.hls;
                t.on(S.ERROR, this.onError, this),
                t.on(S.MANIFEST_LOADING, this.onManifestLoading, this),
                t.on(S.LEVEL_UPDATED, this.onLevelUpdated, this)
            }
            ,
            e.unregisterListeners = function() {
                var t = this.hls;
                t && (t.off(S.ERROR, this.onError, this),
                t.off(S.ERROR, this.onErrorOut, this),
                t.off(S.MANIFEST_LOADING, this.onManifestLoading, this),
                t.off(S.LEVEL_UPDATED, this.onLevelUpdated, this))
            }
            ,
            e.destroy = function() {
                this.unregisterListeners(),
                this.hls = null,
                this.penalizedRenditions = {}
            }
            ,
            e.startLoad = function(t) {}
            ,
            e.stopLoad = function() {
                this.playlistError = 0
            }
            ,
            e.getVariantLevelIndex = function(t) {
                return (null == t ? void 0 : t.type) === we ? t.level : this.hls.loadLevel
            }
            ,
            e.onManifestLoading = function() {
                this.playlistError = 0,
                this.penalizedRenditions = {}
            }
            ,
            e.onLevelUpdated = function() {
                this.playlistError = 0
            }
            ,
            e.onError = function(t, e) {
                var r, i;
                if (!e.fatal) {
                    var n = this.hls
                      , a = e.context;
                    switch (e.details) {
                    case A.FRAG_LOAD_ERROR:
                    case A.FRAG_LOAD_TIMEOUT:
                    case A.KEY_LOAD_ERROR:
                    case A.KEY_LOAD_TIMEOUT:
                        return void (e.errorAction = this.getFragRetryOrSwitchAction(e));
                    case A.FRAG_PARSING_ERROR:
                        if (null != (r = e.frag) && r.gap)
                            return void (e.errorAction = {
                                action: Tr,
                                flags: Rr
                            });
                    case A.FRAG_GAP:
                    case A.FRAG_DECRYPT_ERROR:
                        return e.errorAction = this.getFragRetryOrSwitchAction(e),
                        void (e.errorAction.action = Sr);
                    case A.LEVEL_EMPTY_ERROR:
                    case A.LEVEL_PARSING_ERROR:
                        var s, o, l = e.parent === we ? e.level : n.loadLevel;
                        return void (e.details === A.LEVEL_EMPTY_ERROR && null != (s = e.context) && null != (o = s.levelDetails) && o.live ? e.errorAction = this.getPlaylistRetryOrSwitchAction(e, l) : (e.levelRetry = !1,
                        e.errorAction = this.getLevelSwitchAction(e, l)));
                    case A.LEVEL_LOAD_ERROR:
                    case A.LEVEL_LOAD_TIMEOUT:
                        return void ("number" == typeof (null == a ? void 0 : a.level) && (e.errorAction = this.getPlaylistRetryOrSwitchAction(e, a.level)));
                    case A.AUDIO_TRACK_LOAD_ERROR:
                    case A.AUDIO_TRACK_LOAD_TIMEOUT:
                    case A.SUBTITLE_LOAD_ERROR:
                    case A.SUBTITLE_TRACK_LOAD_TIMEOUT:
                        if (a) {
                            var u = n.levels[n.loadLevel];
                            if (u && (a.type === De && u.hasAudioGroup(a.groupId) || a.type === Ie && u.hasSubtitleGroup(a.groupId)))
                                return e.errorAction = this.getPlaylistRetryOrSwitchAction(e, n.loadLevel),
                                e.errorAction.action = Sr,
                                void (e.errorAction.flags = kr)
                        }
                        return;
                    case A.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:
                        var h = n.levels[n.loadLevel]
                          , d = null == h ? void 0 : h.attrs["HDCP-LEVEL"];
                        return void (d ? e.errorAction = {
                            action: Sr,
                            flags: br,
                            hdcpLevel: d
                        } : this.keySystemError(e));
                    case A.BUFFER_ADD_CODEC_ERROR:
                    case A.REMUX_ALLOC_ERROR:
                    case A.BUFFER_APPEND_ERROR:
                        return void (e.errorAction = this.getLevelSwitchAction(e, null != (i = e.level) ? i : n.loadLevel));
                    case A.INTERNAL_EXCEPTION:
                    case A.BUFFER_APPENDING_ERROR:
                    case A.BUFFER_FULL_ERROR:
                    case A.LEVEL_SWITCH_ERROR:
                    case A.BUFFER_STALLED_ERROR:
                    case A.BUFFER_SEEK_OVER_HOLE:
                    case A.BUFFER_NUDGE_ON_STALL:
                        return void (e.errorAction = {
                            action: Tr,
                            flags: Rr
                        })
                    }
                    e.type === L.KEY_SYSTEM_ERROR && this.keySystemError(e)
                }
            }
            ,
            e.keySystemError = function(t) {
                var e = this.getVariantLevelIndex(t.frag);
                t.levelRetry = !1,
                t.errorAction = this.getLevelSwitchAction(t, e)
            }
            ,
            e.getPlaylistRetryOrSwitchAction = function(t, e) {
                var r = cr(this.hls.config.playlistLoadPolicy, t)
                  , i = this.playlistError++;
                if (vr(r, i, dr(t), t.response))
                    return {
                        action: Ar,
                        flags: Rr,
                        retryConfig: r,
                        retryCount: i
                    };
                var n = this.getLevelSwitchAction(t, e);
                return r && (n.retryConfig = r,
                n.retryCount = i),
                n
            }
            ,
            e.getFragRetryOrSwitchAction = function(t) {
                var e = this.hls
                  , r = this.getVariantLevelIndex(t.frag)
                  , i = e.levels[r]
                  , n = e.config
                  , a = n.fragLoadPolicy
                  , s = n.keyLoadPolicy
                  , o = cr(t.details.startsWith("key") ? s : a, t)
                  , l = e.levels.reduce((function(t, e) {
                    return t + e.fragmentError
                }
                ), 0);
                if (i && (t.details !== A.FRAG_GAP && i.fragmentError++,
                vr(o, l, dr(t), t.response)))
                    return {
                        action: Ar,
                        flags: Rr,
                        retryConfig: o,
                        retryCount: l
                    };
                var u = this.getLevelSwitchAction(t, r);
                return o && (u.retryConfig = o,
                u.retryCount = l),
                u
            }
            ,
            e.getLevelSwitchAction = function(t, e) {
                var r = this.hls;
                null == e && (e = r.loadLevel);
                var i = this.hls.levels[e];
                if (i) {
                    var n, a, s = t.details;
                    i.loadError++,
                    s === A.BUFFER_APPEND_ERROR && i.fragmentError++;
                    var o = -1
                      , l = r.levels
                      , u = r.loadLevel
                      , h = r.minAutoLevel
                      , d = r.maxAutoLevel;
                    r.autoLevelEnabled || (r.loadLevel = -1);
                    for (var c, f = null == (n = t.frag) ? void 0 : n.type, g = (f === Ce && s === A.FRAG_PARSING_ERROR || "audio" === t.sourceBufferName && (s === A.BUFFER_ADD_CODEC_ERROR || s === A.BUFFER_APPEND_ERROR)) && l.some((function(t) {
                        var e = t.audioCodec;
                        return i.audioCodec !== e
                    }
                    )), v = "video" === t.sourceBufferName && (s === A.BUFFER_ADD_CODEC_ERROR || s === A.BUFFER_APPEND_ERROR) && l.some((function(t) {
                        var e = t.codecSet
                          , r = t.audioCodec;
                        return i.codecSet !== e && i.audioCodec === r
                    }
                    )), m = null != (a = t.context) ? a : {}, p = m.type, y = m.groupId, E = function() {
                        var e = (T + u) % l.length;
                        if (e !== u && e >= h && e <= d && 0 === l[e].loadError) {
                            var r, n, a = l[e];
                            if (s === A.FRAG_GAP && t.frag) {
                                var c = l[e].details;
                                if (c) {
                                    var m = pr(t.frag, c.fragments, t.frag.start);
                                    if (null != m && m.gap)
                                        return 0
                                }
                            } else {
                                if (p === De && a.hasAudioGroup(y) || p === Ie && a.hasSubtitleGroup(y))
                                    return 0;
                                if (f === Ce && null != (r = i.audioGroups) && r.some((function(t) {
                                    return a.hasAudioGroup(t)
                                }
                                )) || f === _e && null != (n = i.subtitleGroups) && n.some((function(t) {
                                    return a.hasSubtitleGroup(t)
                                }
                                )) || g && i.audioCodec === a.audioCodec || !g && i.audioCodec !== a.audioCodec || v && i.codecSet === a.codecSet)
                                    return 0
                            }
                            return o = e,
                            1
                        }
                    }, T = l.length; T-- && (0 === (c = E()) || 1 !== c); )
                        ;
                    if (o > -1 && r.loadLevel !== o)
                        return t.levelRetry = !0,
                        this.playlistError = 0,
                        {
                            action: Sr,
                            flags: Rr,
                            nextAutoLevel: o
                        }
                }
                return {
                    action: Sr,
                    flags: kr
                }
            }
            ,
            e.onErrorOut = function(t, e) {
                var r;
                switch (null == (r = e.errorAction) ? void 0 : r.action) {
                case Tr:
                    break;
                case Sr:
                    this.sendAlternateToPenaltyBox(e),
                    e.errorAction.resolved || e.details === A.FRAG_GAP ? /MediaSource readyState: ended/.test(e.error.message) && (this.warn('MediaSource ended after "' + e.sourceBufferName + '" sourceBuffer append error. Attempting to recover from media error.'),
                    this.hls.recoverMediaError()) : e.fatal = !0
                }
                e.fatal && this.hls.stopLoad()
            }
            ,
            e.sendAlternateToPenaltyBox = function(t) {
                var e = this.hls
                  , r = t.errorAction;
                if (r) {
                    var i = r.flags
                      , n = r.hdcpLevel
                      , a = r.nextAutoLevel;
                    switch (i) {
                    case Rr:
                        this.switchLevel(t, a);
                        break;
                    case br:
                        n && (e.maxHdcpLevel = ze[ze.indexOf(n) - 1],
                        r.resolved = !0),
                        this.warn('Restricting playback to HDCP-LEVEL of "' + e.maxHdcpLevel + '" or lower')
                    }
                    r.resolved || this.switchLevel(t, a)
                }
            }
            ,
            e.switchLevel = function(t, e) {
                void 0 !== e && t.errorAction && (this.warn("switching to level " + e + " after " + t.details),
                this.hls.nextAutoLevel = e,
                t.errorAction.resolved = !0,
                this.hls.nextLoadLevel = this.hls.nextAutoLevel)
            }
            ,
            t
        }()
          , Ir = function() {
            function t(t, e) {
                this.hls = void 0,
                this.timer = -1,
                this.requestScheduled = -1,
                this.canLoad = !1,
                this.log = void 0,
                this.warn = void 0,
                this.log = w.log.bind(w, e + ":"),
                this.warn = w.warn.bind(w, e + ":"),
                this.hls = t
            }
            var e = t.prototype;
            return e.destroy = function() {
                this.clearTimer(),
                this.hls = this.log = this.warn = null
            }
            ,
            e.clearTimer = function() {
                -1 !== this.timer && (self.clearTimeout(this.timer),
                this.timer = -1)
            }
            ,
            e.startLoad = function() {
                this.canLoad = !0,
                this.requestScheduled = -1,
                this.loadPlaylist()
            }
            ,
            e.stopLoad = function() {
                this.canLoad = !1,
                this.clearTimer()
            }
            ,
            e.switchParams = function(t, e) {
                var r = null == e ? void 0 : e.renditionReports;
                if (r) {
                    for (var i = -1, n = 0; n < r.length; n++) {
                        var a = r[n]
                          , s = void 0;
                        try {
                            s = new self.URL(a.URI,e.url).href
                        } catch (t) {
                            w.warn("Could not construct new URL for Rendition Report: " + t),
                            s = a.URI || ""
                        }
                        if (s === t) {
                            i = n;
                            break
                        }
                        s === t.substring(0, s.length) && (i = n)
                    }
                    if (-1 !== i) {
                        var o = r[i]
                          , l = parseInt(o["LAST-MSN"]) || (null == e ? void 0 : e.lastPartSn)
                          , u = parseInt(o["LAST-PART"]) || (null == e ? void 0 : e.lastPartIndex);
                        if (this.hls.config.lowLatencyMode) {
                            var h = Math.min(e.age - e.partTarget, e.targetduration);
                            u >= 0 && h > e.partTarget && (u += 1)
                        }
                        return new tr(l,u >= 0 ? u : void 0,Je)
                    }
                }
            }
            ,
            e.loadPlaylist = function(t) {
                -1 === this.requestScheduled && (this.requestScheduled = self.performance.now())
            }
            ,
            e.shouldLoadPlaylist = function(t) {
                return this.canLoad && !!t && !!t.url && (!t.details || t.details.live)
            }
            ,
            e.shouldReloadPlaylist = function(t) {
                return -1 === this.timer && -1 === this.requestScheduled && this.shouldLoadPlaylist(t)
            }
            ,
            e.playlistLoaded = function(t, e, r) {
                var i = this
                  , n = e.details
                  , a = e.stats
                  , s = self.performance.now()
                  , o = a.loading.first ? Math.max(0, s - a.loading.first) : 0;
                if (n.advancedDateTime = Date.now() - o,
                n.live || null != r && r.live) {
                    if (n.reloaded(r),
                    r && this.log("live playlist " + t + " " + (n.advanced ? "REFRESHED " + n.lastPartSn + "-" + n.lastPartIndex : n.updated ? "UPDATED" : "MISSED")),
                    r && n.fragments.length > 0 && ar(r, n),
                    !this.canLoad || !n.live)
                        return;
                    var l, u = void 0, h = void 0;
                    if (n.canBlockReload && n.endSN && n.advanced) {
                        var d = this.hls.config.lowLatencyMode
                          , c = n.lastPartSn
                          , f = n.endSN
                          , g = n.lastPartIndex
                          , v = c === f;
                        -1 !== g ? (u = v ? f + 1 : c,
                        h = v ? d ? 0 : g : g + 1) : u = f + 1;
                        var m = n.age
                          , p = m + n.ageHeader
                          , y = Math.min(p - n.partTarget, 1.5 * n.targetduration);
                        if (y > 0) {
                            if (r && y > r.tuneInGoal)
                                this.warn("CDN Tune-in goal increased from: " + r.tuneInGoal + " to: " + y + " with playlist age: " + n.age),
                                y = 0;
                            else {
                                var E = Math.floor(y / n.targetduration);
                                u += E,
                                void 0 !== h && (h += Math.round(y % n.targetduration / n.partTarget)),
                                this.log("CDN Tune-in age: " + n.ageHeader + "s last advanced " + m.toFixed(2) + "s goal: " + y + " skip sn " + E + " to part " + h)
                            }
                            n.tuneInGoal = y
                        }
                        if (l = this.getDeliveryDirectives(n, e.deliveryDirectives, u, h),
                        d || !v)
                            return void this.loadPlaylist(l)
                    } else
                        (n.canBlockReload || n.canSkipUntil) && (l = this.getDeliveryDirectives(n, e.deliveryDirectives, u, h));
                    var T = this.hls.mainForwardBufferInfo
                      , S = T ? T.end - T.len : 0
                      , L = function(t, e) {
                        void 0 === e && (e = 1 / 0);
                        var r = 1e3 * t.targetduration;
                        if (t.updated) {
                            var i = t.fragments;
                            if (i.length && 4 * r > e) {
                                var n = 1e3 * i[i.length - 1].duration;
                                n < r && (r = n)
                            }
                        } else
                            r /= 2;
                        return Math.round(r)
                    }(n, 1e3 * (n.edge - S));
                    n.updated && s > this.requestScheduled + L && (this.requestScheduled = a.loading.start),
                    void 0 !== u && n.canBlockReload ? this.requestScheduled = a.loading.first + L - (1e3 * n.partTarget || 1e3) : -1 === this.requestScheduled || this.requestScheduled + L < s ? this.requestScheduled = s : this.requestScheduled - s <= 0 && (this.requestScheduled += L);
                    var A = this.requestScheduled - s;
                    A = Math.max(0, A),
                    this.log("reload live playlist " + t + " in " + Math.round(A) + " ms"),
                    this.timer = self.setTimeout((function() {
                        return i.loadPlaylist(l)
                    }
                    ), A)
                } else
                    this.clearTimer()
            }
            ,
            e.getDeliveryDirectives = function(t, e, r, i) {
                var n = function(t, e) {
                    var r = t.canSkipUntil
                      , i = t.canSkipDateRanges
                      , n = t.endSN;
                    return r && (void 0 !== e ? e - n : 0) < r ? i ? Ze : $e : Je
                }(t, r);
                return null != e && e.skip && t.deltaUpdateFailed && (r = e.msn,
                i = e.part,
                n = Je),
                new tr(r,i,n)
            }
            ,
            e.checkRetry = function(t) {
                var e = this
                  , r = t.details
                  , i = dr(t)
                  , n = t.errorAction
                  , a = n || {}
                  , s = a.action
                  , o = a.retryCount
                  , l = void 0 === o ? 0 : o
                  , u = a.retryConfig
                  , h = !!n && !!u && (s === Ar || !n.resolved && s === Sr);
                if (h) {
                    var d;
                    if (this.requestScheduled = -1,
                    l >= u.maxNumRetry)
                        return !1;
                    if (i && null != (d = t.context) && d.deliveryDirectives)
                        this.warn("Retrying playlist loading " + (l + 1) + "/" + u.maxNumRetry + ' after "' + r + '" without delivery-directives'),
                        this.loadPlaylist();
                    else {
                        var c = fr(u, l);
                        this.timer = self.setTimeout((function() {
                            return e.loadPlaylist()
                        }
                        ), c),
                        this.warn("Retrying playlist loading " + (l + 1) + "/" + u.maxNumRetry + ' after "' + r + '" in ' + c + "ms")
                    }
                    t.levelRetry = !0,
                    n.resolved = !0
                }
                return h
            }
            ,
            t
        }()
          , wr = function() {
            function t(t, e, r) {
                void 0 === e && (e = 0),
                void 0 === r && (r = 0),
                this.halfLife = void 0,
                this.alpha_ = void 0,
                this.estimate_ = void 0,
                this.totalWeight_ = void 0,
                this.halfLife = t,
                this.alpha_ = t ? Math.exp(Math.log(.5) / t) : 0,
                this.estimate_ = e,
                this.totalWeight_ = r
            }
            var e = t.prototype;
            return e.sample = function(t, e) {
                var r = Math.pow(this.alpha_, t);
                this.estimate_ = e * (1 - r) + r * this.estimate_,
                this.totalWeight_ += t
            }
            ,
            e.getTotalWeight = function() {
                return this.totalWeight_
            }
            ,
            e.getEstimate = function() {
                if (this.alpha_) {
                    var t = 1 - Math.pow(this.alpha_, this.totalWeight_);
                    if (t)
                        return this.estimate_ / t
                }
                return this.estimate_
            }
            ,
            t
        }()
          , Cr = function() {
            function t(t, e, r, i) {
                void 0 === i && (i = 100),
                this.defaultEstimate_ = void 0,
                this.minWeight_ = void 0,
                this.minDelayMs_ = void 0,
                this.slow_ = void 0,
                this.fast_ = void 0,
                this.defaultTTFB_ = void 0,
                this.ttfb_ = void 0,
                this.defaultEstimate_ = r,
                this.minWeight_ = .001,
                this.minDelayMs_ = 50,
                this.slow_ = new wr(t),
                this.fast_ = new wr(e),
                this.defaultTTFB_ = i,
                this.ttfb_ = new wr(t)
            }
            var e = t.prototype;
            return e.update = function(t, e) {
                var r = this.slow_
                  , i = this.fast_
                  , n = this.ttfb_;
                r.halfLife !== t && (this.slow_ = new wr(t,r.getEstimate(),r.getTotalWeight())),
                i.halfLife !== e && (this.fast_ = new wr(e,i.getEstimate(),i.getTotalWeight())),
                n.halfLife !== t && (this.ttfb_ = new wr(t,n.getEstimate(),n.getTotalWeight()))
            }
            ,
            e.sample = function(t, e) {
                var r = (t = Math.max(t, this.minDelayMs_)) / 1e3
                  , i = 8 * e / r;
                this.fast_.sample(r, i),
                this.slow_.sample(r, i)
            }
            ,
            e.sampleTTFB = function(t) {
                var e = t / 1e3
                  , r = Math.sqrt(2) * Math.exp(-Math.pow(e, 2) / 2);
                this.ttfb_.sample(r, Math.max(t, 5))
            }
            ,
            e.canEstimate = function() {
                return this.fast_.getTotalWeight() >= this.minWeight_
            }
            ,
            e.getEstimate = function() {
                return this.canEstimate() ? Math.min(this.fast_.getEstimate(), this.slow_.getEstimate()) : this.defaultEstimate_
            }
            ,
            e.getEstimateTTFB = function() {
                return this.ttfb_.getTotalWeight() >= this.minWeight_ ? this.ttfb_.getEstimate() : this.defaultTTFB_
            }
            ,
            e.destroy = function() {}
            ,
            t
        }()
          , _r = {
            supported: !0,
            configurations: [],
            decodingInfoResults: [{
                supported: !0,
                powerEfficient: !0,
                smooth: !0
            }]
        }
          , xr = {};
        function Pr(t, e, r) {
            var n = t.videoCodec
              , a = t.audioCodec;
            if (!n || !a || !r)
                return Promise.resolve(_r);
            var s = {
                width: t.width,
                height: t.height,
                bitrate: Math.ceil(Math.max(.9 * t.bitrate, t.averageBitrate)),
                framerate: t.frameRate || 30
            }
              , o = t.videoRange;
            "SDR" !== o && (s.transferFunction = o.toLowerCase());
            var l = n.split(",").map((function(t) {
                return {
                    type: "media-source",
                    video: i(i({}, s), {}, {
                        contentType: ae(t, "video")
                    })
                }
            }
            ));
            return a && t.audioGroups && t.audioGroups.forEach((function(t) {
                var r;
                t && (null == (r = e.groups[t]) || r.tracks.forEach((function(e) {
                    if (e.groupId === t) {
                        var r = e.channels || ""
                          , i = parseFloat(r);
                        y(i) && i > 2 && l.push.apply(l, a.split(",").map((function(t) {
                            return {
                                type: "media-source",
                                audio: {
                                    contentType: ae(t, "audio"),
                                    channels: "" + i
                                }
                            }
                        }
                        )))
                    }
                }
                )))
            }
            )),
            Promise.all(l.map((function(t) {
                var e = function(t) {
                    var e = t.audio
                      , r = t.video
                      , i = r || e;
                    if (i) {
                        var n = i.contentType.split('"')[1];
                        if (r)
                            return "r" + r.height + "x" + r.width + "f" + Math.ceil(r.framerate) + (r.transferFunction || "sd") + "_" + n + "_" + Math.ceil(r.bitrate / 1e5);
                        if (e)
                            return "c" + e.channels + (e.spatialRendering ? "s" : "n") + "_" + n
                    }
                    return ""
                }(t);
                return xr[e] || (xr[e] = r.decodingInfo(t))
            }
            ))).then((function(t) {
                return {
                    supported: !t.some((function(t) {
                        return !t.supported
                    }
                    )),
                    configurations: l,
                    decodingInfoResults: t
                }
            }
            )).catch((function(t) {
                return {
                    supported: !1,
                    configurations: l,
                    decodingInfoResults: [],
                    error: t
                }
            }
            ))
        }
        function Fr(t, e) {
            var r = !1
              , i = [];
            return t && (r = "SDR" !== t,
            i = [t]),
            e && (i = e.allowedVideoRanges || Qe.slice(0),
            i = (r = void 0 !== e.preferHDR ? e.preferHDR : function() {
                if ("function" == typeof matchMedia) {
                    var t = matchMedia("(dynamic-range: high)")
                      , e = matchMedia("bad query");
                    if (t.media !== e.media)
                        return !0 === t.matches
                }
                return !1
            }()) ? i.filter((function(t) {
                return "SDR" !== t
            }
            )) : ["SDR"]),
            {
                preferHDR: r,
                allowedVideoRanges: i
            }
        }
        function Mr(t, e) {
            w.log('[abr] start candidates with "' + t + '" ignored because ' + e)
        }
        function Or(t, e, r) {
            if ("attrs"in t) {
                var i = e.indexOf(t);
                if (-1 !== i)
                    return i
            }
            for (var n = 0; n < e.length; n++)
                if (Nr(t, e[n], r))
                    return n;
            return -1
        }
        function Nr(t, e, r) {
            var i = t.groupId
              , n = t.name
              , a = t.lang
              , s = t.assocLang
              , o = t.characteristics
              , l = t.default
              , u = t.forced;
            return (void 0 === i || e.groupId === i) && (void 0 === n || e.name === n) && (void 0 === a || e.lang === a) && (void 0 === a || e.assocLang === s) && (void 0 === l || e.default === l) && (void 0 === u || e.forced === u) && (void 0 === o || function(t, e) {
                void 0 === e && (e = "");
                var r = t.split(",")
                  , i = e.split(",");
                return r.length === i.length && !r.some((function(t) {
                    return -1 === i.indexOf(t)
                }
                ))
            }(o, e.characteristics)) && (void 0 === r || r(t, e))
        }
        function Ur(t, e) {
            var r = t.audioCodec
              , i = t.channels;
            return !(void 0 !== r && (e.audioCodec || "").substring(0, 4) !== r.substring(0, 4) || void 0 !== i && i !== (e.channels || "2"))
        }
        function Br(t, e, r) {
            for (var i = e; i; i--)
                if (r(t[i]))
                    return i;
            for (var n = e + 1; n < t.length; n++)
                if (r(t[n]))
                    return n;
            return -1
        }
        var Gr = function() {
            function t(t) {
                var e = this;
                this.hls = void 0,
                this.lastLevelLoadSec = 0,
                this.lastLoadedFragLevel = -1,
                this.firstSelection = -1,
                this._nextAutoLevel = -1,
                this.nextAutoLevelKey = "",
                this.audioTracksByGroup = null,
                this.codecTiers = null,
                this.timer = -1,
                this.fragCurrent = null,
                this.partCurrent = null,
                this.bitrateTestDelay = 0,
                this.bwEstimator = void 0,
                this._abandonRulesCheck = function() {
                    var t = e.fragCurrent
                      , r = e.partCurrent
                      , i = e.hls
                      , n = i.autoLevelEnabled
                      , a = i.media;
                    if (t && a) {
                        var s = performance.now()
                          , o = r ? r.stats : t.stats
                          , l = r ? r.duration : t.duration
                          , u = s - o.loading.start
                          , h = i.minAutoLevel;
                        if (o.aborted || o.loaded && o.loaded === o.total || t.level <= h)
                            return e.clearTimer(),
                            void (e._nextAutoLevel = -1);
                        if (n && !a.paused && a.playbackRate && a.readyState) {
                            var d = i.mainForwardBufferInfo;
                            if (null !== d) {
                                var c = e.bwEstimator.getEstimateTTFB()
                                  , f = Math.abs(a.playbackRate);
                                if (!(u <= Math.max(c, l / (2 * f) * 1e3))) {
                                    var g = d.len / f
                                      , v = o.loading.first ? o.loading.first - o.loading.start : -1
                                      , m = o.loaded && v > -1
                                      , p = e.getBwEstimate()
                                      , E = i.levels
                                      , T = E[t.level]
                                      , L = o.total || Math.max(o.loaded, Math.round(l * T.averageBitrate / 8))
                                      , A = m ? u - v : u;
                                    A < 1 && m && (A = Math.min(u, 8 * o.loaded / p));
                                    var R = m ? 1e3 * o.loaded / A : 0
                                      , k = R ? (L - o.loaded) / R : 8 * L / p + c / 1e3;
                                    if (!(k <= g)) {
                                        var b, D = R ? 8 * R : p, I = Number.POSITIVE_INFINITY;
                                        for (b = t.level - 1; b > h; b--) {
                                            var C = E[b].maxBitrate;
                                            if ((I = e.getTimeToLoadFrag(c / 1e3, D, l * C, !E[b].details)) < g)
                                                break
                                        }
                                        if (!(I >= k || I > 10 * l)) {
                                            i.nextLoadLevel = i.nextAutoLevel = b,
                                            m ? e.bwEstimator.sample(u - Math.min(c, v), o.loaded) : e.bwEstimator.sampleTTFB(u);
                                            var _ = E[b].maxBitrate;
                                            e.getBwEstimate() * e.hls.config.abrBandWidthUpFactor > _ && e.resetEstimator(_),
                                            e.clearTimer(),
                                            w.warn("[abr] Fragment " + t.sn + (r ? " part " + r.index : "") + " of level " + t.level + " is loading too slowly;\n      Time to underbuffer: " + g.toFixed(3) + " s\n      Estimated load time for current fragment: " + k.toFixed(3) + " s\n      Estimated load time for down switch fragment: " + I.toFixed(3) + " s\n      TTFB estimate: " + (0 | v) + " ms\n      Current BW estimate: " + (y(p) ? 0 | p : "Unknown") + " bps\n      New BW estimate: " + (0 | e.getBwEstimate()) + " bps\n      Switching to level " + b + " @ " + (0 | _) + " bps"),
                                            i.trigger(S.FRAG_LOAD_EMERGENCY_ABORTED, {
                                                frag: t,
                                                part: r,
                                                stats: o
                                            })
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
                ,
                this.hls = t,
                this.bwEstimator = this.initEstimator(),
                this.registerListeners()
            }
            var e = t.prototype;
            return e.resetEstimator = function(t) {
                t && (w.log("setting initial bwe to " + t),
                this.hls.config.abrEwmaDefaultEstimate = t),
                this.firstSelection = -1,
                this.bwEstimator = this.initEstimator()
            }
            ,
            e.initEstimator = function() {
                var t = this.hls.config;
                return new Cr(t.abrEwmaSlowVoD,t.abrEwmaFastVoD,t.abrEwmaDefaultEstimate)
            }
            ,
            e.registerListeners = function() {
                var t = this.hls;
                t.on(S.MANIFEST_LOADING, this.onManifestLoading, this),
                t.on(S.FRAG_LOADING, this.onFragLoading, this),
                t.on(S.FRAG_LOADED, this.onFragLoaded, this),
                t.on(S.FRAG_BUFFERED, this.onFragBuffered, this),
                t.on(S.LEVEL_SWITCHING, this.onLevelSwitching, this),
                t.on(S.LEVEL_LOADED, this.onLevelLoaded, this),
                t.on(S.LEVELS_UPDATED, this.onLevelsUpdated, this),
                t.on(S.MAX_AUTO_LEVEL_UPDATED, this.onMaxAutoLevelUpdated, this),
                t.on(S.ERROR, this.onError, this)
            }
            ,
            e.unregisterListeners = function() {
                var t = this.hls;
                t && (t.off(S.MANIFEST_LOADING, this.onManifestLoading, this),
                t.off(S.FRAG_LOADING, this.onFragLoading, this),
                t.off(S.FRAG_LOADED, this.onFragLoaded, this),
                t.off(S.FRAG_BUFFERED, this.onFragBuffered, this),
                t.off(S.LEVEL_SWITCHING, this.onLevelSwitching, this),
                t.off(S.LEVEL_LOADED, this.onLevelLoaded, this),
                t.off(S.LEVELS_UPDATED, this.onLevelsUpdated, this),
                t.off(S.MAX_AUTO_LEVEL_UPDATED, this.onMaxAutoLevelUpdated, this),
                t.off(S.ERROR, this.onError, this))
            }
            ,
            e.destroy = function() {
                this.unregisterListeners(),
                this.clearTimer(),
                this.hls = this._abandonRulesCheck = null,
                this.fragCurrent = this.partCurrent = null
            }
            ,
            e.onManifestLoading = function(t, e) {
                this.lastLoadedFragLevel = -1,
                this.firstSelection = -1,
                this.lastLevelLoadSec = 0,
                this.fragCurrent = this.partCurrent = null,
                this.onLevelsUpdated(),
                this.clearTimer()
            }
            ,
            e.onLevelsUpdated = function() {
                this.lastLoadedFragLevel > -1 && this.fragCurrent && (this.lastLoadedFragLevel = this.fragCurrent.level),
                this._nextAutoLevel = -1,
                this.onMaxAutoLevelUpdated(),
                this.codecTiers = null,
                this.audioTracksByGroup = null
            }
            ,
            e.onMaxAutoLevelUpdated = function() {
                this.firstSelection = -1,
                this.nextAutoLevelKey = ""
            }
            ,
            e.onFragLoading = function(t, e) {
                var r, i = e.frag;
                this.ignoreFragment(i) || (i.bitrateTest || (this.fragCurrent = i,
                this.partCurrent = null != (r = e.part) ? r : null),
                this.clearTimer(),
                this.timer = self.setInterval(this._abandonRulesCheck, 100))
            }
            ,
            e.onLevelSwitching = function(t, e) {
                this.clearTimer()
            }
            ,
            e.onError = function(t, e) {
                if (!e.fatal)
                    switch (e.details) {
                    case A.BUFFER_ADD_CODEC_ERROR:
                    case A.BUFFER_APPEND_ERROR:
                        this.lastLoadedFragLevel = -1,
                        this.firstSelection = -1;
                        break;
                    case A.FRAG_LOAD_TIMEOUT:
                        var r = e.frag
                          , i = this.fragCurrent
                          , n = this.partCurrent;
                        if (r && i && r.sn === i.sn && r.level === i.level) {
                            var a = performance.now()
                              , s = n ? n.stats : r.stats
                              , o = a - s.loading.start
                              , l = s.loading.first ? s.loading.first - s.loading.start : -1;
                            if (s.loaded && l > -1) {
                                var u = this.bwEstimator.getEstimateTTFB();
                                this.bwEstimator.sample(o - Math.min(u, l), s.loaded)
                            } else
                                this.bwEstimator.sampleTTFB(o)
                        }
                    }
            }
            ,
            e.getTimeToLoadFrag = function(t, e, r, i) {
                return t + r / e + (i ? this.lastLevelLoadSec : 0)
            }
            ,
            e.onLevelLoaded = function(t, e) {
                var r = this.hls.config
                  , i = e.stats.loading
                  , n = i.end - i.start;
                y(n) && (this.lastLevelLoadSec = n / 1e3),
                e.details.live ? this.bwEstimator.update(r.abrEwmaSlowLive, r.abrEwmaFastLive) : this.bwEstimator.update(r.abrEwmaSlowVoD, r.abrEwmaFastVoD)
            }
            ,
            e.onFragLoaded = function(t, e) {
                var r = e.frag
                  , i = e.part
                  , n = i ? i.stats : r.stats;
                if (r.type === we && this.bwEstimator.sampleTTFB(n.loading.first - n.loading.start),
                !this.ignoreFragment(r)) {
                    if (this.clearTimer(),
                    r.level === this._nextAutoLevel && (this._nextAutoLevel = -1),
                    this.firstSelection = -1,
                    this.hls.config.abrMaxWithRealBitrate) {
                        var a = i ? i.duration : r.duration
                          , s = this.hls.levels[r.level]
                          , o = (s.loaded ? s.loaded.bytes : 0) + n.loaded
                          , l = (s.loaded ? s.loaded.duration : 0) + a;
                        s.loaded = {
                            bytes: o,
                            duration: l
                        },
                        s.realBitrate = Math.round(8 * o / l)
                    }
                    if (r.bitrateTest) {
                        var u = {
                            stats: n,
                            frag: r,
                            part: i,
                            id: r.type
                        };
                        this.onFragBuffered(S.FRAG_BUFFERED, u),
                        r.bitrateTest = !1
                    } else
                        this.lastLoadedFragLevel = r.level
                }
            }
            ,
            e.onFragBuffered = function(t, e) {
                var r = e.frag
                  , i = e.part
                  , n = null != i && i.stats.loaded ? i.stats : r.stats;
                if (!n.aborted && !this.ignoreFragment(r)) {
                    var a = n.parsing.end - n.loading.start - Math.min(n.loading.first - n.loading.start, this.bwEstimator.getEstimateTTFB());
                    this.bwEstimator.sample(a, n.loaded),
                    n.bwEstimate = this.getBwEstimate(),
                    r.bitrateTest ? this.bitrateTestDelay = a / 1e3 : this.bitrateTestDelay = 0
                }
            }
            ,
            e.ignoreFragment = function(t) {
                return t.type !== we || "initSegment" === t.sn
            }
            ,
            e.clearTimer = function() {
                this.timer > -1 && (self.clearInterval(this.timer),
                this.timer = -1)
            }
            ,
            e.getAutoLevelKey = function() {
                return this.getBwEstimate() + "_" + this.getStarvationDelay().toFixed(2)
            }
            ,
            e.getNextABRAutoLevel = function() {
                var t = this.fragCurrent
                  , e = this.partCurrent
                  , r = this.hls
                  , i = r.maxAutoLevel
                  , n = r.config
                  , a = r.minAutoLevel
                  , s = e ? e.duration : t ? t.duration : 0
                  , o = this.getBwEstimate()
                  , l = this.getStarvationDelay()
                  , u = n.abrBandWidthFactor
                  , h = n.abrBandWidthUpFactor;
                if (l) {
                    var d = this.findBestLevel(o, a, i, l, 0, u, h);
                    if (d >= 0)
                        return d
                }
                var c = s ? Math.min(s, n.maxStarvationDelay) : n.maxStarvationDelay;
                if (!l) {
                    var f = this.bitrateTestDelay;
                    f && (c = (s ? Math.min(s, n.maxLoadingDelay) : n.maxLoadingDelay) - f,
                    w.info("[abr] bitrate test took " + Math.round(1e3 * f) + "ms, set first fragment max fetchDuration to " + Math.round(1e3 * c) + " ms"),
                    u = h = 1)
                }
                var g = this.findBestLevel(o, a, i, l, c, u, h);
                if (w.info("[abr] " + (l ? "rebuffering expected" : "buffer is empty") + ", optimal quality level " + g),
                g > -1)
                    return g;
                var v = r.levels[a]
                  , m = r.levels[r.loadLevel];
                return (null == v ? void 0 : v.bitrate) < (null == m ? void 0 : m.bitrate) ? a : r.loadLevel
            }
            ,
            e.getStarvationDelay = function() {
                var t = this.hls
                  , e = t.media;
                if (!e)
                    return 1 / 0;
                var r = e && 0 !== e.playbackRate ? Math.abs(e.playbackRate) : 1
                  , i = t.mainForwardBufferInfo;
                return (i ? i.len : 0) / r
            }
            ,
            e.getBwEstimate = function() {
                return this.bwEstimator.canEstimate() ? this.bwEstimator.getEstimate() : this.hls.config.abrEwmaDefaultEstimate
            }
            ,
            e.findBestLevel = function(t, e, r, i, n, a, s) {
                var o, l = this, u = i + n, h = this.lastLoadedFragLevel, d = -1 === h ? this.hls.firstLevel : h, c = this.fragCurrent, f = this.partCurrent, g = this.hls, v = g.levels, m = g.allAudioTracks, p = g.loadLevel, E = g.config;
                if (1 === v.length)
                    return 0;
                var T, S = v[d], L = !(null == S || null == (o = S.details) || !o.live), A = -1 === p || -1 === h, R = "SDR", k = (null == S ? void 0 : S.frameRate) || 0, b = E.audioPreference, D = E.videoPreference, I = this.audioTracksByGroup || (this.audioTracksByGroup = function(t) {
                    return t.reduce((function(t, e) {
                        var r = t.groups[e.groupId];
                        r || (r = t.groups[e.groupId] = {
                            tracks: [],
                            channels: {
                                2: 0
                            },
                            hasDefault: !1,
                            hasAutoSelect: !1
                        }),
                        r.tracks.push(e);
                        var i = e.channels || "2";
                        return r.channels[i] = (r.channels[i] || 0) + 1,
                        r.hasDefault = r.hasDefault || e.default,
                        r.hasAutoSelect = r.hasAutoSelect || e.autoselect,
                        r.hasDefault && (t.hasDefaultAudio = !0),
                        r.hasAutoSelect && (t.hasAutoSelectAudio = !0),
                        t
                    }
                    ), {
                        hasDefaultAudio: !1,
                        hasAutoSelectAudio: !1,
                        groups: {}
                    })
                }(m));
                if (A) {
                    if (-1 !== this.firstSelection)
                        return this.firstSelection;
                    var C = this.codecTiers || (this.codecTiers = function(t, e, r, i) {
                        return t.slice(r, i + 1).reduce((function(t, r) {
                            if (!r.codecSet)
                                return t;
                            var i = r.audioGroups
                              , n = t[r.codecSet];
                            n || (t[r.codecSet] = n = {
                                minBitrate: 1 / 0,
                                minHeight: 1 / 0,
                                minFramerate: 1 / 0,
                                maxScore: 0,
                                videoRanges: {
                                    SDR: 0
                                },
                                channels: {
                                    2: 0
                                },
                                hasDefaultAudio: !i,
                                fragmentError: 0
                            }),
                            n.minBitrate = Math.min(n.minBitrate, r.bitrate);
                            var a = Math.min(r.height, r.width);
                            return n.minHeight = Math.min(n.minHeight, a),
                            n.minFramerate = Math.min(n.minFramerate, r.frameRate),
                            n.maxScore = Math.max(n.maxScore, r.score),
                            n.fragmentError += r.fragmentError,
                            n.videoRanges[r.videoRange] = (n.videoRanges[r.videoRange] || 0) + 1,
                            i && i.forEach((function(t) {
                                if (t) {
                                    var r = e.groups[t];
                                    n.hasDefaultAudio = n.hasDefaultAudio || e.hasDefaultAudio ? r.hasDefault : r.hasAutoSelect || !e.hasDefaultAudio && !e.hasAutoSelectAudio,
                                    Object.keys(r.channels).forEach((function(t) {
                                        n.channels[t] = (n.channels[t] || 0) + r.channels[t]
                                    }
                                    ))
                                }
                            }
                            )),
                            t
                        }
                        ), {})
                    }(v, I, e, r))
                      , _ = function(t, e, r, i, n) {
                        for (var a = Object.keys(t), s = null == i ? void 0 : i.channels, o = null == i ? void 0 : i.audioCodec, l = s && 2 === parseInt(s), u = !0, h = !1, d = 1 / 0, c = 1 / 0, f = 1 / 0, g = 0, v = [], m = Fr(e, n), p = m.preferHDR, E = m.allowedVideoRanges, T = function() {
                            var e = t[a[S]];
                            u = e.channels[2] > 0,
                            d = Math.min(d, e.minHeight),
                            c = Math.min(c, e.minFramerate),
                            f = Math.min(f, e.minBitrate);
                            var r = E.filter((function(t) {
                                return e.videoRanges[t] > 0
                            }
                            ));
                            r.length > 0 && (h = !0,
                            v = r)
                        }, S = a.length; S--; )
                            T();
                        d = y(d) ? d : 0,
                        c = y(c) ? c : 0;
                        var L = Math.max(1080, d)
                          , A = Math.max(30, c);
                        return f = y(f) ? f : r,
                        r = Math.max(f, r),
                        h || (e = void 0,
                        v = []),
                        {
                            codecSet: a.reduce((function(e, i) {
                                var n = t[i];
                                if (i === e)
                                    return e;
                                if (n.minBitrate > r)
                                    return Mr(i, "min bitrate of " + n.minBitrate + " > current estimate of " + r),
                                    e;
                                if (!n.hasDefaultAudio)
                                    return Mr(i, "no renditions with default or auto-select sound found"),
                                    e;
                                if (o && i.indexOf(o.substring(0, 4)) % 5 != 0)
                                    return Mr(i, 'audio codec preference "' + o + '" not found'),
                                    e;
                                if (s && !l) {
                                    if (!n.channels[s])
                                        return Mr(i, "no renditions with " + s + " channel sound found (channels options: " + Object.keys(n.channels) + ")"),
                                        e
                                } else if ((!o || l) && u && 0 === n.channels[2])
                                    return Mr(i, "no renditions with stereo sound found"),
                                    e;
                                return n.minHeight > L ? (Mr(i, "min resolution of " + n.minHeight + " > maximum of " + L),
                                e) : n.minFramerate > A ? (Mr(i, "min framerate of " + n.minFramerate + " > maximum of " + A),
                                e) : v.some((function(t) {
                                    return n.videoRanges[t] > 0
                                }
                                )) ? n.maxScore < g ? (Mr(i, "max score of " + n.maxScore + " < selected max of " + g),
                                e) : e && (oe(i) >= oe(e) || n.fragmentError > t[e].fragmentError) ? e : (g = n.maxScore,
                                i) : (Mr(i, "no variants with VIDEO-RANGE of " + JSON.stringify(v) + " found"),
                                e)
                            }
                            ), void 0),
                            videoRanges: v,
                            preferHDR: p,
                            minFramerate: c,
                            minBitrate: f
                        }
                    }(C, R, t, b, D)
                      , x = _.codecSet
                      , P = _.videoRanges
                      , F = _.minFramerate
                      , M = _.minBitrate
                      , O = _.preferHDR;
                    T = x,
                    R = O ? P[P.length - 1] : P[0],
                    k = F,
                    t = Math.max(t, M),
                    w.log("[abr] picked start tier " + JSON.stringify(_))
                } else
                    T = null == S ? void 0 : S.codecSet,
                    R = null == S ? void 0 : S.videoRange;
                for (var N, U = f ? f.duration : c ? c.duration : 0, B = this.bwEstimator.getEstimateTTFB() / 1e3, G = [], K = function() {
                    var e, o = v[H], c = H > d;
                    if (!o)
                        return 0;
                    if (E.useMediaCapabilities && !o.supportedResult && !o.supportedPromise) {
                        var g = navigator.mediaCapabilities;
                        "function" == typeof (null == g ? void 0 : g.decodingInfo) && function(t, e, r, i, n, a) {
                            var s = t.audioCodec ? t.audioGroups : null
                              , o = null == a ? void 0 : a.audioCodec
                              , l = null == a ? void 0 : a.channels
                              , u = l ? parseInt(l) : o ? 1 / 0 : 2
                              , h = null;
                            if (null != s && s.length)
                                try {
                                    h = 1 === s.length && s[0] ? e.groups[s[0]].channels : s.reduce((function(t, r) {
                                        if (r) {
                                            var i = e.groups[r];
                                            if (!i)
                                                throw new Error("Audio track group " + r + " not found");
                                            Object.keys(i.channels).forEach((function(e) {
                                                t[e] = (t[e] || 0) + i.channels[e]
                                            }
                                            ))
                                        }
                                        return t
                                    }
                                    ), {
                                        2: 0
                                    })
                                } catch (t) {
                                    return !0
                                }
                            return void 0 !== t.videoCodec && (t.width > 1920 && t.height > 1088 || t.height > 1920 && t.width > 1088 || t.frameRate > Math.max(i, 30) || "SDR" !== t.videoRange && t.videoRange !== r || t.bitrate > Math.max(n, 8e6)) || !!h && y(u) && Object.keys(h).some((function(t) {
                                return parseInt(t) > u
                            }
                            ))
                        }(o, I, R, k, t, b) ? (o.supportedPromise = Pr(o, I, g),
                        o.supportedPromise.then((function(t) {
                            if (l.hls) {
                                o.supportedResult = t;
                                var e = l.hls.levels
                                  , r = e.indexOf(o);
                                t.error ? w.warn('[abr] MediaCapabilities decodingInfo error: "' + t.error + '" for level ' + r + " " + JSON.stringify(t)) : t.supported || (w.warn("[abr] Unsupported MediaCapabilities decodingInfo result for level " + r + " " + JSON.stringify(t)),
                                r > -1 && e.length > 1 && (w.log("[abr] Removing unsupported level " + r),
                                l.hls.removeLevel(r)))
                            }
                        }
                        ))) : o.supportedResult = _r
                    }
                    if (T && o.codecSet !== T || R && o.videoRange !== R || c && k > o.frameRate || !c && k > 0 && k < o.frameRate || o.supportedResult && (null == (e = o.supportedResult.decodingInfoResults) || !e[0].smooth))
                        return G.push(H),
                        0;
                    var m, D = o.details, C = (f ? null == D ? void 0 : D.partTarget : null == D ? void 0 : D.averagetargetduration) || U;
                    m = c ? s * t : a * t;
                    var _ = U && i >= 2 * U && 0 === n ? v[H].averageBitrate : v[H].maxBitrate
                      , x = l.getTimeToLoadFrag(B, m, _ * C, void 0 === D);
                    if (m >= _ && (H === h || 0 === o.loadError && 0 === o.fragmentError) && (x <= B || !y(x) || L && !l.bitrateTestDelay || x < u)) {
                        var P = l.forcedAutoLevel;
                        return H === p || -1 !== P && P === p || (G.length && w.trace("[abr] Skipped level(s) " + G.join(",") + " of " + r + ' max with CODECS and VIDEO-RANGE:"' + v[G[0]].codecs + '" ' + v[G[0]].videoRange + '; not compatible with "' + S.codecs + '" ' + R),
                        w.info("[abr] switch candidate:" + d + "->" + H + " adjustedbw(" + Math.round(m) + ")-bitrate=" + Math.round(m - _) + " ttfb:" + B.toFixed(1) + " avgDuration:" + C.toFixed(1) + " maxFetchDuration:" + u.toFixed(1) + " fetchDuration:" + x.toFixed(1) + " firstSelection:" + A + " codecSet:" + T + " videoRange:" + R + " hls.loadLevel:" + p)),
                        A && (l.firstSelection = H),
                        {
                            v: H
                        }
                    }
                }, H = r; H >= e; H--)
                    if (0 !== (N = K()) && N)
                        return N.v;
                return -1
            }
            ,
            s(t, [{
                key: "firstAutoLevel",
                get: function() {
                    var t = this.hls
                      , e = t.maxAutoLevel
                      , r = t.minAutoLevel
                      , i = this.getBwEstimate()
                      , n = this.hls.config.maxStarvationDelay
                      , a = this.findBestLevel(i, r, e, 0, n, 1, 1);
                    if (a > -1)
                        return a;
                    var s = this.hls.firstLevel
                      , o = Math.min(Math.max(s, r), e);
                    return w.warn("[abr] Could not find best starting auto level. Defaulting to first in playlist " + s + " clamped to " + o),
                    o
                }
            }, {
                key: "forcedAutoLevel",
                get: function() {
                    return this.nextAutoLevelKey ? -1 : this._nextAutoLevel
                }
            }, {
                key: "nextAutoLevel",
                get: function() {
                    var t = this.forcedAutoLevel
                      , e = this.bwEstimator.canEstimate()
                      , r = this.lastLoadedFragLevel > -1;
                    if (!(-1 === t || e && r && this.nextAutoLevelKey !== this.getAutoLevelKey()))
                        return t;
                    var i = e && r ? this.getNextABRAutoLevel() : this.firstAutoLevel;
                    if (-1 !== t) {
                        var n = this.hls.levels;
                        if (n.length > Math.max(t, i) && n[t].loadError <= n[i].loadError)
                            return t
                    }
                    return this._nextAutoLevel = i,
                    this.nextAutoLevelKey = this.getAutoLevelKey(),
                    i
                },
                set: function(t) {
                    var e = this.hls
                      , r = e.maxAutoLevel
                      , i = e.minAutoLevel
                      , n = Math.min(Math.max(t, i), r);
                    this._nextAutoLevel !== n && (this.nextAutoLevelKey = "",
                    this._nextAutoLevel = n)
                }
            }]),
            t
        }()
          , Kr = function() {
            function t() {
                this._boundTick = void 0,
                this._tickTimer = null,
                this._tickInterval = null,
                this._tickCallCount = 0,
                this._boundTick = this.tick.bind(this)
            }
            var e = t.prototype;
            return e.destroy = function() {
                this.onHandlerDestroying(),
                this.onHandlerDestroyed()
            }
            ,
            e.onHandlerDestroying = function() {
                this.clearNextTick(),
                this.clearInterval()
            }
            ,
            e.onHandlerDestroyed = function() {}
            ,
            e.hasInterval = function() {
                return !!this._tickInterval
            }
            ,
            e.hasNextTick = function() {
                return !!this._tickTimer
            }
            ,
            e.setInterval = function(t) {
                return !this._tickInterval && (this._tickCallCount = 0,
                this._tickInterval = self.setInterval(this._boundTick, t),
                !0)
            }
            ,
            e.clearInterval = function() {
                return !!this._tickInterval && (self.clearInterval(this._tickInterval),
                this._tickInterval = null,
                !0)
            }
            ,
            e.clearNextTick = function() {
                return !!this._tickTimer && (self.clearTimeout(this._tickTimer),
                this._tickTimer = null,
                !0)
            }
            ,
            e.tick = function() {
                this._tickCallCount++,
                1 === this._tickCallCount && (this.doTick(),
                this._tickCallCount > 1 && this.tickImmediate(),
                this._tickCallCount = 0)
            }
            ,
            e.tickImmediate = function() {
                this.clearNextTick(),
                this._tickTimer = self.setTimeout(this._boundTick, 0)
            }
            ,
            e.doTick = function() {}
            ,
            t
        }()
          , Hr = "NOT_LOADED"
          , Vr = "APPENDING"
          , Yr = "PARTIAL"
          , Wr = "OK"
          , jr = function() {
            function t(t) {
                this.activePartLists = Object.create(null),
                this.endListFragments = Object.create(null),
                this.fragments = Object.create(null),
                this.timeRanges = Object.create(null),
                this.bufferPadding = .2,
                this.hls = void 0,
                this.hasGaps = !1,
                this.hls = t,
                this._registerListeners()
            }
            var e = t.prototype;
            return e._registerListeners = function() {
                var t = this.hls;
                t.on(S.BUFFER_APPENDED, this.onBufferAppended, this),
                t.on(S.FRAG_BUFFERED, this.onFragBuffered, this),
                t.on(S.FRAG_LOADED, this.onFragLoaded, this)
            }
            ,
            e._unregisterListeners = function() {
                var t = this.hls;
                t.off(S.BUFFER_APPENDED, this.onBufferAppended, this),
                t.off(S.FRAG_BUFFERED, this.onFragBuffered, this),
                t.off(S.FRAG_LOADED, this.onFragLoaded, this)
            }
            ,
            e.destroy = function() {
                this._unregisterListeners(),
                this.fragments = this.activePartLists = this.endListFragments = this.timeRanges = null
            }
            ,
            e.getAppendedFrag = function(t, e) {
                var r = this.activePartLists[e];
                if (r)
                    for (var i = r.length; i--; ) {
                        var n = r[i];
                        if (!n)
                            break;
                        var a = n.end;
                        if (n.start <= t && null !== a && t <= a)
                            return n
                    }
                return this.getBufferedFrag(t, e)
            }
            ,
            e.getBufferedFrag = function(t, e) {
                for (var r = this.fragments, i = Object.keys(r), n = i.length; n--; ) {
                    var a = r[i[n]];
                    if ((null == a ? void 0 : a.body.type) === e && a.buffered) {
                        var s = a.body;
                        if (s.start <= t && t <= s.end)
                            return s
                    }
                }
                return null
            }
            ,
            e.detectEvictedFragments = function(t, e, r, i) {
                var n = this;
                this.timeRanges && (this.timeRanges[t] = e);
                var a = (null == i ? void 0 : i.fragment.sn) || -1;
                Object.keys(this.fragments).forEach((function(i) {
                    var s = n.fragments[i];
                    if (s && !(a >= s.body.sn))
                        if (s.buffered || s.loaded) {
                            var o = s.range[t];
                            o && o.time.some((function(t) {
                                var r = !n.isTimeBuffered(t.startPTS, t.endPTS, e);
                                return r && n.removeFragment(s.body),
                                r
                            }
                            ))
                        } else
                            s.body.type === r && n.removeFragment(s.body)
                }
                ))
            }
            ,
            e.detectPartialFragments = function(t) {
                var e = this
                  , r = this.timeRanges
                  , i = t.frag
                  , n = t.part;
                if (r && "initSegment" !== i.sn) {
                    var a = Xr(i)
                      , s = this.fragments[a];
                    if (!(!s || s.buffered && i.gap)) {
                        var o = !i.relurl;
                        Object.keys(r).forEach((function(t) {
                            var a = i.elementaryStreams[t];
                            if (a) {
                                var l = r[t]
                                  , u = o || !0 === a.partial;
                                s.range[t] = e.getBufferedTimes(i, n, u, l)
                            }
                        }
                        )),
                        s.loaded = null,
                        Object.keys(s.range).length ? (s.buffered = !0,
                        (s.body.endList = i.endList || s.body.endList) && (this.endListFragments[s.body.type] = s),
                        qr(s) || this.removeParts(i.sn - 1, i.type)) : this.removeFragment(s.body)
                    }
                }
            }
            ,
            e.removeParts = function(t, e) {
                var r = this.activePartLists[e];
                r && (this.activePartLists[e] = r.filter((function(e) {
                    return e.fragment.sn >= t
                }
                )))
            }
            ,
            e.fragBuffered = function(t, e) {
                var r = Xr(t)
                  , i = this.fragments[r];
                !i && e && (i = this.fragments[r] = {
                    body: t,
                    appendedPTS: null,
                    loaded: null,
                    buffered: !1,
                    range: Object.create(null)
                },
                t.gap && (this.hasGaps = !0)),
                i && (i.loaded = null,
                i.buffered = !0)
            }
            ,
            e.getBufferedTimes = function(t, e, r, i) {
                for (var n = {
                    time: [],
                    partial: r
                }, a = t.start, s = t.end, o = t.minEndPTS || s, l = t.maxStartPTS || a, u = 0; u < i.length; u++) {
                    var h = i.start(u) - this.bufferPadding
                      , d = i.end(u) + this.bufferPadding;
                    if (l >= h && o <= d) {
                        n.time.push({
                            startPTS: Math.max(a, i.start(u)),
                            endPTS: Math.min(s, i.end(u))
                        });
                        break
                    }
                    if (a < d && s > h) {
                        var c = Math.max(a, i.start(u))
                          , f = Math.min(s, i.end(u));
                        f > c && (n.partial = !0,
                        n.time.push({
                            startPTS: c,
                            endPTS: f
                        }))
                    } else if (s <= h)
                        break
                }
                return n
            }
            ,
            e.getPartialFragment = function(t) {
                var e, r, i, n = null, a = 0, s = this.bufferPadding, o = this.fragments;
                return Object.keys(o).forEach((function(l) {
                    var u = o[l];
                    u && qr(u) && (r = u.body.start - s,
                    i = u.body.end + s,
                    t >= r && t <= i && (e = Math.min(t - r, i - t),
                    a <= e && (n = u.body,
                    a = e)))
                }
                )),
                n
            }
            ,
            e.isEndListAppended = function(t) {
                var e = this.endListFragments[t];
                return void 0 !== e && (e.buffered || qr(e))
            }
            ,
            e.getState = function(t) {
                var e = Xr(t)
                  , r = this.fragments[e];
                return r ? r.buffered ? qr(r) ? Yr : Wr : Vr : Hr
            }
            ,
            e.isTimeBuffered = function(t, e, r) {
                for (var i, n, a = 0; a < r.length; a++) {
                    if (i = r.start(a) - this.bufferPadding,
                    n = r.end(a) + this.bufferPadding,
                    t >= i && e <= n)
                        return !0;
                    if (e <= i)
                        return !1
                }
                return !1
            }
            ,
            e.onFragLoaded = function(t, e) {
                var r = e.frag
                  , i = e.part;
                if ("initSegment" !== r.sn && !r.bitrateTest) {
                    var n = i ? null : e
                      , a = Xr(r);
                    this.fragments[a] = {
                        body: r,
                        appendedPTS: null,
                        loaded: n,
                        buffered: !1,
                        range: Object.create(null)
                    }
                }
            }
            ,
            e.onBufferAppended = function(t, e) {
                var r = this
                  , i = e.frag
                  , n = e.part
                  , a = e.timeRanges;
                if ("initSegment" !== i.sn) {
                    var s = i.type;
                    if (n) {
                        var o = this.activePartLists[s];
                        o || (this.activePartLists[s] = o = []),
                        o.push(n)
                    }
                    this.timeRanges = a,
                    Object.keys(a).forEach((function(t) {
                        var e = a[t];
                        r.detectEvictedFragments(t, e, s, n)
                    }
                    ))
                }
            }
            ,
            e.onFragBuffered = function(t, e) {
                this.detectPartialFragments(e)
            }
            ,
            e.hasFragment = function(t) {
                var e = Xr(t);
                return !!this.fragments[e]
            }
            ,
            e.hasParts = function(t) {
                var e;
                return !(null == (e = this.activePartLists[t]) || !e.length)
            }
            ,
            e.removeFragmentsInRange = function(t, e, r, i, n) {
                var a = this;
                i && !this.hasGaps || Object.keys(this.fragments).forEach((function(s) {
                    var o = a.fragments[s];
                    if (o) {
                        var l = o.body;
                        l.type !== r || i && !l.gap || l.start < e && l.end > t && (o.buffered || n) && a.removeFragment(l)
                    }
                }
                ))
            }
            ,
            e.removeFragment = function(t) {
                var e = Xr(t);
                t.stats.loaded = 0,
                t.clearElementaryStreamInfo();
                var r = this.activePartLists[t.type];
                if (r) {
                    var i = t.sn;
                    this.activePartLists[t.type] = r.filter((function(t) {
                        return t.fragment.sn !== i
                    }
                    ))
                }
                delete this.fragments[e],
                t.endList && delete this.endListFragments[t.type]
            }
            ,
            e.removeAllFragments = function() {
                this.fragments = Object.create(null),
                this.endListFragments = Object.create(null),
                this.activePartLists = Object.create(null),
                this.hasGaps = !1
            }
            ,
            t
        }();
        function qr(t) {
            var e, r, i;
            return t.buffered && (t.body.gap || (null == (e = t.range.video) ? void 0 : e.partial) || (null == (r = t.range.audio) ? void 0 : r.partial) || (null == (i = t.range.audiovideo) ? void 0 : i.partial))
        }
        function Xr(t) {
            return t.type + "_" + t.level + "_" + t.sn
        }
        var zr = {
            length: 0,
            start: function() {
                return 0
            },
            end: function() {
                return 0
            }
        }
          , Qr = function() {
            function t() {}
            return t.isBuffered = function(e, r) {
                try {
                    if (e)
                        for (var i = t.getBuffered(e), n = 0; n < i.length; n++)
                            if (r >= i.start(n) && r <= i.end(n))
                                return !0
                } catch (t) {}
                return !1
            }
            ,
            t.bufferInfo = function(e, r, i) {
                try {
                    if (e) {
                        var n, a = t.getBuffered(e), s = [];
                        for (n = 0; n < a.length; n++)
                            s.push({
                                start: a.start(n),
                                end: a.end(n)
                            });
                        return this.bufferedInfo(s, r, i)
                    }
                } catch (t) {}
                return {
                    len: 0,
                    start: r,
                    end: r,
                    nextStart: void 0
                }
            }
            ,
            t.bufferedInfo = function(t, e, r) {
                e = Math.max(0, e),
                t.sort((function(t, e) {
                    var r = t.start - e.start;
                    return r || e.end - t.end
                }
                ));
                var i = [];
                if (r)
                    for (var n = 0; n < t.length; n++) {
                        var a = i.length;
                        if (a) {
                            var s = i[a - 1].end;
                            t[n].start - s < r ? t[n].end > s && (i[a - 1].end = t[n].end) : i.push(t[n])
                        } else
                            i.push(t[n])
                    }
                else
                    i = t;
                for (var o, l = 0, u = e, h = e, d = 0; d < i.length; d++) {
                    var c = i[d].start
                      , f = i[d].end;
                    if (e + r >= c && e < f)
                        u = c,
                        l = (h = f) - e;
                    else if (e + r < c) {
                        o = c;
                        break
                    }
                }
                return {
                    len: l,
                    start: u || 0,
                    end: h || 0,
                    nextStart: o
                }
            }
            ,
            t.getBuffered = function(t) {
                try {
                    return t.buffered
                } catch (t) {
                    return w.log("failed to get media.buffered", t),
                    zr
                }
            }
            ,
            t
        }()
          , Jr = function(t, e, r, i, n, a) {
            void 0 === i && (i = 0),
            void 0 === n && (n = -1),
            void 0 === a && (a = !1),
            this.level = void 0,
            this.sn = void 0,
            this.part = void 0,
            this.id = void 0,
            this.size = void 0,
            this.partial = void 0,
            this.transmuxing = {
                start: 0,
                executeStart: 0,
                executeEnd: 0,
                end: 0
            },
            this.buffering = {
                audio: {
                    start: 0,
                    executeStart: 0,
                    executeEnd: 0,
                    end: 0
                },
                video: {
                    start: 0,
                    executeStart: 0,
                    executeEnd: 0,
                    end: 0
                },
                audiovideo: {
                    start: 0,
                    executeStart: 0,
                    executeEnd: 0,
                    end: 0
                }
            },
            this.level = t,
            this.sn = e,
            this.id = r,
            this.size = i,
            this.part = n,
            this.partial = a
        };
        function $r(t, e) {
            for (var r = 0, i = t.length; r < i; r++) {
                var n;
                if ((null == (n = t[r]) ? void 0 : n.cc) === e)
                    return t[r]
            }
            return null
        }
        function Zr(t, e) {
            if (t) {
                var r = t.start + e;
                t.start = t.startPTS = r,
                t.endPTS = r + t.duration
            }
        }
        function ti(t, e) {
            for (var r = e.fragments, i = 0, n = r.length; i < n; i++)
                Zr(r[i], t);
            e.fragmentHint && Zr(e.fragmentHint, t),
            e.alignedSliding = !0
        }
        function ei(t, e, r) {
            e && (function(t, e, r) {
                if (function(t, e, r) {
                    return !(!e || !(r.endCC > r.startCC || t && t.cc < r.startCC))
                }(t, r, e)) {
                    var i = function(t, e) {
                        var r = t.fragments
                          , i = e.fragments;
                        if (i.length && r.length) {
                            var n = $r(r, i[0].cc);
                            if (n && (!n || n.startPTS))
                                return n;
                            w.log("No frag in previous level to align on")
                        } else
                            w.log("No fragments to align")
                    }(r, e);
                    i && y(i.start) && (w.log("Adjusting PTS using last level due to CC increase within current level " + e.url),
                    ti(i.start, e))
                }
            }(t, r, e),
            !r.alignedSliding && e && ri(r, e),
            r.alignedSliding || !e || r.skippedSegments || sr(e, r))
        }
        function ri(t, e) {
            if (t.hasProgramDateTime && e.hasProgramDateTime) {
                var r = t.fragments
                  , i = e.fragments;
                if (r.length && i.length) {
                    var n, a, s = Math.min(e.endCC, t.endCC);
                    e.startCC < s && t.startCC < s && (n = $r(i, s),
                    a = $r(r, s)),
                    n && a || (a = $r(r, (n = i[Math.floor(i.length / 2)]).cc) || r[Math.floor(r.length / 2)]);
                    var o = n.programDateTime
                      , l = a.programDateTime;
                    o && l && ti((l - o) / 1e3 - (a.start - n.start), t)
                }
            }
        }
        var ii = Math.pow(2, 17)
          , ni = function() {
            function t(t) {
                this.config = void 0,
                this.loader = null,
                this.partLoadTimeout = -1,
                this.config = t
            }
            var e = t.prototype;
            return e.destroy = function() {
                this.loader && (this.loader.destroy(),
                this.loader = null)
            }
            ,
            e.abort = function() {
                this.loader && this.loader.abort()
            }
            ,
            e.load = function(t, e) {
                var r = this
                  , n = t.url;
                if (!n)
                    return Promise.reject(new oi({
                        type: L.NETWORK_ERROR,
                        details: A.FRAG_LOAD_ERROR,
                        fatal: !1,
                        frag: t,
                        error: new Error("Fragment does not have a " + (n ? "part list" : "url")),
                        networkDetails: null
                    }));
                this.abort();
                var a = this.config
                  , s = a.fLoader
                  , o = a.loader;
                return new Promise((function(l, u) {
                    if (r.loader && r.loader.destroy(),
                    t.gap) {
                        if (t.tagList.some((function(t) {
                            return "GAP" === t[0]
                        }
                        )))
                            return void u(si(t));
                        t.gap = !1
                    }
                    var h = r.loader = t.loader = s ? new s(a) : new o(a)
                      , d = ai(t)
                      , c = gr(a.fragLoadPolicy.default)
                      , f = {
                        loadPolicy: c,
                        timeout: c.maxLoadTimeMs,
                        maxRetry: 0,
                        retryDelay: 0,
                        maxRetryDelay: 0,
                        highWaterMark: "initSegment" === t.sn ? 1 / 0 : ii
                    };
                    t.stats = h.stats,
                    h.load(d, f, {
                        onSuccess: function(e, i, n, a) {
                            r.resetLoader(t, h);
                            var s = e.data;
                            n.resetIV && t.decryptdata && (t.decryptdata.iv = new Uint8Array(s.slice(0, 16)),
                            s = s.slice(16)),
                            l({
                                frag: t,
                                part: null,
                                payload: s,
                                networkDetails: a
                            })
                        },
                        onError: function(e, a, s, o) {
                            r.resetLoader(t, h),
                            u(new oi({
                                type: L.NETWORK_ERROR,
                                details: A.FRAG_LOAD_ERROR,
                                fatal: !1,
                                frag: t,
                                response: i({
                                    url: n,
                                    data: void 0
                                }, e),
                                error: new Error("HTTP Error " + e.code + " " + e.text),
                                networkDetails: s,
                                stats: o
                            }))
                        },
                        onAbort: function(e, i, n) {
                            r.resetLoader(t, h),
                            u(new oi({
                                type: L.NETWORK_ERROR,
                                details: A.INTERNAL_ABORTED,
                                fatal: !1,
                                frag: t,
                                error: new Error("Aborted"),
                                networkDetails: n,
                                stats: e
                            }))
                        },
                        onTimeout: function(e, i, n) {
                            r.resetLoader(t, h),
                            u(new oi({
                                type: L.NETWORK_ERROR,
                                details: A.FRAG_LOAD_TIMEOUT,
                                fatal: !1,
                                frag: t,
                                error: new Error("Timeout after " + f.timeout + "ms"),
                                networkDetails: n,
                                stats: e
                            }))
                        },
                        onProgress: function(r, i, n, a) {
                            e && e({
                                frag: t,
                                part: null,
                                payload: n,
                                networkDetails: a
                            })
                        }
                    })
                }
                ))
            }
            ,
            e.loadPart = function(t, e, r) {
                var n = this;
                this.abort();
                var a = this.config
                  , s = a.fLoader
                  , o = a.loader;
                return new Promise((function(l, u) {
                    if (n.loader && n.loader.destroy(),
                    t.gap || e.gap)
                        u(si(t, e));
                    else {
                        var h = n.loader = t.loader = s ? new s(a) : new o(a)
                          , d = ai(t, e)
                          , c = gr(a.fragLoadPolicy.default)
                          , f = {
                            loadPolicy: c,
                            timeout: c.maxLoadTimeMs,
                            maxRetry: 0,
                            retryDelay: 0,
                            maxRetryDelay: 0,
                            highWaterMark: ii
                        };
                        e.stats = h.stats,
                        h.load(d, f, {
                            onSuccess: function(i, a, s, o) {
                                n.resetLoader(t, h),
                                n.updateStatsFromPart(t, e);
                                var u = {
                                    frag: t,
                                    part: e,
                                    payload: i.data,
                                    networkDetails: o
                                };
                                r(u),
                                l(u)
                            },
                            onError: function(r, a, s, o) {
                                n.resetLoader(t, h),
                                u(new oi({
                                    type: L.NETWORK_ERROR,
                                    details: A.FRAG_LOAD_ERROR,
                                    fatal: !1,
                                    frag: t,
                                    part: e,
                                    response: i({
                                        url: d.url,
                                        data: void 0
                                    }, r),
                                    error: new Error("HTTP Error " + r.code + " " + r.text),
                                    networkDetails: s,
                                    stats: o
                                }))
                            },
                            onAbort: function(r, i, a) {
                                t.stats.aborted = e.stats.aborted,
                                n.resetLoader(t, h),
                                u(new oi({
                                    type: L.NETWORK_ERROR,
                                    details: A.INTERNAL_ABORTED,
                                    fatal: !1,
                                    frag: t,
                                    part: e,
                                    error: new Error("Aborted"),
                                    networkDetails: a,
                                    stats: r
                                }))
                            },
                            onTimeout: function(r, i, a) {
                                n.resetLoader(t, h),
                                u(new oi({
                                    type: L.NETWORK_ERROR,
                                    details: A.FRAG_LOAD_TIMEOUT,
                                    fatal: !1,
                                    frag: t,
                                    part: e,
                                    error: new Error("Timeout after " + f.timeout + "ms"),
                                    networkDetails: a,
                                    stats: r
                                }))
                            }
                        })
                    }
                }
                ))
            }
            ,
            e.updateStatsFromPart = function(t, e) {
                var r = t.stats
                  , i = e.stats
                  , n = i.total;
                if (r.loaded += i.loaded,
                n) {
                    var a = Math.round(t.duration / e.duration)
                      , s = Math.min(Math.round(r.loaded / n), a)
                      , o = (a - s) * Math.round(r.loaded / s);
                    r.total = r.loaded + o
                } else
                    r.total = Math.max(r.loaded, r.total);
                var l = r.loading
                  , u = i.loading;
                l.start ? l.first += u.first - u.start : (l.start = u.start,
                l.first = u.first),
                l.end = u.end
            }
            ,
            e.resetLoader = function(t, e) {
                t.loader = null,
                this.loader === e && (self.clearTimeout(this.partLoadTimeout),
                this.loader = null),
                e.destroy()
            }
            ,
            t
        }();
        function ai(t, e) {
            void 0 === e && (e = null);
            var r = e || t
              , i = {
                frag: t,
                part: e,
                responseType: "arraybuffer",
                url: r.url,
                headers: {},
                rangeStart: 0,
                rangeEnd: 0
            }
              , n = r.byteRangeStartOffset
              , a = r.byteRangeEndOffset;
            if (y(n) && y(a)) {
                var s, o = n, l = a;
                if ("initSegment" === t.sn && "AES-128" === (null == (s = t.decryptdata) ? void 0 : s.method)) {
                    var u = a - n;
                    u % 16 && (l = a + (16 - u % 16)),
                    0 !== n && (i.resetIV = !0,
                    o = n - 16)
                }
                i.rangeStart = o,
                i.rangeEnd = l
            }
            return i
        }
        function si(t, e) {
            var r = new Error("GAP " + (t.gap ? "tag" : "attribute") + " found")
              , i = {
                type: L.MEDIA_ERROR,
                details: A.FRAG_GAP,
                fatal: !1,
                frag: t,
                error: r,
                networkDetails: null
            };
            return e && (i.part = e),
            (e || t).stats.aborted = !0,
            new oi(i)
        }
        var oi = function(t) {
            function e(e) {
                var r;
                return (r = t.call(this, e.error.message) || this).data = void 0,
                r.data = e,
                r
            }
            return l(e, t),
            e
        }(c(Error))
          , li = function() {
            function t(t, e) {
                this.subtle = void 0,
                this.aesIV = void 0,
                this.subtle = t,
                this.aesIV = e
            }
            return t.prototype.decrypt = function(t, e) {
                return this.subtle.decrypt({
                    name: "AES-CBC",
                    iv: this.aesIV
                }, e, t)
            }
            ,
            t
        }()
          , ui = function() {
            function t(t, e) {
                this.subtle = void 0,
                this.key = void 0,
                this.subtle = t,
                this.key = e
            }
            return t.prototype.expandKey = function() {
                return this.subtle.importKey("raw", this.key, {
                    name: "AES-CBC"
                }, !1, ["encrypt", "decrypt"])
            }
            ,
            t
        }()
          , hi = function() {
            function t() {
                this.rcon = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54],
                this.subMix = [new Uint32Array(256), new Uint32Array(256), new Uint32Array(256), new Uint32Array(256)],
                this.invSubMix = [new Uint32Array(256), new Uint32Array(256), new Uint32Array(256), new Uint32Array(256)],
                this.sBox = new Uint32Array(256),
                this.invSBox = new Uint32Array(256),
                this.key = new Uint32Array(0),
                this.ksRows = 0,
                this.keySize = 0,
                this.keySchedule = void 0,
                this.invKeySchedule = void 0,
                this.initTable()
            }
            var e = t.prototype;
            return e.uint8ArrayToUint32Array_ = function(t) {
                for (var e = new DataView(t), r = new Uint32Array(4), i = 0; i < 4; i++)
                    r[i] = e.getUint32(4 * i);
                return r
            }
            ,
            e.initTable = function() {
                var t = this.sBox
                  , e = this.invSBox
                  , r = this.subMix
                  , i = r[0]
                  , n = r[1]
                  , a = r[2]
                  , s = r[3]
                  , o = this.invSubMix
                  , l = o[0]
                  , u = o[1]
                  , h = o[2]
                  , d = o[3]
                  , c = new Uint32Array(256)
                  , f = 0
                  , g = 0
                  , v = 0;
                for (v = 0; v < 256; v++)
                    c[v] = v < 128 ? v << 1 : v << 1 ^ 283;
                for (v = 0; v < 256; v++) {
                    var m = g ^ g << 1 ^ g << 2 ^ g << 3 ^ g << 4;
                    m = m >>> 8 ^ 255 & m ^ 99,
                    t[f] = m,
                    e[m] = f;
                    var p = c[f]
                      , y = c[p]
                      , E = c[y]
                      , T = 257 * c[m] ^ 16843008 * m;
                    i[f] = T << 24 | T >>> 8,
                    n[f] = T << 16 | T >>> 16,
                    a[f] = T << 8 | T >>> 24,
                    s[f] = T,
                    T = 16843009 * E ^ 65537 * y ^ 257 * p ^ 16843008 * f,
                    l[m] = T << 24 | T >>> 8,
                    u[m] = T << 16 | T >>> 16,
                    h[m] = T << 8 | T >>> 24,
                    d[m] = T,
                    f ? (f = p ^ c[c[c[E ^ p]]],
                    g ^= c[c[g]]) : f = g = 1
                }
            }
            ,
            e.expandKey = function(t) {
                for (var e = this.uint8ArrayToUint32Array_(t), r = !0, i = 0; i < e.length && r; )
                    r = e[i] === this.key[i],
                    i++;
                if (!r) {
                    this.key = e;
                    var n = this.keySize = e.length;
                    if (4 !== n && 6 !== n && 8 !== n)
                        throw new Error("Invalid aes key size=" + n);
                    var a, s, o, l, u = this.ksRows = 4 * (n + 6 + 1), h = this.keySchedule = new Uint32Array(u), d = this.invKeySchedule = new Uint32Array(u), c = this.sBox, f = this.rcon, g = this.invSubMix, v = g[0], m = g[1], p = g[2], y = g[3];
                    for (a = 0; a < u; a++)
                        a < n ? o = h[a] = e[a] : (l = o,
                        a % n == 0 ? (l = c[(l = l << 8 | l >>> 24) >>> 24] << 24 | c[l >>> 16 & 255] << 16 | c[l >>> 8 & 255] << 8 | c[255 & l],
                        l ^= f[a / n | 0] << 24) : n > 6 && a % n == 4 && (l = c[l >>> 24] << 24 | c[l >>> 16 & 255] << 16 | c[l >>> 8 & 255] << 8 | c[255 & l]),
                        h[a] = o = (h[a - n] ^ l) >>> 0);
                    for (s = 0; s < u; s++)
                        a = u - s,
                        l = 3 & s ? h[a] : h[a - 4],
                        d[s] = s < 4 || a <= 4 ? l : v[c[l >>> 24]] ^ m[c[l >>> 16 & 255]] ^ p[c[l >>> 8 & 255]] ^ y[c[255 & l]],
                        d[s] = d[s] >>> 0
                }
            }
            ,
            e.networkToHostOrderSwap = function(t) {
                return t << 24 | (65280 & t) << 8 | (16711680 & t) >> 8 | t >>> 24
            }
            ,
            e.decrypt = function(t, e, r) {
                for (var i, n, a, s, o, l, u, h, d, c, f, g, v, m, p = this.keySize + 6, y = this.invKeySchedule, E = this.invSBox, T = this.invSubMix, S = T[0], L = T[1], A = T[2], R = T[3], k = this.uint8ArrayToUint32Array_(r), b = k[0], D = k[1], I = k[2], w = k[3], C = new Int32Array(t), _ = new Int32Array(C.length), x = this.networkToHostOrderSwap; e < C.length; ) {
                    for (d = x(C[e]),
                    c = x(C[e + 1]),
                    f = x(C[e + 2]),
                    g = x(C[e + 3]),
                    o = d ^ y[0],
                    l = g ^ y[1],
                    u = f ^ y[2],
                    h = c ^ y[3],
                    v = 4,
                    m = 1; m < p; m++)
                        i = S[o >>> 24] ^ L[l >> 16 & 255] ^ A[u >> 8 & 255] ^ R[255 & h] ^ y[v],
                        n = S[l >>> 24] ^ L[u >> 16 & 255] ^ A[h >> 8 & 255] ^ R[255 & o] ^ y[v + 1],
                        a = S[u >>> 24] ^ L[h >> 16 & 255] ^ A[o >> 8 & 255] ^ R[255 & l] ^ y[v + 2],
                        s = S[h >>> 24] ^ L[o >> 16 & 255] ^ A[l >> 8 & 255] ^ R[255 & u] ^ y[v + 3],
                        o = i,
                        l = n,
                        u = a,
                        h = s,
                        v += 4;
                    i = E[o >>> 24] << 24 ^ E[l >> 16 & 255] << 16 ^ E[u >> 8 & 255] << 8 ^ E[255 & h] ^ y[v],
                    n = E[l >>> 24] << 24 ^ E[u >> 16 & 255] << 16 ^ E[h >> 8 & 255] << 8 ^ E[255 & o] ^ y[v + 1],
                    a = E[u >>> 24] << 24 ^ E[h >> 16 & 255] << 16 ^ E[o >> 8 & 255] << 8 ^ E[255 & l] ^ y[v + 2],
                    s = E[h >>> 24] << 24 ^ E[o >> 16 & 255] << 16 ^ E[l >> 8 & 255] << 8 ^ E[255 & u] ^ y[v + 3],
                    _[e] = x(i ^ b),
                    _[e + 1] = x(s ^ D),
                    _[e + 2] = x(a ^ I),
                    _[e + 3] = x(n ^ w),
                    b = d,
                    D = c,
                    I = f,
                    w = g,
                    e += 4
                }
                return _.buffer
            }
            ,
            t
        }()
          , di = function() {
            function t(t, e) {
                var r = (void 0 === e ? {} : e).removePKCS7Padding
                  , i = void 0 === r || r;
                if (this.logEnabled = !0,
                this.removePKCS7Padding = void 0,
                this.subtle = null,
                this.softwareDecrypter = null,
                this.key = null,
                this.fastAesKey = null,
                this.remainderData = null,
                this.currentIV = null,
                this.currentResult = null,
                this.useSoftware = void 0,
                this.useSoftware = t.enableSoftwareAES,
                this.removePKCS7Padding = i,
                i)
                    try {
                        var n = self.crypto;
                        n && (this.subtle = n.subtle || n.webkitSubtle)
                    } catch (t) {}
                null === this.subtle && (this.useSoftware = !0)
            }
            var e = t.prototype;
            return e.destroy = function() {
                this.subtle = null,
                this.softwareDecrypter = null,
                this.key = null,
                this.fastAesKey = null,
                this.remainderData = null,
                this.currentIV = null,
                this.currentResult = null
            }
            ,
            e.isSync = function() {
                return this.useSoftware
            }
            ,
            e.flush = function() {
                var t = this.currentResult
                  , e = this.remainderData;
                if (!t || e)
                    return this.reset(),
                    null;
                var r, i, n, a = new Uint8Array(t);
                return this.reset(),
                this.removePKCS7Padding ? (i = (r = a).byteLength,
                (n = i && new DataView(r.buffer).getUint8(i - 1)) ? nt(r, 0, i - n) : r) : a
            }
            ,
            e.reset = function() {
                this.currentResult = null,
                this.currentIV = null,
                this.remainderData = null,
                this.softwareDecrypter && (this.softwareDecrypter = null)
            }
            ,
            e.decrypt = function(t, e, r) {
                var i = this;
                return this.useSoftware ? new Promise((function(n, a) {
                    i.softwareDecrypt(new Uint8Array(t), e, r);
                    var s = i.flush();
                    s ? n(s.buffer) : a(new Error("[softwareDecrypt] Failed to decrypt data"))
                }
                )) : this.webCryptoDecrypt(new Uint8Array(t), e, r)
            }
            ,
            e.softwareDecrypt = function(t, e, r) {
                var i = this.currentIV
                  , n = this.currentResult
                  , a = this.remainderData;
                this.logOnce("JS AES decrypt"),
                a && (t = Kt(a, t),
                this.remainderData = null);
                var s = this.getValidChunk(t);
                if (!s.length)
                    return null;
                i && (r = i);
                var o = this.softwareDecrypter;
                o || (o = this.softwareDecrypter = new hi),
                o.expandKey(e);
                var l = n;
                return this.currentResult = o.decrypt(s.buffer, 0, r),
                this.currentIV = nt(s, -16).buffer,
                l || null
            }
            ,
            e.webCryptoDecrypt = function(t, e, r) {
                var i = this
                  , n = this.subtle;
                return this.key === e && this.fastAesKey || (this.key = e,
                this.fastAesKey = new ui(n,e)),
                this.fastAesKey.expandKey().then((function(e) {
                    return n ? (i.logOnce("WebCrypto AES decrypt"),
                    new li(n,new Uint8Array(r)).decrypt(t.buffer, e)) : Promise.reject(new Error("web crypto not initialized"))
                }
                )).catch((function(n) {
                    return w.warn("[decrypter]: WebCrypto Error, disable WebCrypto API, " + n.name + ": " + n.message),
                    i.onWebCryptoError(t, e, r)
                }
                ))
            }
            ,
            e.onWebCryptoError = function(t, e, r) {
                this.useSoftware = !0,
                this.logEnabled = !0,
                this.softwareDecrypt(t, e, r);
                var i = this.flush();
                if (i)
                    return i.buffer;
                throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")
            }
            ,
            e.getValidChunk = function(t) {
                var e = t
                  , r = t.length - t.length % 16;
                return r !== t.length && (e = nt(t, 0, r),
                this.remainderData = nt(t, r)),
                e
            }
            ,
            e.logOnce = function(t) {
                this.logEnabled && (w.log("[decrypter]: " + t),
                this.logEnabled = !1)
            }
            ,
            t
        }()
          , ci = function(t) {
            for (var e = "", r = t.length, i = 0; i < r; i++)
                e += "[" + t.start(i).toFixed(3) + "-" + t.end(i).toFixed(3) + "]";
            return e
        }
          , fi = "STOPPED"
          , gi = "IDLE"
          , vi = "KEY_LOADING"
          , mi = "FRAG_LOADING"
          , pi = "FRAG_LOADING_WAITING_RETRY"
          , yi = "WAITING_TRACK"
          , Ei = "PARSING"
          , Ti = "PARSED"
          , Si = "ENDED"
          , Li = "ERROR"
          , Ai = "WAITING_INIT_PTS"
          , Ri = "WAITING_LEVEL"
          , ki = function(t) {
            function e(e, r, i, n, a) {
                var s;
                return (s = t.call(this) || this).hls = void 0,
                s.fragPrevious = null,
                s.fragCurrent = null,
                s.fragmentTracker = void 0,
                s.transmuxer = null,
                s._state = fi,
                s.playlistType = void 0,
                s.media = null,
                s.mediaBuffer = null,
                s.config = void 0,
                s.bitrateTest = !1,
                s.lastCurrentTime = 0,
                s.nextLoadPosition = 0,
                s.startPosition = 0,
                s.startTimeOffset = null,
                s.loadedmetadata = !1,
                s.retryDate = 0,
                s.levels = null,
                s.fragmentLoader = void 0,
                s.keyLoader = void 0,
                s.levelLastLoaded = null,
                s.startFragRequested = !1,
                s.decrypter = void 0,
                s.initPTS = [],
                s.onvseeking = null,
                s.onvended = null,
                s.logPrefix = "",
                s.log = void 0,
                s.warn = void 0,
                s.playlistType = a,
                s.logPrefix = n,
                s.log = w.log.bind(w, n + ":"),
                s.warn = w.warn.bind(w, n + ":"),
                s.hls = e,
                s.fragmentLoader = new ni(e.config),
                s.keyLoader = i,
                s.fragmentTracker = r,
                s.config = e.config,
                s.decrypter = new di(e.config),
                e.on(S.MANIFEST_LOADED, s.onManifestLoaded, function(t) {
                    if (void 0 === t)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return t
                }(s)),
                s
            }
            l(e, t);
            var r = e.prototype;
            return r.doTick = function() {
                this.onTickEnd()
            }
            ,
            r.onTickEnd = function() {}
            ,
            r.startLoad = function(t) {}
            ,
            r.stopLoad = function() {
                this.fragmentLoader.abort(),
                this.keyLoader.abort(this.playlistType);
                var t = this.fragCurrent;
                null != t && t.loader && (t.abortRequests(),
                this.fragmentTracker.removeFragment(t)),
                this.resetTransmuxer(),
                this.fragCurrent = null,
                this.fragPrevious = null,
                this.clearInterval(),
                this.clearNextTick(),
                this.state = fi
            }
            ,
            r._streamEnded = function(t, e) {
                if (e.live || t.nextStart || !t.end || !this.media)
                    return !1;
                var r = e.partList;
                if (null != r && r.length) {
                    var i = r[r.length - 1];
                    return Qr.isBuffered(this.media, i.start + i.duration / 2)
                }
                var n = e.fragments[e.fragments.length - 1].type;
                return this.fragmentTracker.isEndListAppended(n)
            }
            ,
            r.getLevelDetails = function() {
                var t;
                if (this.levels && null !== this.levelLastLoaded)
                    return null == (t = this.levelLastLoaded) ? void 0 : t.details
            }
            ,
            r.onMediaAttached = function(t, e) {
                var r = this.media = this.mediaBuffer = e.media;
                this.onvseeking = this.onMediaSeeking.bind(this),
                this.onvended = this.onMediaEnded.bind(this),
                r.addEventListener("seeking", this.onvseeking),
                r.addEventListener("ended", this.onvended);
                var i = this.config;
                this.levels && i.autoStartLoad && this.state === fi && this.startLoad(i.startPosition)
            }
            ,
            r.onMediaDetaching = function() {
                var t = this.media;
                null != t && t.ended && (this.log("MSE detaching and video ended, reset startPosition"),
                this.startPosition = this.lastCurrentTime = 0),
                t && this.onvseeking && this.onvended && (t.removeEventListener("seeking", this.onvseeking),
                t.removeEventListener("ended", this.onvended),
                this.onvseeking = this.onvended = null),
                this.keyLoader && this.keyLoader.detach(),
                this.media = this.mediaBuffer = null,
                this.loadedmetadata = !1,
                this.fragmentTracker.removeAllFragments(),
                this.stopLoad()
            }
            ,
            r.onMediaSeeking = function() {
                var t = this.config
                  , e = this.fragCurrent
                  , r = this.media
                  , i = this.mediaBuffer
                  , n = this.state
                  , a = r ? r.currentTime : 0
                  , s = Qr.bufferInfo(i || r, a, t.maxBufferHole);
                if (this.log("media seeking to " + (y(a) ? a.toFixed(3) : a) + ", state: " + n),
                this.state === Si)
                    this.resetLoadingState();
                else if (e) {
                    var o = t.maxFragLookUpTolerance
                      , l = e.start - o
                      , u = e.start + e.duration + o;
                    if (!s.len || u < s.start || l > s.end) {
                        var h = a > u;
                        (a < l || h) && (h && e.loader && (this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),
                        e.abortRequests(),
                        this.resetLoadingState()),
                        this.fragPrevious = null)
                    }
                }
                r && (this.fragmentTracker.removeFragmentsInRange(a, 1 / 0, this.playlistType, !0),
                this.lastCurrentTime = a),
                this.loadedmetadata || s.len || (this.nextLoadPosition = this.startPosition = a),
                this.tickImmediate()
            }
            ,
            r.onMediaEnded = function() {
                this.startPosition = this.lastCurrentTime = 0
            }
            ,
            r.onManifestLoaded = function(t, e) {
                this.startTimeOffset = e.startTimeOffset,
                this.initPTS = []
            }
            ,
            r.onHandlerDestroying = function() {
                this.hls.off(S.MANIFEST_LOADED, this.onManifestLoaded, this),
                this.stopLoad(),
                t.prototype.onHandlerDestroying.call(this),
                this.hls = null
            }
            ,
            r.onHandlerDestroyed = function() {
                this.state = fi,
                this.fragmentLoader && this.fragmentLoader.destroy(),
                this.keyLoader && this.keyLoader.destroy(),
                this.decrypter && this.decrypter.destroy(),
                this.hls = this.log = this.warn = this.decrypter = this.keyLoader = this.fragmentLoader = this.fragmentTracker = null,
                t.prototype.onHandlerDestroyed.call(this)
            }
            ,
            r.loadFragment = function(t, e, r) {
                this._loadFragForPlayback(t, e, r)
            }
            ,
            r._loadFragForPlayback = function(t, e, r) {
                var i = this;
                this._doFragLoad(t, e, r, (function(e) {
                    if (i.fragContextChanged(t))
                        return i.warn("Fragment " + t.sn + (e.part ? " p: " + e.part.index : "") + " of level " + t.level + " was dropped during download."),
                        void i.fragmentTracker.removeFragment(t);
                    t.stats.chunkCount++,
                    i._handleFragmentLoadProgress(e)
                }
                )).then((function(e) {
                    if (e) {
                        var r = i.state;
                        i.fragContextChanged(t) ? (r === mi || !i.fragCurrent && r === Ei) && (i.fragmentTracker.removeFragment(t),
                        i.state = gi) : ("payload"in e && (i.log("Loaded fragment " + t.sn + " of level " + t.level),
                        i.hls.trigger(S.FRAG_LOADED, e)),
                        i._handleFragmentLoadComplete(e))
                    }
                }
                )).catch((function(e) {
                    i.state !== fi && i.state !== Li && (i.warn(e),
                    i.resetFragmentLoading(t))
                }
                ))
            }
            ,
            r.clearTrackerIfNeeded = function(t) {
                var e, r = this.fragmentTracker;
                if (r.getState(t) === Vr) {
                    var i = t.type
                      , n = this.getFwdBufferInfo(this.mediaBuffer, i)
                      , a = Math.max(t.duration, n ? n.len : this.config.maxBufferLength);
                    this.reduceMaxBufferLength(a) && r.removeFragment(t)
                } else
                    0 === (null == (e = this.mediaBuffer) ? void 0 : e.buffered.length) ? r.removeAllFragments() : r.hasParts(t.type) && (r.detectPartialFragments({
                        frag: t,
                        part: null,
                        stats: t.stats,
                        id: t.type
                    }),
                    r.getState(t) === Yr && r.removeFragment(t))
            }
            ,
            r.checkLiveUpdate = function(t) {
                if (t.updated && !t.live) {
                    var e = t.fragments[t.fragments.length - 1];
                    this.fragmentTracker.detectPartialFragments({
                        frag: e,
                        part: null,
                        stats: e.stats,
                        id: e.type
                    })
                }
                t.fragments[0] || (t.deltaUpdateFailed = !0)
            }
            ,
            r.flushMainBuffer = function(t, e, r) {
                if (void 0 === r && (r = null),
                t - e) {
                    var i = {
                        startOffset: t,
                        endOffset: e,
                        type: r
                    };
                    this.hls.trigger(S.BUFFER_FLUSHING, i)
                }
            }
            ,
            r._loadInitSegment = function(t, e) {
                var r = this;
                this._doFragLoad(t, e).then((function(e) {
                    if (!e || r.fragContextChanged(t) || !r.levels)
                        throw new Error("init load aborted");
                    return e
                }
                )).then((function(e) {
                    var i = r.hls
                      , n = e.payload
                      , a = t.decryptdata;
                    if (n && n.byteLength > 0 && null != a && a.key && a.iv && "AES-128" === a.method) {
                        var s = self.performance.now();
                        return r.decrypter.decrypt(new Uint8Array(n), a.key.buffer, a.iv.buffer).catch((function(e) {
                            throw i.trigger(S.ERROR, {
                                type: L.MEDIA_ERROR,
                                details: A.FRAG_DECRYPT_ERROR,
                                fatal: !1,
                                error: e,
                                reason: e.message,
                                frag: t
                            }),
                            e
                        }
                        )).then((function(n) {
                            var a = self.performance.now();
                            return i.trigger(S.FRAG_DECRYPTED, {
                                frag: t,
                                payload: n,
                                stats: {
                                    tstart: s,
                                    tdecrypt: a
                                }
                            }),
                            e.payload = n,
                            r.completeInitSegmentLoad(e)
                        }
                        ))
                    }
                    return r.completeInitSegmentLoad(e)
                }
                )).catch((function(e) {
                    r.state !== fi && r.state !== Li && (r.warn(e),
                    r.resetFragmentLoading(t))
                }
                ))
            }
            ,
            r.completeInitSegmentLoad = function(t) {
                if (!this.levels)
                    throw new Error("init load aborted, missing levels");
                var e = t.frag.stats;
                this.state = gi,
                t.frag.data = new Uint8Array(t.payload),
                e.parsing.start = e.buffering.start = self.performance.now(),
                e.parsing.end = e.buffering.end = self.performance.now(),
                this.tick()
            }
            ,
            r.fragContextChanged = function(t) {
                var e = this.fragCurrent;
                return !t || !e || t.sn !== e.sn || t.level !== e.level
            }
            ,
            r.fragBufferedComplete = function(t, e) {
                var r, i, n, a, s = this.mediaBuffer ? this.mediaBuffer : this.media;
                if (this.log("Buffered " + t.type + " sn: " + t.sn + (e ? " part: " + e.index : "") + " of " + (this.playlistType === we ? "level" : "track") + " " + t.level + " (frag:[" + (null != (r = t.startPTS) ? r : NaN).toFixed(3) + "-" + (null != (i = t.endPTS) ? i : NaN).toFixed(3) + "] > buffer:" + (s ? ci(Qr.getBuffered(s)) : "(detached)") + ")"),
                "initSegment" !== t.sn) {
                    var o;
                    if (t.type !== _e) {
                        var l = t.elementaryStreams;
                        if (!Object.keys(l).some((function(t) {
                            return !!l[t]
                        }
                        )))
                            return void (this.state = gi)
                    }
                    var u = null == (o = this.levels) ? void 0 : o[t.level];
                    null != u && u.fragmentError && (this.log("Resetting level fragment error count of " + u.fragmentError + " on frag buffered"),
                    u.fragmentError = 0)
                }
                this.state = gi,
                s && (!this.loadedmetadata && t.type == we && s.buffered.length && (null == (n = this.fragCurrent) ? void 0 : n.sn) === (null == (a = this.fragPrevious) ? void 0 : a.sn) && (this.loadedmetadata = !0,
                this.seekToStartPos()),
                this.tick())
            }
            ,
            r.seekToStartPos = function() {}
            ,
            r._handleFragmentLoadComplete = function(t) {
                var e = this.transmuxer;
                if (e) {
                    var r = t.frag
                      , i = t.part
                      , n = t.partsLoaded
                      , a = !n || 0 === n.length || n.some((function(t) {
                        return !t
                    }
                    ))
                      , s = new Jr(r.level,r.sn,r.stats.chunkCount + 1,0,i ? i.index : -1,!a);
                    e.flush(s)
                }
            }
            ,
            r._handleFragmentLoadProgress = function(t) {}
            ,
            r._doFragLoad = function(t, e, r, i) {
                var n, a = this;
                void 0 === r && (r = null);
                var s = null == e ? void 0 : e.details;
                if (!this.levels || !s)
                    throw new Error("frag load aborted, missing level" + (s ? "" : " detail") + "s");
                var o = null;
                if (!t.encrypted || null != (n = t.decryptdata) && n.key ? !t.encrypted && s.encryptedFragments.length && this.keyLoader.loadClear(t, s.encryptedFragments) : (this.log("Loading key for " + t.sn + " of [" + s.startSN + "-" + s.endSN + "], " + ("[stream-controller]" === this.logPrefix ? "level" : "track") + " " + t.level),
                this.state = vi,
                this.fragCurrent = t,
                o = this.keyLoader.load(t).then((function(t) {
                    if (!a.fragContextChanged(t.frag))
                        return a.hls.trigger(S.KEY_LOADED, t),
                        a.state === vi && (a.state = gi),
                        t
                }
                )),
                this.hls.trigger(S.KEY_LOADING, {
                    frag: t
                }),
                null === this.fragCurrent && (o = Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))),
                r = Math.max(t.start, r || 0),
                this.config.lowLatencyMode && "initSegment" !== t.sn) {
                    var l = s.partList;
                    if (l && i) {
                        r > t.end && s.fragmentHint && (t = s.fragmentHint);
                        var u = this.getNextPart(l, t, r);
                        if (u > -1) {
                            var h, d = l[u];
                            return this.log("Loading part sn: " + t.sn + " p: " + d.index + " cc: " + t.cc + " of playlist [" + s.startSN + "-" + s.endSN + "] parts [0-" + u + "-" + (l.length - 1) + "] " + ("[stream-controller]" === this.logPrefix ? "level" : "track") + ": " + t.level + ", target: " + parseFloat(r.toFixed(3))),
                            this.nextLoadPosition = d.start + d.duration,
                            this.state = mi,
                            h = o ? o.then((function(r) {
                                return !r || a.fragContextChanged(r.frag) ? null : a.doFragPartsLoad(t, d, e, i)
                            }
                            )).catch((function(t) {
                                return a.handleFragLoadError(t)
                            }
                            )) : this.doFragPartsLoad(t, d, e, i).catch((function(t) {
                                return a.handleFragLoadError(t)
                            }
                            )),
                            this.hls.trigger(S.FRAG_LOADING, {
                                frag: t,
                                part: d,
                                targetBufferTime: r
                            }),
                            null === this.fragCurrent ? Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")) : h
                        }
                        if (!t.url || this.loadedEndOfParts(l, r))
                            return Promise.resolve(null)
                    }
                }
                this.log("Loading fragment " + t.sn + " cc: " + t.cc + " " + (s ? "of [" + s.startSN + "-" + s.endSN + "] " : "") + ("[stream-controller]" === this.logPrefix ? "level" : "track") + ": " + t.level + ", target: " + parseFloat(r.toFixed(3))),
                y(t.sn) && !this.bitrateTest && (this.nextLoadPosition = t.start + t.duration),
                this.state = mi;
                var c, f = this.config.progressive;
                return c = f && o ? o.then((function(e) {
                    return !e || a.fragContextChanged(null == e ? void 0 : e.frag) ? null : a.fragmentLoader.load(t, i)
                }
                )).catch((function(t) {
                    return a.handleFragLoadError(t)
                }
                )) : Promise.all([this.fragmentLoader.load(t, f ? i : void 0), o]).then((function(t) {
                    var e = t[0];
                    return !f && e && i && i(e),
                    e
                }
                )).catch((function(t) {
                    return a.handleFragLoadError(t)
                }
                )),
                this.hls.trigger(S.FRAG_LOADING, {
                    frag: t,
                    targetBufferTime: r
                }),
                null === this.fragCurrent ? Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")) : c
            }
            ,
            r.doFragPartsLoad = function(t, e, r, i) {
                var n = this;
                return new Promise((function(a, s) {
                    var o, l = [], u = null == (o = r.details) ? void 0 : o.partList;
                    !function e(o) {
                        n.fragmentLoader.loadPart(t, o, i).then((function(i) {
                            l[o.index] = i;
                            var s = i.part;
                            n.hls.trigger(S.FRAG_LOADED, i);
                            var h = lr(r, t.sn, o.index + 1) || ur(u, t.sn, o.index + 1);
                            if (!h)
                                return a({
                                    frag: t,
                                    part: s,
                                    partsLoaded: l
                                });
                            e(h)
                        }
                        )).catch(s)
                    }(e)
                }
                ))
            }
            ,
            r.handleFragLoadError = function(t) {
                if ("data"in t) {
                    var e = t.data;
                    t.data && e.details === A.INTERNAL_ABORTED ? this.handleFragLoadAborted(e.frag, e.part) : this.hls.trigger(S.ERROR, e)
                } else
                    this.hls.trigger(S.ERROR, {
                        type: L.OTHER_ERROR,
                        details: A.INTERNAL_EXCEPTION,
                        err: t,
                        error: t,
                        fatal: !0
                    });
                return null
            }
            ,
            r._handleTransmuxerFlush = function(t) {
                var e = this.getCurrentContext(t);
                if (e && this.state === Ei) {
                    var r = e.frag
                      , i = e.part
                      , n = e.level
                      , a = self.performance.now();
                    r.stats.parsing.end = a,
                    i && (i.stats.parsing.end = a),
                    this.updateLevelTiming(r, i, n, t.partial)
                } else
                    this.fragCurrent || this.state === fi || this.state === Li || (this.state = gi)
            }
            ,
            r.getCurrentContext = function(t) {
                var e = this.levels
                  , r = this.fragCurrent
                  , i = t.level
                  , n = t.sn
                  , a = t.part;
                if (null == e || !e[i])
                    return this.warn("Levels object was unset while buffering fragment " + n + " of level " + i + ". The current chunk will not be buffered."),
                    null;
                var s = e[i]
                  , o = a > -1 ? lr(s, n, a) : null
                  , l = o ? o.fragment : function(t, e, r) {
                    if (null == t || !t.details)
                        return null;
                    var i = t.details
                      , n = i.fragments[e - i.startSN];
                    return n || ((n = i.fragmentHint) && n.sn === e ? n : e < i.startSN && r && r.sn === e ? r : null)
                }(s, n, r);
                return l ? (r && r !== l && (l.stats = r.stats),
                {
                    frag: l,
                    part: o,
                    level: s
                }) : null
            }
            ,
            r.bufferFragmentData = function(t, e, r, i, n) {
                var a;
                if (t && this.state === Ei) {
                    var s = t.data1
                      , o = t.data2
                      , l = s;
                    if (s && o && (l = Kt(s, o)),
                    null != (a = l) && a.length) {
                        var u = {
                            type: t.type,
                            frag: e,
                            part: r,
                            chunkMeta: i,
                            parent: e.type,
                            data: l
                        };
                        if (this.hls.trigger(S.BUFFER_APPENDING, u),
                        t.dropped && t.independent && !r) {
                            if (n)
                                return;
                            this.flushBufferGap(e)
                        }
                    }
                }
            }
            ,
            r.flushBufferGap = function(t) {
                var e = this.media;
                if (e)
                    if (Qr.isBuffered(e, e.currentTime)) {
                        var r = e.currentTime
                          , i = Qr.bufferInfo(e, r, 0)
                          , n = t.duration
                          , a = Math.min(2 * this.config.maxFragLookUpTolerance, .25 * n)
                          , s = Math.max(Math.min(t.start - a, i.end - a), r + a);
                        t.start - s > a && this.flushMainBuffer(s, t.start)
                    } else
                        this.flushMainBuffer(0, t.start)
            }
            ,
            r.getFwdBufferInfo = function(t, e) {
                var r = this.getLoadPosition();
                return y(r) ? this.getFwdBufferInfoAtPos(t, r, e) : null
            }
            ,
            r.getFwdBufferInfoAtPos = function(t, e, r) {
                var i = this.config.maxBufferHole
                  , n = Qr.bufferInfo(t, e, i);
                if (0 === n.len && void 0 !== n.nextStart) {
                    var a = this.fragmentTracker.getBufferedFrag(e, r);
                    if (a && n.nextStart < a.end)
                        return Qr.bufferInfo(t, e, Math.max(n.nextStart, i))
                }
                return n
            }
            ,
            r.getMaxBufferLength = function(t) {
                var e, r = this.config;
                return e = t ? Math.max(8 * r.maxBufferSize / t, r.maxBufferLength) : r.maxBufferLength,
                Math.min(e, r.maxMaxBufferLength)
            }
            ,
            r.reduceMaxBufferLength = function(t) {
                var e = this.config
                  , r = t || e.maxBufferLength;
                return e.maxMaxBufferLength >= r && (e.maxMaxBufferLength /= 2,
                this.warn("Reduce max buffer length to " + e.maxMaxBufferLength + "s"),
                !0)
            }
            ,
            r.getAppendedFrag = function(t, e) {
                var r = this.fragmentTracker.getAppendedFrag(t, we);
                return r && "fragment"in r ? r.fragment : r
            }
            ,
            r.getNextFragment = function(t, e) {
                var r = e.fragments
                  , i = r.length;
                if (!i)
                    return null;
                var n, a = this.config, s = r[0].start;
                if (e.live) {
                    var o = a.initialLiveManifestSize;
                    if (i < o)
                        return this.warn("Not enough fragments to start playback (have: " + i + ", need: " + o + ")"),
                        null;
                    (!e.PTSKnown && !this.startFragRequested && -1 === this.startPosition || t < s) && (n = this.getInitialLiveFragment(e, r),
                    this.startPosition = this.nextLoadPosition = n ? this.hls.liveSyncPosition || n.start : t)
                } else
                    t <= s && (n = r[0]);
                if (!n) {
                    var l = a.lowLatencyMode ? e.partEnd : e.fragmentEnd;
                    n = this.getFragmentAtPosition(t, l, e)
                }
                return this.mapToInitFragWhenRequired(n)
            }
            ,
            r.isLoopLoading = function(t, e) {
                var r = this.fragmentTracker.getState(t);
                return (r === Wr || r === Yr && !!t.gap) && this.nextLoadPosition > e
            }
            ,
            r.getNextFragmentLoopLoading = function(t, e, r, i, n) {
                var a = t.gap
                  , s = this.getNextFragment(this.nextLoadPosition, e);
                if (null === s)
                    return s;
                if (t = s,
                a && t && !t.gap && r.nextStart) {
                    var o = this.getFwdBufferInfoAtPos(this.mediaBuffer ? this.mediaBuffer : this.media, r.nextStart, i);
                    if (null !== o && r.len + o.len >= n)
                        return this.log('buffer full after gaps in "' + i + '" playlist starting at sn: ' + t.sn),
                        null
                }
                return t
            }
            ,
            r.mapToInitFragWhenRequired = function(t) {
                return null == t || !t.initSegment || null != t && t.initSegment.data || this.bitrateTest ? t : t.initSegment
            }
            ,
            r.getNextPart = function(t, e, r) {
                for (var i = -1, n = !1, a = !0, s = 0, o = t.length; s < o; s++) {
                    var l = t[s];
                    if (a = a && !l.independent,
                    i > -1 && r < l.start)
                        break;
                    var u = l.loaded;
                    u ? i = -1 : (n || l.independent || a) && l.fragment === e && (i = s),
                    n = u
                }
                return i
            }
            ,
            r.loadedEndOfParts = function(t, e) {
                var r = t[t.length - 1];
                return r && e > r.start && r.loaded
            }
            ,
            r.getInitialLiveFragment = function(t, e) {
                var r = this.fragPrevious
                  , i = null;
                if (r) {
                    if (t.hasProgramDateTime && (this.log("Live playlist, switching playlist, load frag with same PDT: " + r.programDateTime),
                    i = function(t, e, r) {
                        if (null === e || !Array.isArray(t) || !t.length || !y(e))
                            return null;
                        if (e < (t[0].programDateTime || 0))
                            return null;
                        if (e >= (t[t.length - 1].endProgramDateTime || 0))
                            return null;
                        r = r || 0;
                        for (var i = 0; i < t.length; ++i) {
                            var n = t[i];
                            if (Er(e, r, n))
                                return n
                        }
                        return null
                    }(e, r.endProgramDateTime, this.config.maxFragLookUpTolerance)),
                    !i) {
                        var n = r.sn + 1;
                        if (n >= t.startSN && n <= t.endSN) {
                            var a = e[n - t.startSN];
                            r.cc === a.cc && (i = a,
                            this.log("Live playlist, switching playlist, load frag with next SN: " + i.sn))
                        }
                        i || (i = function(t, e) {
                            return mr(t, (function(t) {
                                return t.cc < e ? 1 : t.cc > e ? -1 : 0
                            }
                            ))
                        }(e, r.cc),
                        i && this.log("Live playlist, switching playlist, load frag with same CC: " + i.sn))
                    }
                } else {
                    var s = this.hls.liveSyncPosition;
                    null !== s && (i = this.getFragmentAtPosition(s, this.bitrateTest ? t.fragmentEnd : t.edge, t))
                }
                return i
            }
            ,
            r.getFragmentAtPosition = function(t, e, r) {
                var i, n = this.config, a = this.fragPrevious, s = r.fragments, o = r.endSN, l = r.fragmentHint, u = n.maxFragLookUpTolerance, h = r.partList, d = !!(n.lowLatencyMode && null != h && h.length && l);
                if (d && l && !this.bitrateTest && (s = s.concat(l),
                o = l.sn),
                i = t < e ? pr(a, s, t, t > e - u ? 0 : u) : s[s.length - 1]) {
                    var c = i.sn - r.startSN
                      , f = this.fragmentTracker.getState(i);
                    if ((f === Wr || f === Yr && i.gap) && (a = i),
                    a && i.sn === a.sn && (!d || h[0].fragment.sn > i.sn) && a && i.level === a.level) {
                        var g = s[c + 1];
                        i = i.sn < o && this.fragmentTracker.getState(g) !== Wr ? g : null
                    }
                }
                return i
            }
            ,
            r.synchronizeToLiveEdge = function(t) {
                var e = this.config
                  , r = this.media;
                if (r) {
                    var i = this.hls.liveSyncPosition
                      , n = r.currentTime
                      , a = t.fragments[0].start
                      , s = t.edge
                      , o = n >= a - e.maxFragLookUpTolerance && n <= s;
                    if (null !== i && r.duration > i && (n < i || !o)) {
                        var l = void 0 !== e.liveMaxLatencyDuration ? e.liveMaxLatencyDuration : e.liveMaxLatencyDurationCount * t.targetduration;
                        (!o && r.readyState < 4 || n < s - l) && (this.loadedmetadata || (this.nextLoadPosition = i),
                        r.readyState && (this.warn("Playback: " + n.toFixed(3) + " is located too far from the end of live sliding playlist: " + s + ", reset currentTime to : " + i.toFixed(3)),
                        r.currentTime = i))
                    }
                }
            }
            ,
            r.alignPlaylists = function(t, e, r) {
                var i = t.fragments.length;
                if (!i)
                    return this.warn("No fragments in live playlist"),
                    0;
                var n = t.fragments[0].start
                  , a = !e
                  , s = t.alignedSliding && y(n);
                if (a || !s && !n) {
                    var o = this.fragPrevious;
                    ei(o, r, t);
                    var l = t.fragments[0].start;
                    return this.log("Live playlist sliding: " + l.toFixed(2) + " start-sn: " + (e ? e.startSN : "na") + "->" + t.startSN + " prev-sn: " + (o ? o.sn : "na") + " fragments: " + i),
                    l
                }
                return n
            }
            ,
            r.waitForCdnTuneIn = function(t) {
                return t.live && t.canBlockReload && t.partTarget && t.tuneInGoal > Math.max(t.partHoldBack, 3 * t.partTarget)
            }
            ,
            r.setStartPosition = function(t, e) {
                var r = this.startPosition;
                if (r < e && (r = -1),
                -1 === r || -1 === this.lastCurrentTime) {
                    var i = null !== this.startTimeOffset
                      , n = i ? this.startTimeOffset : t.startTimeOffset;
                    null !== n && y(n) ? (r = e + n,
                    n < 0 && (r += t.totalduration),
                    r = Math.min(Math.max(e, r), e + t.totalduration),
                    this.log("Start time offset " + n + " found in " + (i ? "multivariant" : "media") + " playlist, adjust startPosition to " + r),
                    this.startPosition = r) : t.live ? r = this.hls.liveSyncPosition || e : this.startPosition = r = 0,
                    this.lastCurrentTime = r
                }
                this.nextLoadPosition = r
            }
            ,
            r.getLoadPosition = function() {
                var t = this.media
                  , e = 0;
                return this.loadedmetadata && t ? e = t.currentTime : this.nextLoadPosition && (e = this.nextLoadPosition),
                e
            }
            ,
            r.handleFragLoadAborted = function(t, e) {
                this.transmuxer && "initSegment" !== t.sn && t.stats.aborted && (this.warn("Fragment " + t.sn + (e ? " part " + e.index : "") + " of level " + t.level + " was aborted"),
                this.resetFragmentLoading(t))
            }
            ,
            r.resetFragmentLoading = function(t) {
                this.fragCurrent && (this.fragContextChanged(t) || this.state === pi) || (this.state = gi)
            }
            ,
            r.onFragmentOrKeyLoadError = function(t, e) {
                if (e.chunkMeta && !e.frag) {
                    var r = this.getCurrentContext(e.chunkMeta);
                    r && (e.frag = r.frag)
                }
                var i = e.frag;
                if (i && i.type === t && this.levels)
                    if (this.fragContextChanged(i)) {
                        var n;
                        this.warn("Frag load error must match current frag to retry " + i.url + " > " + (null == (n = this.fragCurrent) ? void 0 : n.url))
                    } else {
                        var a = e.details === A.FRAG_GAP;
                        a && this.fragmentTracker.fragBuffered(i, !0);
                        var s = e.errorAction
                          , o = s || {}
                          , l = o.action
                          , u = o.retryCount
                          , h = void 0 === u ? 0 : u
                          , d = o.retryConfig;
                        if (s && l === Ar && d) {
                            this.resetStartWhenNotLoaded(this.levelLastLoaded);
                            var c = fr(d, h);
                            this.warn("Fragment " + i.sn + " of " + t + " " + i.level + " errored with " + e.details + ", retrying loading " + (h + 1) + "/" + d.maxNumRetry + " in " + c + "ms"),
                            s.resolved = !0,
                            this.retryDate = self.performance.now() + c,
                            this.state = pi
                        } else if (d && s) {
                            if (this.resetFragmentErrors(t),
                            !(h < d.maxNumRetry))
                                return void w.warn(e.details + " reached or exceeded max retry (" + h + ")");
                            a || l === Lr || (s.resolved = !0)
                        } else
                            (null == s ? void 0 : s.action) === Sr ? this.state = Ri : this.state = Li;
                        this.tickImmediate()
                    }
            }
            ,
            r.reduceLengthAndFlushBuffer = function(t) {
                if (this.state === Ei || this.state === Ti) {
                    var e = t.parent
                      , r = this.getFwdBufferInfo(this.mediaBuffer, e)
                      , i = r && r.len > .5;
                    i && this.reduceMaxBufferLength(r.len);
                    var n = !i;
                    return n && this.warn("Buffer full error while media.currentTime is not buffered, flush " + e + " buffer"),
                    t.frag && (this.fragmentTracker.removeFragment(t.frag),
                    this.nextLoadPosition = t.frag.start),
                    this.resetLoadingState(),
                    n
                }
                return !1
            }
            ,
            r.resetFragmentErrors = function(t) {
                t === Ce && (this.fragCurrent = null),
                this.loadedmetadata || (this.startFragRequested = !1),
                this.state !== fi && (this.state = gi)
            }
            ,
            r.afterBufferFlushed = function(t, e, r) {
                if (t) {
                    var i = Qr.getBuffered(t);
                    this.fragmentTracker.detectEvictedFragments(e, i, r),
                    this.state === Si && this.resetLoadingState()
                }
            }
            ,
            r.resetLoadingState = function() {
                this.log("Reset loading state"),
                this.fragCurrent = null,
                this.fragPrevious = null,
                this.state = gi
            }
            ,
            r.resetStartWhenNotLoaded = function(t) {
                if (!this.loadedmetadata) {
                    this.startFragRequested = !1;
                    var e = t ? t.details : null;
                    null != e && e.live ? (this.startPosition = -1,
                    this.setStartPosition(e, 0),
                    this.resetLoadingState()) : this.nextLoadPosition = this.startPosition
                }
            }
            ,
            r.resetWhenMissingContext = function(t) {
                this.warn("The loading context changed while buffering fragment " + t.sn + " of level " + t.level + ". This chunk will not be buffered."),
                this.removeUnbufferedFrags(),
                this.resetStartWhenNotLoaded(this.levelLastLoaded),
                this.resetLoadingState()
            }
            ,
            r.removeUnbufferedFrags = function(t) {
                void 0 === t && (t = 0),
                this.fragmentTracker.removeFragmentsInRange(t, 1 / 0, this.playlistType, !1, !0)
            }
            ,
            r.updateLevelTiming = function(t, e, r, i) {
                var n, a = this, s = r.details;
                if (s) {
                    if (!Object.keys(t.elementaryStreams).reduce((function(e, n) {
                        var o = t.elementaryStreams[n];
                        if (o) {
                            var l = o.endPTS - o.startPTS;
                            if (l <= 0)
                                return a.warn("Could not parse fragment " + t.sn + " " + n + " duration reliably (" + l + ")"),
                                e || !1;
                            var u = i ? 0 : nr(s, t, o.startPTS, o.endPTS, o.startDTS, o.endDTS);
                            return a.hls.trigger(S.LEVEL_PTS_UPDATED, {
                                details: s,
                                level: r,
                                drift: u,
                                type: n,
                                frag: t,
                                start: o.startPTS,
                                end: o.endPTS
                            }),
                            !0
                        }
                        return e
                    }
                    ), !1) && null === (null == (n = this.transmuxer) ? void 0 : n.error)) {
                        var o = new Error("Found no media in fragment " + t.sn + " of level " + t.level + " resetting transmuxer to fallback to playlist timing");
                        if (0 === r.fragmentError && (r.fragmentError++,
                        t.gap = !0,
                        this.fragmentTracker.removeFragment(t),
                        this.fragmentTracker.fragBuffered(t, !0)),
                        this.warn(o.message),
                        this.hls.trigger(S.ERROR, {
                            type: L.MEDIA_ERROR,
                            details: A.FRAG_PARSING_ERROR,
                            fatal: !1,
                            error: o,
                            frag: t,
                            reason: "Found no media in msn " + t.sn + ' of level "' + r.url + '"'
                        }),
                        !this.hls)
                            return;
                        this.resetTransmuxer()
                    }
                    this.state = Ti,
                    this.hls.trigger(S.FRAG_PARSED, {
                        frag: t,
                        part: e
                    })
                } else
                    this.warn("level.details undefined")
            }
            ,
            r.resetTransmuxer = function() {
                this.transmuxer && (this.transmuxer.destroy(),
                this.transmuxer = null)
            }
            ,
            r.recoverWorkerError = function(t) {
                "demuxerWorker" === t.event && (this.fragmentTracker.removeAllFragments(),
                this.resetTransmuxer(),
                this.resetStartWhenNotLoaded(this.levelLastLoaded),
                this.resetLoadingState())
            }
            ,
            s(e, [{
                key: "state",
                get: function() {
                    return this._state
                },
                set: function(t) {
                    var e = this._state;
                    e !== t && (this._state = t,
                    this.log(e + "->" + t))
                }
            }]),
            e
        }(Kr)
          , bi = function() {
            function t() {
                this.chunks = [],
                this.dataLength = 0
            }
            var e = t.prototype;
            return e.push = function(t) {
                this.chunks.push(t),
                this.dataLength += t.length
            }
            ,
            e.flush = function() {
                var t, e = this.chunks, r = this.dataLength;
                return e.length ? (t = 1 === e.length ? e[0] : function(t, e) {
                    for (var r = new Uint8Array(e), i = 0, n = 0; n < t.length; n++) {
                        var a = t[n];
                        r.set(a, i),
                        i += a.length
                    }
                    return r
                }(e, r),
                this.reset(),
                t) : new Uint8Array(0)
            }
            ,
            e.reset = function() {
                this.chunks.length = 0,
                this.dataLength = 0
            }
            ,
            t
        }();
        function Di(t, e) {
            return void 0 === t && (t = ""),
            void 0 === e && (e = 9e4),
            {
                type: t,
                id: -1,
                pid: -1,
                inputTimeScale: e,
                sequenceNumber: -1,
                samples: [],
                dropped: 0
            }
        }
        var Ii = function() {
            function t() {
                this._audioTrack = void 0,
                this._id3Track = void 0,
                this.frameIndex = 0,
                this.cachedData = null,
                this.basePTS = null,
                this.initPTS = null,
                this.lastPTS = null
            }
            var e = t.prototype;
            return e.resetInitSegment = function(t, e, r, i) {
                this._id3Track = {
                    type: "id3",
                    id: 3,
                    pid: -1,
                    inputTimeScale: 9e4,
                    sequenceNumber: 0,
                    samples: [],
                    dropped: 0
                }
            }
            ,
            e.resetTimeStamp = function(t) {
                this.initPTS = t,
                this.resetContiguity()
            }
            ,
            e.resetContiguity = function() {
                this.basePTS = null,
                this.lastPTS = null,
                this.frameIndex = 0
            }
            ,
            e.canParse = function(t, e) {
                return !1
            }
            ,
            e.appendFrame = function(t, e, r) {}
            ,
            e.demux = function(t, e) {
                this.cachedData && (t = Kt(this.cachedData, t),
                this.cachedData = null);
                var r, i = lt(t, 0), n = i ? i.length : 0, a = this._audioTrack, s = this._id3Track, o = i ? dt(i) : void 0, l = t.length;
                for ((null === this.basePTS || 0 === this.frameIndex && y(o)) && (this.basePTS = wi(o, e, this.initPTS),
                this.lastPTS = this.basePTS),
                null === this.lastPTS && (this.lastPTS = this.basePTS),
                i && i.length > 0 && s.samples.push({
                    pts: this.lastPTS,
                    dts: this.lastPTS,
                    data: i,
                    type: Ge,
                    duration: Number.POSITIVE_INFINITY
                }); n < l; ) {
                    if (this.canParse(t, n)) {
                        var u = this.appendFrame(a, t, n);
                        u ? (this.frameIndex++,
                        this.lastPTS = u.sample.pts,
                        r = n += u.length) : n = l
                    } else
                        ht(t, n) ? (i = lt(t, n),
                        s.samples.push({
                            pts: this.lastPTS,
                            dts: this.lastPTS,
                            data: i,
                            type: Ge,
                            duration: Number.POSITIVE_INFINITY
                        }),
                        r = n += i.length) : n++;
                    if (n === l && r !== l) {
                        var h = nt(t, r);
                        this.cachedData ? this.cachedData = Kt(this.cachedData, h) : this.cachedData = h
                    }
                }
                return {
                    audioTrack: a,
                    videoTrack: Di(),
                    id3Track: s,
                    textTrack: Di()
                }
            }
            ,
            e.demuxSampleAes = function(t, e, r) {
                return Promise.reject(new Error("[" + this + "] This demuxer does not support Sample-AES decryption"))
            }
            ,
            e.flush = function(t) {
                var e = this.cachedData;
                return e && (this.cachedData = null,
                this.demux(e, 0)),
                {
                    audioTrack: this._audioTrack,
                    videoTrack: Di(),
                    id3Track: this._id3Track,
                    textTrack: Di()
                }
            }
            ,
            e.destroy = function() {}
            ,
            t
        }()
          , wi = function(t, e, r) {
            return y(t) ? 90 * t : 9e4 * e + (r ? 9e4 * r.baseTime / r.timescale : 0)
        };
        function Ci(t, e) {
            return 255 === t[e] && 240 == (246 & t[e + 1])
        }
        function _i(t, e) {
            return 1 & t[e + 1] ? 7 : 9
        }
        function xi(t, e) {
            return (3 & t[e + 3]) << 11 | t[e + 4] << 3 | (224 & t[e + 5]) >>> 5
        }
        function Pi(t, e) {
            return e + 1 < t.length && Ci(t, e)
        }
        function Fi(t, e) {
            if (Pi(t, e)) {
                var r = _i(t, e);
                if (e + r >= t.length)
                    return !1;
                var i = xi(t, e);
                if (i <= r)
                    return !1;
                var n = e + i;
                return n === t.length || Pi(t, n)
            }
            return !1
        }
        function Mi(t, e, r, i, n) {
            if (!t.samplerate) {
                var a = function(t, e, r, i) {
                    var n, a, s, o, l = navigator.userAgent.toLowerCase(), u = i, h = [96e3, 88200, 64e3, 48e3, 44100, 32e3, 24e3, 22050, 16e3, 12e3, 11025, 8e3, 7350];
                    n = 1 + ((192 & e[r + 2]) >>> 6);
                    var d = (60 & e[r + 2]) >>> 2;
                    if (!(d > h.length - 1))
                        return s = (1 & e[r + 2]) << 2,
                        s |= (192 & e[r + 3]) >>> 6,
                        w.log("manifest codec:" + i + ", ADTS type:" + n + ", samplingIndex:" + d),
                        /firefox/i.test(l) ? d >= 6 ? (n = 5,
                        o = new Array(4),
                        a = d - 3) : (n = 2,
                        o = new Array(2),
                        a = d) : -1 !== l.indexOf("android") ? (n = 2,
                        o = new Array(2),
                        a = d) : (n = 5,
                        o = new Array(4),
                        i && (-1 !== i.indexOf("mp4a.40.29") || -1 !== i.indexOf("mp4a.40.5")) || !i && d >= 6 ? a = d - 3 : ((i && -1 !== i.indexOf("mp4a.40.2") && (d >= 6 && 1 === s || /vivaldi/i.test(l)) || !i && 1 === s) && (n = 2,
                        o = new Array(2)),
                        a = d)),
                        o[0] = n << 3,
                        o[0] |= (14 & d) >> 1,
                        o[1] |= (1 & d) << 7,
                        o[1] |= s << 3,
                        5 === n && (o[1] |= (14 & a) >> 1,
                        o[2] = (1 & a) << 7,
                        o[2] |= 8,
                        o[3] = 0),
                        {
                            config: o,
                            samplerate: h[d],
                            channelCount: s,
                            codec: "mp4a.40." + n,
                            manifestCodec: u
                        };
                    var c = new Error("invalid ADTS sampling index:" + d);
                    t.emit(S.ERROR, S.ERROR, {
                        type: L.MEDIA_ERROR,
                        details: A.FRAG_PARSING_ERROR,
                        fatal: !0,
                        error: c,
                        reason: c.message
                    })
                }(e, r, i, n);
                if (!a)
                    return;
                t.config = a.config,
                t.samplerate = a.samplerate,
                t.channelCount = a.channelCount,
                t.codec = a.codec,
                t.manifestCodec = a.manifestCodec,
                w.log("parsed codec:" + t.codec + ", rate:" + a.samplerate + ", channels:" + a.channelCount)
            }
        }
        function Oi(t) {
            return 9216e4 / t
        }
        function Ni(t, e, r, i, n) {
            var a, s = i + n * Oi(t.samplerate), o = function(t, e) {
                var r = _i(t, e);
                if (e + r <= t.length) {
                    var i = xi(t, e) - r;
                    if (i > 0)
                        return {
                            headerLength: r,
                            frameLength: i
                        }
                }
            }(e, r);
            if (o) {
                var l = o.frameLength
                  , u = o.headerLength
                  , h = u + l
                  , d = Math.max(0, r + h - e.length);
                d ? (a = new Uint8Array(h - u)).set(e.subarray(r + u, e.length), 0) : a = e.subarray(r + u, r + h);
                var c = {
                    unit: a,
                    pts: s
                };
                return d || t.samples.push(c),
                {
                    sample: c,
                    length: h,
                    missing: d
                }
            }
            var f = e.length - r;
            return (a = new Uint8Array(f)).set(e.subarray(r, e.length), 0),
            {
                sample: {
                    unit: a,
                    pts: s
                },
                length: f,
                missing: -1
            }
        }
        var Ui = null
          , Bi = [32, 64, 96, 128, 160, 192, 224, 256, 288, 320, 352, 384, 416, 448, 32, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 384, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 32, 48, 56, 64, 80, 96, 112, 128, 144, 160, 176, 192, 224, 256, 8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160]
          , Gi = [44100, 48e3, 32e3, 22050, 24e3, 16e3, 11025, 12e3, 8e3]
          , Ki = [[0, 72, 144, 12], [0, 0, 0, 0], [0, 72, 144, 12], [0, 144, 144, 12]]
          , Hi = [0, 1, 1, 4];
        function Vi(t, e, r, i, n) {
            if (!(r + 24 > e.length)) {
                var a = Yi(e, r);
                if (a && r + a.frameLength <= e.length) {
                    var s = i + n * (9e4 * a.samplesPerFrame / a.sampleRate)
                      , o = {
                        unit: e.subarray(r, r + a.frameLength),
                        pts: s,
                        dts: s
                    };
                    return t.config = [],
                    t.channelCount = a.channelCount,
                    t.samplerate = a.sampleRate,
                    t.samples.push(o),
                    {
                        sample: o,
                        length: a.frameLength,
                        missing: 0
                    }
                }
            }
        }
        function Yi(t, e) {
            var r = t[e + 1] >> 3 & 3
              , i = t[e + 1] >> 1 & 3
              , n = t[e + 2] >> 4 & 15
              , a = t[e + 2] >> 2 & 3;
            if (1 !== r && 0 !== n && 15 !== n && 3 !== a) {
                var s = t[e + 2] >> 1 & 1
                  , o = t[e + 3] >> 6
                  , l = 1e3 * Bi[14 * (3 === r ? 3 - i : 3 === i ? 3 : 4) + n - 1]
                  , u = Gi[3 * (3 === r ? 0 : 2 === r ? 1 : 2) + a]
                  , h = 3 === o ? 1 : 2
                  , d = Ki[r][i]
                  , c = Hi[i]
                  , f = 8 * d * c
                  , g = Math.floor(d * l / u + s) * c;
                if (null === Ui) {
                    var v = (navigator.userAgent || "").match(/Chrome\/(\d+)/i);
                    Ui = v ? parseInt(v[1]) : 0
                }
                return !!Ui && Ui <= 87 && 2 === i && l >= 224e3 && 0 === o && (t[e + 3] = 128 | t[e + 3]),
                {
                    sampleRate: u,
                    channelCount: h,
                    frameLength: g,
                    samplesPerFrame: f
                }
            }
        }
        function Wi(t, e) {
            return 255 === t[e] && 224 == (224 & t[e + 1]) && 0 != (6 & t[e + 1])
        }
        function ji(t, e) {
            return e + 1 < t.length && Wi(t, e)
        }
        function qi(t, e) {
            if (e + 1 < t.length && Wi(t, e)) {
                var r = Yi(t, e)
                  , i = 4;
                null != r && r.frameLength && (i = r.frameLength);
                var n = e + i;
                return n === t.length || ji(t, n)
            }
            return !1
        }
        var Xi = function(t) {
            function e(e, r) {
                var i;
                return (i = t.call(this) || this).observer = void 0,
                i.config = void 0,
                i.observer = e,
                i.config = r,
                i
            }
            l(e, t);
            var r = e.prototype;
            return r.resetInitSegment = function(e, r, i, n) {
                t.prototype.resetInitSegment.call(this, e, r, i, n),
                this._audioTrack = {
                    container: "audio/adts",
                    type: "audio",
                    id: 2,
                    pid: -1,
                    sequenceNumber: 0,
                    segmentCodec: "aac",
                    samples: [],
                    manifestCodec: r,
                    duration: n,
                    inputTimeScale: 9e4,
                    dropped: 0
                }
            }
            ,
            e.probe = function(t) {
                if (!t)
                    return !1;
                var e = lt(t, 0)
                  , r = (null == e ? void 0 : e.length) || 0;
                if (qi(t, r))
                    return !1;
                for (var i = t.length; r < i; r++)
                    if (Fi(t, r))
                        return w.log("ADTS sync word found !"),
                        !0;
                return !1
            }
            ,
            r.canParse = function(t, e) {
                return function(t, e) {
                    return function(t, e) {
                        return e + 5 < t.length
                    }(t, e) && Ci(t, e) && xi(t, e) <= t.length - e
                }(t, e)
            }
            ,
            r.appendFrame = function(t, e, r) {
                Mi(t, this.observer, e, r, t.manifestCodec);
                var i = Ni(t, e, r, this.basePTS, this.frameIndex);
                if (i && 0 === i.missing)
                    return i
            }
            ,
            e
        }(Ii)
          , zi = /\/emsg[-/]ID3/i
          , Qi = function() {
            function t(t, e) {
                this.remainderData = null,
                this.timeOffset = 0,
                this.config = void 0,
                this.videoTrack = void 0,
                this.audioTrack = void 0,
                this.id3Track = void 0,
                this.txtTrack = void 0,
                this.config = e
            }
            var e = t.prototype;
            return e.resetTimeStamp = function() {}
            ,
            e.resetInitSegment = function(t, e, r, i) {
                var n = this.videoTrack = Di("video", 1)
                  , a = this.audioTrack = Di("audio", 1)
                  , s = this.txtTrack = Di("text", 1);
                if (this.id3Track = Di("id3", 1),
                this.timeOffset = 0,
                null != t && t.byteLength) {
                    var o = Ft(t);
                    if (o.video) {
                        var l = o.video
                          , u = l.id
                          , h = l.timescale
                          , d = l.codec;
                        n.id = u,
                        n.timescale = s.timescale = h,
                        n.codec = d
                    }
                    if (o.audio) {
                        var c = o.audio
                          , f = c.id
                          , g = c.timescale
                          , v = c.codec;
                        a.id = f,
                        a.timescale = g,
                        a.codec = v
                    }
                    s.id = kt.text,
                    n.sampleDuration = 0,
                    n.duration = a.duration = i
                }
            }
            ,
            e.resetContiguity = function() {
                this.remainderData = null
            }
            ,
            t.probe = function(t) {
                return function(t) {
                    for (var e = t.byteLength, r = 0; r < e; ) {
                        var i = It(t, r);
                        if (i > 8 && 109 === t[r + 4] && 111 === t[r + 5] && 111 === t[r + 6] && 102 === t[r + 7])
                            return !0;
                        r = i > 1 ? r + i : e
                    }
                    return !1
                }(t)
            }
            ,
            e.demux = function(t, e) {
                this.timeOffset = e;
                var r = t
                  , i = this.videoTrack
                  , n = this.txtTrack;
                if (this.config.progressive) {
                    this.remainderData && (r = Kt(this.remainderData, t));
                    var a = function(t) {
                        var e = {
                            valid: null,
                            remainder: null
                        }
                          , r = xt(t, ["moof"]);
                        if (r.length < 2)
                            return e.remainder = t,
                            e;
                        var i = r[r.length - 1];
                        return e.valid = nt(t, 0, i.byteOffset - 8),
                        e.remainder = nt(t, i.byteOffset - 8),
                        e
                    }(r);
                    this.remainderData = a.remainder,
                    i.samples = a.valid || new Uint8Array
                } else
                    i.samples = r;
                var s = this.extractID3Track(i, e);
                return n.samples = Ht(e, i),
                {
                    videoTrack: i,
                    audioTrack: this.audioTrack,
                    id3Track: s,
                    textTrack: this.txtTrack
                }
            }
            ,
            e.flush = function() {
                var t = this.timeOffset
                  , e = this.videoTrack
                  , r = this.txtTrack;
                e.samples = this.remainderData || new Uint8Array,
                this.remainderData = null;
                var i = this.extractID3Track(e, this.timeOffset);
                return r.samples = Ht(t, e),
                {
                    videoTrack: e,
                    audioTrack: Di(),
                    id3Track: i,
                    textTrack: Di()
                }
            }
            ,
            e.extractID3Track = function(t, e) {
                var r = this.id3Track;
                if (t.samples.length) {
                    var i = xt(t.samples, ["emsg"]);
                    i && i.forEach((function(t) {
                        var i = function(t) {
                            var e = t[0]
                              , r = ""
                              , i = ""
                              , n = 0
                              , a = 0
                              , s = 0
                              , o = 0
                              , l = 0
                              , u = 0;
                            if (0 === e) {
                                for (; "\0" !== bt(t.subarray(u, u + 1)); )
                                    r += bt(t.subarray(u, u + 1)),
                                    u += 1;
                                for (r += bt(t.subarray(u, u + 1)),
                                u += 1; "\0" !== bt(t.subarray(u, u + 1)); )
                                    i += bt(t.subarray(u, u + 1)),
                                    u += 1;
                                i += bt(t.subarray(u, u + 1)),
                                u += 1,
                                n = It(t, 12),
                                a = It(t, 16),
                                o = It(t, 20),
                                l = It(t, 24),
                                u = 28
                            } else if (1 === e) {
                                n = It(t, u += 4);
                                var h = It(t, u += 4)
                                  , d = It(t, u += 4);
                                for (u += 4,
                                s = Math.pow(2, 32) * h + d,
                                E(s) || (s = Number.MAX_SAFE_INTEGER,
                                w.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),
                                o = It(t, u),
                                l = It(t, u += 4),
                                u += 4; "\0" !== bt(t.subarray(u, u + 1)); )
                                    r += bt(t.subarray(u, u + 1)),
                                    u += 1;
                                for (r += bt(t.subarray(u, u + 1)),
                                u += 1; "\0" !== bt(t.subarray(u, u + 1)); )
                                    i += bt(t.subarray(u, u + 1)),
                                    u += 1;
                                i += bt(t.subarray(u, u + 1)),
                                u += 1
                            }
                            return {
                                schemeIdUri: r,
                                value: i,
                                timeScale: n,
                                presentationTime: s,
                                presentationTimeDelta: a,
                                eventDuration: o,
                                id: l,
                                payload: t.subarray(u, t.byteLength)
                            }
                        }(t);
                        if (zi.test(i.schemeIdUri)) {
                            var n = y(i.presentationTime) ? i.presentationTime / i.timeScale : e + i.presentationTimeDelta / i.timeScale
                              , a = 4294967295 === i.eventDuration ? Number.POSITIVE_INFINITY : i.eventDuration / i.timeScale;
                            a <= .001 && (a = Number.POSITIVE_INFINITY);
                            var s = i.payload;
                            r.samples.push({
                                data: s,
                                len: s.byteLength,
                                dts: n,
                                pts: n,
                                type: He,
                                duration: a
                            })
                        }
                    }
                    ))
                }
                return r
            }
            ,
            e.demuxSampleAes = function(t, e, r) {
                return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))
            }
            ,
            e.destroy = function() {}
            ,
            t
        }()
          , Ji = function(t, e) {
            var r = 0
              , i = 5;
            e += i;
            for (var n = new Uint32Array(1), a = new Uint32Array(1), s = new Uint8Array(1); i > 0; ) {
                s[0] = t[e];
                var o = Math.min(i, 8)
                  , l = 8 - o;
                a[0] = 4278190080 >>> 24 + l << l,
                n[0] = (s[0] & a[0]) >> l,
                r = r ? r << o | n[0] : n[0],
                e += 1,
                i -= o
            }
            return r
        }
          , $i = function(t) {
            function e(e) {
                var r;
                return (r = t.call(this) || this).observer = void 0,
                r.observer = e,
                r
            }
            l(e, t);
            var r = e.prototype;
            return r.resetInitSegment = function(e, r, i, n) {
                t.prototype.resetInitSegment.call(this, e, r, i, n),
                this._audioTrack = {
                    container: "audio/ac-3",
                    type: "audio",
                    id: 2,
                    pid: -1,
                    sequenceNumber: 0,
                    segmentCodec: "ac3",
                    samples: [],
                    manifestCodec: r,
                    duration: n,
                    inputTimeScale: 9e4,
                    dropped: 0
                }
            }
            ,
            r.canParse = function(t, e) {
                return e + 64 < t.length
            }
            ,
            r.appendFrame = function(t, e, r) {
                var i = Zi(t, e, r, this.basePTS, this.frameIndex);
                if (-1 !== i)
                    return {
                        sample: t.samples[t.samples.length - 1],
                        length: i,
                        missing: 0
                    }
            }
            ,
            e.probe = function(t) {
                if (!t)
                    return !1;
                var e = lt(t, 0);
                if (!e)
                    return !1;
                var r = e.length;
                return 11 === t[r] && 119 === t[r + 1] && void 0 !== dt(e) && Ji(t, r) < 16
            }
            ,
            e
        }(Ii);
        function Zi(t, e, r, i, n) {
            if (r + 8 > e.length)
                return -1;
            if (11 !== e[r] || 119 !== e[r + 1])
                return -1;
            var a = e[r + 4] >> 6;
            if (a >= 3)
                return -1;
            var s = [48e3, 44100, 32e3][a]
              , o = 63 & e[r + 4]
              , l = 2 * [64, 69, 96, 64, 70, 96, 80, 87, 120, 80, 88, 120, 96, 104, 144, 96, 105, 144, 112, 121, 168, 112, 122, 168, 128, 139, 192, 128, 140, 192, 160, 174, 240, 160, 175, 240, 192, 208, 288, 192, 209, 288, 224, 243, 336, 224, 244, 336, 256, 278, 384, 256, 279, 384, 320, 348, 480, 320, 349, 480, 384, 417, 576, 384, 418, 576, 448, 487, 672, 448, 488, 672, 512, 557, 768, 512, 558, 768, 640, 696, 960, 640, 697, 960, 768, 835, 1152, 768, 836, 1152, 896, 975, 1344, 896, 976, 1344, 1024, 1114, 1536, 1024, 1115, 1536, 1152, 1253, 1728, 1152, 1254, 1728, 1280, 1393, 1920, 1280, 1394, 1920][3 * o + a];
            if (r + l > e.length)
                return -1;
            var u = e[r + 6] >> 5
              , h = 0;
            2 === u ? h += 2 : (1 & u && 1 !== u && (h += 2),
            4 & u && (h += 2));
            var d = (e[r + 6] << 8 | e[r + 7]) >> 12 - h & 1
              , c = [2, 1, 2, 3, 3, 4, 4, 5][u] + d
              , f = e[r + 5] >> 3
              , g = 7 & e[r + 5]
              , v = new Uint8Array([a << 6 | f << 1 | g >> 2, (3 & g) << 6 | u << 3 | d << 2 | o >> 4, o << 4 & 224])
              , m = i + n * (1536 / s * 9e4)
              , p = e.subarray(r, r + l);
            return t.config = v,
            t.channelCount = c,
            t.samplerate = s,
            t.samples.push({
                unit: p,
                pts: m
            }),
            l
        }
        var tn = function() {
            function t() {
                this.VideoSample = null
            }
            var e = t.prototype;
            return e.createVideoSample = function(t, e, r, i) {
                return {
                    key: t,
                    frame: !1,
                    pts: e,
                    dts: r,
                    units: [],
                    debug: i,
                    length: 0
                }
            }
            ,
            e.getLastNalUnit = function(t) {
                var e, r, i = this.VideoSample;
                if (i && 0 !== i.units.length || (i = t[t.length - 1]),
                null != (e = i) && e.units) {
                    var n = i.units;
                    r = n[n.length - 1]
                }
                return r
            }
            ,
            e.pushAccessUnit = function(t, e) {
                if (t.units.length && t.frame) {
                    if (void 0 === t.pts) {
                        var r = e.samples
                          , i = r.length;
                        if (!i)
                            return void e.dropped++;
                        var n = r[i - 1];
                        t.pts = n.pts,
                        t.dts = n.dts
                    }
                    e.samples.push(t)
                }
                t.debug.length && w.log(t.pts + "/" + t.dts + ":" + t.debug)
            }
            ,
            t
        }()
          , en = function() {
            function t(t) {
                this.data = void 0,
                this.bytesAvailable = void 0,
                this.word = void 0,
                this.bitsAvailable = void 0,
                this.data = t,
                this.bytesAvailable = t.byteLength,
                this.word = 0,
                this.bitsAvailable = 0
            }
            var e = t.prototype;
            return e.loadWord = function() {
                var t = this.data
                  , e = this.bytesAvailable
                  , r = t.byteLength - e
                  , i = new Uint8Array(4)
                  , n = Math.min(4, e);
                if (0 === n)
                    throw new Error("no bytes available");
                i.set(t.subarray(r, r + n)),
                this.word = new DataView(i.buffer).getUint32(0),
                this.bitsAvailable = 8 * n,
                this.bytesAvailable -= n
            }
            ,
            e.skipBits = function(t) {
                var e;
                t = Math.min(t, 8 * this.bytesAvailable + this.bitsAvailable),
                this.bitsAvailable > t ? (this.word <<= t,
                this.bitsAvailable -= t) : (t -= this.bitsAvailable,
                t -= (e = t >> 3) << 3,
                this.bytesAvailable -= e,
                this.loadWord(),
                this.word <<= t,
                this.bitsAvailable -= t)
            }
            ,
            e.readBits = function(t) {
                var e = Math.min(this.bitsAvailable, t)
                  , r = this.word >>> 32 - e;
                if (t > 32 && w.error("Cannot read more than 32 bits at a time"),
                this.bitsAvailable -= e,
                this.bitsAvailable > 0)
                    this.word <<= e;
                else {
                    if (!(this.bytesAvailable > 0))
                        throw new Error("no bits available");
                    this.loadWord()
                }
                return (e = t - e) > 0 && this.bitsAvailable ? r << e | this.readBits(e) : r
            }
            ,
            e.skipLZ = function() {
                var t;
                for (t = 0; t < this.bitsAvailable; ++t)
                    if (0 != (this.word & 2147483648 >>> t))
                        return this.word <<= t,
                        this.bitsAvailable -= t,
                        t;
                return this.loadWord(),
                t + this.skipLZ()
            }
            ,
            e.skipUEG = function() {
                this.skipBits(1 + this.skipLZ())
            }
            ,
            e.skipEG = function() {
                this.skipBits(1 + this.skipLZ())
            }
            ,
            e.readUEG = function() {
                var t = this.skipLZ();
                return this.readBits(t + 1) - 1
            }
            ,
            e.readEG = function() {
                var t = this.readUEG();
                return 1 & t ? 1 + t >>> 1 : -1 * (t >>> 1)
            }
            ,
            e.readBoolean = function() {
                return 1 === this.readBits(1)
            }
            ,
            e.readUByte = function() {
                return this.readBits(8)
            }
            ,
            e.readUShort = function() {
                return this.readBits(16)
            }
            ,
            e.readUInt = function() {
                return this.readBits(32)
            }
            ,
            e.skipScalingList = function(t) {
                for (var e = 8, r = 8, i = 0; i < t; i++)
                    0 !== r && (r = (e + this.readEG() + 256) % 256),
                    e = 0 === r ? e : r
            }
            ,
            e.readSPS = function() {
                var t, e, r, i = 0, n = 0, a = 0, s = 0, o = this.readUByte.bind(this), l = this.readBits.bind(this), u = this.readUEG.bind(this), h = this.readBoolean.bind(this), d = this.skipBits.bind(this), c = this.skipEG.bind(this), f = this.skipUEG.bind(this), g = this.skipScalingList.bind(this);
                o();
                var v = o();
                if (l(5),
                d(3),
                o(),
                f(),
                100 === v || 110 === v || 122 === v || 244 === v || 44 === v || 83 === v || 86 === v || 118 === v || 128 === v) {
                    var m = u();
                    if (3 === m && d(1),
                    f(),
                    f(),
                    d(1),
                    h())
                        for (e = 3 !== m ? 8 : 12,
                        r = 0; r < e; r++)
                            h() && g(r < 6 ? 16 : 64)
                }
                f();
                var p = u();
                if (0 === p)
                    u();
                else if (1 === p)
                    for (d(1),
                    c(),
                    c(),
                    t = u(),
                    r = 0; r < t; r++)
                        c();
                f(),
                d(1);
                var y = u()
                  , E = u()
                  , T = l(1);
                0 === T && d(1),
                d(1),
                h() && (i = u(),
                n = u(),
                a = u(),
                s = u());
                var S = [1, 1];
                if (h() && h())
                    switch (o()) {
                    case 1:
                        S = [1, 1];
                        break;
                    case 2:
                        S = [12, 11];
                        break;
                    case 3:
                        S = [10, 11];
                        break;
                    case 4:
                        S = [16, 11];
                        break;
                    case 5:
                        S = [40, 33];
                        break;
                    case 6:
                        S = [24, 11];
                        break;
                    case 7:
                        S = [20, 11];
                        break;
                    case 8:
                        S = [32, 11];
                        break;
                    case 9:
                        S = [80, 33];
                        break;
                    case 10:
                        S = [18, 11];
                        break;
                    case 11:
                        S = [15, 11];
                        break;
                    case 12:
                        S = [64, 33];
                        break;
                    case 13:
                        S = [160, 99];
                        break;
                    case 14:
                        S = [4, 3];
                        break;
                    case 15:
                        S = [3, 2];
                        break;
                    case 16:
                        S = [2, 1];
                        break;
                    case 255:
                        S = [o() << 8 | o(), o() << 8 | o()]
                    }
                return {
                    width: Math.ceil(16 * (y + 1) - 2 * i - 2 * n),
                    height: (2 - T) * (E + 1) * 16 - (T ? 2 : 4) * (a + s),
                    pixelRatio: S
                }
            }
            ,
            e.readSliceType = function() {
                return this.readUByte(),
                this.readUEG(),
                this.readUEG()
            }
            ,
            t
        }()
          , rn = function(t) {
            function e() {
                return t.apply(this, arguments) || this
            }
            l(e, t);
            var r = e.prototype;
            return r.parseAVCPES = function(t, e, r, i, n) {
                var a, s = this, o = this.parseAVCNALu(t, r.data), l = this.VideoSample, u = !1;
                r.data = null,
                l && o.length && !t.audFound && (this.pushAccessUnit(l, t),
                l = this.VideoSample = this.createVideoSample(!1, r.pts, r.dts, "")),
                o.forEach((function(i) {
                    var o;
                    switch (i.type) {
                    case 1:
                        var h = !1;
                        a = !0;
                        var d, c = i.data;
                        if (u && c.length > 4) {
                            var f = new en(c).readSliceType();
                            2 !== f && 4 !== f && 7 !== f && 9 !== f || (h = !0)
                        }
                        h && null != (d = l) && d.frame && !l.key && (s.pushAccessUnit(l, t),
                        l = s.VideoSample = null),
                        l || (l = s.VideoSample = s.createVideoSample(!0, r.pts, r.dts, "")),
                        l.frame = !0,
                        l.key = h;
                        break;
                    case 5:
                        a = !0,
                        null != (o = l) && o.frame && !l.key && (s.pushAccessUnit(l, t),
                        l = s.VideoSample = null),
                        l || (l = s.VideoSample = s.createVideoSample(!0, r.pts, r.dts, "")),
                        l.key = !0,
                        l.frame = !0;
                        break;
                    case 6:
                        a = !0,
                        Yt(i.data, 1, r.pts, e.samples);
                        break;
                    case 7:
                        var g, v;
                        a = !0,
                        u = !0;
                        var m = i.data
                          , p = new en(m).readSPS();
                        if (!t.sps || t.width !== p.width || t.height !== p.height || (null == (g = t.pixelRatio) ? void 0 : g[0]) !== p.pixelRatio[0] || (null == (v = t.pixelRatio) ? void 0 : v[1]) !== p.pixelRatio[1]) {
                            t.width = p.width,
                            t.height = p.height,
                            t.pixelRatio = p.pixelRatio,
                            t.sps = [m],
                            t.duration = n;
                            for (var y = m.subarray(1, 4), E = "avc1.", T = 0; T < 3; T++) {
                                var S = y[T].toString(16);
                                S.length < 2 && (S = "0" + S),
                                E += S
                            }
                            t.codec = E
                        }
                        break;
                    case 8:
                        a = !0,
                        t.pps = [i.data];
                        break;
                    case 9:
                        a = !0,
                        t.audFound = !0,
                        l && s.pushAccessUnit(l, t),
                        l = s.VideoSample = s.createVideoSample(!1, r.pts, r.dts, "");
                        break;
                    case 12:
                        a = !0;
                        break;
                    default:
                        a = !1,
                        l && (l.debug += "unknown NAL " + i.type + " ")
                    }
                    l && a && l.units.push(i)
                }
                )),
                i && l && (this.pushAccessUnit(l, t),
                this.VideoSample = null)
            }
            ,
            r.parseAVCNALu = function(t, e) {
                var r, i, n = e.byteLength, a = t.naluState || 0, s = a, o = [], l = 0, u = -1, h = 0;
                for (-1 === a && (u = 0,
                h = 31 & e[0],
                a = 0,
                l = 1); l < n; )
                    if (r = e[l++],
                    a)
                        if (1 !== a)
                            if (r)
                                if (1 === r) {
                                    if (i = l - a - 1,
                                    u >= 0) {
                                        var d = {
                                            data: e.subarray(u, i),
                                            type: h
                                        };
                                        o.push(d)
                                    } else {
                                        var c = this.getLastNalUnit(t.samples);
                                        c && (s && l <= 4 - s && c.state && (c.data = c.data.subarray(0, c.data.byteLength - s)),
                                        i > 0 && (c.data = Kt(c.data, e.subarray(0, i)),
                                        c.state = 0))
                                    }
                                    l < n ? (u = l,
                                    h = 31 & e[l],
                                    a = 0) : a = -1
                                } else
                                    a = 0;
                            else
                                a = 3;
                        else
                            a = r ? 0 : 2;
                    else
                        a = r ? 0 : 1;
                if (u >= 0 && a >= 0) {
                    var f = {
                        data: e.subarray(u, n),
                        type: h,
                        state: a
                    };
                    o.push(f)
                }
                if (0 === o.length) {
                    var g = this.getLastNalUnit(t.samples);
                    g && (g.data = Kt(g.data, e))
                }
                return t.naluState = a,
                o
            }
            ,
            e
        }(tn)
          , nn = function() {
            function t(t, e, r) {
                this.keyData = void 0,
                this.decrypter = void 0,
                this.keyData = r,
                this.decrypter = new di(e,{
                    removePKCS7Padding: !1
                })
            }
            var e = t.prototype;
            return e.decryptBuffer = function(t) {
                return this.decrypter.decrypt(t, this.keyData.key.buffer, this.keyData.iv.buffer)
            }
            ,
            e.decryptAacSample = function(t, e, r) {
                var i = this
                  , n = t[e].unit;
                if (!(n.length <= 16)) {
                    var a = n.subarray(16, n.length - n.length % 16)
                      , s = a.buffer.slice(a.byteOffset, a.byteOffset + a.length);
                    this.decryptBuffer(s).then((function(a) {
                        var s = new Uint8Array(a);
                        n.set(s, 16),
                        i.decrypter.isSync() || i.decryptAacSamples(t, e + 1, r)
                    }
                    ))
                }
            }
            ,
            e.decryptAacSamples = function(t, e, r) {
                for (; ; e++) {
                    if (e >= t.length)
                        return void r();
                    if (!(t[e].unit.length < 32 || (this.decryptAacSample(t, e, r),
                    this.decrypter.isSync())))
                        return
                }
            }
            ,
            e.getAvcEncryptedData = function(t) {
                for (var e = 16 * Math.floor((t.length - 48) / 160) + 16, r = new Int8Array(e), i = 0, n = 32; n < t.length - 16; n += 160,
                i += 16)
                    r.set(t.subarray(n, n + 16), i);
                return r
            }
            ,
            e.getAvcDecryptedUnit = function(t, e) {
                for (var r = new Uint8Array(e), i = 0, n = 32; n < t.length - 16; n += 160,
                i += 16)
                    t.set(r.subarray(i, i + 16), n);
                return t
            }
            ,
            e.decryptAvcSample = function(t, e, r, i, n) {
                var a = this
                  , s = Wt(n.data)
                  , o = this.getAvcEncryptedData(s);
                this.decryptBuffer(o.buffer).then((function(o) {
                    n.data = a.getAvcDecryptedUnit(s, o),
                    a.decrypter.isSync() || a.decryptAvcSamples(t, e, r + 1, i)
                }
                ))
            }
            ,
            e.decryptAvcSamples = function(t, e, r, i) {
                if (t instanceof Uint8Array)
                    throw new Error("Cannot decrypt samples of type Uint8Array");
                for (; ; e++,
                r = 0) {
                    if (e >= t.length)
                        return void i();
                    for (var n = t[e].units; !(r >= n.length); r++) {
                        var a = n[r];
                        if (!(a.data.length <= 48 || 1 !== a.type && 5 !== a.type || (this.decryptAvcSample(t, e, r, i, a),
                        this.decrypter.isSync())))
                            return
                    }
                }
            }
            ,
            t
        }()
          , an = 188
          , sn = function() {
            function t(t, e, r) {
                this.observer = void 0,
                this.config = void 0,
                this.typeSupported = void 0,
                this.sampleAes = null,
                this.pmtParsed = !1,
                this.audioCodec = void 0,
                this.videoCodec = void 0,
                this._duration = 0,
                this._pmtId = -1,
                this._videoTrack = void 0,
                this._audioTrack = void 0,
                this._id3Track = void 0,
                this._txtTrack = void 0,
                this.aacOverFlow = null,
                this.remainderData = null,
                this.videoParser = void 0,
                this.observer = t,
                this.config = e,
                this.typeSupported = r,
                this.videoParser = new rn
            }
            t.probe = function(e) {
                var r = t.syncOffset(e);
                return r > 0 && w.warn("MPEG2-TS detected but first sync word found @ offset " + r),
                -1 !== r
            }
            ,
            t.syncOffset = function(t) {
                for (var e = t.length, r = Math.min(940, e - an) + 1, i = 0; i < r; ) {
                    for (var n = !1, a = -1, s = 0, o = i; o < e; o += an) {
                        if (71 !== t[o] || e - o !== an && 71 !== t[o + an]) {
                            if (s)
                                return -1;
                            break
                        }
                        if (s++,
                        -1 === a && 0 !== (a = o) && (r = Math.min(a + 18612, t.length - an) + 1),
                        n || (n = 0 === on(t, o)),
                        n && s > 1 && (0 === a && s > 2 || o + an > r))
                            return a
                    }
                    i++
                }
                return -1
            }
            ,
            t.createTrack = function(t, e) {
                return {
                    container: "video" === t || "audio" === t ? "video/mp2t" : void 0,
                    type: t,
                    id: kt[t],
                    pid: -1,
                    inputTimeScale: 9e4,
                    sequenceNumber: 0,
                    samples: [],
                    dropped: 0,
                    duration: "audio" === t ? e : void 0
                }
            }
            ;
            var e = t.prototype;
            return e.resetInitSegment = function(e, r, i, n) {
                this.pmtParsed = !1,
                this._pmtId = -1,
                this._videoTrack = t.createTrack("video"),
                this._audioTrack = t.createTrack("audio", n),
                this._id3Track = t.createTrack("id3"),
                this._txtTrack = t.createTrack("text"),
                this._audioTrack.segmentCodec = "aac",
                this.aacOverFlow = null,
                this.remainderData = null,
                this.audioCodec = r,
                this.videoCodec = i,
                this._duration = n
            }
            ,
            e.resetTimeStamp = function() {}
            ,
            e.resetContiguity = function() {
                var t = this._audioTrack
                  , e = this._videoTrack
                  , r = this._id3Track;
                t && (t.pesData = null),
                e && (e.pesData = null),
                r && (r.pesData = null),
                this.aacOverFlow = null,
                this.remainderData = null
            }
            ,
            e.demux = function(e, r, i, n) {
                var a;
                void 0 === i && (i = !1),
                void 0 === n && (n = !1),
                i || (this.sampleAes = null);
                var s = this._videoTrack
                  , o = this._audioTrack
                  , l = this._id3Track
                  , u = this._txtTrack
                  , h = s.pid
                  , d = s.pesData
                  , c = o.pid
                  , f = l.pid
                  , g = o.pesData
                  , v = l.pesData
                  , m = null
                  , p = this.pmtParsed
                  , y = this._pmtId
                  , E = e.length;
                if (this.remainderData && (E = (e = Kt(this.remainderData, e)).length,
                this.remainderData = null),
                E < an && !n)
                    return this.remainderData = e,
                    {
                        audioTrack: o,
                        videoTrack: s,
                        id3Track: l,
                        textTrack: u
                    };
                var T = Math.max(0, t.syncOffset(e));
                (E -= (E - T) % an) < e.byteLength && !n && (this.remainderData = new Uint8Array(e.buffer,E,e.buffer.byteLength - E));
                for (var R = 0, k = T; k < E; k += an)
                    if (71 === e[k]) {
                        var b = !!(64 & e[k + 1])
                          , D = on(e, k)
                          , I = void 0;
                        if ((48 & e[k + 3]) >> 4 > 1) {
                            if ((I = k + 5 + e[k + 4]) === k + an)
                                continue
                        } else
                            I = k + 4;
                        switch (D) {
                        case h:
                            b && (d && (a = dn(d)) && this.videoParser.parseAVCPES(s, u, a, !1, this._duration),
                            d = {
                                data: [],
                                size: 0
                            }),
                            d && (d.data.push(e.subarray(I, k + an)),
                            d.size += k + an - I);
                            break;
                        case c:
                            if (b) {
                                if (g && (a = dn(g)))
                                    switch (o.segmentCodec) {
                                    case "aac":
                                        this.parseAACPES(o, a);
                                        break;
                                    case "mp3":
                                        this.parseMPEGPES(o, a);
                                        break;
                                    case "ac3":
                                        this.parseAC3PES(o, a)
                                    }
                                g = {
                                    data: [],
                                    size: 0
                                }
                            }
                            g && (g.data.push(e.subarray(I, k + an)),
                            g.size += k + an - I);
                            break;
                        case f:
                            b && (v && (a = dn(v)) && this.parseID3PES(l, a),
                            v = {
                                data: [],
                                size: 0
                            }),
                            v && (v.data.push(e.subarray(I, k + an)),
                            v.size += k + an - I);
                            break;
                        case 0:
                            b && (I += e[I] + 1),
                            y = this._pmtId = ln(e, I);
                            break;
                        case y:
                            b && (I += e[I] + 1);
                            var C = un(e, I, this.typeSupported, i);
                            (h = C.videoPid) > 0 && (s.pid = h,
                            s.segmentCodec = C.segmentVideoCodec),
                            (c = C.audioPid) > 0 && (o.pid = c,
                            o.segmentCodec = C.segmentAudioCodec),
                            (f = C.id3Pid) > 0 && (l.pid = f),
                            null === m || p || (w.warn("MPEG-TS PMT found at " + k + " after unknown PID '" + m + "'. Backtracking to sync byte @" + T + " to parse all TS packets."),
                            m = null,
                            k = T - 188),
                            p = this.pmtParsed = !0;
                            break;
                        case 17:
                        case 8191:
                            break;
                        default:
                            m = D
                        }
                    } else
                        R++;
                if (R > 0) {
                    var _ = new Error("Found " + R + " TS packet/s that do not start with 0x47");
                    this.observer.emit(S.ERROR, S.ERROR, {
                        type: L.MEDIA_ERROR,
                        details: A.FRAG_PARSING_ERROR,
                        fatal: !1,
                        error: _,
                        reason: _.message
                    })
                }
                s.pesData = d,
                o.pesData = g,
                l.pesData = v;
                var x = {
                    audioTrack: o,
                    videoTrack: s,
                    id3Track: l,
                    textTrack: u
                };
                return n && this.extractRemainingSamples(x),
                x
            }
            ,
            e.flush = function() {
                var t, e = this.remainderData;
                return this.remainderData = null,
                t = e ? this.demux(e, -1, !1, !0) : {
                    videoTrack: this._videoTrack,
                    audioTrack: this._audioTrack,
                    id3Track: this._id3Track,
                    textTrack: this._txtTrack
                },
                this.extractRemainingSamples(t),
                this.sampleAes ? this.decrypt(t, this.sampleAes) : t
            }
            ,
            e.extractRemainingSamples = function(t) {
                var e, r = t.audioTrack, i = t.videoTrack, n = t.id3Track, a = t.textTrack, s = i.pesData, o = r.pesData, l = n.pesData;
                if (s && (e = dn(s)) ? (this.videoParser.parseAVCPES(i, a, e, !0, this._duration),
                i.pesData = null) : i.pesData = s,
                o && (e = dn(o))) {
                    switch (r.segmentCodec) {
                    case "aac":
                        this.parseAACPES(r, e);
                        break;
                    case "mp3":
                        this.parseMPEGPES(r, e);
                        break;
                    case "ac3":
                        this.parseAC3PES(r, e)
                    }
                    r.pesData = null
                } else
                    null != o && o.size && w.log("last AAC PES packet truncated,might overlap between fragments"),
                    r.pesData = o;
                l && (e = dn(l)) ? (this.parseID3PES(n, e),
                n.pesData = null) : n.pesData = l
            }
            ,
            e.demuxSampleAes = function(t, e, r) {
                var i = this.demux(t, r, !0, !this.config.progressive)
                  , n = this.sampleAes = new nn(this.observer,this.config,e);
                return this.decrypt(i, n)
            }
            ,
            e.decrypt = function(t, e) {
                return new Promise((function(r) {
                    var i = t.audioTrack
                      , n = t.videoTrack;
                    i.samples && "aac" === i.segmentCodec ? e.decryptAacSamples(i.samples, 0, (function() {
                        n.samples ? e.decryptAvcSamples(n.samples, 0, 0, (function() {
                            r(t)
                        }
                        )) : r(t)
                    }
                    )) : n.samples && e.decryptAvcSamples(n.samples, 0, 0, (function() {
                        r(t)
                    }
                    ))
                }
                ))
            }
            ,
            e.destroy = function() {
                this._duration = 0
            }
            ,
            e.parseAACPES = function(t, e) {
                var r, i, n, a = 0, s = this.aacOverFlow, o = e.data;
                if (s) {
                    this.aacOverFlow = null;
                    var l = s.missing
                      , u = s.sample.unit.byteLength;
                    if (-1 === l)
                        o = Kt(s.sample.unit, o);
                    else {
                        var h = u - l;
                        s.sample.unit.set(o.subarray(0, l), h),
                        t.samples.push(s.sample),
                        a = s.missing
                    }
                }
                for (r = a,
                i = o.length; r < i - 1 && !Pi(o, r); r++)
                    ;
                if (r !== a) {
                    var d, c = r < i - 1;
                    d = c ? "AAC PES did not start with ADTS header,offset:" + r : "No ADTS header found in AAC PES";
                    var f = new Error(d);
                    if (w.warn("parsing error: " + d),
                    this.observer.emit(S.ERROR, S.ERROR, {
                        type: L.MEDIA_ERROR,
                        details: A.FRAG_PARSING_ERROR,
                        fatal: !1,
                        levelRetry: c,
                        error: f,
                        reason: d
                    }),
                    !c)
                        return
                }
                if (Mi(t, this.observer, o, r, this.audioCodec),
                void 0 !== e.pts)
                    n = e.pts;
                else {
                    if (!s)
                        return void w.warn("[tsdemuxer]: AAC PES unknown PTS");
                    var g = Oi(t.samplerate);
                    n = s.sample.pts + g
                }
                for (var v, m = 0; r < i; ) {
                    if (r += (v = Ni(t, o, r, n, m)).length,
                    v.missing) {
                        this.aacOverFlow = v;
                        break
                    }
                    for (m++; r < i - 1 && !Pi(o, r); r++)
                        ;
                }
            }
            ,
            e.parseMPEGPES = function(t, e) {
                var r = e.data
                  , i = r.length
                  , n = 0
                  , a = 0
                  , s = e.pts;
                if (void 0 !== s)
                    for (; a < i; )
                        if (ji(r, a)) {
                            var o = Vi(t, r, a, s, n);
                            if (!o)
                                break;
                            a += o.length,
                            n++
                        } else
                            a++;
                else
                    w.warn("[tsdemuxer]: MPEG PES unknown PTS")
            }
            ,
            e.parseAC3PES = function(t, e) {
                var r = e.data
                  , i = e.pts;
                if (void 0 !== i)
                    for (var n, a = r.length, s = 0, o = 0; o < a && (n = Zi(t, r, o, i, s++)) > 0; )
                        o += n;
                else
                    w.warn("[tsdemuxer]: AC3 PES unknown PTS")
            }
            ,
            e.parseID3PES = function(t, e) {
                if (void 0 !== e.pts) {
                    var r = o({}, e, {
                        type: this._videoTrack ? He : Ge,
                        duration: Number.POSITIVE_INFINITY
                    });
                    t.samples.push(r)
                } else
                    w.warn("[tsdemuxer]: ID3 PES unknown PTS")
            }
            ,
            t
        }();
        function on(t, e) {
            return ((31 & t[e + 1]) << 8) + t[e + 2]
        }
        function ln(t, e) {
            return (31 & t[e + 10]) << 8 | t[e + 11]
        }
        function un(t, e, r, i) {
            var n = {
                audioPid: -1,
                videoPid: -1,
                id3Pid: -1,
                segmentVideoCodec: "avc",
                segmentAudioCodec: "aac"
            }
              , a = e + 3 + ((15 & t[e + 1]) << 8 | t[e + 2]) - 4;
            for (e += 12 + ((15 & t[e + 10]) << 8 | t[e + 11]); e < a; ) {
                var s = on(t, e)
                  , o = (15 & t[e + 3]) << 8 | t[e + 4];
                switch (t[e]) {
                case 207:
                    if (!i) {
                        hn("ADTS AAC");
                        break
                    }
                case 15:
                    -1 === n.audioPid && (n.audioPid = s);
                    break;
                case 21:
                    -1 === n.id3Pid && (n.id3Pid = s);
                    break;
                case 219:
                    if (!i) {
                        hn("H.264");
                        break
                    }
                case 27:
                    -1 === n.videoPid && (n.videoPid = s,
                    n.segmentVideoCodec = "avc");
                    break;
                case 3:
                case 4:
                    r.mpeg || r.mp3 ? -1 === n.audioPid && (n.audioPid = s,
                    n.segmentAudioCodec = "mp3") : w.log("MPEG audio found, not supported in this browser");
                    break;
                case 193:
                    if (!i) {
                        hn("AC-3");
                        break
                    }
                case 129:
                    r.ac3 ? -1 === n.audioPid && (n.audioPid = s,
                    n.segmentAudioCodec = "ac3") : w.log("AC-3 audio found, not supported in this browser");
                    break;
                case 6:
                    if (-1 === n.audioPid && o > 0)
                        for (var l = e + 5, u = o; u > 2; ) {
                            106 === t[l] && (!0 !== r.ac3 ? w.log("AC-3 audio found, not supported in this browser for now") : (n.audioPid = s,
                            n.segmentAudioCodec = "ac3"));
                            var h = t[l + 1] + 2;
                            l += h,
                            u -= h
                        }
                    break;
                case 194:
                case 135:
                    w.warn("Unsupported EC-3 in M2TS found");
                    break;
                case 36:
                    w.warn("Unsupported HEVC in M2TS found")
                }
                e += o + 5
            }
            return n
        }
        function hn(t) {
            w.log(t + " with AES-128-CBC encryption found in unencrypted stream")
        }
        function dn(t) {
            var e, r, i, n, a, s = 0, o = t.data;
            if (!t || 0 === t.size)
                return null;
            for (; o[0].length < 19 && o.length > 1; )
                o[0] = Kt(o[0], o[1]),
                o.splice(1, 1);
            if (1 === ((e = o[0])[0] << 16) + (e[1] << 8) + e[2]) {
                if ((r = (e[4] << 8) + e[5]) && r > t.size - 6)
                    return null;
                var l = e[7];
                192 & l && (n = 536870912 * (14 & e[9]) + 4194304 * (255 & e[10]) + 16384 * (254 & e[11]) + 128 * (255 & e[12]) + (254 & e[13]) / 2,
                64 & l ? n - (a = 536870912 * (14 & e[14]) + 4194304 * (255 & e[15]) + 16384 * (254 & e[16]) + 128 * (255 & e[17]) + (254 & e[18]) / 2) > 54e5 && (w.warn(Math.round((n - a) / 9e4) + "s delta between PTS and DTS, align them"),
                n = a) : a = n);
                var u = (i = e[8]) + 9;
                if (t.size <= u)
                    return null;
                t.size -= u;
                for (var h = new Uint8Array(t.size), d = 0, c = o.length; d < c; d++) {
                    var f = (e = o[d]).byteLength;
                    if (u) {
                        if (u > f) {
                            u -= f;
                            continue
                        }
                        e = e.subarray(u),
                        f -= u,
                        u = 0
                    }
                    h.set(e, s),
                    s += f
                }
                return r && (r -= i + 3),
                {
                    data: h,
                    pts: n,
                    dts: a,
                    len: r
                }
            }
            return null
        }
        var cn = function(t) {
            function e() {
                return t.apply(this, arguments) || this
            }
            l(e, t);
            var r = e.prototype;
            return r.resetInitSegment = function(e, r, i, n) {
                t.prototype.resetInitSegment.call(this, e, r, i, n),
                this._audioTrack = {
                    container: "audio/mpeg",
                    type: "audio",
                    id: 2,
                    pid: -1,
                    sequenceNumber: 0,
                    segmentCodec: "mp3",
                    samples: [],
                    manifestCodec: r,
                    duration: n,
                    inputTimeScale: 9e4,
                    dropped: 0
                }
            }
            ,
            e.probe = function(t) {
                if (!t)
                    return !1;
                var e = lt(t, 0)
                  , r = (null == e ? void 0 : e.length) || 0;
                if (e && 11 === t[r] && 119 === t[r + 1] && void 0 !== dt(e) && Ji(t, r) <= 16)
                    return !1;
                for (var i = t.length; r < i; r++)
                    if (qi(t, r))
                        return w.log("MPEG Audio sync word found !"),
                        !0;
                return !1
            }
            ,
            r.canParse = function(t, e) {
                return function(t, e) {
                    return Wi(t, e) && 4 <= t.length - e
                }(t, e)
            }
            ,
            r.appendFrame = function(t, e, r) {
                if (null !== this.basePTS)
                    return Vi(t, e, r, this.basePTS, this.frameIndex)
            }
            ,
            e
        }(Ii)
          , fn = function() {
            function t() {}
            return t.getSilentFrame = function(t, e) {
                if ("mp4a.40.2" === t) {
                    if (1 === e)
                        return new Uint8Array([0, 200, 0, 128, 35, 128]);
                    if (2 === e)
                        return new Uint8Array([33, 0, 73, 144, 2, 25, 0, 35, 128]);
                    if (3 === e)
                        return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 142]);
                    if (4 === e)
                        return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 128, 44, 128, 8, 2, 56]);
                    if (5 === e)
                        return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 130, 48, 4, 153, 0, 33, 144, 2, 56]);
                    if (6 === e)
                        return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 130, 48, 4, 153, 0, 33, 144, 2, 0, 178, 0, 32, 8, 224])
                } else {
                    if (1 === e)
                        return new Uint8Array([1, 64, 34, 128, 163, 78, 230, 128, 186, 8, 0, 0, 0, 28, 6, 241, 193, 10, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94]);
                    if (2 === e)
                        return new Uint8Array([1, 64, 34, 128, 163, 94, 230, 128, 186, 8, 0, 0, 0, 0, 149, 0, 6, 241, 161, 10, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94]);
                    if (3 === e)
                        return new Uint8Array([1, 64, 34, 128, 163, 94, 230, 128, 186, 8, 0, 0, 0, 0, 149, 0, 6, 241, 161, 10, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94])
                }
            }
            ,
            t
        }()
          , gn = Math.pow(2, 32) - 1
          , vn = function() {
            function t() {}
            return t.init = function() {
                var e;
                for (e in t.types = {
                    avc1: [],
                    avcC: [],
                    btrt: [],
                    dinf: [],
                    dref: [],
                    esds: [],
                    ftyp: [],
                    hdlr: [],
                    mdat: [],
                    mdhd: [],
                    mdia: [],
                    mfhd: [],
                    minf: [],
                    moof: [],
                    moov: [],
                    mp4a: [],
                    ".mp3": [],
                    dac3: [],
                    "ac-3": [],
                    mvex: [],
                    mvhd: [],
                    pasp: [],
                    sdtp: [],
                    stbl: [],
                    stco: [],
                    stsc: [],
                    stsd: [],
                    stsz: [],
                    stts: [],
                    tfdt: [],
                    tfhd: [],
                    traf: [],
                    trak: [],
                    trun: [],
                    trex: [],
                    tkhd: [],
                    vmhd: [],
                    smhd: []
                },
                t.types)
                    t.types.hasOwnProperty(e) && (t.types[e] = [e.charCodeAt(0), e.charCodeAt(1), e.charCodeAt(2), e.charCodeAt(3)]);
                var r = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 118, 105, 100, 101, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 86, 105, 100, 101, 111, 72, 97, 110, 100, 108, 101, 114, 0])
                  , i = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 115, 111, 117, 110, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 83, 111, 117, 110, 100, 72, 97, 110, 100, 108, 101, 114, 0]);
                t.HDLR_TYPES = {
                    video: r,
                    audio: i
                };
                var n = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 12, 117, 114, 108, 32, 0, 0, 0, 1])
                  , a = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]);
                t.STTS = t.STSC = t.STCO = a,
                t.STSZ = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]),
                t.VMHD = new Uint8Array([0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0]),
                t.SMHD = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]),
                t.STSD = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1]);
                var s = new Uint8Array([105, 115, 111, 109])
                  , o = new Uint8Array([97, 118, 99, 49])
                  , l = new Uint8Array([0, 0, 0, 1]);
                t.FTYP = t.box(t.types.ftyp, s, l, s, o),
                t.DINF = t.box(t.types.dinf, t.box(t.types.dref, n))
            }
            ,
            t.box = function(t) {
                for (var e = 8, r = arguments.length, i = new Array(r > 1 ? r - 1 : 0), n = 1; n < r; n++)
                    i[n - 1] = arguments[n];
                for (var a = i.length, s = a; a--; )
                    e += i[a].byteLength;
                var o = new Uint8Array(e);
                for (o[0] = e >> 24 & 255,
                o[1] = e >> 16 & 255,
                o[2] = e >> 8 & 255,
                o[3] = 255 & e,
                o.set(t, 4),
                a = 0,
                e = 8; a < s; a++)
                    o.set(i[a], e),
                    e += i[a].byteLength;
                return o
            }
            ,
            t.hdlr = function(e) {
                return t.box(t.types.hdlr, t.HDLR_TYPES[e])
            }
            ,
            t.mdat = function(e) {
                return t.box(t.types.mdat, e)
            }
            ,
            t.mdhd = function(e, r) {
                r *= e;
                var i = Math.floor(r / (gn + 1))
                  , n = Math.floor(r % (gn + 1));
                return t.box(t.types.mdhd, new Uint8Array([1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3, e >> 24 & 255, e >> 16 & 255, e >> 8 & 255, 255 & e, i >> 24, i >> 16 & 255, i >> 8 & 255, 255 & i, n >> 24, n >> 16 & 255, n >> 8 & 255, 255 & n, 85, 196, 0, 0]))
            }
            ,
            t.mdia = function(e) {
                return t.box(t.types.mdia, t.mdhd(e.timescale, e.duration), t.hdlr(e.type), t.minf(e))
            }
            ,
            t.mfhd = function(e) {
                return t.box(t.types.mfhd, new Uint8Array([0, 0, 0, 0, e >> 24, e >> 16 & 255, e >> 8 & 255, 255 & e]))
            }
            ,
            t.minf = function(e) {
                return "audio" === e.type ? t.box(t.types.minf, t.box(t.types.smhd, t.SMHD), t.DINF, t.stbl(e)) : t.box(t.types.minf, t.box(t.types.vmhd, t.VMHD), t.DINF, t.stbl(e))
            }
            ,
            t.moof = function(e, r, i) {
                return t.box(t.types.moof, t.mfhd(e), t.traf(i, r))
            }
            ,
            t.moov = function(e) {
                for (var r = e.length, i = []; r--; )
                    i[r] = t.trak(e[r]);
                return t.box.apply(null, [t.types.moov, t.mvhd(e[0].timescale, e[0].duration)].concat(i).concat(t.mvex(e)))
            }
            ,
            t.mvex = function(e) {
                for (var r = e.length, i = []; r--; )
                    i[r] = t.trex(e[r]);
                return t.box.apply(null, [t.types.mvex].concat(i))
            }
            ,
            t.mvhd = function(e, r) {
                r *= e;
                var i = Math.floor(r / (gn + 1))
                  , n = Math.floor(r % (gn + 1))
                  , a = new Uint8Array([1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3, e >> 24 & 255, e >> 16 & 255, e >> 8 & 255, 255 & e, i >> 24, i >> 16 & 255, i >> 8 & 255, 255 & i, n >> 24, n >> 16 & 255, n >> 8 & 255, 255 & n, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 255, 255, 255, 255]);
                return t.box(t.types.mvhd, a)
            }
            ,
            t.sdtp = function(e) {
                var r, i, n = e.samples || [], a = new Uint8Array(4 + n.length);
                for (r = 0; r < n.length; r++)
                    i = n[r].flags,
                    a[r + 4] = i.dependsOn << 4 | i.isDependedOn << 2 | i.hasRedundancy;
                return t.box(t.types.sdtp, a)
            }
            ,
            t.stbl = function(e) {
                return t.box(t.types.stbl, t.stsd(e), t.box(t.types.stts, t.STTS), t.box(t.types.stsc, t.STSC), t.box(t.types.stsz, t.STSZ), t.box(t.types.stco, t.STCO))
            }
            ,
            t.avc1 = function(e) {
                var r, i, n, a = [], s = [];
                for (r = 0; r < e.sps.length; r++)
                    n = (i = e.sps[r]).byteLength,
                    a.push(n >>> 8 & 255),
                    a.push(255 & n),
                    a = a.concat(Array.prototype.slice.call(i));
                for (r = 0; r < e.pps.length; r++)
                    n = (i = e.pps[r]).byteLength,
                    s.push(n >>> 8 & 255),
                    s.push(255 & n),
                    s = s.concat(Array.prototype.slice.call(i));
                var o = t.box(t.types.avcC, new Uint8Array([1, a[3], a[4], a[5], 255, 224 | e.sps.length].concat(a).concat([e.pps.length]).concat(s)))
                  , l = e.width
                  , u = e.height
                  , h = e.pixelRatio[0]
                  , d = e.pixelRatio[1];
                return t.box(t.types.avc1, new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, l >> 8 & 255, 255 & l, u >> 8 & 255, 255 & u, 0, 72, 0, 0, 0, 72, 0, 0, 0, 0, 0, 0, 0, 1, 18, 100, 97, 105, 108, 121, 109, 111, 116, 105, 111, 110, 47, 104, 108, 115, 46, 106, 115, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 24, 17, 17]), o, t.box(t.types.btrt, new Uint8Array([0, 28, 156, 128, 0, 45, 198, 192, 0, 45, 198, 192])), t.box(t.types.pasp, new Uint8Array([h >> 24, h >> 16 & 255, h >> 8 & 255, 255 & h, d >> 24, d >> 16 & 255, d >> 8 & 255, 255 & d])))
            }
            ,
            t.esds = function(t) {
                var e = t.config.length;
                return new Uint8Array([0, 0, 0, 0, 3, 23 + e, 0, 1, 0, 4, 15 + e, 64, 21, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 5].concat([e]).concat(t.config).concat([6, 1, 2]))
            }
            ,
            t.audioStsd = function(t) {
                var e = t.samplerate;
                return new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, t.channelCount, 0, 16, 0, 0, 0, 0, e >> 8 & 255, 255 & e, 0, 0])
            }
            ,
            t.mp4a = function(e) {
                return t.box(t.types.mp4a, t.audioStsd(e), t.box(t.types.esds, t.esds(e)))
            }
            ,
            t.mp3 = function(e) {
                return t.box(t.types[".mp3"], t.audioStsd(e))
            }
            ,
            t.ac3 = function(e) {
                return t.box(t.types["ac-3"], t.audioStsd(e), t.box(t.types.dac3, e.config))
            }
            ,
            t.stsd = function(e) {
                return "audio" === e.type ? "mp3" === e.segmentCodec && "mp3" === e.codec ? t.box(t.types.stsd, t.STSD, t.mp3(e)) : "ac3" === e.segmentCodec ? t.box(t.types.stsd, t.STSD, t.ac3(e)) : t.box(t.types.stsd, t.STSD, t.mp4a(e)) : t.box(t.types.stsd, t.STSD, t.avc1(e))
            }
            ,
            t.tkhd = function(e) {
                var r = e.id
                  , i = e.duration * e.timescale
                  , n = e.width
                  , a = e.height
                  , s = Math.floor(i / (gn + 1))
                  , o = Math.floor(i % (gn + 1));
                return t.box(t.types.tkhd, new Uint8Array([1, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3, r >> 24 & 255, r >> 16 & 255, r >> 8 & 255, 255 & r, 0, 0, 0, 0, s >> 24, s >> 16 & 255, s >> 8 & 255, 255 & s, o >> 24, o >> 16 & 255, o >> 8 & 255, 255 & o, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0, n >> 8 & 255, 255 & n, 0, 0, a >> 8 & 255, 255 & a, 0, 0]))
            }
            ,
            t.traf = function(e, r) {
                var i = t.sdtp(e)
                  , n = e.id
                  , a = Math.floor(r / (gn + 1))
                  , s = Math.floor(r % (gn + 1));
                return t.box(t.types.traf, t.box(t.types.tfhd, new Uint8Array([0, 0, 0, 0, n >> 24, n >> 16 & 255, n >> 8 & 255, 255 & n])), t.box(t.types.tfdt, new Uint8Array([1, 0, 0, 0, a >> 24, a >> 16 & 255, a >> 8 & 255, 255 & a, s >> 24, s >> 16 & 255, s >> 8 & 255, 255 & s])), t.trun(e, i.length + 16 + 20 + 8 + 16 + 8 + 8), i)
            }
            ,
            t.trak = function(e) {
                return e.duration = e.duration || 4294967295,
                t.box(t.types.trak, t.tkhd(e), t.mdia(e))
            }
            ,
            t.trex = function(e) {
                var r = e.id;
                return t.box(t.types.trex, new Uint8Array([0, 0, 0, 0, r >> 24, r >> 16 & 255, r >> 8 & 255, 255 & r, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1]))
            }
            ,
            t.trun = function(e, r) {
                var i, n, a, s, o, l, u = e.samples || [], h = u.length, d = 12 + 16 * h, c = new Uint8Array(d);
                for (r += 8 + d,
                c.set(["video" === e.type ? 1 : 0, 0, 15, 1, h >>> 24 & 255, h >>> 16 & 255, h >>> 8 & 255, 255 & h, r >>> 24 & 255, r >>> 16 & 255, r >>> 8 & 255, 255 & r], 0),
                i = 0; i < h; i++)
                    a = (n = u[i]).duration,
                    s = n.size,
                    o = n.flags,
                    l = n.cts,
                    c.set([a >>> 24 & 255, a >>> 16 & 255, a >>> 8 & 255, 255 & a, s >>> 24 & 255, s >>> 16 & 255, s >>> 8 & 255, 255 & s, o.isLeading << 2 | o.dependsOn, o.isDependedOn << 6 | o.hasRedundancy << 4 | o.paddingValue << 1 | o.isNonSync, 61440 & o.degradPrio, 15 & o.degradPrio, l >>> 24 & 255, l >>> 16 & 255, l >>> 8 & 255, 255 & l], 12 + 16 * i);
                return t.box(t.types.trun, c)
            }
            ,
            t.initSegment = function(e) {
                t.types || t.init();
                var r = t.moov(e);
                return Kt(t.FTYP, r)
            }
            ,
            t
        }();
        vn.types = void 0,
        vn.HDLR_TYPES = void 0,
        vn.STTS = void 0,
        vn.STSC = void 0,
        vn.STCO = void 0,
        vn.STSZ = void 0,
        vn.VMHD = void 0,
        vn.SMHD = void 0,
        vn.STSD = void 0,
        vn.FTYP = void 0,
        vn.DINF = void 0;
        var mn = 9e4;
        function pn(t, e, r, i) {
            void 0 === r && (r = 1),
            void 0 === i && (i = !1);
            var n = t * e * r;
            return i ? Math.round(n) : n
        }
        function yn(t, e) {
            return void 0 === e && (e = !1),
            pn(t, 1e3, 1 / mn, e)
        }
        var En = null
          , Tn = null
          , Sn = function() {
            function t(t, e, r, i) {
                if (this.observer = void 0,
                this.config = void 0,
                this.typeSupported = void 0,
                this.ISGenerated = !1,
                this._initPTS = null,
                this._initDTS = null,
                this.nextAvcDts = null,
                this.nextAudioPts = null,
                this.videoSampleDuration = null,
                this.isAudioContiguous = !1,
                this.isVideoContiguous = !1,
                this.videoTrackConfig = void 0,
                this.observer = t,
                this.config = e,
                this.typeSupported = r,
                this.ISGenerated = !1,
                null === En) {
                    var n = (navigator.userAgent || "").match(/Chrome\/(\d+)/i);
                    En = n ? parseInt(n[1]) : 0
                }
                if (null === Tn) {
                    var a = navigator.userAgent.match(/Safari\/(\d+)/i);
                    Tn = a ? parseInt(a[1]) : 0
                }
            }
            var e = t.prototype;
            return e.destroy = function() {
                this.config = this.videoTrackConfig = this._initPTS = this._initDTS = null
            }
            ,
            e.resetTimeStamp = function(t) {
                w.log("[mp4-remuxer]: initPTS & initDTS reset"),
                this._initPTS = this._initDTS = t
            }
            ,
            e.resetNextTimestamp = function() {
                w.log("[mp4-remuxer]: reset next timestamp"),
                this.isVideoContiguous = !1,
                this.isAudioContiguous = !1
            }
            ,
            e.resetInitSegment = function() {
                w.log("[mp4-remuxer]: ISGenerated flag reset"),
                this.ISGenerated = !1,
                this.videoTrackConfig = void 0
            }
            ,
            e.getVideoStartPts = function(t) {
                var e = !1
                  , r = t.reduce((function(t, r) {
                    var i = r.pts - t;
                    return i < -4294967296 ? (e = !0,
                    Ln(t, r.pts)) : i > 0 ? t : r.pts
                }
                ), t[0].pts);
                return e && w.debug("PTS rollover detected"),
                r
            }
            ,
            e.remux = function(t, e, r, i, n, a, s, o) {
                var l, u, h, d, c, f, g = n, v = n, m = t.pid > -1, p = e.pid > -1, y = e.samples.length, E = t.samples.length > 0, T = s && y > 0 || y > 1;
                if ((!m || E) && (!p || T) || this.ISGenerated || s) {
                    if (this.ISGenerated) {
                        var S, L, A, R, k = this.videoTrackConfig;
                        !k || e.width === k.width && e.height === k.height && (null == (S = e.pixelRatio) ? void 0 : S[0]) === (null == (L = k.pixelRatio) ? void 0 : L[0]) && (null == (A = e.pixelRatio) ? void 0 : A[1]) === (null == (R = k.pixelRatio) ? void 0 : R[1]) || this.resetInitSegment()
                    } else
                        h = this.generateIS(t, e, n, a);
                    var b, D = this.isVideoContiguous, I = -1;
                    if (T && (I = function(t) {
                        for (var e = 0; e < t.length; e++)
                            if (t[e].key)
                                return e;
                        return -1
                    }(e.samples),
                    !D && this.config.forceKeyFrameOnDiscontinuity))
                        if (f = !0,
                        I > 0) {
                            w.warn("[mp4-remuxer]: Dropped " + I + " out of " + y + " video samples due to a missing keyframe");
                            var C = this.getVideoStartPts(e.samples);
                            e.samples = e.samples.slice(I),
                            e.dropped += I,
                            b = v += (e.samples[0].pts - C) / e.inputTimeScale
                        } else
                            -1 === I && (w.warn("[mp4-remuxer]: No keyframe found out of " + y + " video samples"),
                            f = !1);
                    if (this.ISGenerated) {
                        if (E && T) {
                            var _ = this.getVideoStartPts(e.samples)
                              , x = (Ln(t.samples[0].pts, _) - _) / e.inputTimeScale;
                            g += Math.max(0, x),
                            v += Math.max(0, -x)
                        }
                        if (E) {
                            if (t.samplerate || (w.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),
                            h = this.generateIS(t, e, n, a)),
                            u = this.remuxAudio(t, g, this.isAudioContiguous, a, p || T || o === Ce ? v : void 0),
                            T) {
                                var P = u ? u.endPTS - u.startPTS : 0;
                                e.inputTimeScale || (w.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),
                                h = this.generateIS(t, e, n, a)),
                                l = this.remuxVideo(e, v, D, P)
                            }
                        } else
                            T && (l = this.remuxVideo(e, v, D, 0));
                        l && (l.firstKeyFrame = I,
                        l.independent = -1 !== I,
                        l.firstKeyFramePTS = b)
                    }
                }
                return this.ISGenerated && this._initPTS && this._initDTS && (r.samples.length && (c = An(r, n, this._initPTS, this._initDTS)),
                i.samples.length && (d = Rn(i, n, this._initPTS))),
                {
                    audio: u,
                    video: l,
                    initSegment: h,
                    independent: f,
                    text: d,
                    id3: c
                }
            }
            ,
            e.generateIS = function(t, e, r, i) {
                var n, a, s, o = t.samples, l = e.samples, u = this.typeSupported, h = {}, d = this._initPTS, c = !d || i, f = "audio/mp4";
                if (c && (n = a = 1 / 0),
                t.config && o.length) {
                    switch (t.timescale = t.samplerate,
                    t.segmentCodec) {
                    case "mp3":
                        u.mpeg ? (f = "audio/mpeg",
                        t.codec = "") : u.mp3 && (t.codec = "mp3");
                        break;
                    case "ac3":
                        t.codec = "ac-3"
                    }
                    h.audio = {
                        id: "audio",
                        container: f,
                        codec: t.codec,
                        initSegment: "mp3" === t.segmentCodec && u.mpeg ? new Uint8Array(0) : vn.initSegment([t]),
                        metadata: {
                            channelCount: t.channelCount
                        }
                    },
                    c && (s = t.inputTimeScale,
                    d && s === d.timescale ? c = !1 : n = a = o[0].pts - Math.round(s * r))
                }
                if (e.sps && e.pps && l.length) {
                    if (e.timescale = e.inputTimeScale,
                    h.video = {
                        id: "main",
                        container: "video/mp4",
                        codec: e.codec,
                        initSegment: vn.initSegment([e]),
                        metadata: {
                            width: e.width,
                            height: e.height
                        }
                    },
                    c)
                        if (s = e.inputTimeScale,
                        d && s === d.timescale)
                            c = !1;
                        else {
                            var g = this.getVideoStartPts(l)
                              , v = Math.round(s * r);
                            a = Math.min(a, Ln(l[0].dts, g) - v),
                            n = Math.min(n, g - v)
                        }
                    this.videoTrackConfig = {
                        width: e.width,
                        height: e.height,
                        pixelRatio: e.pixelRatio
                    }
                }
                if (Object.keys(h).length)
                    return this.ISGenerated = !0,
                    c ? (this._initPTS = {
                        baseTime: n,
                        timescale: s
                    },
                    this._initDTS = {
                        baseTime: a,
                        timescale: s
                    }) : n = s = void 0,
                    {
                        tracks: h,
                        initPTS: n,
                        timescale: s
                    }
            }
            ,
            e.remuxVideo = function(t, e, r, i) {
                var n, a, s = t.inputTimeScale, l = t.samples, u = [], h = l.length, d = this._initPTS, c = this.nextAvcDts, f = 8, g = this.videoSampleDuration, v = Number.POSITIVE_INFINITY, m = Number.NEGATIVE_INFINITY, p = !1;
                if (!r || null === c) {
                    var y = e * s
                      , E = l[0].pts - Ln(l[0].dts, l[0].pts);
                    En && null !== c && Math.abs(y - E - c) < 15e3 ? r = !0 : c = y - E
                }
                for (var T = d.baseTime * s / d.timescale, R = 0; R < h; R++) {
                    var k = l[R];
                    k.pts = Ln(k.pts - T, c),
                    k.dts = Ln(k.dts - T, c),
                    k.dts < l[R > 0 ? R - 1 : R].dts && (p = !0)
                }
                p && l.sort((function(t, e) {
                    var r = t.dts - e.dts
                      , i = t.pts - e.pts;
                    return r || i
                }
                )),
                n = l[0].dts;
                var b = (a = l[l.length - 1].dts) - n
                  , D = b ? Math.round(b / (h - 1)) : g || t.inputTimeScale / 30;
                if (r) {
                    var I = n - c
                      , C = I > D
                      , _ = I < -1;
                    if ((C || _) && (C ? w.warn("AVC: " + yn(I, !0) + " ms (" + I + "dts) hole between fragments detected at " + e.toFixed(3)) : w.warn("AVC: " + yn(-I, !0) + " ms (" + I + "dts) overlapping between fragments detected at " + e.toFixed(3)),
                    !_ || c >= l[0].pts || En)) {
                        n = c;
                        var x = l[0].pts - I;
                        if (C)
                            l[0].dts = n,
                            l[0].pts = x;
                        else
                            for (var P = 0; P < l.length && !(l[P].dts > x); P++)
                                l[P].dts -= I,
                                l[P].pts -= I;
                        w.log("Video: Initial PTS/DTS adjusted: " + yn(x, !0) + "/" + yn(n, !0) + ", delta: " + yn(I, !0) + " ms")
                    }
                }
                for (var F = 0, M = 0, O = n = Math.max(0, n), N = 0; N < h; N++) {
                    for (var U = l[N], B = U.units, G = B.length, K = 0, H = 0; H < G; H++)
                        K += B[H].data.length;
                    M += K,
                    F += G,
                    U.length = K,
                    U.dts < O ? (U.dts = O,
                    O += D / 4 | 0 || 1) : O = U.dts,
                    v = Math.min(U.pts, v),
                    m = Math.max(U.pts, m)
                }
                a = l[h - 1].dts;
                var V, Y = M + 4 * F + 8;
                try {
                    V = new Uint8Array(Y)
                } catch (t) {
                    return void this.observer.emit(S.ERROR, S.ERROR, {
                        type: L.MUX_ERROR,
                        details: A.REMUX_ALLOC_ERROR,
                        fatal: !1,
                        error: t,
                        bytes: Y,
                        reason: "fail allocating video mdat " + Y
                    })
                }
                var W = new DataView(V.buffer);
                W.setUint32(0, Y),
                V.set(vn.types.mdat, 4);
                for (var j = !1, q = Number.POSITIVE_INFINITY, X = Number.POSITIVE_INFINITY, z = Number.NEGATIVE_INFINITY, Q = Number.NEGATIVE_INFINITY, J = 0; J < h; J++) {
                    for (var $ = l[J], Z = $.units, tt = 0, et = 0, rt = Z.length; et < rt; et++) {
                        var it = Z[et]
                          , nt = it.data
                          , at = it.data.byteLength;
                        W.setUint32(f, at),
                        f += 4,
                        V.set(nt, f),
                        f += at,
                        tt += 4 + at
                    }
                    var st = void 0;
                    if (J < h - 1)
                        g = l[J + 1].dts - $.dts,
                        st = l[J + 1].pts - $.pts;
                    else {
                        var ot = this.config
                          , lt = J > 0 ? $.dts - l[J - 1].dts : D;
                        if (st = J > 0 ? $.pts - l[J - 1].pts : D,
                        ot.stretchShortVideoTrack && null !== this.nextAudioPts) {
                            var ut = Math.floor(ot.maxBufferHole * s)
                              , ht = (i ? v + i * s : this.nextAudioPts) - $.pts;
                            ht > ut ? ((g = ht - lt) < 0 ? g = lt : j = !0,
                            w.log("[mp4-remuxer]: It is approximately " + ht / 90 + " ms to the next segment; using duration " + g / 90 + " ms for the last video frame.")) : g = lt
                        } else
                            g = lt
                    }
                    var dt = Math.round($.pts - $.dts);
                    q = Math.min(q, g),
                    z = Math.max(z, g),
                    X = Math.min(X, st),
                    Q = Math.max(Q, st),
                    u.push(new bn($.key,g,tt,dt))
                }
                if (u.length)
                    if (En) {
                        if (En < 70) {
                            var ct = u[0].flags;
                            ct.dependsOn = 2,
                            ct.isNonSync = 0
                        }
                    } else if (Tn && Q - X < z - q && D / z < .025 && 0 === u[0].cts) {
                        w.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");
                        for (var ft = n, gt = 0, vt = u.length; gt < vt; gt++) {
                            var mt = ft + u[gt].duration
                              , pt = ft + u[gt].cts;
                            if (gt < vt - 1) {
                                var yt = mt + u[gt + 1].cts;
                                u[gt].duration = yt - pt
                            } else
                                u[gt].duration = gt ? u[gt - 1].duration : D;
                            u[gt].cts = 0,
                            ft = mt
                        }
                    }
                g = j || !g ? D : g,
                this.nextAvcDts = c = a + g,
                this.videoSampleDuration = g,
                this.isVideoContiguous = !0;
                var Et = {
                    data1: vn.moof(t.sequenceNumber++, n, o({}, t, {
                        samples: u
                    })),
                    data2: V,
                    startPTS: v / s,
                    endPTS: (m + g) / s,
                    startDTS: n / s,
                    endDTS: c / s,
                    type: "video",
                    hasAudio: !1,
                    hasVideo: !0,
                    nb: u.length,
                    dropped: t.dropped
                };
                return t.samples = [],
                t.dropped = 0,
                Et
            }
            ,
            e.getSamplesPerFrame = function(t) {
                switch (t.segmentCodec) {
                case "mp3":
                    return 1152;
                case "ac3":
                    return 1536;
                default:
                    return 1024
                }
            }
            ,
            e.remuxAudio = function(t, e, r, i, n) {
                var a = t.inputTimeScale
                  , s = a / (t.samplerate ? t.samplerate : a)
                  , l = this.getSamplesPerFrame(t)
                  , u = l * s
                  , h = this._initPTS
                  , d = "mp3" === t.segmentCodec && this.typeSupported.mpeg
                  , c = []
                  , f = void 0 !== n
                  , g = t.samples
                  , v = d ? 0 : 8
                  , m = this.nextAudioPts || -1
                  , p = e * a
                  , y = h.baseTime * a / h.timescale;
                if (this.isAudioContiguous = r = r || g.length && m > 0 && (i && Math.abs(p - m) < 9e3 || Math.abs(Ln(g[0].pts - y, p) - m) < 20 * u),
                g.forEach((function(t) {
                    t.pts = Ln(t.pts - y, p)
                }
                )),
                !r || m < 0) {
                    if (g = g.filter((function(t) {
                        return t.pts >= 0
                    }
                    )),
                    !g.length)
                        return;
                    m = 0 === n ? 0 : i && !f ? Math.max(0, p) : g[0].pts
                }
                if ("aac" === t.segmentCodec)
                    for (var E = this.config.maxAudioFramesDrift, T = 0, R = m; T < g.length; T++) {
                        var k = g[T]
                          , b = k.pts
                          , D = b - R
                          , I = Math.abs(1e3 * D / a);
                        if (D <= -E * u && f)
                            0 === T && (w.warn("Audio frame @ " + (b / a).toFixed(3) + "s overlaps nextAudioPts by " + Math.round(1e3 * D / a) + " ms."),
                            this.nextAudioPts = m = R = b);
                        else if (D >= E * u && I < 1e4 && f) {
                            var C = Math.round(D / u);
                            (R = b - C * u) < 0 && (C--,
                            R += u),
                            0 === T && (this.nextAudioPts = m = R),
                            w.warn("[mp4-remuxer]: Injecting " + C + " audio frame @ " + (R / a).toFixed(3) + "s due to " + Math.round(1e3 * D / a) + " ms gap.");
                            for (var _ = 0; _ < C; _++) {
                                var x = Math.max(R, 0)
                                  , P = fn.getSilentFrame(t.manifestCodec || t.codec, t.channelCount);
                                P || (w.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),
                                P = k.unit.subarray()),
                                g.splice(T, 0, {
                                    unit: P,
                                    pts: x
                                }),
                                R += u,
                                T++
                            }
                        }
                        k.pts = R,
                        R += u
                    }
                for (var F, M = null, O = null, N = 0, U = g.length; U--; )
                    N += g[U].unit.byteLength;
                for (var B = 0, G = g.length; B < G; B++) {
                    var K = g[B]
                      , H = K.unit
                      , V = K.pts;
                    if (null !== O)
                        c[B - 1].duration = Math.round((V - O) / s);
                    else {
                        if (r && "aac" === t.segmentCodec && (V = m),
                        M = V,
                        !(N > 0))
                            return;
                        N += v;
                        try {
                            F = new Uint8Array(N)
                        } catch (t) {
                            return void this.observer.emit(S.ERROR, S.ERROR, {
                                type: L.MUX_ERROR,
                                details: A.REMUX_ALLOC_ERROR,
                                fatal: !1,
                                error: t,
                                bytes: N,
                                reason: "fail allocating audio mdat " + N
                            })
                        }
                        d || (new DataView(F.buffer).setUint32(0, N),
                        F.set(vn.types.mdat, 4))
                    }
                    F.set(H, v);
                    var Y = H.byteLength;
                    v += Y,
                    c.push(new bn(!0,l,Y,0)),
                    O = V
                }
                var W = c.length;
                if (W) {
                    var j = c[c.length - 1];
                    this.nextAudioPts = m = O + s * j.duration;
                    var q = d ? new Uint8Array(0) : vn.moof(t.sequenceNumber++, M / s, o({}, t, {
                        samples: c
                    }));
                    t.samples = [];
                    var X = M / a
                      , z = m / a
                      , Q = {
                        data1: q,
                        data2: F,
                        startPTS: X,
                        endPTS: z,
                        startDTS: X,
                        endDTS: z,
                        type: "audio",
                        hasAudio: !0,
                        hasVideo: !1,
                        nb: W
                    };
                    return this.isAudioContiguous = !0,
                    Q
                }
            }
            ,
            e.remuxEmptyAudio = function(t, e, r, i) {
                var n = t.inputTimeScale
                  , a = n / (t.samplerate ? t.samplerate : n)
                  , s = this.nextAudioPts
                  , o = this._initDTS
                  , l = 9e4 * o.baseTime / o.timescale
                  , u = (null !== s ? s : i.startDTS * n) + l
                  , h = i.endDTS * n + l
                  , d = 1024 * a
                  , c = Math.ceil((h - u) / d)
                  , f = fn.getSilentFrame(t.manifestCodec || t.codec, t.channelCount);
                if (w.warn("[mp4-remuxer]: remux empty Audio"),
                f) {
                    for (var g = [], v = 0; v < c; v++) {
                        var m = u + v * d;
                        g.push({
                            unit: f,
                            pts: m,
                            dts: m
                        })
                    }
                    return t.samples = g,
                    this.remuxAudio(t, e, r, !1)
                }
                w.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")
            }
            ,
            t
        }();
        function Ln(t, e) {
            var r;
            if (null === e)
                return t;
            for (r = e < t ? -8589934592 : 8589934592; Math.abs(t - e) > 4294967296; )
                t += r;
            return t
        }
        function An(t, e, r, i) {
            var n = t.samples.length;
            if (n) {
                for (var a = t.inputTimeScale, s = 0; s < n; s++) {
                    var o = t.samples[s];
                    o.pts = Ln(o.pts - r.baseTime * a / r.timescale, e * a) / a,
                    o.dts = Ln(o.dts - i.baseTime * a / i.timescale, e * a) / a
                }
                var l = t.samples;
                return t.samples = [],
                {
                    samples: l
                }
            }
        }
        function Rn(t, e, r) {
            var i = t.samples.length;
            if (i) {
                for (var n = t.inputTimeScale, a = 0; a < i; a++) {
                    var s = t.samples[a];
                    s.pts = Ln(s.pts - r.baseTime * n / r.timescale, e * n) / n
                }
                t.samples.sort((function(t, e) {
                    return t.pts - e.pts
                }
                ));
                var o = t.samples;
                return t.samples = [],
                {
                    samples: o
                }
            }
        }
        var kn, bn = function(t, e, r, i) {
            this.size = void 0,
            this.duration = void 0,
            this.cts = void 0,
            this.flags = void 0,
            this.duration = e,
            this.size = r,
            this.cts = i,
            this.flags = {
                isLeading: 0,
                isDependedOn: 0,
                hasRedundancy: 0,
                degradPrio: 0,
                dependsOn: t ? 2 : 1,
                isNonSync: t ? 0 : 1
            }
        }, Dn = function() {
            function t() {
                this.emitInitSegment = !1,
                this.audioCodec = void 0,
                this.videoCodec = void 0,
                this.initData = void 0,
                this.initPTS = null,
                this.initTracks = void 0,
                this.lastEndTime = null
            }
            var e = t.prototype;
            return e.destroy = function() {}
            ,
            e.resetTimeStamp = function(t) {
                this.initPTS = t,
                this.lastEndTime = null
            }
            ,
            e.resetNextTimestamp = function() {
                this.lastEndTime = null
            }
            ,
            e.resetInitSegment = function(t, e, r, i) {
                this.audioCodec = e,
                this.videoCodec = r,
                this.generateInitSegment(function(t, e) {
                    if (!t || !e)
                        return t;
                    var r = e.keyId;
                    return r && e.isCommonEncryption && xt(t, ["moov", "trak"]).forEach((function(t) {
                        var e = xt(t, ["mdia", "minf", "stbl", "stsd"])[0].subarray(8)
                          , i = xt(e, ["enca"])
                          , n = i.length > 0;
                        n || (i = xt(e, ["encv"])),
                        i.forEach((function(t) {
                            xt(n ? t.subarray(28) : t.subarray(78), ["sinf"]).forEach((function(t) {
                                var e = Bt(t);
                                if (e) {
                                    var i = e.subarray(8, 24);
                                    i.some((function(t) {
                                        return 0 !== t
                                    }
                                    )) || (w.log("[eme] Patching keyId in 'enc" + (n ? "a" : "v") + ">sinf>>tenc' box: " + Lt(i) + " -> " + Lt(r)),
                                    e.set(r, 8))
                                }
                            }
                            ))
                        }
                        ))
                    }
                    )),
                    t
                }(t, i)),
                this.emitInitSegment = !0
            }
            ,
            e.generateInitSegment = function(t) {
                var e = this.audioCodec
                  , r = this.videoCodec;
                if (null == t || !t.byteLength)
                    return this.initTracks = void 0,
                    void (this.initData = void 0);
                var i = this.initData = Ft(t);
                i.audio && (e = In(i.audio, O)),
                i.video && (r = In(i.video, N));
                var n = {};
                i.audio && i.video ? n.audiovideo = {
                    container: "video/mp4",
                    codec: e + "," + r,
                    initSegment: t,
                    id: "main"
                } : i.audio ? n.audio = {
                    container: "audio/mp4",
                    codec: e,
                    initSegment: t,
                    id: "audio"
                } : i.video ? n.video = {
                    container: "video/mp4",
                    codec: r,
                    initSegment: t,
                    id: "main"
                } : w.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),
                this.initTracks = n
            }
            ,
            e.remux = function(t, e, r, i, n, a) {
                var s, o, l = this.initPTS, u = this.lastEndTime, h = {
                    audio: void 0,
                    video: void 0,
                    text: i,
                    id3: r,
                    initSegment: void 0
                };
                y(u) || (u = this.lastEndTime = n || 0);
                var d = e.samples;
                if (null == d || !d.length)
                    return h;
                var c = {
                    initPTS: void 0,
                    timescale: 1
                }
                  , f = this.initData;
                if (null != (s = f) && s.length || (this.generateInitSegment(d),
                f = this.initData),
                null == (o = f) || !o.length)
                    return w.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),
                    h;
                this.emitInitSegment && (c.tracks = this.initTracks,
                this.emitInitSegment = !1);
                var g = function(t, e) {
                    for (var r = 0, i = 0, n = 0, a = xt(t, ["moof", "traf"]), s = 0; s < a.length; s++) {
                        var o = a[s]
                          , l = xt(o, ["tfhd"])[0]
                          , u = e[It(l, 4)];
                        if (u) {
                            var h = u.default
                              , d = It(l, 0) | (null == h ? void 0 : h.flags)
                              , c = null == h ? void 0 : h.duration;
                            8 & d && (c = It(l, 2 & d ? 12 : 8));
                            for (var f = u.timescale || 9e4, g = xt(o, ["trun"]), v = 0; v < g.length; v++)
                                !(r = Gt(g[v])) && c && (r = c * It(g[v], 4)),
                                u.type === N ? i += r / f : u.type === O && (n += r / f)
                        }
                    }
                    if (0 === i && 0 === n) {
                        for (var m = 1 / 0, p = 0, E = 0, T = xt(t, ["sidx"]), S = 0; S < T.length; S++) {
                            var L = Pt(T[S]);
                            if (null != L && L.references) {
                                m = Math.min(m, L.earliestPresentationTime / L.timescale);
                                var A = L.references.reduce((function(t, e) {
                                    return t + e.info.duration || 0
                                }
                                ), 0);
                                E = (p = Math.max(p, A + L.earliestPresentationTime / L.timescale)) - m
                            }
                        }
                        if (E && y(E))
                            return E
                    }
                    return i || n
                }(d, f)
                  , v = function(t, e) {
                    return xt(e, ["moof", "traf"]).reduce((function(e, r) {
                        var i = xt(r, ["tfdt"])[0]
                          , n = i[0]
                          , a = xt(r, ["tfhd"]).reduce((function(e, r) {
                            var a = It(r, 4)
                              , s = t[a];
                            if (s) {
                                var o = It(i, 4);
                                if (1 === n) {
                                    if (o === At)
                                        return w.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),
                                        e;
                                    o *= At + 1,
                                    o += It(i, 8)
                                }
                                var l = o / (s.timescale || 9e4);
                                if (y(l) && (null === e || l < e))
                                    return l
                            }
                            return e
                        }
                        ), null);
                        return null !== a && y(a) && (null === e || a < e) ? a : e
                    }
                    ), null)
                }(f, d)
                  , m = null === v ? n : v;
                (function(t, e, r, i) {
                    if (null === t)
                        return !0;
                    var n = Math.max(i, 1)
                      , a = e - t.baseTime / t.timescale;
                    return Math.abs(a - r) > n
                }(l, m, n, g) || c.timescale !== l.timescale && a) && (c.initPTS = m - n,
                l && 1 === l.timescale && w.warn("Adjusting initPTS by " + (c.initPTS - l.baseTime)),
                this.initPTS = l = {
                    baseTime: c.initPTS,
                    timescale: 1
                });
                var p = t ? m - l.baseTime / l.timescale : u
                  , E = p + g;
                !function(t, e, r) {
                    xt(e, ["moof", "traf"]).forEach((function(e) {
                        xt(e, ["tfhd"]).forEach((function(i) {
                            var n = It(i, 4)
                              , a = t[n];
                            if (a) {
                                var s = a.timescale || 9e4;
                                xt(e, ["tfdt"]).forEach((function(t) {
                                    var e = t[0]
                                      , i = r * s;
                                    if (i) {
                                        var n = It(t, 4);
                                        if (0 === e)
                                            n -= i,
                                            _t(t, 4, n = Math.max(n, 0));
                                        else {
                                            n *= Math.pow(2, 32),
                                            n += It(t, 8),
                                            n -= i,
                                            n = Math.max(n, 0);
                                            var a = Math.floor(n / (At + 1))
                                              , o = Math.floor(n % (At + 1));
                                            _t(t, 4, a),
                                            _t(t, 8, o)
                                        }
                                    }
                                }
                                ))
                            }
                        }
                        ))
                    }
                    ))
                }(f, d, l.baseTime / l.timescale),
                g > 0 ? this.lastEndTime = E : (w.warn("Duration parsed from mp4 should be greater than zero"),
                this.resetNextTimestamp());
                var T = !!f.audio
                  , S = !!f.video
                  , L = "";
                T && (L += "audio"),
                S && (L += "video");
                var A = {
                    data1: d,
                    startPTS: p,
                    startDTS: p,
                    endPTS: E,
                    endDTS: E,
                    type: L,
                    hasAudio: T,
                    hasVideo: S,
                    nb: 1,
                    dropped: 0
                };
                return h.audio = "audio" === A.type ? A : void 0,
                h.video = "audio" !== A.type ? A : void 0,
                h.initSegment = c,
                h.id3 = An(r, n, l, l),
                i.samples.length && (h.text = Rn(i, n, l)),
                h
            }
            ,
            t
        }();
        function In(t, e) {
            var r = null == t ? void 0 : t.codec;
            if (r && r.length > 4)
                return r;
            if (e === O) {
                if ("ec-3" === r || "ac-3" === r || "alac" === r)
                    return r;
                if ("fLaC" === r || "Opus" === r)
                    return he(r, !1);
                var i = "mp4a.40.5";
                return w.info('Parsed audio codec "' + r + '" or audio object type not handled. Using "' + i + '"'),
                i
            }
            return w.warn('Unhandled video codec "' + r + '"'),
            "hvc1" === r || "hev1" === r ? "hvc1.1.6.L120.90" : "av01" === r ? "av01.0.04M.08" : "avc1.42e01e"
        }
        try {
            kn = self.performance.now.bind(self.performance)
        } catch (t) {
            w.debug("Unable to use Performance API on this environment"),
            kn = null == j ? void 0 : j.Date.now
        }
        var wn = [{
            demux: Qi,
            remux: Dn
        }, {
            demux: sn,
            remux: Sn
        }, {
            demux: Xi,
            remux: Sn
        }, {
            demux: cn,
            remux: Sn
        }];
        wn.splice(2, 0, {
            demux: $i,
            remux: Sn
        });
        var Cn = function() {
            function t(t, e, r, i, n) {
                this.async = !1,
                this.observer = void 0,
                this.typeSupported = void 0,
                this.config = void 0,
                this.vendor = void 0,
                this.id = void 0,
                this.demuxer = void 0,
                this.remuxer = void 0,
                this.decrypter = void 0,
                this.probe = void 0,
                this.decryptionPromise = null,
                this.transmuxConfig = void 0,
                this.currentTransmuxState = void 0,
                this.observer = t,
                this.typeSupported = e,
                this.config = r,
                this.vendor = i,
                this.id = n
            }
            var e = t.prototype;
            return e.configure = function(t) {
                this.transmuxConfig = t,
                this.decrypter && this.decrypter.reset()
            }
            ,
            e.push = function(t, e, r, i) {
                var n = this
                  , a = r.transmuxing;
                a.executeStart = kn();
                var s = new Uint8Array(t)
                  , o = this.currentTransmuxState
                  , l = this.transmuxConfig;
                i && (this.currentTransmuxState = i);
                var u = i || o
                  , h = u.contiguous
                  , d = u.discontinuity
                  , c = u.trackSwitch
                  , f = u.accurateTimeOffset
                  , g = u.timeOffset
                  , v = u.initSegmentChange
                  , m = l.audioCodec
                  , p = l.videoCodec
                  , y = l.defaultInitPts
                  , E = l.duration
                  , T = l.initSegmentData
                  , R = function(t, e) {
                    var r = null;
                    return t.byteLength > 0 && null != (null == e ? void 0 : e.key) && null !== e.iv && null != e.method && (r = e),
                    r
                }(s, e);
                if (R && "AES-128" === R.method) {
                    var k = this.getDecrypter();
                    if (!k.isSync())
                        return this.decryptionPromise = k.webCryptoDecrypt(s, R.key.buffer, R.iv.buffer).then((function(t) {
                            var e = n.push(t, null, r);
                            return n.decryptionPromise = null,
                            e
                        }
                        )),
                        this.decryptionPromise;
                    var b = k.softwareDecrypt(s, R.key.buffer, R.iv.buffer);
                    if (r.part > -1 && (b = k.flush()),
                    !b)
                        return a.executeEnd = kn(),
                        _n(r);
                    s = new Uint8Array(b)
                }
                var D = this.needsProbing(d, c);
                if (D) {
                    var I = this.configureTransmuxer(s);
                    if (I)
                        return w.warn("[transmuxer] " + I.message),
                        this.observer.emit(S.ERROR, S.ERROR, {
                            type: L.MEDIA_ERROR,
                            details: A.FRAG_PARSING_ERROR,
                            fatal: !1,
                            error: I,
                            reason: I.message
                        }),
                        a.executeEnd = kn(),
                        _n(r)
                }
                (d || c || v || D) && this.resetInitSegment(T, m, p, E, e),
                (d || v || D) && this.resetInitialTimestamp(y),
                h || this.resetContiguity();
                var C = this.transmux(s, R, g, f, r)
                  , _ = this.currentTransmuxState;
                return _.contiguous = !0,
                _.discontinuity = !1,
                _.trackSwitch = !1,
                a.executeEnd = kn(),
                C
            }
            ,
            e.flush = function(t) {
                var e = this
                  , r = t.transmuxing;
                r.executeStart = kn();
                var i = this.decrypter
                  , n = this.currentTransmuxState
                  , a = this.decryptionPromise;
                if (a)
                    return a.then((function() {
                        return e.flush(t)
                    }
                    ));
                var s = []
                  , o = n.timeOffset;
                if (i) {
                    var l = i.flush();
                    l && s.push(this.push(l, null, t))
                }
                var u = this.demuxer
                  , h = this.remuxer;
                if (!u || !h)
                    return r.executeEnd = kn(),
                    [_n(t)];
                var d = u.flush(o);
                return xn(d) ? d.then((function(r) {
                    return e.flushRemux(s, r, t),
                    s
                }
                )) : (this.flushRemux(s, d, t),
                s)
            }
            ,
            e.flushRemux = function(t, e, r) {
                var i = e.audioTrack
                  , n = e.videoTrack
                  , a = e.id3Track
                  , s = e.textTrack
                  , o = this.currentTransmuxState
                  , l = o.accurateTimeOffset
                  , u = o.timeOffset;
                w.log("[transmuxer.ts]: Flushed fragment " + r.sn + (r.part > -1 ? " p: " + r.part : "") + " of level " + r.level);
                var h = this.remuxer.remux(i, n, a, s, u, l, !0, this.id);
                t.push({
                    remuxResult: h,
                    chunkMeta: r
                }),
                r.transmuxing.executeEnd = kn()
            }
            ,
            e.resetInitialTimestamp = function(t) {
                var e = this.demuxer
                  , r = this.remuxer;
                e && r && (e.resetTimeStamp(t),
                r.resetTimeStamp(t))
            }
            ,
            e.resetContiguity = function() {
                var t = this.demuxer
                  , e = this.remuxer;
                t && e && (t.resetContiguity(),
                e.resetNextTimestamp())
            }
            ,
            e.resetInitSegment = function(t, e, r, i, n) {
                var a = this.demuxer
                  , s = this.remuxer;
                a && s && (a.resetInitSegment(t, e, r, i),
                s.resetInitSegment(t, e, r, n))
            }
            ,
            e.destroy = function() {
                this.demuxer && (this.demuxer.destroy(),
                this.demuxer = void 0),
                this.remuxer && (this.remuxer.destroy(),
                this.remuxer = void 0)
            }
            ,
            e.transmux = function(t, e, r, i, n) {
                return e && "SAMPLE-AES" === e.method ? this.transmuxSampleAes(t, e, r, i, n) : this.transmuxUnencrypted(t, r, i, n)
            }
            ,
            e.transmuxUnencrypted = function(t, e, r, i) {
                var n = this.demuxer.demux(t, e, !1, !this.config.progressive)
                  , a = n.audioTrack
                  , s = n.videoTrack
                  , o = n.id3Track
                  , l = n.textTrack;
                return {
                    remuxResult: this.remuxer.remux(a, s, o, l, e, r, !1, this.id),
                    chunkMeta: i
                }
            }
            ,
            e.transmuxSampleAes = function(t, e, r, i, n) {
                var a = this;
                return this.demuxer.demuxSampleAes(t, e, r).then((function(t) {
                    return {
                        remuxResult: a.remuxer.remux(t.audioTrack, t.videoTrack, t.id3Track, t.textTrack, r, i, !1, a.id),
                        chunkMeta: n
                    }
                }
                ))
            }
            ,
            e.configureTransmuxer = function(t) {
                for (var e, r = this.config, i = this.observer, n = this.typeSupported, a = this.vendor, s = 0, o = wn.length; s < o; s++) {
                    var l;
                    if (null != (l = wn[s].demux) && l.probe(t)) {
                        e = wn[s];
                        break
                    }
                }
                if (!e)
                    return new Error("Failed to find demuxer by probing fragment data");
                var u = this.demuxer
                  , h = this.remuxer
                  , d = e.remux
                  , c = e.demux;
                h && h instanceof d || (this.remuxer = new d(i,r,n,a)),
                u && u instanceof c || (this.demuxer = new c(i,r,n),
                this.probe = c.probe)
            }
            ,
            e.needsProbing = function(t, e) {
                return !this.demuxer || !this.remuxer || t || e
            }
            ,
            e.getDecrypter = function() {
                var t = this.decrypter;
                return t || (t = this.decrypter = new di(this.config)),
                t
            }
            ,
            t
        }()
          , _n = function(t) {
            return {
                remuxResult: {},
                chunkMeta: t
            }
        };
        function xn(t) {
            return "then"in t && t.then instanceof Function
        }
        var Pn = function(t, e, r, i, n) {
            this.audioCodec = void 0,
            this.videoCodec = void 0,
            this.initSegmentData = void 0,
            this.duration = void 0,
            this.defaultInitPts = void 0,
            this.audioCodec = t,
            this.videoCodec = e,
            this.initSegmentData = r,
            this.duration = i,
            this.defaultInitPts = n || null
        }
          , Fn = function(t, e, r, i, n, a) {
            this.discontinuity = void 0,
            this.contiguous = void 0,
            this.accurateTimeOffset = void 0,
            this.trackSwitch = void 0,
            this.timeOffset = void 0,
            this.initSegmentChange = void 0,
            this.discontinuity = t,
            this.contiguous = e,
            this.accurateTimeOffset = r,
            this.trackSwitch = i,
            this.timeOffset = n,
            this.initSegmentChange = a
        }
          , Mn = {
            exports: {}
        };
        !function(t) {
            var e = Object.prototype.hasOwnProperty
              , r = "~";
            function i() {}
            function n(t, e, r) {
                this.fn = t,
                this.context = e,
                this.once = r || !1
            }
            function a(t, e, i, a, s) {
                if ("function" != typeof i)
                    throw new TypeError("The listener must be a function");
                var o = new n(i,a || t,s)
                  , l = r ? r + e : e;
                return t._events[l] ? t._events[l].fn ? t._events[l] = [t._events[l], o] : t._events[l].push(o) : (t._events[l] = o,
                t._eventsCount++),
                t
            }
            function s(t, e) {
                0 == --t._eventsCount ? t._events = new i : delete t._events[e]
            }
            function o() {
                this._events = new i,
                this._eventsCount = 0
            }
            Object.create && (i.prototype = Object.create(null),
            (new i).__proto__ || (r = !1)),
            o.prototype.eventNames = function() {
                var t, i, n = [];
                if (0 === this._eventsCount)
                    return n;
                for (i in t = this._events)
                    e.call(t, i) && n.push(r ? i.slice(1) : i);
                return Object.getOwnPropertySymbols ? n.concat(Object.getOwnPropertySymbols(t)) : n
            }
            ,
            o.prototype.listeners = function(t) {
                var e = r ? r + t : t
                  , i = this._events[e];
                if (!i)
                    return [];
                if (i.fn)
                    return [i.fn];
                for (var n = 0, a = i.length, s = new Array(a); n < a; n++)
                    s[n] = i[n].fn;
                return s
            }
            ,
            o.prototype.listenerCount = function(t) {
                var e = r ? r + t : t
                  , i = this._events[e];
                return i ? i.fn ? 1 : i.length : 0
            }
            ,
            o.prototype.emit = function(t, e, i, n, a, s) {
                var o = r ? r + t : t;
                if (!this._events[o])
                    return !1;
                var l, u, h = this._events[o], d = arguments.length;
                if (h.fn) {
                    switch (h.once && this.removeListener(t, h.fn, void 0, !0),
                    d) {
                    case 1:
                        return h.fn.call(h.context),
                        !0;
                    case 2:
                        return h.fn.call(h.context, e),
                        !0;
                    case 3:
                        return h.fn.call(h.context, e, i),
                        !0;
                    case 4:
                        return h.fn.call(h.context, e, i, n),
                        !0;
                    case 5:
                        return h.fn.call(h.context, e, i, n, a),
                        !0;
                    case 6:
                        return h.fn.call(h.context, e, i, n, a, s),
                        !0
                    }
                    for (u = 1,
                    l = new Array(d - 1); u < d; u++)
                        l[u - 1] = arguments[u];
                    h.fn.apply(h.context, l)
                } else {
                    var c, f = h.length;
                    for (u = 0; u < f; u++)
                        switch (h[u].once && this.removeListener(t, h[u].fn, void 0, !0),
                        d) {
                        case 1:
                            h[u].fn.call(h[u].context);
                            break;
                        case 2:
                            h[u].fn.call(h[u].context, e);
                            break;
                        case 3:
                            h[u].fn.call(h[u].context, e, i);
                            break;
                        case 4:
                            h[u].fn.call(h[u].context, e, i, n);
                            break;
                        default:
                            if (!l)
                                for (c = 1,
                                l = new Array(d - 1); c < d; c++)
                                    l[c - 1] = arguments[c];
                            h[u].fn.apply(h[u].context, l)
                        }
                }
                return !0
            }
            ,
            o.prototype.on = function(t, e, r) {
                return a(this, t, e, r, !1)
            }
            ,
            o.prototype.once = function(t, e, r) {
                return a(this, t, e, r, !0)
            }
            ,
            o.prototype.removeListener = function(t, e, i, n) {
                var a = r ? r + t : t;
                if (!this._events[a])
                    return this;
                if (!e)
                    return s(this, a),
                    this;
                var o = this._events[a];
                if (o.fn)
                    o.fn !== e || n && !o.once || i && o.context !== i || s(this, a);
                else {
                    for (var l = 0, u = [], h = o.length; l < h; l++)
                        (o[l].fn !== e || n && !o[l].once || i && o[l].context !== i) && u.push(o[l]);
                    u.length ? this._events[a] = 1 === u.length ? u[0] : u : s(this, a)
                }
                return this
            }
            ,
            o.prototype.removeAllListeners = function(t) {
                var e;
                return t ? (e = r ? r + t : t,
                this._events[e] && s(this, e)) : (this._events = new i,
                this._eventsCount = 0),
                this
            }
            ,
            o.prototype.off = o.prototype.removeListener,
            o.prototype.addListener = o.prototype.on,
            o.prefixed = r,
            o.EventEmitter = o,
            t.exports = o
        }(Mn);
        var On = v(Mn.exports);
        function Nn(t, e) {
            if (!((r = e.remuxResult).audio || r.video || r.text || r.id3 || r.initSegment))
                return !1;
            var r, i = [], n = e.remuxResult, a = n.audio, s = n.video;
            return a && Un(i, a),
            s && Un(i, s),
            t.postMessage({
                event: "transmuxComplete",
                data: e
            }, i),
            !0
        }
        function Un(t, e) {
            e.data1 && t.push(e.data1.buffer),
            e.data2 && t.push(e.data2.buffer)
        }
        function Bn(t, e, r) {
            e.reduce((function(e, r) {
                return Nn(t, r) || e
            }
            ), !1) || t.postMessage({
                event: "transmuxComplete",
                data: e[0]
            }),
            t.postMessage({
                event: "flush",
                data: r
            })
        }
        void 0 !== e && e && function(t) {
            var e = new On
              , r = function(e, r) {
                t.postMessage({
                    event: e,
                    data: r
                })
            };
            e.on(S.FRAG_DECRYPTED, r),
            e.on(S.ERROR, r);
            var i = function() {
                var t = function(t) {
                    var e = function(e) {
                        r("workerLog", {
                            logType: t,
                            message: e
                        })
                    };
                    w[t] = e
                };
                for (var e in w)
                    t(e)
            };
            t.addEventListener("message", (function(n) {
                var a = n.data;
                switch (a.cmd) {
                case "init":
                    var s = JSON.parse(a.config);
                    t.transmuxer = new Cn(e,a.typeSupported,s,a.vendor,a.id),
                    I(s.debug, a.id),
                    i(),
                    r("init", null);
                    break;
                case "configure":
                    t.transmuxer.configure(a.config);
                    break;
                case "demux":
                    var o = t.transmuxer.push(a.data, a.decryptdata, a.chunkMeta, a.state);
                    xn(o) ? (t.transmuxer.async = !0,
                    o.then((function(e) {
                        Nn(t, e)
                    }
                    )).catch((function(t) {
                        r(S.ERROR, {
                            type: L.MEDIA_ERROR,
                            details: A.FRAG_PARSING_ERROR,
                            chunkMeta: a.chunkMeta,
                            fatal: !1,
                            error: t,
                            err: t,
                            reason: "transmuxer-worker push error"
                        })
                    }
                    ))) : (t.transmuxer.async = !1,
                    Nn(t, o));
                    break;
                case "flush":
                    var l = a.chunkMeta
                      , u = t.transmuxer.flush(l);
                    xn(u) || t.transmuxer.async ? (xn(u) || (u = Promise.resolve(u)),
                    u.then((function(e) {
                        Bn(t, e, l)
                    }
                    )).catch((function(t) {
                        r(S.ERROR, {
                            type: L.MEDIA_ERROR,
                            details: A.FRAG_PARSING_ERROR,
                            chunkMeta: a.chunkMeta,
                            fatal: !1,
                            error: t,
                            err: t,
                            reason: "transmuxer-worker flush error"
                        })
                    }
                    ))) : Bn(t, u, l)
                }
            }
            ))
        }(self);
        var Gn = function() {
            function e(e, r, i, n) {
                var a = this;
                this.error = null,
                this.hls = void 0,
                this.id = void 0,
                this.observer = void 0,
                this.frag = null,
                this.part = null,
                this.useWorker = void 0,
                this.workerContext = null,
                this.onwmsg = void 0,
                this.transmuxer = null,
                this.onTransmuxComplete = void 0,
                this.onFlush = void 0;
                var s = e.config;
                this.hls = e,
                this.id = r,
                this.useWorker = !!s.enableWorker,
                this.onTransmuxComplete = i,
                this.onFlush = n;
                var o = function(t, e) {
                    (e = e || {}).frag = a.frag,
                    e.id = a.id,
                    t === S.ERROR && (a.error = e.error),
                    a.hls.trigger(t, e)
                };
                this.observer = new On,
                this.observer.on(S.FRAG_DECRYPTED, o),
                this.observer.on(S.ERROR, o);
                var l, u, h, d, c = ee(s.preferManagedMediaSource) || {
                    isTypeSupported: function() {
                        return !1
                    }
                }, f = {
                    mpeg: c.isTypeSupported("audio/mpeg"),
                    mp3: c.isTypeSupported('audio/mp4; codecs="mp3"'),
                    ac3: c.isTypeSupported('audio/mp4; codecs="ac-3"')
                }, g = navigator.vendor;
                if (!this.useWorker || "undefined" == typeof Worker || (s.workerPath,
                0))
                    this.transmuxer = new Cn(this.observer,f,s,g,r);
                else
                    try {
                        s.workerPath ? (w.log("loading Web Worker " + s.workerPath + ' for "' + r + '"'),
                        this.workerContext = (h = s.workerPath,
                        d = new self.URL(h,self.location.href).href,
                        {
                            worker: new self.Worker(d),
                            scriptURL: d
                        })) : (w.log('injecting Web Worker for "' + r + '"'),
                        this.workerContext = (l = new self.Blob(["var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(" + t.toString() + ")(true);"],{
                            type: "text/javascript"
                        }),
                        u = self.URL.createObjectURL(l),
                        {
                            worker: new self.Worker(u),
                            objectURL: u
                        })),
                        this.onwmsg = function(t) {
                            return a.onWorkerMessage(t)
                        }
                        ;
                        var v = this.workerContext.worker;
                        v.addEventListener("message", this.onwmsg),
                        v.onerror = function(t) {
                            var e = new Error(t.message + "  (" + t.filename + ":" + t.lineno + ")");
                            s.enableWorker = !1,
                            w.warn('Error in "' + r + '" Web Worker, fallback to inline'),
                            a.hls.trigger(S.ERROR, {
                                type: L.OTHER_ERROR,
                                details: A.INTERNAL_EXCEPTION,
                                fatal: !1,
                                event: "demuxerWorker",
                                error: e
                            })
                        }
                        ,
                        v.postMessage({
                            cmd: "init",
                            typeSupported: f,
                            vendor: g,
                            id: r,
                            config: JSON.stringify(s)
                        })
                    } catch (t) {
                        w.warn('Error setting up "' + r + '" Web Worker, fallback to inline', t),
                        this.resetWorker(),
                        this.error = null,
                        this.transmuxer = new Cn(this.observer,f,s,g,r)
                    }
            }
            var r = e.prototype;
            return r.resetWorker = function() {
                if (this.workerContext) {
                    var t = this.workerContext
                      , e = t.worker
                      , r = t.objectURL;
                    r && self.URL.revokeObjectURL(r),
                    e.removeEventListener("message", this.onwmsg),
                    e.onerror = null,
                    e.terminate(),
                    this.workerContext = null
                }
            }
            ,
            r.destroy = function() {
                if (this.workerContext)
                    this.resetWorker(),
                    this.onwmsg = void 0;
                else {
                    var t = this.transmuxer;
                    t && (t.destroy(),
                    this.transmuxer = null)
                }
                var e = this.observer;
                e && e.removeAllListeners(),
                this.frag = null,
                this.observer = null,
                this.hls = null
            }
            ,
            r.push = function(t, e, r, i, n, a, s, o, l, u) {
                var h, d, c = this;
                l.transmuxing.start = self.performance.now();
                var f = this.transmuxer
                  , g = a ? a.start : n.start
                  , v = n.decryptdata
                  , m = this.frag
                  , p = !(m && n.cc === m.cc)
                  , y = !(m && l.level === m.level)
                  , E = m ? l.sn - m.sn : -1
                  , T = this.part ? l.part - this.part.index : -1
                  , S = 0 === E && l.id > 1 && l.id === (null == m ? void 0 : m.stats.chunkCount)
                  , L = !y && (1 === E || 0 === E && (1 === T || S && T <= 0))
                  , A = self.performance.now();
                (y || E || 0 === n.stats.parsing.start) && (n.stats.parsing.start = A),
                !a || !T && L || (a.stats.parsing.start = A);
                var R = !(m && (null == (h = n.initSegment) ? void 0 : h.url) === (null == (d = m.initSegment) ? void 0 : d.url))
                  , k = new Fn(p,L,o,y,g,R);
                if (!L || p || R) {
                    w.log("[transmuxer-interface, " + n.type + "]: Starting new transmux session for sn: " + l.sn + " p: " + l.part + " level: " + l.level + " id: " + l.id + "\n        discontinuity: " + p + "\n        trackSwitch: " + y + "\n        contiguous: " + L + "\n        accurateTimeOffset: " + o + "\n        timeOffset: " + g + "\n        initSegmentChange: " + R);
                    var b = new Pn(r,i,e,s,u);
                    this.configureTransmuxer(b)
                }
                if (this.frag = n,
                this.part = a,
                this.workerContext)
                    this.workerContext.worker.postMessage({
                        cmd: "demux",
                        data: t,
                        decryptdata: v,
                        chunkMeta: l,
                        state: k
                    }, t instanceof ArrayBuffer ? [t] : []);
                else if (f) {
                    var D = f.push(t, v, l, k);
                    xn(D) ? (f.async = !0,
                    D.then((function(t) {
                        c.handleTransmuxComplete(t)
                    }
                    )).catch((function(t) {
                        c.transmuxerError(t, l, "transmuxer-interface push error")
                    }
                    ))) : (f.async = !1,
                    this.handleTransmuxComplete(D))
                }
            }
            ,
            r.flush = function(t) {
                var e = this;
                t.transmuxing.start = self.performance.now();
                var r = this.transmuxer;
                if (this.workerContext)
                    this.workerContext.worker.postMessage({
                        cmd: "flush",
                        chunkMeta: t
                    });
                else if (r) {
                    var i = r.flush(t);
                    xn(i) || r.async ? (xn(i) || (i = Promise.resolve(i)),
                    i.then((function(r) {
                        e.handleFlushResult(r, t)
                    }
                    )).catch((function(r) {
                        e.transmuxerError(r, t, "transmuxer-interface flush error")
                    }
                    ))) : this.handleFlushResult(i, t)
                }
            }
            ,
            r.transmuxerError = function(t, e, r) {
                this.hls && (this.error = t,
                this.hls.trigger(S.ERROR, {
                    type: L.MEDIA_ERROR,
                    details: A.FRAG_PARSING_ERROR,
                    chunkMeta: e,
                    fatal: !1,
                    error: t,
                    err: t,
                    reason: r
                }))
            }
            ,
            r.handleFlushResult = function(t, e) {
                var r = this;
                t.forEach((function(t) {
                    r.handleTransmuxComplete(t)
                }
                )),
                this.onFlush(e)
            }
            ,
            r.onWorkerMessage = function(t) {
                var e = t.data
                  , r = this.hls;
                switch (e.event) {
                case "init":
                    var i, n = null == (i = this.workerContext) ? void 0 : i.objectURL;
                    n && self.URL.revokeObjectURL(n);
                    break;
                case "transmuxComplete":
                    this.handleTransmuxComplete(e.data);
                    break;
                case "flush":
                    this.onFlush(e.data);
                    break;
                case "workerLog":
                    w[e.data.logType] && w[e.data.logType](e.data.message);
                    break;
                default:
                    e.data = e.data || {},
                    e.data.frag = this.frag,
                    e.data.id = this.id,
                    r.trigger(e.event, e.data)
                }
            }
            ,
            r.configureTransmuxer = function(t) {
                var e = this.transmuxer;
                this.workerContext ? this.workerContext.worker.postMessage({
                    cmd: "configure",
                    config: t
                }) : e && e.configure(t)
            }
            ,
            r.handleTransmuxComplete = function(t) {
                t.chunkMeta.transmuxing.end = self.performance.now(),
                this.onTransmuxComplete(t)
            }
            ,
            e
        }();
        function Kn(t, e) {
            if (t.length !== e.length)
                return !1;
            for (var r = 0; r < t.length; r++)
                if (!Hn(t[r].attrs, e[r].attrs))
                    return !1;
            return !0
        }
        function Hn(t, e, r) {
            var i = t["STABLE-RENDITION-ID"];
            return i && !r ? i === e["STABLE-RENDITION-ID"] : !(r || ["LANGUAGE", "NAME", "CHARACTERISTICS", "AUTOSELECT", "DEFAULT", "FORCED", "ASSOC-LANGUAGE"]).some((function(r) {
                return t[r] !== e[r]
            }
            ))
        }
        function Vn(t, e) {
            return e.label.toLowerCase() === t.name.toLowerCase() && (!e.language || e.language.toLowerCase() === (t.lang || "").toLowerCase())
        }
        var Yn = function(t) {
            function e(e, r, i) {
                var n;
                return (n = t.call(this, e, r, i, "[audio-stream-controller]", Ce) || this).videoBuffer = null,
                n.videoTrackCC = -1,
                n.waitingVideoCC = -1,
                n.bufferedTrack = null,
                n.switchingTrack = null,
                n.trackId = -1,
                n.waitingData = null,
                n.mainDetails = null,
                n.flushing = !1,
                n.bufferFlushed = !1,
                n.cachedTrackLoadedData = null,
                n._registerListeners(),
                n
            }
            l(e, t);
            var r = e.prototype;
            return r.onHandlerDestroying = function() {
                this._unregisterListeners(),
                t.prototype.onHandlerDestroying.call(this),
                this.mainDetails = null,
                this.bufferedTrack = null,
                this.switchingTrack = null
            }
            ,
            r._registerListeners = function() {
                var t = this.hls;
                t.on(S.MEDIA_ATTACHED, this.onMediaAttached, this),
                t.on(S.MEDIA_DETACHING, this.onMediaDetaching, this),
                t.on(S.MANIFEST_LOADING, this.onManifestLoading, this),
                t.on(S.LEVEL_LOADED, this.onLevelLoaded, this),
                t.on(S.AUDIO_TRACKS_UPDATED, this.onAudioTracksUpdated, this),
                t.on(S.AUDIO_TRACK_SWITCHING, this.onAudioTrackSwitching, this),
                t.on(S.AUDIO_TRACK_LOADED, this.onAudioTrackLoaded, this),
                t.on(S.ERROR, this.onError, this),
                t.on(S.BUFFER_RESET, this.onBufferReset, this),
                t.on(S.BUFFER_CREATED, this.onBufferCreated, this),
                t.on(S.BUFFER_FLUSHING, this.onBufferFlushing, this),
                t.on(S.BUFFER_FLUSHED, this.onBufferFlushed, this),
                t.on(S.INIT_PTS_FOUND, this.onInitPtsFound, this),
                t.on(S.FRAG_BUFFERED, this.onFragBuffered, this)
            }
            ,
            r._unregisterListeners = function() {
                var t = this.hls;
                t.off(S.MEDIA_ATTACHED, this.onMediaAttached, this),
                t.off(S.MEDIA_DETACHING, this.onMediaDetaching, this),
                t.off(S.MANIFEST_LOADING, this.onManifestLoading, this),
                t.off(S.LEVEL_LOADED, this.onLevelLoaded, this),
                t.off(S.AUDIO_TRACKS_UPDATED, this.onAudioTracksUpdated, this),
                t.off(S.AUDIO_TRACK_SWITCHING, this.onAudioTrackSwitching, this),
                t.off(S.AUDIO_TRACK_LOADED, this.onAudioTrackLoaded, this),
                t.off(S.ERROR, this.onError, this),
                t.off(S.BUFFER_RESET, this.onBufferReset, this),
                t.off(S.BUFFER_CREATED, this.onBufferCreated, this),
                t.off(S.BUFFER_FLUSHING, this.onBufferFlushing, this),
                t.off(S.BUFFER_FLUSHED, this.onBufferFlushed, this),
                t.off(S.INIT_PTS_FOUND, this.onInitPtsFound, this),
                t.off(S.FRAG_BUFFERED, this.onFragBuffered, this)
            }
            ,
            r.onInitPtsFound = function(t, e) {
                var r = e.frag
                  , i = e.id
                  , n = e.initPTS
                  , a = e.timescale;
                if ("main" === i) {
                    var s = r.cc;
                    this.initPTS[r.cc] = {
                        baseTime: n,
                        timescale: a
                    },
                    this.log("InitPTS for cc: " + s + " found from main: " + n),
                    this.videoTrackCC = s,
                    this.state === Ai && this.tick()
                }
            }
            ,
            r.startLoad = function(t) {
                if (!this.levels)
                    return this.startPosition = t,
                    void (this.state = fi);
                var e = this.lastCurrentTime;
                this.stopLoad(),
                this.setInterval(100),
                e > 0 && -1 === t ? (this.log("Override startPosition with lastCurrentTime @" + e.toFixed(3)),
                t = e,
                this.state = gi) : (this.loadedmetadata = !1,
                this.state = yi),
                this.nextLoadPosition = this.startPosition = this.lastCurrentTime = t,
                this.tick()
            }
            ,
            r.doTick = function() {
                switch (this.state) {
                case gi:
                    this.doTickIdle();
                    break;
                case yi:
                    var e, r = this.levels, i = this.trackId, n = null == r || null == (e = r[i]) ? void 0 : e.details;
                    if (n) {
                        if (this.waitForCdnTuneIn(n))
                            break;
                        this.state = Ai
                    }
                    break;
                case pi:
                    var a, s = performance.now(), o = this.retryDate;
                    if (!o || s >= o || null != (a = this.media) && a.seeking) {
                        var l = this.levels
                          , u = this.trackId;
                        this.log("RetryDate reached, switch back to IDLE state"),
                        this.resetStartWhenNotLoaded((null == l ? void 0 : l[u]) || null),
                        this.state = gi
                    }
                    break;
                case Ai:
                    var h = this.waitingData;
                    if (h) {
                        var d = h.frag
                          , c = h.part
                          , f = h.cache
                          , g = h.complete;
                        if (void 0 !== this.initPTS[d.cc]) {
                            this.waitingData = null,
                            this.waitingVideoCC = -1,
                            this.state = mi;
                            var v = {
                                frag: d,
                                part: c,
                                payload: f.flush(),
                                networkDetails: null
                            };
                            this._handleFragmentLoadProgress(v),
                            g && t.prototype._handleFragmentLoadComplete.call(this, v)
                        } else if (this.videoTrackCC !== this.waitingVideoCC)
                            this.log("Waiting fragment cc (" + d.cc + ") cancelled because video is at cc " + this.videoTrackCC),
                            this.clearWaitingFragment();
                        else {
                            var m = this.getLoadPosition()
                              , p = Qr.bufferInfo(this.mediaBuffer, m, this.config.maxBufferHole);
                            yr(p.end, this.config.maxFragLookUpTolerance, d) < 0 && (this.log("Waiting fragment cc (" + d.cc + ") @ " + d.start + " cancelled because another fragment at " + p.end + " is needed"),
                            this.clearWaitingFragment())
                        }
                    } else
                        this.state = gi
                }
                this.onTickEnd()
            }
            ,
            r.clearWaitingFragment = function() {
                var t = this.waitingData;
                t && (this.fragmentTracker.removeFragment(t.frag),
                this.waitingData = null,
                this.waitingVideoCC = -1,
                this.state = gi)
            }
            ,
            r.resetLoadingState = function() {
                this.clearWaitingFragment(),
                t.prototype.resetLoadingState.call(this)
            }
            ,
            r.onTickEnd = function() {
                var t = this.media;
                null != t && t.readyState && (this.lastCurrentTime = t.currentTime)
            }
            ,
            r.doTickIdle = function() {
                var t = this.hls
                  , e = this.levels
                  , r = this.media
                  , i = this.trackId
                  , n = t.config;
                if ((r || !this.startFragRequested && n.startFragPrefetch) && null != e && e[i]) {
                    var a = e[i]
                      , s = a.details;
                    if (!s || s.live && this.levelLastLoaded !== a || this.waitForCdnTuneIn(s))
                        this.state = yi;
                    else {
                        var o = this.mediaBuffer ? this.mediaBuffer : this.media;
                        this.bufferFlushed && o && (this.bufferFlushed = !1,
                        this.afterBufferFlushed(o, O, Ce));
                        var l = this.getFwdBufferInfo(o, Ce);
                        if (null !== l) {
                            var u = this.bufferedTrack
                              , h = this.switchingTrack;
                            if (!h && this._streamEnded(l, s))
                                return t.trigger(S.BUFFER_EOS, {
                                    type: "audio"
                                }),
                                void (this.state = Si);
                            var d = this.getFwdBufferInfo(this.videoBuffer ? this.videoBuffer : this.media, we)
                              , c = l.len
                              , f = this.getMaxBufferLength(null == d ? void 0 : d.len)
                              , g = s.fragments
                              , v = g[0].start
                              , m = this.flushing ? this.getLoadPosition() : l.end;
                            if (h && r) {
                                var p = this.getLoadPosition();
                                u && !Hn(h.attrs, u.attrs) && (m = p),
                                s.PTSKnown && p < v && (l.end > v || l.nextStart) && (this.log("Alt audio track ahead of main track, seek to start of alt audio track"),
                                r.currentTime = v + .05)
                            }
                            if (!(c >= f && !h && m < g[g.length - 1].start)) {
                                var y = this.getNextFragment(m, s)
                                  , E = !1;
                                if (y && this.isLoopLoading(y, m) && (E = !!y.gap,
                                y = this.getNextFragmentLoopLoading(y, s, l, we, f)),
                                y) {
                                    var T = d && y.start > d.end + s.targetduration;
                                    if (T || (null == d || !d.len) && l.len) {
                                        var L = this.getAppendedFrag(y.start, we);
                                        if (null === L)
                                            return;
                                        if (E || (E = !!L.gap || !!T && 0 === d.len),
                                        T && !E || E && l.nextStart && l.nextStart < L.end)
                                            return
                                    }
                                    this.loadFragment(y, a, m)
                                } else
                                    this.bufferFlushed = !0
                            }
                        }
                    }
                }
            }
            ,
            r.getMaxBufferLength = function(e) {
                var r = t.prototype.getMaxBufferLength.call(this);
                return e ? Math.min(Math.max(r, e), this.config.maxMaxBufferLength) : r
            }
            ,
            r.onMediaDetaching = function() {
                this.videoBuffer = null,
                this.bufferFlushed = this.flushing = !1,
                t.prototype.onMediaDetaching.call(this)
            }
            ,
            r.onAudioTracksUpdated = function(t, e) {
                var r = e.audioTracks;
                this.resetTransmuxer(),
                this.levels = r.map((function(t) {
                    return new er(t)
                }
                ))
            }
            ,
            r.onAudioTrackSwitching = function(t, e) {
                var r = !!e.url;
                this.trackId = e.id;
                var i = this.fragCurrent;
                i && (i.abortRequests(),
                this.removeUnbufferedFrags(i.start)),
                this.resetLoadingState(),
                r ? this.setInterval(100) : this.resetTransmuxer(),
                r ? (this.switchingTrack = e,
                this.state = gi,
                this.flushAudioIfNeeded(e)) : (this.switchingTrack = null,
                this.bufferedTrack = e,
                this.state = fi),
                this.tick()
            }
            ,
            r.onManifestLoading = function() {
                this.fragmentTracker.removeAllFragments(),
                this.startPosition = this.lastCurrentTime = 0,
                this.bufferFlushed = this.flushing = !1,
                this.levels = this.mainDetails = this.waitingData = this.bufferedTrack = this.cachedTrackLoadedData = this.switchingTrack = null,
                this.startFragRequested = !1,
                this.trackId = this.videoTrackCC = this.waitingVideoCC = -1
            }
            ,
            r.onLevelLoaded = function(t, e) {
                this.mainDetails = e.details,
                null !== this.cachedTrackLoadedData && (this.hls.trigger(S.AUDIO_TRACK_LOADED, this.cachedTrackLoadedData),
                this.cachedTrackLoadedData = null)
            }
            ,
            r.onAudioTrackLoaded = function(t, e) {
                var r;
                if (null != this.mainDetails) {
                    var i = this.levels
                      , n = e.details
                      , a = e.id;
                    if (i) {
                        this.log("Audio track " + a + " loaded [" + n.startSN + "," + n.endSN + "]" + (n.lastPartSn ? "[part-" + n.lastPartSn + "-" + n.lastPartIndex + "]" : "") + ",duration:" + n.totalduration);
                        var s = i[a]
                          , o = 0;
                        if (n.live || null != (r = s.details) && r.live) {
                            this.checkLiveUpdate(n);
                            var l, u = this.mainDetails;
                            if (n.deltaUpdateFailed || !u)
                                return;
                            !s.details && n.hasProgramDateTime && u.hasProgramDateTime ? (ri(n, u),
                            o = n.fragments[0].start) : o = this.alignPlaylists(n, s.details, null == (l = this.levelLastLoaded) ? void 0 : l.details)
                        }
                        s.details = n,
                        this.levelLastLoaded = s,
                        this.startFragRequested || !this.mainDetails && n.live || this.setStartPosition(this.mainDetails || n, o),
                        this.state !== yi || this.waitForCdnTuneIn(n) || (this.state = gi),
                        this.tick()
                    } else
                        this.warn("Audio tracks were reset while loading level " + a)
                } else
                    this.cachedTrackLoadedData = e
            }
            ,
            r._handleFragmentLoadProgress = function(t) {
                var e, r = t.frag, i = t.part, n = t.payload, a = this.config, s = this.trackId, o = this.levels;
                if (o) {
                    var l = o[s];
                    if (l) {
                        var u = l.details;
                        if (!u)
                            return this.warn("Audio track details undefined on fragment load progress"),
                            void this.removeUnbufferedFrags(r.start);
                        var h = a.defaultAudioCodec || l.audioCodec || "mp4a.40.2"
                          , d = this.transmuxer;
                        d || (d = this.transmuxer = new Gn(this.hls,Ce,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));
                        var c = this.initPTS[r.cc]
                          , f = null == (e = r.initSegment) ? void 0 : e.data;
                        if (void 0 !== c) {
                            var g = i ? i.index : -1
                              , v = -1 !== g
                              , m = new Jr(r.level,r.sn,r.stats.chunkCount,n.byteLength,g,v);
                            d.push(n, f, h, "", r, i, u.totalduration, !1, m, c)
                        } else
                            this.log("Unknown video PTS for cc " + r.cc + ", waiting for video PTS before demuxing audio frag " + r.sn + " of [" + u.startSN + " ," + u.endSN + "],track " + s),
                            (this.waitingData = this.waitingData || {
                                frag: r,
                                part: i,
                                cache: new bi,
                                complete: !1
                            }).cache.push(new Uint8Array(n)),
                            this.waitingVideoCC = this.videoTrackCC,
                            this.state = Ai
                    } else
                        this.warn("Audio track is undefined on fragment load progress")
                } else
                    this.warn("Audio tracks were reset while fragment load was in progress. Fragment " + r.sn + " of level " + r.level + " will not be buffered")
            }
            ,
            r._handleFragmentLoadComplete = function(e) {
                this.waitingData ? this.waitingData.complete = !0 : t.prototype._handleFragmentLoadComplete.call(this, e)
            }
            ,
            r.onBufferReset = function() {
                this.mediaBuffer = this.videoBuffer = null,
                this.loadedmetadata = !1
            }
            ,
            r.onBufferCreated = function(t, e) {
                var r = e.tracks.audio;
                r && (this.mediaBuffer = r.buffer || null),
                e.tracks.video && (this.videoBuffer = e.tracks.video.buffer || null)
            }
            ,
            r.onFragBuffered = function(t, e) {
                var r = e.frag
                  , n = e.part;
                if (r.type === Ce)
                    if (this.fragContextChanged(r))
                        this.warn("Fragment " + r.sn + (n ? " p: " + n.index : "") + " of level " + r.level + " finished buffering, but was aborted. state: " + this.state + ", audioSwitch: " + (this.switchingTrack ? this.switchingTrack.name : "false"));
                    else {
                        if ("initSegment" !== r.sn) {
                            this.fragPrevious = r;
                            var a = this.switchingTrack;
                            a && (this.bufferedTrack = a,
                            this.switchingTrack = null,
                            this.hls.trigger(S.AUDIO_TRACK_SWITCHED, i({}, a)))
                        }
                        this.fragBufferedComplete(r, n)
                    }
                else if (!this.loadedmetadata && r.type === we) {
                    var s = this.videoBuffer || this.media;
                    s && Qr.getBuffered(s).length && (this.loadedmetadata = !0)
                }
            }
            ,
            r.onError = function(e, r) {
                var i;
                if (r.fatal)
                    this.state = Li;
                else
                    switch (r.details) {
                    case A.FRAG_GAP:
                    case A.FRAG_PARSING_ERROR:
                    case A.FRAG_DECRYPT_ERROR:
                    case A.FRAG_LOAD_ERROR:
                    case A.FRAG_LOAD_TIMEOUT:
                    case A.KEY_LOAD_ERROR:
                    case A.KEY_LOAD_TIMEOUT:
                        this.onFragmentOrKeyLoadError(Ce, r);
                        break;
                    case A.AUDIO_TRACK_LOAD_ERROR:
                    case A.AUDIO_TRACK_LOAD_TIMEOUT:
                    case A.LEVEL_PARSING_ERROR:
                        r.levelRetry || this.state !== yi || (null == (i = r.context) ? void 0 : i.type) !== De || (this.state = gi);
                        break;
                    case A.BUFFER_APPEND_ERROR:
                    case A.BUFFER_FULL_ERROR:
                        if (!r.parent || "audio" !== r.parent)
                            return;
                        if (r.details === A.BUFFER_APPEND_ERROR)
                            return void this.resetLoadingState();
                        this.reduceLengthAndFlushBuffer(r) && (this.bufferedTrack = null,
                        t.prototype.flushMainBuffer.call(this, 0, Number.POSITIVE_INFINITY, "audio"));
                        break;
                    case A.INTERNAL_EXCEPTION:
                        this.recoverWorkerError(r)
                    }
            }
            ,
            r.onBufferFlushing = function(t, e) {
                e.type !== N && (this.flushing = !0)
            }
            ,
            r.onBufferFlushed = function(t, e) {
                var r = e.type;
                if (r !== N) {
                    this.flushing = !1,
                    this.bufferFlushed = !0,
                    this.state === Si && (this.state = gi);
                    var i = this.mediaBuffer || this.media;
                    i && (this.afterBufferFlushed(i, r, Ce),
                    this.tick())
                }
            }
            ,
            r._handleTransmuxComplete = function(t) {
                var e, r = "audio", i = this.hls, n = t.remuxResult, a = t.chunkMeta, s = this.getCurrentContext(a);
                if (s) {
                    var l = s.frag
                      , u = s.part
                      , h = s.level
                      , d = h.details
                      , c = n.audio
                      , f = n.text
                      , g = n.id3
                      , v = n.initSegment;
                    if (!this.fragContextChanged(l) && d) {
                        if (this.state = Ei,
                        this.switchingTrack && c && this.completeAudioSwitch(this.switchingTrack),
                        null != v && v.tracks) {
                            var m = l.initSegment || l;
                            this._bufferInitSegment(h, v.tracks, m, a),
                            i.trigger(S.FRAG_PARSING_INIT_SEGMENT, {
                                frag: m,
                                id: r,
                                tracks: v.tracks
                            })
                        }
                        if (c) {
                            var p = c.startPTS
                              , y = c.endPTS
                              , E = c.startDTS
                              , T = c.endDTS;
                            u && (u.elementaryStreams[O] = {
                                startPTS: p,
                                endPTS: y,
                                startDTS: E,
                                endDTS: T
                            }),
                            l.setElementaryStreamInfo(O, p, y, E, T),
                            this.bufferFragmentData(c, l, u, a)
                        }
                        if (null != g && null != (e = g.samples) && e.length) {
                            var L = o({
                                id: r,
                                frag: l,
                                details: d
                            }, g);
                            i.trigger(S.FRAG_PARSING_METADATA, L)
                        }
                        if (f) {
                            var A = o({
                                id: r,
                                frag: l,
                                details: d
                            }, f);
                            i.trigger(S.FRAG_PARSING_USERDATA, A)
                        }
                    } else
                        this.fragmentTracker.removeFragment(l)
                } else
                    this.resetWhenMissingContext(a)
            }
            ,
            r._bufferInitSegment = function(t, e, r, i) {
                if (this.state === Ei) {
                    e.video && delete e.video;
                    var n = e.audio;
                    if (n) {
                        n.id = "audio";
                        var a = t.audioCodec;
                        this.log("Init audio buffer, container:" + n.container + ", codecs[level/parsed]=[" + a + "/" + n.codec + "]"),
                        a && 1 === a.split(",").length && (n.levelCodec = a),
                        this.hls.trigger(S.BUFFER_CODECS, e);
                        var s = n.initSegment;
                        if (null != s && s.byteLength) {
                            var o = {
                                type: "audio",
                                frag: r,
                                part: null,
                                chunkMeta: i,
                                parent: r.type,
                                data: s
                            };
                            this.hls.trigger(S.BUFFER_APPENDING, o)
                        }
                        this.tickImmediate()
                    }
                }
            }
            ,
            r.loadFragment = function(e, r, i) {
                var n, a = this.fragmentTracker.getState(e);
                if (this.fragCurrent = e,
                this.switchingTrack || a === Hr || a === Yr)
                    if ("initSegment" === e.sn)
                        this._loadInitSegment(e, r);
                    else if (null != (n = r.details) && n.live && !this.initPTS[e.cc]) {
                        this.log("Waiting for video PTS in continuity counter " + e.cc + " of live stream before loading audio fragment " + e.sn + " of level " + this.trackId),
                        this.state = Ai;
                        var s = this.mainDetails;
                        s && s.fragments[0].start !== r.details.fragments[0].start && ri(r.details, s)
                    } else
                        this.startFragRequested = !0,
                        t.prototype.loadFragment.call(this, e, r, i);
                else
                    this.clearTrackerIfNeeded(e)
            }
            ,
            r.flushAudioIfNeeded = function(e) {
                var r = this.media
                  , i = this.bufferedTrack
                  , n = null == i ? void 0 : i.attrs
                  , a = e.attrs;
                r && n && (n.CHANNELS !== a.CHANNELS || i.name !== e.name || i.lang !== e.lang) && (this.log("Switching audio track : flushing all audio"),
                t.prototype.flushMainBuffer.call(this, 0, Number.POSITIVE_INFINITY, "audio"),
                this.bufferedTrack = null)
            }
            ,
            r.completeAudioSwitch = function(t) {
                var e = this.hls;
                this.flushAudioIfNeeded(t),
                this.bufferedTrack = t,
                this.switchingTrack = null,
                e.trigger(S.AUDIO_TRACK_SWITCHED, i({}, t))
            }
            ,
            e
        }(ki)
          , Wn = function(t) {
            function e(e) {
                var r;
                return (r = t.call(this, e, "[audio-track-controller]") || this).tracks = [],
                r.groupIds = null,
                r.tracksInGroup = [],
                r.trackId = -1,
                r.currentTrack = null,
                r.selectDefaultTrack = !0,
                r.registerListeners(),
                r
            }
            l(e, t);
            var r = e.prototype;
            return r.registerListeners = function() {
                var t = this.hls;
                t.on(S.MANIFEST_LOADING, this.onManifestLoading, this),
                t.on(S.MANIFEST_PARSED, this.onManifestParsed, this),
                t.on(S.LEVEL_LOADING, this.onLevelLoading, this),
                t.on(S.LEVEL_SWITCHING, this.onLevelSwitching, this),
                t.on(S.AUDIO_TRACK_LOADED, this.onAudioTrackLoaded, this),
                t.on(S.ERROR, this.onError, this)
            }
            ,
            r.unregisterListeners = function() {
                var t = this.hls;
                t.off(S.MANIFEST_LOADING, this.onManifestLoading, this),
                t.off(S.MANIFEST_PARSED, this.onManifestParsed, this),
                t.off(S.LEVEL_LOADING, this.onLevelLoading, this),
                t.off(S.LEVEL_SWITCHING, this.onLevelSwitching, this),
                t.off(S.AUDIO_TRACK_LOADED, this.onAudioTrackLoaded, this),
                t.off(S.ERROR, this.onError, this)
            }
            ,
            r.destroy = function() {
                this.unregisterListeners(),
                this.tracks.length = 0,
                this.tracksInGroup.length = 0,
                this.currentTrack = null,
                t.prototype.destroy.call(this)
            }
            ,
            r.onManifestLoading = function() {
                this.tracks = [],
                this.tracksInGroup = [],
                this.groupIds = null,
                this.currentTrack = null,
                this.trackId = -1,
                this.selectDefaultTrack = !0
            }
            ,
            r.onManifestParsed = function(t, e) {
                this.tracks = e.audioTracks || []
            }
            ,
            r.onAudioTrackLoaded = function(t, e) {
                var r = e.id
                  , i = e.groupId
                  , n = e.details
                  , a = this.tracksInGroup[r];
                if (a && a.groupId === i) {
                    var s = a.details;
                    a.details = e.details,
                    this.log("Audio track " + r + ' "' + a.name + '" lang:' + a.lang + " group:" + i + " loaded [" + n.startSN + "-" + n.endSN + "]"),
                    r === this.trackId && this.playlistLoaded(r, e, s)
                } else
                    this.warn("Audio track with id:" + r + " and group:" + i + " not found in active group " + (null == a ? void 0 : a.groupId))
            }
            ,
            r.onLevelLoading = function(t, e) {
                this.switchLevel(e.level)
            }
            ,
            r.onLevelSwitching = function(t, e) {
                this.switchLevel(e.level)
            }
            ,
            r.switchLevel = function(t) {
                var e = this.hls.levels[t];
                if (e) {
                    var r = e.audioGroups || null
                      , i = this.groupIds
                      , n = this.currentTrack;
                    if (!r || (null == i ? void 0 : i.length) !== (null == r ? void 0 : r.length) || null != r && r.some((function(t) {
                        return -1 === (null == i ? void 0 : i.indexOf(t))
                    }
                    ))) {
                        this.groupIds = r,
                        this.trackId = -1,
                        this.currentTrack = null;
                        var a = this.tracks.filter((function(t) {
                            return !r || -1 !== r.indexOf(t.groupId)
                        }
                        ));
                        if (a.length)
                            this.selectDefaultTrack && !a.some((function(t) {
                                return t.default
                            }
                            )) && (this.selectDefaultTrack = !1),
                            a.forEach((function(t, e) {
                                t.id = e
                            }
                            ));
                        else if (!n && !this.tracksInGroup.length)
                            return;
                        this.tracksInGroup = a;
                        var s = this.hls.config.audioPreference;
                        if (!n && s) {
                            var o = Or(s, a, Ur);
                            if (o > -1)
                                n = a[o];
                            else {
                                var l = Or(s, this.tracks);
                                n = this.tracks[l]
                            }
                        }
                        var u = this.findTrackId(n);
                        -1 === u && n && (u = this.findTrackId(null));
                        var h = {
                            audioTracks: a
                        };
                        this.log("Updating audio tracks, " + a.length + " track(s) found in group(s): " + (null == r ? void 0 : r.join(","))),
                        this.hls.trigger(S.AUDIO_TRACKS_UPDATED, h);
                        var d = this.trackId;
                        if (-1 !== u && -1 === d)
                            this.setAudioTrack(u);
                        else if (a.length && -1 === d) {
                            var c, f = new Error("No audio track selected for current audio group-ID(s): " + (null == (c = this.groupIds) ? void 0 : c.join(",")) + " track count: " + a.length);
                            this.warn(f.message),
                            this.hls.trigger(S.ERROR, {
                                type: L.MEDIA_ERROR,
                                details: A.AUDIO_TRACK_LOAD_ERROR,
                                fatal: !0,
                                error: f
                            })
                        }
                    } else
                        this.shouldReloadPlaylist(n) && this.setAudioTrack(this.trackId)
                }
            }
            ,
            r.onError = function(t, e) {
                !e.fatal && e.context && (e.context.type !== De || e.context.id !== this.trackId || this.groupIds && -1 === this.groupIds.indexOf(e.context.groupId) || (this.requestScheduled = -1,
                this.checkRetry(e)))
            }
            ,
            r.setAudioOption = function(t) {
                var e = this.hls;
                if (e.config.audioPreference = t,
                t) {
                    var r = this.allAudioTracks;
                    if (this.selectDefaultTrack = !1,
                    r.length) {
                        var i = this.currentTrack;
                        if (i && Nr(t, i, Ur))
                            return i;
                        var n = Or(t, this.tracksInGroup, Ur);
                        if (n > -1) {
                            var a = this.tracksInGroup[n];
                            return this.setAudioTrack(n),
                            a
                        }
                        if (i) {
                            var s = e.loadLevel;
                            -1 === s && (s = e.firstAutoLevel);
                            var o = function(t, e, r, i, n) {
                                var a = e[i]
                                  , s = e.reduce((function(t, e, r) {
                                    var i = e.uri;
                                    return (t[i] || (t[i] = [])).push(r),
                                    t
                                }
                                ), {})[a.uri];
                                s.length > 1 && (i = Math.max.apply(Math, s));
                                var o = a.videoRange
                                  , l = a.frameRate
                                  , u = a.codecSet.substring(0, 4)
                                  , h = Br(e, i, (function(e) {
                                    if (e.videoRange !== o || e.frameRate !== l || e.codecSet.substring(0, 4) !== u)
                                        return !1;
                                    var i = e.audioGroups
                                      , a = r.filter((function(t) {
                                        return !i || -1 !== i.indexOf(t.groupId)
                                    }
                                    ));
                                    return Or(t, a, n) > -1
                                }
                                ));
                                return h > -1 ? h : Br(e, i, (function(e) {
                                    var i = e.audioGroups
                                      , a = r.filter((function(t) {
                                        return !i || -1 !== i.indexOf(t.groupId)
                                    }
                                    ));
                                    return Or(t, a, n) > -1
                                }
                                ))
                            }(t, e.levels, r, s, Ur);
                            if (-1 === o)
                                return null;
                            e.nextLoadLevel = o
                        }
                        if (t.channels || t.audioCodec) {
                            var l = Or(t, r);
                            if (l > -1)
                                return r[l]
                        }
                    }
                }
                return null
            }
            ,
            r.setAudioTrack = function(t) {
                var e = this.tracksInGroup;
                if (t < 0 || t >= e.length)
                    this.warn("Invalid audio track id: " + t);
                else {
                    this.clearTimer(),
                    this.selectDefaultTrack = !1;
                    var r = this.currentTrack
                      , n = e[t]
                      , a = n.details && !n.details.live;
                    if (!(t === this.trackId && n === r && a || (this.log("Switching to audio-track " + t + ' "' + n.name + '" lang:' + n.lang + " group:" + n.groupId + " channels:" + n.channels),
                    this.trackId = t,
                    this.currentTrack = n,
                    this.hls.trigger(S.AUDIO_TRACK_SWITCHING, i({}, n)),
                    a))) {
                        var s = this.switchParams(n.url, null == r ? void 0 : r.details);
                        this.loadPlaylist(s)
                    }
                }
            }
            ,
            r.findTrackId = function(t) {
                for (var e = this.tracksInGroup, r = 0; r < e.length; r++) {
                    var i = e[r];
                    if ((!this.selectDefaultTrack || i.default) && (!t || Nr(t, i, Ur)))
                        return r
                }
                if (t) {
                    for (var n = t.name, a = t.lang, s = t.assocLang, o = t.characteristics, l = t.audioCodec, u = t.channels, h = 0; h < e.length; h++)
                        if (Nr({
                            name: n,
                            lang: a,
                            assocLang: s,
                            characteristics: o,
                            audioCodec: l,
                            channels: u
                        }, e[h], Ur))
                            return h;
                    for (var d = 0; d < e.length; d++) {
                        var c = e[d];
                        if (Hn(t.attrs, c.attrs, ["LANGUAGE", "ASSOC-LANGUAGE", "CHARACTERISTICS"]))
                            return d
                    }
                    for (var f = 0; f < e.length; f++) {
                        var g = e[f];
                        if (Hn(t.attrs, g.attrs, ["LANGUAGE"]))
                            return f
                    }
                }
                return -1
            }
            ,
            r.loadPlaylist = function(e) {
                var r = this.currentTrack;
                if (this.shouldLoadPlaylist(r) && r) {
                    t.prototype.loadPlaylist.call(this);
                    var i = r.id
                      , n = r.groupId
                      , a = r.url;
                    if (e)
                        try {
                            a = e.addDirectives(a)
                        } catch (t) {
                            this.warn("Could not construct new URL with HLS Delivery Directives: " + t)
                        }
                    this.log("loading audio-track playlist " + i + ' "' + r.name + '" lang:' + r.lang + " group:" + n),
                    this.clearTimer(),
                    this.hls.trigger(S.AUDIO_TRACK_LOADING, {
                        url: a,
                        id: i,
                        groupId: n,
                        deliveryDirectives: e || null
                    })
                }
            }
            ,
            s(e, [{
                key: "allAudioTracks",
                get: function() {
                    return this.tracks
                }
            }, {
                key: "audioTracks",
                get: function() {
                    return this.tracksInGroup
                }
            }, {
                key: "audioTrack",
                get: function() {
                    return this.trackId
                },
                set: function(t) {
                    this.selectDefaultTrack = !1,
                    this.setAudioTrack(t)
                }
            }]),
            e
        }(Ir)
          , jn = function(t) {
            function e(e, r, i) {
                var n;
                return (n = t.call(this, e, r, i, "[subtitle-stream-controller]", _e) || this).currentTrackId = -1,
                n.tracksBuffered = [],
                n.mainDetails = null,
                n._registerListeners(),
                n
            }
            l(e, t);
            var r = e.prototype;
            return r.onHandlerDestroying = function() {
                this._unregisterListeners(),
                t.prototype.onHandlerDestroying.call(this),
                this.mainDetails = null
            }
            ,
            r._registerListeners = function() {
                var t = this.hls;
                t.on(S.MEDIA_ATTACHED, this.onMediaAttached, this),
                t.on(S.MEDIA_DETACHING, this.onMediaDetaching, this),
                t.on(S.MANIFEST_LOADING, this.onManifestLoading, this),
                t.on(S.LEVEL_LOADED, this.onLevelLoaded, this),
                t.on(S.ERROR, this.onError, this),
                t.on(S.SUBTITLE_TRACKS_UPDATED, this.onSubtitleTracksUpdated, this),
                t.on(S.SUBTITLE_TRACK_SWITCH, this.onSubtitleTrackSwitch, this),
                t.on(S.SUBTITLE_TRACK_LOADED, this.onSubtitleTrackLoaded, this),
                t.on(S.SUBTITLE_FRAG_PROCESSED, this.onSubtitleFragProcessed, this),
                t.on(S.BUFFER_FLUSHING, this.onBufferFlushing, this),
                t.on(S.FRAG_BUFFERED, this.onFragBuffered, this)
            }
            ,
            r._unregisterListeners = function() {
                var t = this.hls;
                t.off(S.MEDIA_ATTACHED, this.onMediaAttached, this),
                t.off(S.MEDIA_DETACHING, this.onMediaDetaching, this),
                t.off(S.MANIFEST_LOADING, this.onManifestLoading, this),
                t.off(S.LEVEL_LOADED, this.onLevelLoaded, this),
                t.off(S.ERROR, this.onError, this),
                t.off(S.SUBTITLE_TRACKS_UPDATED, this.onSubtitleTracksUpdated, this),
                t.off(S.SUBTITLE_TRACK_SWITCH, this.onSubtitleTrackSwitch, this),
                t.off(S.SUBTITLE_TRACK_LOADED, this.onSubtitleTrackLoaded, this),
                t.off(S.SUBTITLE_FRAG_PROCESSED, this.onSubtitleFragProcessed, this),
                t.off(S.BUFFER_FLUSHING, this.onBufferFlushing, this),
                t.off(S.FRAG_BUFFERED, this.onFragBuffered, this)
            }
            ,
            r.startLoad = function(t) {
                this.stopLoad(),
                this.state = gi,
                this.setInterval(500),
                this.nextLoadPosition = this.startPosition = this.lastCurrentTime = t,
                this.tick()
            }
            ,
            r.onManifestLoading = function() {
                this.mainDetails = null,
                this.fragmentTracker.removeAllFragments()
            }
            ,
            r.onMediaDetaching = function() {
                this.tracksBuffered = [],
                t.prototype.onMediaDetaching.call(this)
            }
            ,
            r.onLevelLoaded = function(t, e) {
                this.mainDetails = e.details
            }
            ,
            r.onSubtitleFragProcessed = function(t, e) {
                var r = e.frag
                  , i = e.success;
                if (this.fragPrevious = r,
                this.state = gi,
                i) {
                    var n = this.tracksBuffered[this.currentTrackId];
                    if (n) {
                        for (var a, s = r.start, o = 0; o < n.length; o++)
                            if (s >= n[o].start && s <= n[o].end) {
                                a = n[o];
                                break
                            }
                        var l = r.start + r.duration;
                        a ? a.end = l : (a = {
                            start: s,
                            end: l
                        },
                        n.push(a)),
                        this.fragmentTracker.fragBuffered(r),
                        this.fragBufferedComplete(r, null)
                    }
                }
            }
            ,
            r.onBufferFlushing = function(t, e) {
                var r = e.startOffset
                  , i = e.endOffset;
                if (0 === r && i !== Number.POSITIVE_INFINITY) {
                    var n = i - 1;
                    if (n <= 0)
                        return;
                    e.endOffsetSubtitles = Math.max(0, n),
                    this.tracksBuffered.forEach((function(t) {
                        for (var e = 0; e < t.length; )
                            if (t[e].end <= n)
                                t.shift();
                            else {
                                if (!(t[e].start < n))
                                    break;
                                t[e].start = n,
                                e++
                            }
                    }
                    )),
                    this.fragmentTracker.removeFragmentsInRange(r, n, _e)
                }
            }
            ,
            r.onFragBuffered = function(t, e) {
                var r;
                this.loadedmetadata || e.frag.type !== we || null != (r = this.media) && r.buffered.length && (this.loadedmetadata = !0)
            }
            ,
            r.onError = function(t, e) {
                var r = e.frag;
                (null == r ? void 0 : r.type) === _e && (this.fragCurrent && this.fragCurrent.abortRequests(),
                this.state !== fi && (this.state = gi))
            }
            ,
            r.onSubtitleTracksUpdated = function(t, e) {
                var r = this
                  , i = e.subtitleTracks;
                this.levels && Kn(this.levels, i) ? this.levels = i.map((function(t) {
                    return new er(t)
                }
                )) : (this.tracksBuffered = [],
                this.levels = i.map((function(t) {
                    var e = new er(t);
                    return r.tracksBuffered[e.id] = [],
                    e
                }
                )),
                this.fragmentTracker.removeFragmentsInRange(0, Number.POSITIVE_INFINITY, _e),
                this.fragPrevious = null,
                this.mediaBuffer = null)
            }
            ,
            r.onSubtitleTrackSwitch = function(t, e) {
                var r;
                if (this.currentTrackId = e.id,
                null != (r = this.levels) && r.length && -1 !== this.currentTrackId) {
                    var i = this.levels[this.currentTrackId];
                    null != i && i.details ? this.mediaBuffer = this.mediaBufferTimeRanges : this.mediaBuffer = null,
                    i && this.setInterval(500)
                } else
                    this.clearInterval()
            }
            ,
            r.onSubtitleTrackLoaded = function(t, e) {
                var r, i = this.currentTrackId, n = this.levels, a = e.details, s = e.id;
                if (n) {
                    var o = n[i];
                    if (!(s >= n.length || s !== i) && o) {
                        this.log("Subtitle track " + s + " loaded [" + a.startSN + "," + a.endSN + "]" + (a.lastPartSn ? "[part-" + a.lastPartSn + "-" + a.lastPartIndex + "]" : "") + ",duration:" + a.totalduration),
                        this.mediaBuffer = this.mediaBufferTimeRanges;
                        var l = 0;
                        if (a.live || null != (r = o.details) && r.live) {
                            var u = this.mainDetails;
                            if (a.deltaUpdateFailed || !u)
                                return;
                            var h, d = u.fragments[0];
                            o.details ? 0 === (l = this.alignPlaylists(a, o.details, null == (h = this.levelLastLoaded) ? void 0 : h.details)) && d && or(a, l = d.start) : a.hasProgramDateTime && u.hasProgramDateTime ? (ri(a, u),
                            l = a.fragments[0].start) : d && or(a, l = d.start)
                        }
                        o.details = a,
                        this.levelLastLoaded = o,
                        this.startFragRequested || !this.mainDetails && a.live || this.setStartPosition(this.mainDetails || a, l),
                        this.tick(),
                        a.live && !this.fragCurrent && this.media && this.state === gi && (pr(null, a.fragments, this.media.currentTime, 0) || (this.warn("Subtitle playlist not aligned with playback"),
                        o.details = void 0))
                    }
                } else
                    this.warn("Subtitle tracks were reset while loading level " + s)
            }
            ,
            r._handleFragmentLoadComplete = function(t) {
                var e = this
                  , r = t.frag
                  , i = t.payload
                  , n = r.decryptdata
                  , a = this.hls;
                if (!this.fragContextChanged(r) && i && i.byteLength > 0 && null != n && n.key && n.iv && "AES-128" === n.method) {
                    var s = performance.now();
                    this.decrypter.decrypt(new Uint8Array(i), n.key.buffer, n.iv.buffer).catch((function(t) {
                        throw a.trigger(S.ERROR, {
                            type: L.MEDIA_ERROR,
                            details: A.FRAG_DECRYPT_ERROR,
                            fatal: !1,
                            error: t,
                            reason: t.message,
                            frag: r
                        }),
                        t
                    }
                    )).then((function(t) {
                        var e = performance.now();
                        a.trigger(S.FRAG_DECRYPTED, {
                            frag: r,
                            payload: t,
                            stats: {
                                tstart: s,
                                tdecrypt: e
                            }
                        })
                    }
                    )).catch((function(t) {
                        e.warn(t.name + ": " + t.message),
                        e.state = gi
                    }
                    ))
                }
            }
            ,
            r.doTick = function() {
                if (this.media) {
                    if (this.state === gi) {
                        var t = this.currentTrackId
                          , e = this.levels
                          , r = null == e ? void 0 : e[t];
                        if (!r || !e.length || !r.details)
                            return;
                        var i = this.config
                          , n = this.getLoadPosition()
                          , a = Qr.bufferedInfo(this.tracksBuffered[this.currentTrackId] || [], n, i.maxBufferHole)
                          , s = a.end
                          , o = a.len
                          , l = this.getFwdBufferInfo(this.media, we)
                          , u = r.details;
                        if (o > this.getMaxBufferLength(null == l ? void 0 : l.len) + u.levelTargetDuration)
                            return;
                        var h = u.fragments
                          , d = h.length
                          , c = u.edge
                          , f = null
                          , g = this.fragPrevious;
                        if (s < c) {
                            var v = i.maxFragLookUpTolerance
                              , m = s > c - v ? 0 : v;
                            !(f = pr(g, h, Math.max(h[0].start, s), m)) && g && g.start < h[0].start && (f = h[0])
                        } else
                            f = h[d - 1];
                        if (!f)
                            return;
                        if ("initSegment" !== (f = this.mapToInitFragWhenRequired(f)).sn) {
                            var p = h[f.sn - u.startSN - 1];
                            p && p.cc === f.cc && this.fragmentTracker.getState(p) === Hr && (f = p)
                        }
                        this.fragmentTracker.getState(f) === Hr && this.loadFragment(f, r, s)
                    }
                } else
                    this.state = gi
            }
            ,
            r.getMaxBufferLength = function(e) {
                var r = t.prototype.getMaxBufferLength.call(this);
                return e ? Math.max(r, e) : r
            }
            ,
            r.loadFragment = function(e, r, i) {
                this.fragCurrent = e,
                "initSegment" === e.sn ? this._loadInitSegment(e, r) : (this.startFragRequested = !0,
                t.prototype.loadFragment.call(this, e, r, i))
            }
            ,
            s(e, [{
                key: "mediaBufferTimeRanges",
                get: function() {
                    return new qn(this.tracksBuffered[this.currentTrackId] || [])
                }
            }]),
            e
        }(ki)
          , qn = function(t) {
            this.buffered = void 0;
            var e = function(e, r, i) {
                if ((r >>>= 0) > i - 1)
                    throw new DOMException("Failed to execute '" + e + "' on 'TimeRanges': The index provided (" + r + ") is greater than the maximum bound (" + i + ")");
                return t[r][e]
            };
            this.buffered = {
                get length() {
                    return t.length
                },
                end: function(r) {
                    return e("end", r, t.length)
                },
                start: function(r) {
                    return e("start", r, t.length)
                }
            }
        }
          , Xn = function(t) {
            function e(e) {
                var r;
                return (r = t.call(this, e, "[subtitle-track-controller]") || this).media = null,
                r.tracks = [],
                r.groupIds = null,
                r.tracksInGroup = [],
                r.trackId = -1,
                r.currentTrack = null,
                r.selectDefaultTrack = !0,
                r.queuedDefaultTrack = -1,
                r.asyncPollTrackChange = function() {
                    return r.pollTrackChange(0)
                }
                ,
                r.useTextTrackPolling = !1,
                r.subtitlePollingInterval = -1,
                r._subtitleDisplay = !0,
                r.onTextTracksChanged = function() {
                    if (r.useTextTrackPolling || self.clearInterval(r.subtitlePollingInterval),
                    r.media && r.hls.config.renderTextTracksNatively) {
                        for (var t = null, e = Be(r.media.textTracks), i = 0; i < e.length; i++)
                            if ("hidden" === e[i].mode)
                                t = e[i];
                            else if ("showing" === e[i].mode) {
                                t = e[i];
                                break
                            }
                        var n = r.findTrackForTextTrack(t);
                        r.subtitleTrack !== n && r.setSubtitleTrack(n)
                    }
                }
                ,
                r.registerListeners(),
                r
            }
            l(e, t);
            var r = e.prototype;
            return r.destroy = function() {
                this.unregisterListeners(),
                this.tracks.length = 0,
                this.tracksInGroup.length = 0,
                this.currentTrack = null,
                this.onTextTracksChanged = this.asyncPollTrackChange = null,
                t.prototype.destroy.call(this)
            }
            ,
            r.registerListeners = function() {
                var t = this.hls;
                t.on(S.MEDIA_ATTACHED, this.onMediaAttached, this),
                t.on(S.MEDIA_DETACHING, this.onMediaDetaching, this),
                t.on(S.MANIFEST_LOADING, this.onManifestLoading, this),
                t.on(S.MANIFEST_PARSED, this.onManifestParsed, this),
                t.on(S.LEVEL_LOADING, this.onLevelLoading, this),
                t.on(S.LEVEL_SWITCHING, this.onLevelSwitching, this),
                t.on(S.SUBTITLE_TRACK_LOADED, this.onSubtitleTrackLoaded, this),
                t.on(S.ERROR, this.onError, this)
            }
            ,
            r.unregisterListeners = function() {
                var t = this.hls;
                t.off(S.MEDIA_ATTACHED, this.onMediaAttached, this),
                t.off(S.MEDIA_DETACHING, this.onMediaDetaching, this),
                t.off(S.MANIFEST_LOADING, this.onManifestLoading, this),
                t.off(S.MANIFEST_PARSED, this.onManifestParsed, this),
                t.off(S.LEVEL_LOADING, this.onLevelLoading, this),
                t.off(S.LEVEL_SWITCHING, this.onLevelSwitching, this),
                t.off(S.SUBTITLE_TRACK_LOADED, this.onSubtitleTrackLoaded, this),
                t.off(S.ERROR, this.onError, this)
            }
            ,
            r.onMediaAttached = function(t, e) {
                this.media = e.media,
                this.media && (this.queuedDefaultTrack > -1 && (this.subtitleTrack = this.queuedDefaultTrack,
                this.queuedDefaultTrack = -1),
                this.useTextTrackPolling = !(this.media.textTracks && "onchange"in this.media.textTracks),
                this.useTextTrackPolling ? this.pollTrackChange(500) : this.media.textTracks.addEventListener("change", this.asyncPollTrackChange))
            }
            ,
            r.pollTrackChange = function(t) {
                self.clearInterval(this.subtitlePollingInterval),
                this.subtitlePollingInterval = self.setInterval(this.onTextTracksChanged, t)
            }
            ,
            r.onMediaDetaching = function() {
                this.media && (self.clearInterval(this.subtitlePollingInterval),
                this.useTextTrackPolling || this.media.textTracks.removeEventListener("change", this.asyncPollTrackChange),
                this.trackId > -1 && (this.queuedDefaultTrack = this.trackId),
                Be(this.media.textTracks).forEach((function(t) {
                    Ne(t)
                }
                )),
                this.subtitleTrack = -1,
                this.media = null)
            }
            ,
            r.onManifestLoading = function() {
                this.tracks = [],
                this.groupIds = null,
                this.tracksInGroup = [],
                this.trackId = -1,
                this.currentTrack = null,
                this.selectDefaultTrack = !0
            }
            ,
            r.onManifestParsed = function(t, e) {
                this.tracks = e.subtitleTracks
            }
            ,
            r.onSubtitleTrackLoaded = function(t, e) {
                var r = e.id
                  , i = e.groupId
                  , n = e.details
                  , a = this.tracksInGroup[r];
                if (a && a.groupId === i) {
                    var s = a.details;
                    a.details = e.details,
                    this.log("Subtitle track " + r + ' "' + a.name + '" lang:' + a.lang + " group:" + i + " loaded [" + n.startSN + "-" + n.endSN + "]"),
                    r === this.trackId && this.playlistLoaded(r, e, s)
                } else
                    this.warn("Subtitle track with id:" + r + " and group:" + i + " not found in active group " + (null == a ? void 0 : a.groupId))
            }
            ,
            r.onLevelLoading = function(t, e) {
                this.switchLevel(e.level)
            }
            ,
            r.onLevelSwitching = function(t, e) {
                this.switchLevel(e.level)
            }
            ,
            r.switchLevel = function(t) {
                var e = this.hls.levels[t];
                if (e) {
                    var r = e.subtitleGroups || null
                      , i = this.groupIds
                      , n = this.currentTrack;
                    if (!r || (null == i ? void 0 : i.length) !== (null == r ? void 0 : r.length) || null != r && r.some((function(t) {
                        return -1 === (null == i ? void 0 : i.indexOf(t))
                    }
                    ))) {
                        this.groupIds = r,
                        this.trackId = -1,
                        this.currentTrack = null;
                        var a = this.tracks.filter((function(t) {
                            return !r || -1 !== r.indexOf(t.groupId)
                        }
                        ));
                        if (a.length)
                            this.selectDefaultTrack && !a.some((function(t) {
                                return t.default
                            }
                            )) && (this.selectDefaultTrack = !1),
                            a.forEach((function(t, e) {
                                t.id = e
                            }
                            ));
                        else if (!n && !this.tracksInGroup.length)
                            return;
                        this.tracksInGroup = a;
                        var s = this.hls.config.subtitlePreference;
                        if (!n && s) {
                            this.selectDefaultTrack = !1;
                            var o = Or(s, a);
                            if (o > -1)
                                n = a[o];
                            else {
                                var l = Or(s, this.tracks);
                                n = this.tracks[l]
                            }
                        }
                        var u = this.findTrackId(n);
                        -1 === u && n && (u = this.findTrackId(null));
                        var h = {
                            subtitleTracks: a
                        };
                        this.log("Updating subtitle tracks, " + a.length + ' track(s) found in "' + (null == r ? void 0 : r.join(",")) + '" group-id'),
                        this.hls.trigger(S.SUBTITLE_TRACKS_UPDATED, h),
                        -1 !== u && -1 === this.trackId && this.setSubtitleTrack(u)
                    } else
                        this.shouldReloadPlaylist(n) && this.setSubtitleTrack(this.trackId)
                }
            }
            ,
            r.findTrackId = function(t) {
                for (var e = this.tracksInGroup, r = this.selectDefaultTrack, i = 0; i < e.length; i++) {
                    var n = e[i];
                    if ((!r || n.default) && (r || t) && (!t || Nr(n, t)))
                        return i
                }
                if (t) {
                    for (var a = 0; a < e.length; a++) {
                        var s = e[a];
                        if (Hn(t.attrs, s.attrs, ["LANGUAGE", "ASSOC-LANGUAGE", "CHARACTERISTICS"]))
                            return a
                    }
                    for (var o = 0; o < e.length; o++) {
                        var l = e[o];
                        if (Hn(t.attrs, l.attrs, ["LANGUAGE"]))
                            return o
                    }
                }
                return -1
            }
            ,
            r.findTrackForTextTrack = function(t) {
                if (t)
                    for (var e = this.tracksInGroup, r = 0; r < e.length; r++)
                        if (Vn(e[r], t))
                            return r;
                return -1
            }
            ,
            r.onError = function(t, e) {
                !e.fatal && e.context && (e.context.type !== Ie || e.context.id !== this.trackId || this.groupIds && -1 === this.groupIds.indexOf(e.context.groupId) || this.checkRetry(e))
            }
            ,
            r.setSubtitleOption = function(t) {
                if (this.hls.config.subtitlePreference = t,
                t) {
                    var e = this.allSubtitleTracks;
                    if (this.selectDefaultTrack = !1,
                    e.length) {
                        var r = this.currentTrack;
                        if (r && Nr(t, r))
                            return r;
                        var i = Or(t, this.tracksInGroup);
                        if (i > -1) {
                            var n = this.tracksInGroup[i];
                            return this.setSubtitleTrack(i),
                            n
                        }
                        if (r)
                            return null;
                        var a = Or(t, e);
                        if (a > -1)
                            return e[a]
                    }
                }
                return null
            }
            ,
            r.loadPlaylist = function(e) {
                t.prototype.loadPlaylist.call(this);
                var r = this.currentTrack;
                if (this.shouldLoadPlaylist(r) && r) {
                    var i = r.id
                      , n = r.groupId
                      , a = r.url;
                    if (e)
                        try {
                            a = e.addDirectives(a)
                        } catch (t) {
                            this.warn("Could not construct new URL with HLS Delivery Directives: " + t)
                        }
                    this.log("Loading subtitle playlist for id " + i),
                    this.hls.trigger(S.SUBTITLE_TRACK_LOADING, {
                        url: a,
                        id: i,
                        groupId: n,
                        deliveryDirectives: e || null
                    })
                }
            }
            ,
            r.toggleTrackModes = function() {
                var t = this.media;
                if (t) {
                    var e, r = Be(t.textTracks), i = this.currentTrack;
                    if (i && ((e = r.filter((function(t) {
                        return Vn(i, t)
                    }
                    ))[0]) || this.warn('Unable to find subtitle TextTrack with name "' + i.name + '" and language "' + i.lang + '"')),
                    [].slice.call(r).forEach((function(t) {
                        "disabled" !== t.mode && t !== e && (t.mode = "disabled")
                    }
                    )),
                    e) {
                        var n = this.subtitleDisplay ? "showing" : "hidden";
                        e.mode !== n && (e.mode = n)
                    }
                }
            }
            ,
            r.setSubtitleTrack = function(t) {
                var e = this.tracksInGroup;
                if (this.media)
                    if (t < -1 || t >= e.length || !y(t))
                        this.warn("Invalid subtitle track id: " + t);
                    else {
                        this.clearTimer(),
                        this.selectDefaultTrack = !1;
                        var r = this.currentTrack
                          , i = e[t] || null;
                        if (this.trackId = t,
                        this.currentTrack = i,
                        this.toggleTrackModes(),
                        i) {
                            var n = !!i.details && !i.details.live;
                            if (t !== this.trackId || i !== r || !n) {
                                this.log("Switching to subtitle-track " + t + (i ? ' "' + i.name + '" lang:' + i.lang + " group:" + i.groupId : ""));
                                var a = i.id
                                  , s = i.groupId
                                  , o = void 0 === s ? "" : s
                                  , l = i.name
                                  , u = i.type
                                  , h = i.url;
                                this.hls.trigger(S.SUBTITLE_TRACK_SWITCH, {
                                    id: a,
                                    groupId: o,
                                    name: l,
                                    type: u,
                                    url: h
                                });
                                var d = this.switchParams(i.url, null == r ? void 0 : r.details);
                                this.loadPlaylist(d)
                            }
                        } else
                            this.hls.trigger(S.SUBTITLE_TRACK_SWITCH, {
                                id: t
                            })
                    }
                else
                    this.queuedDefaultTrack = t
            }
            ,
            s(e, [{
                key: "subtitleDisplay",
                get: function() {
                    return this._subtitleDisplay
                },
                set: function(t) {
                    this._subtitleDisplay = t,
                    this.trackId > -1 && this.toggleTrackModes()
                }
            }, {
                key: "allSubtitleTracks",
                get: function() {
                    return this.tracks
                }
            }, {
                key: "subtitleTracks",
                get: function() {
                    return this.tracksInGroup
                }
            }, {
                key: "subtitleTrack",
                get: function() {
                    return this.trackId
                },
                set: function(t) {
                    this.selectDefaultTrack = !1,
                    this.setSubtitleTrack(t)
                }
            }]),
            e
        }(Ir)
          , zn = function() {
            function t(t) {
                this.buffers = void 0,
                this.queues = {
                    video: [],
                    audio: [],
                    audiovideo: []
                },
                this.buffers = t
            }
            var e = t.prototype;
            return e.append = function(t, e, r) {
                var i = this.queues[e];
                i.push(t),
                1 !== i.length || r || this.executeNext(e)
            }
            ,
            e.insertAbort = function(t, e) {
                this.queues[e].unshift(t),
                this.executeNext(e)
            }
            ,
            e.appendBlocker = function(t) {
                var e, r = new Promise((function(t) {
                    e = t
                }
                )), i = {
                    execute: e,
                    onStart: function() {},
                    onComplete: function() {},
                    onError: function() {}
                };
                return this.append(i, t),
                r
            }
            ,
            e.executeNext = function(t) {
                var e = this.queues[t];
                if (e.length) {
                    var r = e[0];
                    try {
                        r.execute()
                    } catch (e) {
                        w.warn('[buffer-operation-queue]: Exception executing "' + t + '" SourceBuffer operation: ' + e),
                        r.onError(e);
                        var i = this.buffers[t];
                        null != i && i.updating || this.shiftAndExecuteNext(t)
                    }
                }
            }
            ,
            e.shiftAndExecuteNext = function(t) {
                this.queues[t].shift(),
                this.executeNext(t)
            }
            ,
            e.current = function(t) {
                return this.queues[t][0]
            }
            ,
            t
        }()
          , Qn = /(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/
          , Jn = function() {
            function t(t) {
                var e = this;
                this.details = null,
                this._objectUrl = null,
                this.operationQueue = void 0,
                this.listeners = void 0,
                this.hls = void 0,
                this.bufferCodecEventsExpected = 0,
                this._bufferCodecEventsTotal = 0,
                this.media = null,
                this.mediaSource = null,
                this.lastMpegAudioChunk = null,
                this.appendSource = void 0,
                this.appendErrors = {
                    audio: 0,
                    video: 0,
                    audiovideo: 0
                },
                this.tracks = {},
                this.pendingTracks = {},
                this.sourceBuffer = void 0,
                this.log = void 0,
                this.warn = void 0,
                this.error = void 0,
                this._onEndStreaming = function(t) {
                    e.hls && e.hls.pauseBuffering()
                }
                ,
                this._onStartStreaming = function(t) {
                    e.hls && e.hls.resumeBuffering()
                }
                ,
                this._onMediaSourceOpen = function() {
                    var t = e.media
                      , r = e.mediaSource;
                    e.log("Media source opened"),
                    t && (t.removeEventListener("emptied", e._onMediaEmptied),
                    e.updateMediaElementDuration(),
                    e.hls.trigger(S.MEDIA_ATTACHED, {
                        media: t,
                        mediaSource: r
                    })),
                    r && r.removeEventListener("sourceopen", e._onMediaSourceOpen),
                    e.checkPendingTracks()
                }
                ,
                this._onMediaSourceClose = function() {
                    e.log("Media source closed")
                }
                ,
                this._onMediaSourceEnded = function() {
                    e.log("Media source ended")
                }
                ,
                this._onMediaEmptied = function() {
                    var t = e.mediaSrc
                      , r = e._objectUrl;
                    t !== r && w.error("Media element src was set while attaching MediaSource (" + r + " > " + t + ")")
                }
                ,
                this.hls = t;
                var r = "[buffer-controller]";
                this.appendSource = t.config.preferManagedMediaSource && "undefined" != typeof self && self.ManagedMediaSource,
                this.log = w.log.bind(w, r),
                this.warn = w.warn.bind(w, r),
                this.error = w.error.bind(w, r),
                this._initSourceBuffer(),
                this.registerListeners()
            }
            var e = t.prototype;
            return e.hasSourceTypes = function() {
                return this.getSourceBufferTypes().length > 0 || Object.keys(this.pendingTracks).length > 0
            }
            ,
            e.destroy = function() {
                this.unregisterListeners(),
                this.details = null,
                this.lastMpegAudioChunk = null,
                this.hls = null
            }
            ,
            e.registerListeners = function() {
                var t = this.hls;
                t.on(S.MEDIA_ATTACHING, this.onMediaAttaching, this),
                t.on(S.MEDIA_DETACHING, this.onMediaDetaching, this),
                t.on(S.MANIFEST_LOADING, this.onManifestLoading, this),
                t.on(S.MANIFEST_PARSED, this.onManifestParsed, this),
                t.on(S.BUFFER_RESET, this.onBufferReset, this),
                t.on(S.BUFFER_APPENDING, this.onBufferAppending, this),
                t.on(S.BUFFER_CODECS, this.onBufferCodecs, this),
                t.on(S.BUFFER_EOS, this.onBufferEos, this),
                t.on(S.BUFFER_FLUSHING, this.onBufferFlushing, this),
                t.on(S.LEVEL_UPDATED, this.onLevelUpdated, this),
                t.on(S.FRAG_PARSED, this.onFragParsed, this),
                t.on(S.FRAG_CHANGED, this.onFragChanged, this)
            }
            ,
            e.unregisterListeners = function() {
                var t = this.hls;
                t.off(S.MEDIA_ATTACHING, this.onMediaAttaching, this),
                t.off(S.MEDIA_DETACHING, this.onMediaDetaching, this),
                t.off(S.MANIFEST_LOADING, this.onManifestLoading, this),
                t.off(S.MANIFEST_PARSED, this.onManifestParsed, this),
                t.off(S.BUFFER_RESET, this.onBufferReset, this),
                t.off(S.BUFFER_APPENDING, this.onBufferAppending, this),
                t.off(S.BUFFER_CODECS, this.onBufferCodecs, this),
                t.off(S.BUFFER_EOS, this.onBufferEos, this),
                t.off(S.BUFFER_FLUSHING, this.onBufferFlushing, this),
                t.off(S.LEVEL_UPDATED, this.onLevelUpdated, this),
                t.off(S.FRAG_PARSED, this.onFragParsed, this),
                t.off(S.FRAG_CHANGED, this.onFragChanged, this)
            }
            ,
            e._initSourceBuffer = function() {
                this.sourceBuffer = {},
                this.operationQueue = new zn(this.sourceBuffer),
                this.listeners = {
                    audio: [],
                    video: [],
                    audiovideo: []
                },
                this.appendErrors = {
                    audio: 0,
                    video: 0,
                    audiovideo: 0
                },
                this.lastMpegAudioChunk = null
            }
            ,
            e.onManifestLoading = function() {
                this.bufferCodecEventsExpected = this._bufferCodecEventsTotal = 0,
                this.details = null
            }
            ,
            e.onManifestParsed = function(t, e) {
                var r = 2;
                (e.audio && !e.video || !e.altAudio) && (r = 1),
                this.bufferCodecEventsExpected = this._bufferCodecEventsTotal = r,
                this.log(this.bufferCodecEventsExpected + " bufferCodec event(s) expected")
            }
            ,
            e.onMediaAttaching = function(t, e) {
                var r = this.media = e.media
                  , i = ee(this.appendSource);
                if (r && i) {
                    var n, a = this.mediaSource = new i;
                    this.log("created media source: " + (null == (n = a.constructor) ? void 0 : n.name)),
                    a.addEventListener("sourceopen", this._onMediaSourceOpen),
                    a.addEventListener("sourceended", this._onMediaSourceEnded),
                    a.addEventListener("sourceclose", this._onMediaSourceClose),
                    this.appendSource && (a.addEventListener("startstreaming", this._onStartStreaming),
                    a.addEventListener("endstreaming", this._onEndStreaming));
                    var s = this._objectUrl = self.URL.createObjectURL(a);
                    if (this.appendSource)
                        try {
                            r.removeAttribute("src");
                            var o = self.ManagedMediaSource;
                            r.disableRemotePlayback = r.disableRemotePlayback || o && a instanceof o,
                            $n(r),
                            function(t, e) {
                                var r = self.document.createElement("source");
                                r.type = "video/mp4",
                                r.src = e,
                                t.appendChild(r)
                            }(r, s),
                            r.load()
                        } catch (t) {
                            r.src = s
                        }
                    else
                        r.src = s;
                    r.addEventListener("emptied", this._onMediaEmptied)
                }
            }
            ,
            e.onMediaDetaching = function() {
                var t = this.media
                  , e = this.mediaSource
                  , r = this._objectUrl;
                if (e) {
                    if (this.log("media source detaching"),
                    "open" === e.readyState)
                        try {
                            e.endOfStream()
                        } catch (t) {
                            this.warn("onMediaDetaching: " + t.message + " while calling endOfStream")
                        }
                    this.onBufferReset(),
                    e.removeEventListener("sourceopen", this._onMediaSourceOpen),
                    e.removeEventListener("sourceended", this._onMediaSourceEnded),
                    e.removeEventListener("sourceclose", this._onMediaSourceClose),
                    this.appendSource && (e.removeEventListener("startstreaming", this._onStartStreaming),
                    e.removeEventListener("endstreaming", this._onEndStreaming)),
                    t && (t.removeEventListener("emptied", this._onMediaEmptied),
                    r && self.URL.revokeObjectURL(r),
                    this.mediaSrc === r ? (t.removeAttribute("src"),
                    this.appendSource && $n(t),
                    t.load()) : this.warn("media|source.src was changed by a third party - skip cleanup")),
                    this.mediaSource = null,
                    this.media = null,
                    this._objectUrl = null,
                    this.bufferCodecEventsExpected = this._bufferCodecEventsTotal,
                    this.pendingTracks = {},
                    this.tracks = {}
                }
                this.hls.trigger(S.MEDIA_DETACHED, void 0)
            }
            ,
            e.onBufferReset = function() {
                var t = this;
                this.getSourceBufferTypes().forEach((function(e) {
                    t.resetBuffer(e)
                }
                )),
                this._initSourceBuffer()
            }
            ,
            e.resetBuffer = function(t) {
                var e = this.sourceBuffer[t];
                try {
                    var r;
                    e && (this.removeBufferListeners(t),
                    this.sourceBuffer[t] = void 0,
                    null != (r = this.mediaSource) && r.sourceBuffers.length && this.mediaSource.removeSourceBuffer(e))
                } catch (e) {
                    this.warn("onBufferReset " + t, e)
                }
            }
            ,
            e.onBufferCodecs = function(t, e) {
                var r = this
                  , i = this.getSourceBufferTypes().length
                  , n = Object.keys(e);
                if (n.forEach((function(t) {
                    if (i) {
                        var n = r.tracks[t];
                        if (n && "function" == typeof n.buffer.changeType) {
                            var a, s = e[t], o = s.id, l = s.codec, u = s.levelCodec, h = s.container, d = s.metadata, c = de(n.codec, n.levelCodec), f = null == c ? void 0 : c.replace(Qn, "$1"), g = de(l, u), v = null == (a = g) ? void 0 : a.replace(Qn, "$1");
                            if (g && f !== v) {
                                "audio" === t.slice(0, 5) && (g = he(g, r.appendSource));
                                var m = h + ";codecs=" + g;
                                r.appendChangeType(t, m),
                                r.log("switching codec " + c + " to " + g),
                                r.tracks[t] = {
                                    buffer: n.buffer,
                                    codec: l,
                                    container: h,
                                    levelCodec: u,
                                    metadata: d,
                                    id: o
                                }
                            }
                        }
                    } else
                        r.pendingTracks[t] = e[t]
                }
                )),
                !i) {
                    var a = Math.max(this.bufferCodecEventsExpected - 1, 0);
                    this.bufferCodecEventsExpected !== a && (this.log(a + " bufferCodec event(s) expected " + n.join(",")),
                    this.bufferCodecEventsExpected = a),
                    this.mediaSource && "open" === this.mediaSource.readyState && this.checkPendingTracks()
                }
            }
            ,
            e.appendChangeType = function(t, e) {
                var r = this
                  , i = this.operationQueue
                  , n = {
                    execute: function() {
                        var n = r.sourceBuffer[t];
                        n && (r.log("changing " + t + " sourceBuffer type to " + e),
                        n.changeType(e)),
                        i.shiftAndExecuteNext(t)
                    },
                    onStart: function() {},
                    onComplete: function() {},
                    onError: function(e) {
                        r.warn("Failed to change " + t + " SourceBuffer type", e)
                    }
                };
                i.append(n, t, !!this.pendingTracks[t])
            }
            ,
            e.onBufferAppending = function(t, e) {
                var r = this
                  , i = this.hls
                  , n = this.operationQueue
                  , a = this.tracks
                  , s = e.data
                  , o = e.type
                  , l = e.frag
                  , u = e.part
                  , h = e.chunkMeta
                  , d = h.buffering[o]
                  , c = self.performance.now();
                d.start = c;
                var f = l.stats.buffering
                  , g = u ? u.stats.buffering : null;
                0 === f.start && (f.start = c),
                g && 0 === g.start && (g.start = c);
                var v = a.audio
                  , m = !1;
                "audio" === o && "audio/mpeg" === (null == v ? void 0 : v.container) && (m = !this.lastMpegAudioChunk || 1 === h.id || this.lastMpegAudioChunk.sn !== h.sn,
                this.lastMpegAudioChunk = h);
                var p = l.start
                  , y = {
                    execute: function() {
                        if (d.executeStart = self.performance.now(),
                        m) {
                            var t = r.sourceBuffer[o];
                            if (t) {
                                var e = p - t.timestampOffset;
                                Math.abs(e) >= .1 && (r.log("Updating audio SourceBuffer timestampOffset to " + p + " (delta: " + e + ") sn: " + l.sn + ")"),
                                t.timestampOffset = p)
                            }
                        }
                        r.appendExecutor(s, o)
                    },
                    onStart: function() {},
                    onComplete: function() {
                        var t = self.performance.now();
                        d.executeEnd = d.end = t,
                        0 === f.first && (f.first = t),
                        g && 0 === g.first && (g.first = t);
                        var e = r.sourceBuffer
                          , i = {};
                        for (var n in e)
                            i[n] = Qr.getBuffered(e[n]);
                        r.appendErrors[o] = 0,
                        "audio" === o || "video" === o ? r.appendErrors.audiovideo = 0 : (r.appendErrors.audio = 0,
                        r.appendErrors.video = 0),
                        r.hls.trigger(S.BUFFER_APPENDED, {
                            type: o,
                            frag: l,
                            part: u,
                            chunkMeta: h,
                            parent: l.type,
                            timeRanges: i
                        })
                    },
                    onError: function(t) {
                        var e = {
                            type: L.MEDIA_ERROR,
                            parent: l.type,
                            details: A.BUFFER_APPEND_ERROR,
                            sourceBufferName: o,
                            frag: l,
                            part: u,
                            chunkMeta: h,
                            error: t,
                            err: t,
                            fatal: !1
                        };
                        if (t.code === DOMException.QUOTA_EXCEEDED_ERR)
                            e.details = A.BUFFER_FULL_ERROR;
                        else {
                            var n = ++r.appendErrors[o];
                            e.details = A.BUFFER_APPEND_ERROR,
                            r.warn("Failed " + n + "/" + i.config.appendErrorMaxRetry + ' times to append segment in "' + o + '" sourceBuffer'),
                            n >= i.config.appendErrorMaxRetry && (e.fatal = !0)
                        }
                        i.trigger(S.ERROR, e)
                    }
                };
                n.append(y, o, !!this.pendingTracks[o])
            }
            ,
            e.onBufferFlushing = function(t, e) {
                var r = this
                  , i = this.operationQueue
                  , n = function(t) {
                    return {
                        execute: r.removeExecutor.bind(r, t, e.startOffset, e.endOffset),
                        onStart: function() {},
                        onComplete: function() {
                            r.hls.trigger(S.BUFFER_FLUSHED, {
                                type: t
                            })
                        },
                        onError: function(e) {
                            r.warn("Failed to remove from " + t + " SourceBuffer", e)
                        }
                    }
                };
                e.type ? i.append(n(e.type), e.type) : this.getSourceBufferTypes().forEach((function(t) {
                    i.append(n(t), t)
                }
                ))
            }
            ,
            e.onFragParsed = function(t, e) {
                var r = this
                  , i = e.frag
                  , n = e.part
                  , a = []
                  , s = n ? n.elementaryStreams : i.elementaryStreams;
                s[U] ? a.push("audiovideo") : (s[O] && a.push("audio"),
                s[N] && a.push("video")),
                0 === a.length && this.warn("Fragments must have at least one ElementaryStreamType set. type: " + i.type + " level: " + i.level + " sn: " + i.sn),
                this.blockBuffers((function() {
                    var t = self.performance.now();
                    i.stats.buffering.end = t,
                    n && (n.stats.buffering.end = t);
                    var e = n ? n.stats : i.stats;
                    r.hls.trigger(S.FRAG_BUFFERED, {
                        frag: i,
                        part: n,
                        stats: e,
                        id: i.type
                    })
                }
                ), a)
            }
            ,
            e.onFragChanged = function(t, e) {
                this.trimBuffers()
            }
            ,
            e.onBufferEos = function(t, e) {
                var r = this;
                this.getSourceBufferTypes().reduce((function(t, i) {
                    var n = r.sourceBuffer[i];
                    return !n || e.type && e.type !== i || (n.ending = !0,
                    n.ended || (n.ended = !0,
                    r.log(i + " sourceBuffer now EOS"))),
                    t && !(n && !n.ended)
                }
                ), !0) && (this.log("Queueing mediaSource.endOfStream()"),
                this.blockBuffers((function() {
                    r.getSourceBufferTypes().forEach((function(t) {
                        var e = r.sourceBuffer[t];
                        e && (e.ending = !1)
                    }
                    ));
                    var t = r.mediaSource;
                    t && "open" === t.readyState ? (r.log("Calling mediaSource.endOfStream()"),
                    t.endOfStream()) : t && r.log("Could not call mediaSource.endOfStream(). mediaSource.readyState: " + t.readyState)
                }
                )))
            }
            ,
            e.onLevelUpdated = function(t, e) {
                var r = e.details;
                r.fragments.length && (this.details = r,
                this.getSourceBufferTypes().length ? this.blockBuffers(this.updateMediaElementDuration.bind(this)) : this.updateMediaElementDuration())
            }
            ,
            e.trimBuffers = function() {
                var t = this.hls
                  , e = this.details
                  , r = this.media;
                if (r && null !== e && this.getSourceBufferTypes().length) {
                    var i = t.config
                      , n = r.currentTime
                      , a = e.levelTargetDuration
                      , s = e.live && null !== i.liveBackBufferLength ? i.liveBackBufferLength : i.backBufferLength;
                    if (y(s) && s > 0) {
                        var o = Math.max(s, a)
                          , l = Math.floor(n / a) * a - o;
                        this.flushBackBuffer(n, a, l)
                    }
                    if (y(i.frontBufferFlushThreshold) && i.frontBufferFlushThreshold > 0) {
                        var u = Math.max(i.maxBufferLength, i.frontBufferFlushThreshold)
                          , h = Math.max(u, a)
                          , d = Math.floor(n / a) * a + h;
                        this.flushFrontBuffer(n, a, d)
                    }
                }
            }
            ,
            e.flushBackBuffer = function(t, e, r) {
                var i = this
                  , n = this.details
                  , a = this.sourceBuffer;
                this.getSourceBufferTypes().forEach((function(s) {
                    var o = a[s];
                    if (o) {
                        var l = Qr.getBuffered(o);
                        if (l.length > 0 && r > l.start(0)) {
                            if (i.hls.trigger(S.BACK_BUFFER_REACHED, {
                                bufferEnd: r
                            }),
                            null != n && n.live)
                                i.hls.trigger(S.LIVE_BACK_BUFFER_REACHED, {
                                    bufferEnd: r
                                });
                            else if (o.ended && l.end(l.length - 1) - t < 2 * e)
                                return void i.log("Cannot flush " + s + " back buffer while SourceBuffer is in ended state");
                            i.hls.trigger(S.BUFFER_FLUSHING, {
                                startOffset: 0,
                                endOffset: r,
                                type: s
                            })
                        }
                    }
                }
                ))
            }
            ,
            e.flushFrontBuffer = function(t, e, r) {
                var i = this
                  , n = this.sourceBuffer;
                this.getSourceBufferTypes().forEach((function(a) {
                    var s = n[a];
                    if (s) {
                        var o = Qr.getBuffered(s)
                          , l = o.length;
                        if (l < 2)
                            return;
                        var u = o.start(l - 1)
                          , h = o.end(l - 1);
                        if (r > u || t >= u && t <= h)
                            return;
                        if (s.ended && t - h < 2 * e)
                            return void i.log("Cannot flush " + a + " front buffer while SourceBuffer is in ended state");
                        i.hls.trigger(S.BUFFER_FLUSHING, {
                            startOffset: u,
                            endOffset: 1 / 0,
                            type: a
                        })
                    }
                }
                ))
            }
            ,
            e.updateMediaElementDuration = function() {
                if (this.details && this.media && this.mediaSource && "open" === this.mediaSource.readyState) {
                    var t = this.details
                      , e = this.hls
                      , r = this.media
                      , i = this.mediaSource
                      , n = t.fragments[0].start + t.totalduration
                      , a = r.duration
                      , s = y(i.duration) ? i.duration : 0;
                    t.live && e.config.liveDurationInfinity ? (i.duration = 1 / 0,
                    this.updateSeekableRange(t)) : (n > s && n > a || !y(a)) && (this.log("Updating Media Source duration to " + n.toFixed(3)),
                    i.duration = n)
                }
            }
            ,
            e.updateSeekableRange = function(t) {
                var e = this.mediaSource
                  , r = t.fragments;
                if (r.length && t.live && null != e && e.setLiveSeekableRange) {
                    var i = Math.max(0, r[0].start)
                      , n = Math.max(i, i + t.totalduration);
                    this.log("Media Source duration is set to " + e.duration + ". Setting seekable range to " + i + "-" + n + "."),
                    e.setLiveSeekableRange(i, n)
                }
            }
            ,
            e.checkPendingTracks = function() {
                var t = this.bufferCodecEventsExpected
                  , e = this.operationQueue
                  , r = this.pendingTracks
                  , i = Object.keys(r).length;
                if (i && (!t || 2 === i || "audiovideo"in r)) {
                    this.createSourceBuffers(r),
                    this.pendingTracks = {};
                    var n = this.getSourceBufferTypes();
                    if (n.length)
                        this.hls.trigger(S.BUFFER_CREATED, {
                            tracks: this.tracks
                        }),
                        n.forEach((function(t) {
                            e.executeNext(t)
                        }
                        ));
                    else {
                        var a = new Error("could not create source buffer for media codec(s)");
                        this.hls.trigger(S.ERROR, {
                            type: L.MEDIA_ERROR,
                            details: A.BUFFER_INCOMPATIBLE_CODECS_ERROR,
                            fatal: !0,
                            error: a,
                            reason: a.message
                        })
                    }
                }
            }
            ,
            e.createSourceBuffers = function(t) {
                var e = this
                  , r = this.sourceBuffer
                  , i = this.mediaSource;
                if (!i)
                    throw Error("createSourceBuffers called when mediaSource was null");
                var n = function(n) {
                    if (!r[n]) {
                        var a = t[n];
                        if (!a)
                            throw Error("source buffer exists for track " + n + ", however track does not");
                        var s = a.levelCodec || a.codec;
                        s && "audio" === n.slice(0, 5) && (s = he(s, e.appendSource));
                        var o = a.container + ";codecs=" + s;
                        e.log("creating sourceBuffer(" + o + ")");
                        try {
                            var l = r[n] = i.addSourceBuffer(o)
                              , u = n;
                            e.addBufferListener(u, "updatestart", e._onSBUpdateStart),
                            e.addBufferListener(u, "updateend", e._onSBUpdateEnd),
                            e.addBufferListener(u, "error", e._onSBUpdateError),
                            e.appendSource && e.addBufferListener(u, "bufferedchange", (function(t, r) {
                                var i = r.removedRanges;
                                null != i && i.length && e.hls.trigger(S.BUFFER_FLUSHED, {
                                    type: n
                                })
                            }
                            )),
                            e.tracks[n] = {
                                buffer: l,
                                codec: s,
                                container: a.container,
                                levelCodec: a.levelCodec,
                                metadata: a.metadata,
                                id: a.id
                            }
                        } catch (t) {
                            e.error("error while trying to add sourceBuffer: " + t.message),
                            e.hls.trigger(S.ERROR, {
                                type: L.MEDIA_ERROR,
                                details: A.BUFFER_ADD_CODEC_ERROR,
                                fatal: !1,
                                error: t,
                                sourceBufferName: n,
                                mimeType: o
                            })
                        }
                    }
                };
                for (var a in t)
                    n(a)
            }
            ,
            e._onSBUpdateStart = function(t) {
                this.operationQueue.current(t).onStart()
            }
            ,
            e._onSBUpdateEnd = function(t) {
                var e;
                if ("closed" !== (null == (e = this.mediaSource) ? void 0 : e.readyState)) {
                    var r = this.operationQueue;
                    r.current(t).onComplete(),
                    r.shiftAndExecuteNext(t)
                } else
                    this.resetBuffer(t)
            }
            ,
            e._onSBUpdateError = function(t, e) {
                var r, i = new Error(t + " SourceBuffer error. MediaSource readyState: " + (null == (r = this.mediaSource) ? void 0 : r.readyState));
                this.error("" + i, e),
                this.hls.trigger(S.ERROR, {
                    type: L.MEDIA_ERROR,
                    details: A.BUFFER_APPENDING_ERROR,
                    sourceBufferName: t,
                    error: i,
                    fatal: !1
                });
                var n = this.operationQueue.current(t);
                n && n.onError(i)
            }
            ,
            e.removeExecutor = function(t, e, r) {
                var i = this.media
                  , n = this.mediaSource
                  , a = this.operationQueue
                  , s = this.sourceBuffer[t];
                if (!i || !n || !s)
                    return this.warn("Attempting to remove from the " + t + " SourceBuffer, but it does not exist"),
                    void a.shiftAndExecuteNext(t);
                var o = y(i.duration) ? i.duration : 1 / 0
                  , l = y(n.duration) ? n.duration : 1 / 0
                  , u = Math.max(0, e)
                  , h = Math.min(r, o, l);
                h > u && (!s.ending || s.ended) ? (s.ended = !1,
                this.log("Removing [" + u + "," + h + "] from the " + t + " SourceBuffer"),
                s.remove(u, h)) : a.shiftAndExecuteNext(t)
            }
            ,
            e.appendExecutor = function(t, e) {
                var r = this.sourceBuffer[e];
                if (r)
                    r.ended = !1,
                    r.appendBuffer(t);
                else if (!this.pendingTracks[e])
                    throw new Error("Attempting to append to the " + e + " SourceBuffer, but it does not exist")
            }
            ,
            e.blockBuffers = function(t, e) {
                var r = this;
                if (void 0 === e && (e = this.getSourceBufferTypes()),
                !e.length)
                    return this.log("Blocking operation requested, but no SourceBuffers exist"),
                    void Promise.resolve().then(t);
                var i = this.operationQueue
                  , n = e.map((function(t) {
                    return i.appendBlocker(t)
                }
                ));
                Promise.all(n).then((function() {
                    t(),
                    e.forEach((function(t) {
                        var e = r.sourceBuffer[t];
                        null != e && e.updating || i.shiftAndExecuteNext(t)
                    }
                    ))
                }
                ))
            }
            ,
            e.getSourceBufferTypes = function() {
                return Object.keys(this.sourceBuffer)
            }
            ,
            e.addBufferListener = function(t, e, r) {
                var i = this.sourceBuffer[t];
                if (i) {
                    var n = r.bind(this, t);
                    this.listeners[t].push({
                        event: e,
                        listener: n
                    }),
                    i.addEventListener(e, n)
                }
            }
            ,
            e.removeBufferListeners = function(t) {
                var e = this.sourceBuffer[t];
                e && this.listeners[t].forEach((function(t) {
                    e.removeEventListener(t.event, t.listener)
                }
                ))
            }
            ,
            s(t, [{
                key: "mediaSrc",
                get: function() {
                    var t, e = (null == (t = this.media) ? void 0 : t.firstChild) || this.media;
                    return null == e ? void 0 : e.src
                }
            }]),
            t
        }();
        function $n(t) {
            var e = t.querySelectorAll("source");
            [].slice.call(e).forEach((function(e) {
                t.removeChild(e)
            }
            ))
        }
        var Zn = {
            42: 225,
            92: 233,
            94: 237,
            95: 243,
            96: 250,
            123: 231,
            124: 247,
            125: 209,
            126: 241,
            127: 9608,
            128: 174,
            129: 176,
            130: 189,
            131: 191,
            132: 8482,
            133: 162,
            134: 163,
            135: 9834,
            136: 224,
            137: 32,
            138: 232,
            139: 226,
            140: 234,
            141: 238,
            142: 244,
            143: 251,
            144: 193,
            145: 201,
            146: 211,
            147: 218,
            148: 220,
            149: 252,
            150: 8216,
            151: 161,
            152: 42,
            153: 8217,
            154: 9473,
            155: 169,
            156: 8480,
            157: 8226,
            158: 8220,
            159: 8221,
            160: 192,
            161: 194,
            162: 199,
            163: 200,
            164: 202,
            165: 203,
            166: 235,
            167: 206,
            168: 207,
            169: 239,
            170: 212,
            171: 217,
            172: 249,
            173: 219,
            174: 171,
            175: 187,
            176: 195,
            177: 227,
            178: 205,
            179: 204,
            180: 236,
            181: 210,
            182: 242,
            183: 213,
            184: 245,
            185: 123,
            186: 125,
            187: 92,
            188: 94,
            189: 95,
            190: 124,
            191: 8764,
            192: 196,
            193: 228,
            194: 214,
            195: 246,
            196: 223,
            197: 165,
            198: 164,
            199: 9475,
            200: 197,
            201: 229,
            202: 216,
            203: 248,
            204: 9487,
            205: 9491,
            206: 9495,
            207: 9499
        }
          , ta = function(t) {
            var e = t;
            return Zn.hasOwnProperty(t) && (e = Zn[t]),
            String.fromCharCode(e)
        }
          , ea = 15
          , ra = 100
          , ia = {
            17: 1,
            18: 3,
            21: 5,
            22: 7,
            23: 9,
            16: 11,
            19: 12,
            20: 14
        }
          , na = {
            17: 2,
            18: 4,
            21: 6,
            22: 8,
            23: 10,
            19: 13,
            20: 15
        }
          , aa = {
            25: 1,
            26: 3,
            29: 5,
            30: 7,
            31: 9,
            24: 11,
            27: 12,
            28: 14
        }
          , sa = {
            25: 2,
            26: 4,
            29: 6,
            30: 8,
            31: 10,
            27: 13,
            28: 15
        }
          , oa = ["white", "green", "blue", "cyan", "red", "yellow", "magenta", "black", "transparent"]
          , la = function() {
            function t() {
                this.time = null,
                this.verboseLevel = 0
            }
            return t.prototype.log = function(t, e) {
                if (this.verboseLevel >= t) {
                    var r = "function" == typeof e ? e() : e;
                    w.log(this.time + " [" + t + "] " + r)
                }
            }
            ,
            t
        }()
          , ua = function(t) {
            for (var e = [], r = 0; r < t.length; r++)
                e.push(t[r].toString(16));
            return e
        }
          , ha = function() {
            function t() {
                this.foreground = "white",
                this.underline = !1,
                this.italics = !1,
                this.background = "black",
                this.flash = !1
            }
            var e = t.prototype;
            return e.reset = function() {
                this.foreground = "white",
                this.underline = !1,
                this.italics = !1,
                this.background = "black",
                this.flash = !1
            }
            ,
            e.setStyles = function(t) {
                for (var e = ["foreground", "underline", "italics", "background", "flash"], r = 0; r < e.length; r++) {
                    var i = e[r];
                    t.hasOwnProperty(i) && (this[i] = t[i])
                }
            }
            ,
            e.isDefault = function() {
                return "white" === this.foreground && !this.underline && !this.italics && "black" === this.background && !this.flash
            }
            ,
            e.equals = function(t) {
                return this.foreground === t.foreground && this.underline === t.underline && this.italics === t.italics && this.background === t.background && this.flash === t.flash
            }
            ,
            e.copy = function(t) {
                this.foreground = t.foreground,
                this.underline = t.underline,
                this.italics = t.italics,
                this.background = t.background,
                this.flash = t.flash
            }
            ,
            e.toString = function() {
                return "color=" + this.foreground + ", underline=" + this.underline + ", italics=" + this.italics + ", background=" + this.background + ", flash=" + this.flash
            }
            ,
            t
        }()
          , da = function() {
            function t() {
                this.uchar = " ",
                this.penState = new ha
            }
            var e = t.prototype;
            return e.reset = function() {
                this.uchar = " ",
                this.penState.reset()
            }
            ,
            e.setChar = function(t, e) {
                this.uchar = t,
                this.penState.copy(e)
            }
            ,
            e.setPenState = function(t) {
                this.penState.copy(t)
            }
            ,
            e.equals = function(t) {
                return this.uchar === t.uchar && this.penState.equals(t.penState)
            }
            ,
            e.copy = function(t) {
                this.uchar = t.uchar,
                this.penState.copy(t.penState)
            }
            ,
            e.isEmpty = function() {
                return " " === this.uchar && this.penState.isDefault()
            }
            ,
            t
        }()
          , ca = function() {
            function t(t) {
                this.chars = [],
                this.pos = 0,
                this.currPenState = new ha,
                this.cueStartTime = null,
                this.logger = void 0;
                for (var e = 0; e < ra; e++)
                    this.chars.push(new da);
                this.logger = t
            }
            var e = t.prototype;
            return e.equals = function(t) {
                for (var e = 0; e < ra; e++)
                    if (!this.chars[e].equals(t.chars[e]))
                        return !1;
                return !0
            }
            ,
            e.copy = function(t) {
                for (var e = 0; e < ra; e++)
                    this.chars[e].copy(t.chars[e])
            }
            ,
            e.isEmpty = function() {
                for (var t = !0, e = 0; e < ra; e++)
                    if (!this.chars[e].isEmpty()) {
                        t = !1;
                        break
                    }
                return t
            }
            ,
            e.setCursor = function(t) {
                this.pos !== t && (this.pos = t),
                this.pos < 0 ? (this.logger.log(3, "Negative cursor position " + this.pos),
                this.pos = 0) : this.pos > ra && (this.logger.log(3, "Too large cursor position " + this.pos),
                this.pos = ra)
            }
            ,
            e.moveCursor = function(t) {
                var e = this.pos + t;
                if (t > 1)
                    for (var r = this.pos + 1; r < e + 1; r++)
                        this.chars[r].setPenState(this.currPenState);
                this.setCursor(e)
            }
            ,
            e.backSpace = function() {
                this.moveCursor(-1),
                this.chars[this.pos].setChar(" ", this.currPenState)
            }
            ,
            e.insertChar = function(t) {
                var e = this;
                t >= 144 && this.backSpace();
                var r = ta(t);
                this.pos >= ra ? this.logger.log(0, (function() {
                    return "Cannot insert " + t.toString(16) + " (" + r + ") at position " + e.pos + ". Skipping it!"
                }
                )) : (this.chars[this.pos].setChar(r, this.currPenState),
                this.moveCursor(1))
            }
            ,
            e.clearFromPos = function(t) {
                var e;
                for (e = t; e < ra; e++)
                    this.chars[e].reset()
            }
            ,
            e.clear = function() {
                this.clearFromPos(0),
                this.pos = 0,
                this.currPenState.reset()
            }
            ,
            e.clearToEndOfRow = function() {
                this.clearFromPos(this.pos)
            }
            ,
            e.getTextString = function() {
                for (var t = [], e = !0, r = 0; r < ra; r++) {
                    var i = this.chars[r].uchar;
                    " " !== i && (e = !1),
                    t.push(i)
                }
                return e ? "" : t.join("")
            }
            ,
            e.setPenStyles = function(t) {
                this.currPenState.setStyles(t),
                this.chars[this.pos].setPenState(this.currPenState)
            }
            ,
            t
        }()
          , fa = function() {
            function t(t) {
                this.rows = [],
                this.currRow = 14,
                this.nrRollUpRows = null,
                this.lastOutputScreen = null,
                this.logger = void 0;
                for (var e = 0; e < ea; e++)
                    this.rows.push(new ca(t));
                this.logger = t
            }
            var e = t.prototype;
            return e.reset = function() {
                for (var t = 0; t < ea; t++)
                    this.rows[t].clear();
                this.currRow = 14
            }
            ,
            e.equals = function(t) {
                for (var e = !0, r = 0; r < ea; r++)
                    if (!this.rows[r].equals(t.rows[r])) {
                        e = !1;
                        break
                    }
                return e
            }
            ,
            e.copy = function(t) {
                for (var e = 0; e < ea; e++)
                    this.rows[e].copy(t.rows[e])
            }
            ,
            e.isEmpty = function() {
                for (var t = !0, e = 0; e < ea; e++)
                    if (!this.rows[e].isEmpty()) {
                        t = !1;
                        break
                    }
                return t
            }
            ,
            e.backSpace = function() {
                this.rows[this.currRow].backSpace()
            }
            ,
            e.clearToEndOfRow = function() {
                this.rows[this.currRow].clearToEndOfRow()
            }
            ,
            e.insertChar = function(t) {
                this.rows[this.currRow].insertChar(t)
            }
            ,
            e.setPen = function(t) {
                this.rows[this.currRow].setPenStyles(t)
            }
            ,
            e.moveCursor = function(t) {
                this.rows[this.currRow].moveCursor(t)
            }
            ,
            e.setCursor = function(t) {
                this.logger.log(2, "setCursor: " + t),
                this.rows[this.currRow].setCursor(t)
            }
            ,
            e.setPAC = function(t) {
                this.logger.log(2, (function() {
                    return "pacData = " + JSON.stringify(t)
                }
                ));
                var e = t.row - 1;
                if (this.nrRollUpRows && e < this.nrRollUpRows - 1 && (e = this.nrRollUpRows - 1),
                this.nrRollUpRows && this.currRow !== e) {
                    for (var r = 0; r < ea; r++)
                        this.rows[r].clear();
                    var i = this.currRow + 1 - this.nrRollUpRows
                      , n = this.lastOutputScreen;
                    if (n) {
                        var a = n.rows[i].cueStartTime
                          , s = this.logger.time;
                        if (null !== a && null !== s && a < s)
                            for (var o = 0; o < this.nrRollUpRows; o++)
                                this.rows[e - this.nrRollUpRows + o + 1].copy(n.rows[i + o])
                    }
                }
                this.currRow = e;
                var l = this.rows[this.currRow];
                if (null !== t.indent) {
                    var u = t.indent
                      , h = Math.max(u - 1, 0);
                    l.setCursor(t.indent),
                    t.color = l.chars[h].penState.foreground
                }
                var d = {
                    foreground: t.color,
                    underline: t.underline,
                    italics: t.italics,
                    background: "black",
                    flash: !1
                };
                this.setPen(d)
            }
            ,
            e.setBkgData = function(t) {
                this.logger.log(2, (function() {
                    return "bkgData = " + JSON.stringify(t)
                }
                )),
                this.backSpace(),
                this.setPen(t),
                this.insertChar(32)
            }
            ,
            e.setRollUpRows = function(t) {
                this.nrRollUpRows = t
            }
            ,
            e.rollUp = function() {
                var t = this;
                if (null !== this.nrRollUpRows) {
                    this.logger.log(1, (function() {
                        return t.getDisplayText()
                    }
                    ));
                    var e = this.currRow + 1 - this.nrRollUpRows
                      , r = this.rows.splice(e, 1)[0];
                    r.clear(),
                    this.rows.splice(this.currRow, 0, r),
                    this.logger.log(2, "Rolling up")
                } else
                    this.logger.log(3, "roll_up but nrRollUpRows not set yet")
            }
            ,
            e.getDisplayText = function(t) {
                t = t || !1;
                for (var e = [], r = "", i = -1, n = 0; n < ea; n++) {
                    var a = this.rows[n].getTextString();
                    a && (i = n + 1,
                    t ? e.push("Row " + i + ": '" + a + "'") : e.push(a.trim()))
                }
                return e.length > 0 && (r = t ? "[" + e.join(" | ") + "]" : e.join("\n")),
                r
            }
            ,
            e.getTextAndFormat = function() {
                return this.rows
            }
            ,
            t
        }()
          , ga = function() {
            function t(t, e, r) {
                this.chNr = void 0,
                this.outputFilter = void 0,
                this.mode = void 0,
                this.verbose = void 0,
                this.displayedMemory = void 0,
                this.nonDisplayedMemory = void 0,
                this.lastOutputScreen = void 0,
                this.currRollUpRow = void 0,
                this.writeScreen = void 0,
                this.cueStartTime = void 0,
                this.logger = void 0,
                this.chNr = t,
                this.outputFilter = e,
                this.mode = null,
                this.verbose = 0,
                this.displayedMemory = new fa(r),
                this.nonDisplayedMemory = new fa(r),
                this.lastOutputScreen = new fa(r),
                this.currRollUpRow = this.displayedMemory.rows[14],
                this.writeScreen = this.displayedMemory,
                this.mode = null,
                this.cueStartTime = null,
                this.logger = r
            }
            var e = t.prototype;
            return e.reset = function() {
                this.mode = null,
                this.displayedMemory.reset(),
                this.nonDisplayedMemory.reset(),
                this.lastOutputScreen.reset(),
                this.outputFilter.reset(),
                this.currRollUpRow = this.displayedMemory.rows[14],
                this.writeScreen = this.displayedMemory,
                this.mode = null,
                this.cueStartTime = null
            }
            ,
            e.getHandler = function() {
                return this.outputFilter
            }
            ,
            e.setHandler = function(t) {
                this.outputFilter = t
            }
            ,
            e.setPAC = function(t) {
                this.writeScreen.setPAC(t)
            }
            ,
            e.setBkgData = function(t) {
                this.writeScreen.setBkgData(t)
            }
            ,
            e.setMode = function(t) {
                t !== this.mode && (this.mode = t,
                this.logger.log(2, (function() {
                    return "MODE=" + t
                }
                )),
                "MODE_POP-ON" === this.mode ? this.writeScreen = this.nonDisplayedMemory : (this.writeScreen = this.displayedMemory,
                this.writeScreen.reset()),
                "MODE_ROLL-UP" !== this.mode && (this.displayedMemory.nrRollUpRows = null,
                this.nonDisplayedMemory.nrRollUpRows = null),
                this.mode = t)
            }
            ,
            e.insertChars = function(t) {
                for (var e = this, r = 0; r < t.length; r++)
                    this.writeScreen.insertChar(t[r]);
                var i = this.writeScreen === this.displayedMemory ? "DISP" : "NON_DISP";
                this.logger.log(2, (function() {
                    return i + ": " + e.writeScreen.getDisplayText(!0)
                }
                )),
                "MODE_PAINT-ON" !== this.mode && "MODE_ROLL-UP" !== this.mode || (this.logger.log(1, (function() {
                    return "DISPLAYED: " + e.displayedMemory.getDisplayText(!0)
                }
                )),
                this.outputDataUpdate())
            }
            ,
            e.ccRCL = function() {
                this.logger.log(2, "RCL - Resume Caption Loading"),
                this.setMode("MODE_POP-ON")
            }
            ,
            e.ccBS = function() {
                this.logger.log(2, "BS - BackSpace"),
                "MODE_TEXT" !== this.mode && (this.writeScreen.backSpace(),
                this.writeScreen === this.displayedMemory && this.outputDataUpdate())
            }
            ,
            e.ccAOF = function() {}
            ,
            e.ccAON = function() {}
            ,
            e.ccDER = function() {
                this.logger.log(2, "DER- Delete to End of Row"),
                this.writeScreen.clearToEndOfRow(),
                this.outputDataUpdate()
            }
            ,
            e.ccRU = function(t) {
                this.logger.log(2, "RU(" + t + ") - Roll Up"),
                this.writeScreen = this.displayedMemory,
                this.setMode("MODE_ROLL-UP"),
                this.writeScreen.setRollUpRows(t)
            }
            ,
            e.ccFON = function() {
                this.logger.log(2, "FON - Flash On"),
                this.writeScreen.setPen({
                    flash: !0
                })
            }
            ,
            e.ccRDC = function() {
                this.logger.log(2, "RDC - Resume Direct Captioning"),
                this.setMode("MODE_PAINT-ON")
            }
            ,
            e.ccTR = function() {
                this.logger.log(2, "TR"),
                this.setMode("MODE_TEXT")
            }
            ,
            e.ccRTD = function() {
                this.logger.log(2, "RTD"),
                this.setMode("MODE_TEXT")
            }
            ,
            e.ccEDM = function() {
                this.logger.log(2, "EDM - Erase Displayed Memory"),
                this.displayedMemory.reset(),
                this.outputDataUpdate(!0)
            }
            ,
            e.ccCR = function() {
                this.logger.log(2, "CR - Carriage Return"),
                this.writeScreen.rollUp(),
                this.outputDataUpdate(!0)
            }
            ,
            e.ccENM = function() {
                this.logger.log(2, "ENM - Erase Non-displayed Memory"),
                this.nonDisplayedMemory.reset()
            }
            ,
            e.ccEOC = function() {
                var t = this;
                if (this.logger.log(2, "EOC - End Of Caption"),
                "MODE_POP-ON" === this.mode) {
                    var e = this.displayedMemory;
                    this.displayedMemory = this.nonDisplayedMemory,
                    this.nonDisplayedMemory = e,
                    this.writeScreen = this.nonDisplayedMemory,
                    this.logger.log(1, (function() {
                        return "DISP: " + t.displayedMemory.getDisplayText()
                    }
                    ))
                }
                this.outputDataUpdate(!0)
            }
            ,
            e.ccTO = function(t) {
                this.logger.log(2, "TO(" + t + ") - Tab Offset"),
                this.writeScreen.moveCursor(t)
            }
            ,
            e.ccMIDROW = function(t) {
                var e = {
                    flash: !1
                };
                if (e.underline = t % 2 == 1,
                e.italics = t >= 46,
                e.italics)
                    e.foreground = "white";
                else {
                    var r = Math.floor(t / 2) - 16;
                    e.foreground = ["white", "green", "blue", "cyan", "red", "yellow", "magenta"][r]
                }
                this.logger.log(2, "MIDROW: " + JSON.stringify(e)),
                this.writeScreen.setPen(e)
            }
            ,
            e.outputDataUpdate = function(t) {
                void 0 === t && (t = !1);
                var e = this.logger.time;
                null !== e && this.outputFilter && (null !== this.cueStartTime || this.displayedMemory.isEmpty() ? this.displayedMemory.equals(this.lastOutputScreen) || (this.outputFilter.newCue(this.cueStartTime, e, this.lastOutputScreen),
                t && this.outputFilter.dispatchCue && this.outputFilter.dispatchCue(),
                this.cueStartTime = this.displayedMemory.isEmpty() ? null : e) : this.cueStartTime = e,
                this.lastOutputScreen.copy(this.displayedMemory))
            }
            ,
            e.cueSplitAtTime = function(t) {
                this.outputFilter && (this.displayedMemory.isEmpty() || (this.outputFilter.newCue && this.outputFilter.newCue(this.cueStartTime, t, this.displayedMemory),
                this.cueStartTime = t))
            }
            ,
            t
        }()
          , va = function() {
            function t(t, e, r) {
                this.channels = void 0,
                this.currentChannel = 0,
                this.cmdHistory = {
                    a: null,
                    b: null
                },
                this.logger = void 0;
                var i = this.logger = new la;
                this.channels = [null, new ga(t,e,i), new ga(t + 1,r,i)]
            }
            var e = t.prototype;
            return e.getHandler = function(t) {
                return this.channels[t].getHandler()
            }
            ,
            e.setHandler = function(t, e) {
                this.channels[t].setHandler(e)
            }
            ,
            e.addData = function(t, e) {
                var r, i, n, a = !1;
                this.logger.time = t;
                for (var s = 0; s < e.length; s += 2)
                    if (i = 127 & e[s],
                    n = 127 & e[s + 1],
                    0 !== i || 0 !== n) {
                        if (this.logger.log(3, "[" + ua([e[s], e[s + 1]]) + "] -> (" + ua([i, n]) + ")"),
                        (r = this.parseCmd(i, n)) || (r = this.parseMidrow(i, n)),
                        r || (r = this.parsePAC(i, n)),
                        r || (r = this.parseBackgroundAttributes(i, n)),
                        !r && (a = this.parseChars(i, n))) {
                            var o = this.currentChannel;
                            o && o > 0 ? this.channels[o].insertChars(a) : this.logger.log(2, "No channel found yet. TEXT-MODE?")
                        }
                        r || a || this.logger.log(2, "Couldn't parse cleaned data " + ua([i, n]) + " orig: " + ua([e[s], e[s + 1]]))
                    }
            }
            ,
            e.parseCmd = function(t, e) {
                var r = this.cmdHistory;
                if (!((20 === t || 28 === t || 21 === t || 29 === t) && e >= 32 && e <= 47 || (23 === t || 31 === t) && e >= 33 && e <= 35))
                    return !1;
                if (pa(t, e, r))
                    return ma(null, null, r),
                    this.logger.log(3, "Repeated command (" + ua([t, e]) + ") is dropped"),
                    !0;
                var i = 20 === t || 21 === t || 23 === t ? 1 : 2
                  , n = this.channels[i];
                return 20 === t || 21 === t || 28 === t || 29 === t ? 32 === e ? n.ccRCL() : 33 === e ? n.ccBS() : 34 === e ? n.ccAOF() : 35 === e ? n.ccAON() : 36 === e ? n.ccDER() : 37 === e ? n.ccRU(2) : 38 === e ? n.ccRU(3) : 39 === e ? n.ccRU(4) : 40 === e ? n.ccFON() : 41 === e ? n.ccRDC() : 42 === e ? n.ccTR() : 43 === e ? n.ccRTD() : 44 === e ? n.ccEDM() : 45 === e ? n.ccCR() : 46 === e ? n.ccENM() : 47 === e && n.ccEOC() : n.ccTO(e - 32),
                ma(t, e, r),
                this.currentChannel = i,
                !0
            }
            ,
            e.parseMidrow = function(t, e) {
                var r = 0;
                if ((17 === t || 25 === t) && e >= 32 && e <= 47) {
                    if ((r = 17 === t ? 1 : 2) !== this.currentChannel)
                        return this.logger.log(0, "Mismatch channel in midrow parsing"),
                        !1;
                    var i = this.channels[r];
                    return !!i && (i.ccMIDROW(e),
                    this.logger.log(3, "MIDROW (" + ua([t, e]) + ")"),
                    !0)
                }
                return !1
            }
            ,
            e.parsePAC = function(t, e) {
                var r, i = this.cmdHistory;
                if (!((t >= 17 && t <= 23 || t >= 25 && t <= 31) && e >= 64 && e <= 127 || (16 === t || 24 === t) && e >= 64 && e <= 95))
                    return !1;
                if (pa(t, e, i))
                    return ma(null, null, i),
                    !0;
                var n = t <= 23 ? 1 : 2;
                r = e >= 64 && e <= 95 ? 1 === n ? ia[t] : aa[t] : 1 === n ? na[t] : sa[t];
                var a = this.channels[n];
                return !!a && (a.setPAC(this.interpretPAC(r, e)),
                ma(t, e, i),
                this.currentChannel = n,
                !0)
            }
            ,
            e.interpretPAC = function(t, e) {
                var r, i = {
                    color: null,
                    italics: !1,
                    indent: null,
                    underline: !1,
                    row: t
                };
                return r = e > 95 ? e - 96 : e - 64,
                i.underline = 1 == (1 & r),
                r <= 13 ? i.color = ["white", "green", "blue", "cyan", "red", "yellow", "magenta", "white"][Math.floor(r / 2)] : r <= 15 ? (i.italics = !0,
                i.color = "white") : i.indent = 4 * Math.floor((r - 16) / 2),
                i
            }
            ,
            e.parseChars = function(t, e) {
                var r, i, n = null, a = null;
                if (t >= 25 ? (r = 2,
                a = t - 8) : (r = 1,
                a = t),
                a >= 17 && a <= 19 ? (i = 17 === a ? e + 80 : 18 === a ? e + 112 : e + 144,
                this.logger.log(2, "Special char '" + ta(i) + "' in channel " + r),
                n = [i]) : t >= 32 && t <= 127 && (n = 0 === e ? [t] : [t, e]),
                n) {
                    var s = ua(n);
                    this.logger.log(3, "Char codes =  " + s.join(",")),
                    ma(t, e, this.cmdHistory)
                }
                return n
            }
            ,
            e.parseBackgroundAttributes = function(t, e) {
                var r;
                if (!((16 === t || 24 === t) && e >= 32 && e <= 47 || (23 === t || 31 === t) && e >= 45 && e <= 47))
                    return !1;
                var i = {};
                16 === t || 24 === t ? (r = Math.floor((e - 32) / 2),
                i.background = oa[r],
                e % 2 == 1 && (i.background = i.background + "_semi")) : 45 === e ? i.background = "transparent" : (i.foreground = "black",
                47 === e && (i.underline = !0));
                var n = t <= 23 ? 1 : 2;
                return this.channels[n].setBkgData(i),
                ma(t, e, this.cmdHistory),
                !0
            }
            ,
            e.reset = function() {
                for (var t = 0; t < Object.keys(this.channels).length; t++) {
                    var e = this.channels[t];
                    e && e.reset()
                }
                this.cmdHistory = {
                    a: null,
                    b: null
                }
            }
            ,
            e.cueSplitAtTime = function(t) {
                for (var e = 0; e < this.channels.length; e++) {
                    var r = this.channels[e];
                    r && r.cueSplitAtTime(t)
                }
            }
            ,
            t
        }();
        function ma(t, e, r) {
            r.a = t,
            r.b = e
        }
        function pa(t, e, r) {
            return r.a === t && r.b === e
        }
        var ya = function() {
            function t(t, e) {
                this.timelineController = void 0,
                this.cueRanges = [],
                this.trackName = void 0,
                this.startTime = null,
                this.endTime = null,
                this.screen = null,
                this.timelineController = t,
                this.trackName = e
            }
            var e = t.prototype;
            return e.dispatchCue = function() {
                null !== this.startTime && (this.timelineController.addCues(this.trackName, this.startTime, this.endTime, this.screen, this.cueRanges),
                this.startTime = null)
            }
            ,
            e.newCue = function(t, e, r) {
                (null === this.startTime || this.startTime > t) && (this.startTime = t),
                this.endTime = e,
                this.screen = r,
                this.timelineController.createCaptionsTrack(this.trackName)
            }
            ,
            e.reset = function() {
                this.cueRanges = [],
                this.startTime = null
            }
            ,
            t
        }()
          , Ea = function() {
            if (null != j && j.VTTCue)
                return self.VTTCue;
            var t = ["", "lr", "rl"]
              , e = ["start", "middle", "end", "left", "right"];
            function r(t, e) {
                if ("string" != typeof e)
                    return !1;
                if (!Array.isArray(t))
                    return !1;
                var r = e.toLowerCase();
                return !!~t.indexOf(r) && r
            }
            function i(t) {
                return r(e, t)
            }
            function n(t) {
                for (var e = arguments.length, r = new Array(e > 1 ? e - 1 : 0), i = 1; i < e; i++)
                    r[i - 1] = arguments[i];
                for (var n = 1; n < arguments.length; n++) {
                    var a = arguments[n];
                    for (var s in a)
                        t[s] = a[s]
                }
                return t
            }
            function a(e, a, s) {
                var o = this
                  , l = {
                    enumerable: !0
                };
                o.hasBeenReset = !1;
                var u = ""
                  , h = !1
                  , d = e
                  , c = a
                  , f = s
                  , g = null
                  , v = ""
                  , m = !0
                  , p = "auto"
                  , y = "start"
                  , E = 50
                  , T = "middle"
                  , S = 50
                  , L = "middle";
                Object.defineProperty(o, "id", n({}, l, {
                    get: function() {
                        return u
                    },
                    set: function(t) {
                        u = "" + t
                    }
                })),
                Object.defineProperty(o, "pauseOnExit", n({}, l, {
                    get: function() {
                        return h
                    },
                    set: function(t) {
                        h = !!t
                    }
                })),
                Object.defineProperty(o, "startTime", n({}, l, {
                    get: function() {
                        return d
                    },
                    set: function(t) {
                        if ("number" != typeof t)
                            throw new TypeError("Start time must be set to a number.");
                        d = t,
                        this.hasBeenReset = !0
                    }
                })),
                Object.defineProperty(o, "endTime", n({}, l, {
                    get: function() {
                        return c
                    },
                    set: function(t) {
                        if ("number" != typeof t)
                            throw new TypeError("End time must be set to a number.");
                        c = t,
                        this.hasBeenReset = !0
                    }
                })),
                Object.defineProperty(o, "text", n({}, l, {
                    get: function() {
                        return f
                    },
                    set: function(t) {
                        f = "" + t,
                        this.hasBeenReset = !0
                    }
                })),
                Object.defineProperty(o, "region", n({}, l, {
                    get: function() {
                        return g
                    },
                    set: function(t) {
                        g = t,
                        this.hasBeenReset = !0
                    }
                })),
                Object.defineProperty(o, "vertical", n({}, l, {
                    get: function() {
                        return v
                    },
                    set: function(e) {
                        var i = function(e) {
                            return r(t, e)
                        }(e);
                        if (!1 === i)
                            throw new SyntaxError("An invalid or illegal string was specified.");
                        v = i,
                        this.hasBeenReset = !0
                    }
                })),
                Object.defineProperty(o, "snapToLines", n({}, l, {
                    get: function() {
                        return m
                    },
                    set: function(t) {
                        m = !!t,
                        this.hasBeenReset = !0
                    }
                })),
                Object.defineProperty(o, "line", n({}, l, {
                    get: function() {
                        return p
                    },
                    set: function(t) {
                        if ("number" != typeof t && "auto" !== t)
                            throw new SyntaxError("An invalid number or illegal string was specified.");
                        p = t,
                        this.hasBeenReset = !0
                    }
                })),
                Object.defineProperty(o, "lineAlign", n({}, l, {
                    get: function() {
                        return y
                    },
                    set: function(t) {
                        var e = i(t);
                        if (!e)
                            throw new SyntaxError("An invalid or illegal string was specified.");
                        y = e,
                        this.hasBeenReset = !0
                    }
                })),
                Object.defineProperty(o, "position", n({}, l, {
                    get: function() {
                        return E
                    },
                    set: function(t) {
                        if (t < 0 || t > 100)
                            throw new Error("Position must be between 0 and 100.");
                        E = t,
                        this.hasBeenReset = !0
                    }
                })),
                Object.defineProperty(o, "positionAlign", n({}, l, {
                    get: function() {
                        return T
                    },
                    set: function(t) {
                        var e = i(t);
                        if (!e)
                            throw new SyntaxError("An invalid or illegal string was specified.");
                        T = e,
                        this.hasBeenReset = !0
                    }
                })),
                Object.defineProperty(o, "size", n({}, l, {
                    get: function() {
                        return S
                    },
                    set: function(t) {
                        if (t < 0 || t > 100)
                            throw new Error("Size must be between 0 and 100.");
                        S = t,
                        this.hasBeenReset = !0
                    }
                })),
                Object.defineProperty(o, "align", n({}, l, {
                    get: function() {
                        return L
                    },
                    set: function(t) {
                        var e = i(t);
                        if (!e)
                            throw new SyntaxError("An invalid or illegal string was specified.");
                        L = e,
                        this.hasBeenReset = !0
                    }
                })),
                o.displayState = void 0
            }
            return a.prototype.getCueAsHTML = function() {
                return self.WebVTT.convertCueToDOMTree(self, this.text)
            }
            ,
            a
        }()
          , Ta = function() {
            function t() {}
            return t.prototype.decode = function(t, e) {
                if (!t)
                    return "";
                if ("string" != typeof t)
                    throw new Error("Error - expected string data.");
                return decodeURIComponent(encodeURIComponent(t))
            }
            ,
            t
        }();
        function Sa(t) {
            function e(t, e, r, i) {
                return 3600 * (0 | t) + 60 * (0 | e) + (0 | r) + parseFloat(i || 0)
            }
            var r = t.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);
            return r ? parseFloat(r[2]) > 59 ? e(r[2], r[3], 0, r[4]) : e(r[1], r[2], r[3], r[4]) : null
        }
        var La = function() {
            function t() {
                this.values = Object.create(null)
            }
            var e = t.prototype;
            return e.set = function(t, e) {
                this.get(t) || "" === e || (this.values[t] = e)
            }
            ,
            e.get = function(t, e, r) {
                return r ? this.has(t) ? this.values[t] : e[r] : this.has(t) ? this.values[t] : e
            }
            ,
            e.has = function(t) {
                return t in this.values
            }
            ,
            e.alt = function(t, e, r) {
                for (var i = 0; i < r.length; ++i)
                    if (e === r[i]) {
                        this.set(t, e);
                        break
                    }
            }
            ,
            e.integer = function(t, e) {
                /^-?\d+$/.test(e) && this.set(t, parseInt(e, 10))
            }
            ,
            e.percent = function(t, e) {
                if (/^([\d]{1,3})(\.[\d]*)?%$/.test(e)) {
                    var r = parseFloat(e);
                    if (r >= 0 && r <= 100)
                        return this.set(t, r),
                        !0
                }
                return !1
            }
            ,
            t
        }();
        function Aa(t, e, r, i) {
            var n = i ? t.split(i) : [t];
            for (var a in n)
                if ("string" == typeof n[a]) {
                    var s = n[a].split(r);
                    2 === s.length && e(s[0], s[1])
                }
        }
        var Ra = new Ea(0,0,"")
          , ka = "middle" === Ra.align ? "middle" : "center";
        function ba(t, e, r) {
            var i = t;
            function n() {
                var e = Sa(t);
                if (null === e)
                    throw new Error("Malformed timestamp: " + i);
                return t = t.replace(/^[^\sa-zA-Z-]+/, ""),
                e
            }
            function a() {
                t = t.replace(/^\s+/, "")
            }
            if (a(),
            e.startTime = n(),
            a(),
            "--\x3e" !== t.slice(0, 3))
                throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): " + i);
            t = t.slice(3),
            a(),
            e.endTime = n(),
            a(),
            function(t, e) {
                var i = new La;
                Aa(t, (function(t, e) {
                    var n;
                    switch (t) {
                    case "region":
                        for (var a = r.length - 1; a >= 0; a--)
                            if (r[a].id === e) {
                                i.set(t, r[a].region);
                                break
                            }
                        break;
                    case "vertical":
                        i.alt(t, e, ["rl", "lr"]);
                        break;
                    case "line":
                        n = e.split(","),
                        i.integer(t, n[0]),
                        i.percent(t, n[0]) && i.set("snapToLines", !1),
                        i.alt(t, n[0], ["auto"]),
                        2 === n.length && i.alt("lineAlign", n[1], ["start", ka, "end"]);
                        break;
                    case "position":
                        n = e.split(","),
                        i.percent(t, n[0]),
                        2 === n.length && i.alt("positionAlign", n[1], ["start", ka, "end", "line-left", "line-right", "auto"]);
                        break;
                    case "size":
                        i.percent(t, e);
                        break;
                    case "align":
                        i.alt(t, e, ["start", ka, "end", "left", "right"])
                    }
                }
                ), /:/, /\s/),
                e.region = i.get("region", null),
                e.vertical = i.get("vertical", "");
                var n = i.get("line", "auto");
                "auto" === n && -1 === Ra.line && (n = -1),
                e.line = n,
                e.lineAlign = i.get("lineAlign", "start"),
                e.snapToLines = i.get("snapToLines", !0),
                e.size = i.get("size", 100),
                e.align = i.get("align", ka);
                var a = i.get("position", "auto");
                "auto" === a && 50 === Ra.position && (a = "start" === e.align || "left" === e.align ? 0 : "end" === e.align || "right" === e.align ? 100 : 50),
                e.position = a
            }(t, e)
        }
        function Da(t) {
            return t.replace(/<br(?: \/)?>/gi, "\n")
        }
        var Ia = function() {
            function t() {
                this.state = "INITIAL",
                this.buffer = "",
                this.decoder = new Ta,
                this.regionList = [],
                this.cue = null,
                this.oncue = void 0,
                this.onparsingerror = void 0,
                this.onflush = void 0
            }
            var e = t.prototype;
            return e.parse = function(t) {
                var e = this;
                function r() {
                    var t = e.buffer
                      , r = 0;
                    for (t = Da(t); r < t.length && "\r" !== t[r] && "\n" !== t[r]; )
                        ++r;
                    var i = t.slice(0, r);
                    return "\r" === t[r] && ++r,
                    "\n" === t[r] && ++r,
                    e.buffer = t.slice(r),
                    i
                }
                t && (e.buffer += e.decoder.decode(t, {
                    stream: !0
                }));
                try {
                    var i = "";
                    if ("INITIAL" === e.state) {
                        if (!/\r\n|\n/.test(e.buffer))
                            return this;
                        var n = (i = r()).match(/^()?WEBVTT([ \t].*)?$/);
                        if (null == n || !n[0])
                            throw new Error("Malformed WebVTT signature.");
                        e.state = "HEADER"
                    }
                    for (var a = !1; e.buffer; ) {
                        if (!/\r\n|\n/.test(e.buffer))
                            return this;
                        switch (a ? a = !1 : i = r(),
                        e.state) {
                        case "HEADER":
                            /:/.test(i) ? Aa(i, (function(t, e) {}
                            ), /:/) : i || (e.state = "ID");
                            continue;
                        case "NOTE":
                            i || (e.state = "ID");
                            continue;
                        case "ID":
                            if (/^NOTE($|[ \t])/.test(i)) {
                                e.state = "NOTE";
                                break
                            }
                            if (!i)
                                continue;
                            if (e.cue = new Ea(0,0,""),
                            e.state = "CUE",
                            -1 === i.indexOf("--\x3e")) {
                                e.cue.id = i;
                                continue
                            }
                        case "CUE":
                            if (!e.cue) {
                                e.state = "BADCUE";
                                continue
                            }
                            try {
                                ba(i, e.cue, e.regionList)
                            } catch (t) {
                                e.cue = null,
                                e.state = "BADCUE";
                                continue
                            }
                            e.state = "CUETEXT";
                            continue;
                        case "CUETEXT":
                            var s = -1 !== i.indexOf("--\x3e");
                            if (!i || s && (a = !0)) {
                                e.oncue && e.cue && e.oncue(e.cue),
                                e.cue = null,
                                e.state = "ID";
                                continue
                            }
                            if (null === e.cue)
                                continue;
                            e.cue.text && (e.cue.text += "\n"),
                            e.cue.text += i;
                            continue;
                        case "BADCUE":
                            i || (e.state = "ID")
                        }
                    }
                } catch (t) {
                    "CUETEXT" === e.state && e.cue && e.oncue && e.oncue(e.cue),
                    e.cue = null,
                    e.state = "INITIAL" === e.state ? "BADWEBVTT" : "BADCUE"
                }
                return this
            }
            ,
            e.flush = function() {
                var t = this;
                try {
                    if ((t.cue || "HEADER" === t.state) && (t.buffer += "\n\n",
                    t.parse()),
                    "INITIAL" === t.state || "BADWEBVTT" === t.state)
                        throw new Error("Malformed WebVTT signature.")
                } catch (e) {
                    t.onparsingerror && t.onparsingerror(e)
                }
                return t.onflush && t.onflush(),
                this
            }
            ,
            t
        }()
          , wa = /\r\n|\n\r|\n|\r/g
          , Ca = function(t, e, r) {
            return void 0 === r && (r = 0),
            t.slice(r, r + e.length) === e
        }
          , _a = function(t) {
            for (var e = 5381, r = t.length; r; )
                e = 33 * e ^ t.charCodeAt(--r);
            return (e >>> 0).toString()
        };
        function xa(t, e, r) {
            return _a(t.toString()) + _a(e.toString()) + _a(r)
        }
        function Pa(t, e, r, i, n, a, s) {
            var o, l, u, h = new Ia, d = Tt(new Uint8Array(t)).trim().replace(wa, "\n").split("\n"), c = [], f = e ? (o = e.baseTime,
            void 0 === (l = e.timescale) && (l = 1),
            pn(o, mn, 1 / l)) : 0, g = "00:00.000", v = 0, m = 0, p = !0;
            h.oncue = function(t) {
                var a = r[i]
                  , s = r.ccOffset
                  , o = (v - f) / 9e4;
                if (null != a && a.new && (void 0 !== m ? s = r.ccOffset = a.start : function(t, e, r) {
                    var i = t[e]
                      , n = t[i.prevCC];
                    if (!n || !n.new && i.new)
                        return t.ccOffset = t.presentationOffset = i.start,
                        void (i.new = !1);
                    for (; null != (a = n) && a.new; ) {
                        var a;
                        t.ccOffset += i.start - n.start,
                        i.new = !1,
                        n = t[(i = n).prevCC]
                    }
                    t.presentationOffset = r
                }(r, i, o)),
                o) {
                    if (!e)
                        return void (u = new Error("Missing initPTS for VTT MPEGTS"));
                    s = o - r.presentationOffset
                }
                var l = t.endTime - t.startTime
                  , h = Ln(9e4 * (t.startTime + s - m), 9e4 * n) / 9e4;
                t.startTime = Math.max(h, 0),
                t.endTime = Math.max(h + l, 0);
                var d = t.text.trim();
                t.text = decodeURIComponent(encodeURIComponent(d)),
                t.id || (t.id = xa(t.startTime, t.endTime, d)),
                t.endTime > 0 && c.push(t)
            }
            ,
            h.onparsingerror = function(t) {
                u = t
            }
            ,
            h.onflush = function() {
                u ? s(u) : a(c)
            }
            ,
            d.forEach((function(t) {
                if (p) {
                    if (Ca(t, "X-TIMESTAMP-MAP=")) {
                        p = !1,
                        t.slice(16).split(",").forEach((function(t) {
                            Ca(t, "LOCAL:") ? g = t.slice(6) : Ca(t, "MPEGTS:") && (v = parseInt(t.slice(7)))
                        }
                        ));
                        try {
                            m = function(t) {
                                var e = parseInt(t.slice(-3))
                                  , r = parseInt(t.slice(-6, -4))
                                  , i = parseInt(t.slice(-9, -7))
                                  , n = t.length > 9 ? parseInt(t.substring(0, t.indexOf(":"))) : 0;
                                if (!(y(e) && y(r) && y(i) && y(n)))
                                    throw Error("Malformed X-TIMESTAMP-MAP: Local:" + t);
                                return e += 1e3 * r,
                                (e += 6e4 * i) + 36e5 * n
                            }(g) / 1e3
                        } catch (t) {
                            u = t
                        }
                        return
                    }
                    "" === t && (p = !1)
                }
                h.parse(t + "\n")
            }
            )),
            h.flush()
        }
        var Fa = "stpp.ttml.im1t"
          , Ma = /^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/
          , Oa = /^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/
          , Na = {
            left: "start",
            center: "center",
            right: "end",
            start: "start",
            end: "end"
        };
        function Ua(t, e, r, i) {
            var n = xt(new Uint8Array(t), ["mdat"]);
            if (0 !== n.length) {
                var a, s, l, u, h = n.map((function(t) {
                    return Tt(t)
                }
                )), d = (a = e.baseTime,
                s = 1,
                void 0 === (l = e.timescale) && (l = 1),
                void 0 === u && (u = !1),
                pn(a, s, 1 / l, u));
                try {
                    h.forEach((function(t) {
                        return r(function(t, e) {
                            var r = (new DOMParser).parseFromString(t, "text/xml")
                              , i = r.getElementsByTagName("tt")[0];
                            if (!i)
                                throw new Error("Invalid ttml");
                            var n = {
                                frameRate: 30,
                                subFrameRate: 1,
                                frameRateMultiplier: 0,
                                tickRate: 0
                            }
                              , a = Object.keys(n).reduce((function(t, e) {
                                return t[e] = i.getAttribute("ttp:" + e) || n[e],
                                t
                            }
                            ), {})
                              , s = "preserve" !== i.getAttribute("xml:space")
                              , l = Ga(Ba(i, "styling", "style"))
                              , u = Ga(Ba(i, "layout", "region"))
                              , h = Ba(i, "body", "[begin]");
                            return [].map.call(h, (function(t) {
                                var r = Ka(t, s);
                                if (!r || !t.hasAttribute("begin"))
                                    return null;
                                var i = Ya(t.getAttribute("begin"), a)
                                  , n = Ya(t.getAttribute("dur"), a)
                                  , h = Ya(t.getAttribute("end"), a);
                                if (null === i)
                                    throw Va(t);
                                if (null === h) {
                                    if (null === n)
                                        throw Va(t);
                                    h = i + n
                                }
                                var d = new Ea(i - e,h - e,r);
                                d.id = xa(d.startTime, d.endTime, d.text);
                                var c = function(t, e, r) {
                                    var i = "http://www.w3.org/ns/ttml#styling"
                                      , n = null
                                      , a = ["displayAlign", "textAlign", "color", "backgroundColor", "fontSize", "fontFamily"]
                                      , s = null != t && t.hasAttribute("style") ? t.getAttribute("style") : null;
                                    return s && r.hasOwnProperty(s) && (n = r[s]),
                                    a.reduce((function(r, a) {
                                        var s = Ha(e, i, a) || Ha(t, i, a) || Ha(n, i, a);
                                        return s && (r[a] = s),
                                        r
                                    }
                                    ), {})
                                }(u[t.getAttribute("region")], l[t.getAttribute("style")], l)
                                  , f = c.textAlign;
                                if (f) {
                                    var g = Na[f];
                                    g && (d.lineAlign = g),
                                    d.align = f
                                }
                                return o(d, c),
                                d
                            }
                            )).filter((function(t) {
                                return null !== t
                            }
                            ))
                        }(t, d))
                    }
                    ))
                } catch (t) {
                    i(t)
                }
            } else
                i(new Error("Could not parse IMSC1 mdat"))
        }
        function Ba(t, e, r) {
            var i = t.getElementsByTagName(e)[0];
            return i ? [].slice.call(i.querySelectorAll(r)) : []
        }
        function Ga(t) {
            return t.reduce((function(t, e) {
                var r = e.getAttribute("xml:id");
                return r && (t[r] = e),
                t
            }
            ), {})
        }
        function Ka(t, e) {
            return [].slice.call(t.childNodes).reduce((function(t, r, i) {
                var n;
                return "br" === r.nodeName && i ? t + "\n" : null != (n = r.childNodes) && n.length ? Ka(r, e) : e ? t + r.textContent.trim().replace(/\s+/g, " ") : t + r.textContent
            }
            ), "")
        }
        function Ha(t, e, r) {
            return t && t.hasAttributeNS(e, r) ? t.getAttributeNS(e, r) : null
        }
        function Va(t) {
            return new Error("Could not parse ttml timestamp " + t)
        }
        function Ya(t, e) {
            if (!t)
                return null;
            var r = Sa(t);
            return null === r && (Ma.test(t) ? r = function(t, e) {
                var r = Ma.exec(t)
                  , i = (0 | r[4]) + (0 | r[5]) / e.subFrameRate;
                return 3600 * (0 | r[1]) + 60 * (0 | r[2]) + (0 | r[3]) + i / e.frameRate
            }(t, e) : Oa.test(t) && (r = function(t, e) {
                var r = Oa.exec(t)
                  , i = Number(r[1]);
                switch (r[2]) {
                case "h":
                    return 3600 * i;
                case "m":
                    return 60 * i;
                case "ms":
                    return 1e3 * i;
                case "f":
                    return i / e.frameRate;
                case "t":
                    return i / e.tickRate
                }
                return i
            }(t, e))),
            r
        }
        var Wa = function() {
            function t(t) {
                this.hls = void 0,
                this.media = null,
                this.config = void 0,
                this.enabled = !0,
                this.Cues = void 0,
                this.textTracks = [],
                this.tracks = [],
                this.initPTS = [],
                this.unparsedVttFrags = [],
                this.captionsTracks = {},
                this.nonNativeCaptionsTracks = {},
                this.cea608Parser1 = void 0,
                this.cea608Parser2 = void 0,
                this.lastCc = -1,
                this.lastSn = -1,
                this.lastPartIndex = -1,
                this.prevCC = -1,
                this.vttCCs = {
                    ccOffset: 0,
                    presentationOffset: 0,
                    0: {
                        start: 0,
                        prevCC: -1,
                        new: !0
                    }
                },
                this.captionsProperties = void 0,
                this.hls = t,
                this.config = t.config,
                this.Cues = t.config.cueHandler,
                this.captionsProperties = {
                    textTrack1: {
                        label: this.config.captionsTextTrack1Label,
                        languageCode: this.config.captionsTextTrack1LanguageCode
                    },
                    textTrack2: {
                        label: this.config.captionsTextTrack2Label,
                        languageCode: this.config.captionsTextTrack2LanguageCode
                    },
                    textTrack3: {
                        label: this.config.captionsTextTrack3Label,
                        languageCode: this.config.captionsTextTrack3LanguageCode
                    },
                    textTrack4: {
                        label: this.config.captionsTextTrack4Label,
                        languageCode: this.config.captionsTextTrack4LanguageCode
                    }
                },
                t.on(S.MEDIA_ATTACHING, this.onMediaAttaching, this),
                t.on(S.MEDIA_DETACHING, this.onMediaDetaching, this),
                t.on(S.MANIFEST_LOADING, this.onManifestLoading, this),
                t.on(S.MANIFEST_LOADED, this.onManifestLoaded, this),
                t.on(S.SUBTITLE_TRACKS_UPDATED, this.onSubtitleTracksUpdated, this),
                t.on(S.FRAG_LOADING, this.onFragLoading, this),
                t.on(S.FRAG_LOADED, this.onFragLoaded, this),
                t.on(S.FRAG_PARSING_USERDATA, this.onFragParsingUserdata, this),
                t.on(S.FRAG_DECRYPTED, this.onFragDecrypted, this),
                t.on(S.INIT_PTS_FOUND, this.onInitPtsFound, this),
                t.on(S.SUBTITLE_TRACKS_CLEARED, this.onSubtitleTracksCleared, this),
                t.on(S.BUFFER_FLUSHING, this.onBufferFlushing, this)
            }
            var e = t.prototype;
            return e.destroy = function() {
                var t = this.hls;
                t.off(S.MEDIA_ATTACHING, this.onMediaAttaching, this),
                t.off(S.MEDIA_DETACHING, this.onMediaDetaching, this),
                t.off(S.MANIFEST_LOADING, this.onManifestLoading, this),
                t.off(S.MANIFEST_LOADED, this.onManifestLoaded, this),
                t.off(S.SUBTITLE_TRACKS_UPDATED, this.onSubtitleTracksUpdated, this),
                t.off(S.FRAG_LOADING, this.onFragLoading, this),
                t.off(S.FRAG_LOADED, this.onFragLoaded, this),
                t.off(S.FRAG_PARSING_USERDATA, this.onFragParsingUserdata, this),
                t.off(S.FRAG_DECRYPTED, this.onFragDecrypted, this),
                t.off(S.INIT_PTS_FOUND, this.onInitPtsFound, this),
                t.off(S.SUBTITLE_TRACKS_CLEARED, this.onSubtitleTracksCleared, this),
                t.off(S.BUFFER_FLUSHING, this.onBufferFlushing, this),
                this.hls = this.config = null,
                this.cea608Parser1 = this.cea608Parser2 = void 0
            }
            ,
            e.initCea608Parsers = function() {
                if (this.config.enableCEA708Captions && (!this.cea608Parser1 || !this.cea608Parser2)) {
                    var t = new ya(this,"textTrack1")
                      , e = new ya(this,"textTrack2")
                      , r = new ya(this,"textTrack3")
                      , i = new ya(this,"textTrack4");
                    this.cea608Parser1 = new va(1,t,e),
                    this.cea608Parser2 = new va(3,r,i)
                }
            }
            ,
            e.addCues = function(t, e, r, i, n) {
                for (var a, s, o, l, u = !1, h = n.length; h--; ) {
                    var d = n[h]
                      , c = (a = d[0],
                    s = d[1],
                    o = e,
                    l = r,
                    Math.min(s, l) - Math.max(a, o));
                    if (c >= 0 && (d[0] = Math.min(d[0], e),
                    d[1] = Math.max(d[1], r),
                    u = !0,
                    c / (r - e) > .5))
                        return
                }
                if (u || n.push([e, r]),
                this.config.renderTextTracksNatively) {
                    var f = this.captionsTracks[t];
                    this.Cues.newCue(f, e, r, i)
                } else {
                    var g = this.Cues.newCue(null, e, r, i);
                    this.hls.trigger(S.CUES_PARSED, {
                        type: "captions",
                        cues: g,
                        track: t
                    })
                }
            }
            ,
            e.onInitPtsFound = function(t, e) {
                var r = this
                  , i = e.frag
                  , n = e.id
                  , a = e.initPTS
                  , s = e.timescale
                  , o = this.unparsedVttFrags;
                "main" === n && (this.initPTS[i.cc] = {
                    baseTime: a,
                    timescale: s
                }),
                o.length && (this.unparsedVttFrags = [],
                o.forEach((function(t) {
                    r.onFragLoaded(S.FRAG_LOADED, t)
                }
                )))
            }
            ,
            e.getExistingTrack = function(t, e) {
                var r = this.media;
                if (r)
                    for (var i = 0; i < r.textTracks.length; i++) {
                        var n = r.textTracks[i];
                        if (qa(n, {
                            name: t,
                            lang: e,
                            attrs: {}
                        }))
                            return n
                    }
                return null
            }
            ,
            e.createCaptionsTrack = function(t) {
                this.config.renderTextTracksNatively ? this.createNativeTrack(t) : this.createNonNativeTrack(t)
            }
            ,
            e.createNativeTrack = function(t) {
                if (!this.captionsTracks[t]) {
                    var e = this.captionsProperties
                      , r = this.captionsTracks
                      , i = this.media
                      , n = e[t]
                      , a = n.label
                      , s = n.languageCode
                      , o = this.getExistingTrack(a, s);
                    if (o)
                        r[t] = o,
                        Ne(r[t]),
                        Me(r[t], i);
                    else {
                        var l = this.createTextTrack("captions", a, s);
                        l && (l[t] = !0,
                        r[t] = l)
                    }
                }
            }
            ,
            e.createNonNativeTrack = function(t) {
                if (!this.nonNativeCaptionsTracks[t]) {
                    var e = this.captionsProperties[t];
                    if (e) {
                        var r = {
                            _id: t,
                            label: e.label,
                            kind: "captions",
                            default: !!e.media && !!e.media.default,
                            closedCaptions: e.media
                        };
                        this.nonNativeCaptionsTracks[t] = r,
                        this.hls.trigger(S.NON_NATIVE_TEXT_TRACKS_FOUND, {
                            tracks: [r]
                        })
                    }
                }
            }
            ,
            e.createTextTrack = function(t, e, r) {
                var i = this.media;
                if (i)
                    return i.addTextTrack(t, e, r)
            }
            ,
            e.onMediaAttaching = function(t, e) {
                this.media = e.media,
                this._cleanTracks()
            }
            ,
            e.onMediaDetaching = function() {
                var t = this.captionsTracks;
                Object.keys(t).forEach((function(e) {
                    Ne(t[e]),
                    delete t[e]
                }
                )),
                this.nonNativeCaptionsTracks = {}
            }
            ,
            e.onManifestLoading = function() {
                this.lastCc = -1,
                this.lastSn = -1,
                this.lastPartIndex = -1,
                this.prevCC = -1,
                this.vttCCs = {
                    ccOffset: 0,
                    presentationOffset: 0,
                    0: {
                        start: 0,
                        prevCC: -1,
                        new: !0
                    }
                },
                this._cleanTracks(),
                this.tracks = [],
                this.captionsTracks = {},
                this.nonNativeCaptionsTracks = {},
                this.textTracks = [],
                this.unparsedVttFrags = [],
                this.initPTS = [],
                this.cea608Parser1 && this.cea608Parser2 && (this.cea608Parser1.reset(),
                this.cea608Parser2.reset())
            }
            ,
            e._cleanTracks = function() {
                var t = this.media;
                if (t) {
                    var e = t.textTracks;
                    if (e)
                        for (var r = 0; r < e.length; r++)
                            Ne(e[r])
                }
            }
            ,
            e.onSubtitleTracksUpdated = function(t, e) {
                var r = this
                  , i = e.subtitleTracks || []
                  , n = i.some((function(t) {
                    return t.textCodec === Fa
                }
                ));
                if (this.config.enableWebVTT || n && this.config.enableIMSC1) {
                    if (Kn(this.tracks, i))
                        return void (this.tracks = i);
                    if (this.textTracks = [],
                    this.tracks = i,
                    this.config.renderTextTracksNatively) {
                        var a = this.media
                          , s = a ? Be(a.textTracks) : null;
                        if (this.tracks.forEach((function(t, e) {
                            var i;
                            if (s) {
                                for (var n = null, a = 0; a < s.length; a++)
                                    if (s[a] && qa(s[a], t)) {
                                        n = s[a],
                                        s[a] = null;
                                        break
                                    }
                                n && (i = n)
                            }
                            if (i)
                                Ne(i);
                            else {
                                var o = ja(t);
                                (i = r.createTextTrack(o, t.name, t.lang)) && (i.mode = "disabled")
                            }
                            i && r.textTracks.push(i)
                        }
                        )),
                        null != s && s.length) {
                            var o = s.filter((function(t) {
                                return null !== t
                            }
                            )).map((function(t) {
                                return t.label
                            }
                            ));
                            o.length && w.warn("Media element contains unused subtitle tracks: " + o.join(", ") + ". Replace media element for each source to clear TextTracks and captions menu.")
                        }
                    } else if (this.tracks.length) {
                        var l = this.tracks.map((function(t) {
                            return {
                                label: t.name,
                                kind: t.type.toLowerCase(),
                                default: t.default,
                                subtitleTrack: t
                            }
                        }
                        ));
                        this.hls.trigger(S.NON_NATIVE_TEXT_TRACKS_FOUND, {
                            tracks: l
                        })
                    }
                }
            }
            ,
            e.onManifestLoaded = function(t, e) {
                var r = this;
                this.config.enableCEA708Captions && e.captions && e.captions.forEach((function(t) {
                    var e = /(?:CC|SERVICE)([1-4])/.exec(t.instreamId);
                    if (e) {
                        var i = "textTrack" + e[1]
                          , n = r.captionsProperties[i];
                        n && (n.label = t.name,
                        t.lang && (n.languageCode = t.lang),
                        n.media = t)
                    }
                }
                ))
            }
            ,
            e.closedCaptionsForLevel = function(t) {
                var e = this.hls.levels[t.level];
                return null == e ? void 0 : e.attrs["CLOSED-CAPTIONS"]
            }
            ,
            e.onFragLoading = function(t, e) {
                this.initCea608Parsers();
                var r = this.cea608Parser1
                  , i = this.cea608Parser2
                  , n = this.lastCc
                  , a = this.lastSn
                  , s = this.lastPartIndex;
                if (this.enabled && r && i && e.frag.type === we) {
                    var o, l, u = e.frag, h = u.cc, d = u.sn, c = null != (o = null == e || null == (l = e.part) ? void 0 : l.index) ? o : -1;
                    d === a + 1 || d === a && c === s + 1 || h === n || (r.reset(),
                    i.reset()),
                    this.lastCc = h,
                    this.lastSn = d,
                    this.lastPartIndex = c
                }
            }
            ,
            e.onFragLoaded = function(t, e) {
                var r = e.frag
                  , i = e.payload;
                if (r.type === _e)
                    if (i.byteLength) {
                        var n = r.decryptdata
                          , a = "stats"in e;
                        if (null == n || !n.encrypted || a) {
                            var s = this.tracks[r.level]
                              , o = this.vttCCs;
                            o[r.cc] || (o[r.cc] = {
                                start: r.start,
                                prevCC: this.prevCC,
                                new: !0
                            },
                            this.prevCC = r.cc),
                            s && s.textCodec === Fa ? this._parseIMSC1(r, i) : this._parseVTTs(e)
                        }
                    } else
                        this.hls.trigger(S.SUBTITLE_FRAG_PROCESSED, {
                            success: !1,
                            frag: r,
                            error: new Error("Empty subtitle payload")
                        })
            }
            ,
            e._parseIMSC1 = function(t, e) {
                var r = this
                  , i = this.hls;
                Ua(e, this.initPTS[t.cc], (function(e) {
                    r._appendCues(e, t.level),
                    i.trigger(S.SUBTITLE_FRAG_PROCESSED, {
                        success: !0,
                        frag: t
                    })
                }
                ), (function(e) {
                    w.log("Failed to parse IMSC1: " + e),
                    i.trigger(S.SUBTITLE_FRAG_PROCESSED, {
                        success: !1,
                        frag: t,
                        error: e
                    })
                }
                ))
            }
            ,
            e._parseVTTs = function(t) {
                var e, r = this, i = t.frag, n = t.payload, a = this.initPTS, s = this.unparsedVttFrags, o = a.length - 1;
                if (a[i.cc] || -1 !== o) {
                    var l = this.hls;
                    Pa(null != (e = i.initSegment) && e.data ? Kt(i.initSegment.data, new Uint8Array(n)) : n, this.initPTS[i.cc], this.vttCCs, i.cc, i.start, (function(t) {
                        r._appendCues(t, i.level),
                        l.trigger(S.SUBTITLE_FRAG_PROCESSED, {
                            success: !0,
                            frag: i
                        })
                    }
                    ), (function(e) {
                        var a = "Missing initPTS for VTT MPEGTS" === e.message;
                        a ? s.push(t) : r._fallbackToIMSC1(i, n),
                        w.log("Failed to parse VTT cue: " + e),
                        a && o > i.cc || l.trigger(S.SUBTITLE_FRAG_PROCESSED, {
                            success: !1,
                            frag: i,
                            error: e
                        })
                    }
                    ))
                } else
                    s.push(t)
            }
            ,
            e._fallbackToIMSC1 = function(t, e) {
                var r = this
                  , i = this.tracks[t.level];
                i.textCodec || Ua(e, this.initPTS[t.cc], (function() {
                    i.textCodec = Fa,
                    r._parseIMSC1(t, e)
                }
                ), (function() {
                    i.textCodec = "wvtt"
                }
                ))
            }
            ,
            e._appendCues = function(t, e) {
                var r = this.hls;
                if (this.config.renderTextTracksNatively) {
                    var i = this.textTracks[e];
                    if (!i || "disabled" === i.mode)
                        return;
                    t.forEach((function(t) {
                        return Oe(i, t)
                    }
                    ))
                } else {
                    var n = this.tracks[e];
                    if (!n)
                        return;
                    var a = n.default ? "default" : "subtitles" + e;
                    r.trigger(S.CUES_PARSED, {
                        type: "subtitles",
                        cues: t,
                        track: a
                    })
                }
            }
            ,
            e.onFragDecrypted = function(t, e) {
                e.frag.type === _e && this.onFragLoaded(S.FRAG_LOADED, e)
            }
            ,
            e.onSubtitleTracksCleared = function() {
                this.tracks = [],
                this.captionsTracks = {}
            }
            ,
            e.onFragParsingUserdata = function(t, e) {
                this.initCea608Parsers();
                var r = this.cea608Parser1
                  , i = this.cea608Parser2;
                if (this.enabled && r && i) {
                    var n = e.frag
                      , a = e.samples;
                    if (n.type !== we || "NONE" !== this.closedCaptionsForLevel(n))
                        for (var s = 0; s < a.length; s++) {
                            var o = a[s].bytes;
                            if (o) {
                                var l = this.extractCea608Data(o);
                                r.addData(a[s].pts, l[0]),
                                i.addData(a[s].pts, l[1])
                            }
                        }
                }
            }
            ,
            e.onBufferFlushing = function(t, e) {
                var r = e.startOffset
                  , i = e.endOffset
                  , n = e.endOffsetSubtitles
                  , a = e.type
                  , s = this.media;
                if (s && !(s.currentTime < i)) {
                    if (!a || "video" === a) {
                        var o = this.captionsTracks;
                        Object.keys(o).forEach((function(t) {
                            return Ue(o[t], r, i)
                        }
                        ))
                    }
                    if (this.config.renderTextTracksNatively && 0 === r && void 0 !== n) {
                        var l = this.textTracks;
                        Object.keys(l).forEach((function(t) {
                            return Ue(l[t], r, n)
                        }
                        ))
                    }
                }
            }
            ,
            e.extractCea608Data = function(t) {
                for (var e = [[], []], r = 31 & t[0], i = 2, n = 0; n < r; n++) {
                    var a = t[i++]
                      , s = 127 & t[i++]
                      , o = 127 & t[i++];
                    if ((0 !== s || 0 !== o) && 0 != (4 & a)) {
                        var l = 3 & a;
                        0 !== l && 1 !== l || (e[l].push(s),
                        e[l].push(o))
                    }
                }
                return e
            }
            ,
            t
        }();
        function ja(t) {
            return t.characteristics && /transcribes-spoken-dialog/gi.test(t.characteristics) && /describes-music-and-sound/gi.test(t.characteristics) ? "captions" : "subtitles"
        }
        function qa(t, e) {
            return !!t && t.kind === ja(e) && Vn(e, t)
        }
        var Xa = function() {
            function t(t) {
                this.hls = void 0,
                this.autoLevelCapping = void 0,
                this.firstLevel = void 0,
                this.media = void 0,
                this.restrictedLevels = void 0,
                this.timer = void 0,
                this.clientRect = void 0,
                this.streamController = void 0,
                this.hls = t,
                this.autoLevelCapping = Number.POSITIVE_INFINITY,
                this.firstLevel = -1,
                this.media = null,
                this.restrictedLevels = [],
                this.timer = void 0,
                this.clientRect = null,
                this.registerListeners()
            }
            var e = t.prototype;
            return e.setStreamController = function(t) {
                this.streamController = t
            }
            ,
            e.destroy = function() {
                this.hls && this.unregisterListener(),
                this.timer && this.stopCapping(),
                this.media = null,
                this.clientRect = null,
                this.hls = this.streamController = null
            }
            ,
            e.registerListeners = function() {
                var t = this.hls;
                t.on(S.FPS_DROP_LEVEL_CAPPING, this.onFpsDropLevelCapping, this),
                t.on(S.MEDIA_ATTACHING, this.onMediaAttaching, this),
                t.on(S.MANIFEST_PARSED, this.onManifestParsed, this),
                t.on(S.LEVELS_UPDATED, this.onLevelsUpdated, this),
                t.on(S.BUFFER_CODECS, this.onBufferCodecs, this),
                t.on(S.MEDIA_DETACHING, this.onMediaDetaching, this)
            }
            ,
            e.unregisterListener = function() {
                var t = this.hls;
                t.off(S.FPS_DROP_LEVEL_CAPPING, this.onFpsDropLevelCapping, this),
                t.off(S.MEDIA_ATTACHING, this.onMediaAttaching, this),
                t.off(S.MANIFEST_PARSED, this.onManifestParsed, this),
                t.off(S.LEVELS_UPDATED, this.onLevelsUpdated, this),
                t.off(S.BUFFER_CODECS, this.onBufferCodecs, this),
                t.off(S.MEDIA_DETACHING, this.onMediaDetaching, this)
            }
            ,
            e.onFpsDropLevelCapping = function(t, e) {
                var r = this.hls.levels[e.droppedLevel];
                this.isLevelAllowed(r) && this.restrictedLevels.push({
                    bitrate: r.bitrate,
                    height: r.height,
                    width: r.width
                })
            }
            ,
            e.onMediaAttaching = function(t, e) {
                this.media = e.media instanceof HTMLVideoElement ? e.media : null,
                this.clientRect = null,
                this.timer && this.hls.levels.length && this.detectPlayerSize()
            }
            ,
            e.onManifestParsed = function(t, e) {
                var r = this.hls;
                this.restrictedLevels = [],
                this.firstLevel = e.firstLevel,
                r.config.capLevelToPlayerSize && e.video && this.startCapping()
            }
            ,
            e.onLevelsUpdated = function(t, e) {
                this.timer && y(this.autoLevelCapping) && this.detectPlayerSize()
            }
            ,
            e.onBufferCodecs = function(t, e) {
                this.hls.config.capLevelToPlayerSize && e.video && this.startCapping()
            }
            ,
            e.onMediaDetaching = function() {
                this.stopCapping()
            }
            ,
            e.detectPlayerSize = function() {
                if (this.media) {
                    if (this.mediaHeight <= 0 || this.mediaWidth <= 0)
                        return void (this.clientRect = null);
                    var t = this.hls.levels;
                    if (t.length) {
                        var e = this.hls
                          , r = this.getMaxLevel(t.length - 1);
                        r !== this.autoLevelCapping && w.log("Setting autoLevelCapping to " + r + ": " + t[r].height + "p@" + t[r].bitrate + " for media " + this.mediaWidth + "x" + this.mediaHeight),
                        e.autoLevelCapping = r,
                        e.autoLevelCapping > this.autoLevelCapping && this.streamController && this.streamController.nextLevelSwitch(),
                        this.autoLevelCapping = e.autoLevelCapping
                    }
                }
            }
            ,
            e.getMaxLevel = function(e) {
                var r = this
                  , i = this.hls.levels;
                if (!i.length)
                    return -1;
                var n = i.filter((function(t, i) {
                    return r.isLevelAllowed(t) && i <= e
                }
                ));
                return this.clientRect = null,
                t.getMaxLevelByMediaSize(n, this.mediaWidth, this.mediaHeight)
            }
            ,
            e.startCapping = function() {
                this.timer || (this.autoLevelCapping = Number.POSITIVE_INFINITY,
                self.clearInterval(this.timer),
                this.timer = self.setInterval(this.detectPlayerSize.bind(this), 1e3),
                this.detectPlayerSize())
            }
            ,
            e.stopCapping = function() {
                this.restrictedLevels = [],
                this.firstLevel = -1,
                this.autoLevelCapping = Number.POSITIVE_INFINITY,
                this.timer && (self.clearInterval(this.timer),
                this.timer = void 0)
            }
            ,
            e.getDimensions = function() {
                if (this.clientRect)
                    return this.clientRect;
                var t = this.media
                  , e = {
                    width: 0,
                    height: 0
                };
                if (t) {
                    var r = t.getBoundingClientRect();
                    e.width = r.width,
                    e.height = r.height,
                    e.width || e.height || (e.width = r.right - r.left || t.width || 0,
                    e.height = r.bottom - r.top || t.height || 0)
                }
                return this.clientRect = e,
                e
            }
            ,
            e.isLevelAllowed = function(t) {
                return !this.restrictedLevels.some((function(e) {
                    return t.bitrate === e.bitrate && t.width === e.width && t.height === e.height
                }
                ))
            }
            ,
            t.getMaxLevelByMediaSize = function(t, e, r) {
                if (null == t || !t.length)
                    return -1;
                for (var i, n, a = t.length - 1, s = Math.max(e, r), o = 0; o < t.length; o += 1) {
                    var l = t[o];
                    if ((l.width >= s || l.height >= s) && (i = l,
                    !(n = t[o + 1]) || i.width !== n.width || i.height !== n.height)) {
                        a = o;
                        break
                    }
                }
                return a
            }
            ,
            s(t, [{
                key: "mediaWidth",
                get: function() {
                    return this.getDimensions().width * this.contentScaleFactor
                }
            }, {
                key: "mediaHeight",
                get: function() {
                    return this.getDimensions().height * this.contentScaleFactor
                }
            }, {
                key: "contentScaleFactor",
                get: function() {
                    var t = 1;
                    if (!this.hls.config.ignoreDevicePixelRatio)
                        try {
                            t = self.devicePixelRatio
                        } catch (t) {}
                    return t
                }
            }]),
            t
        }()
          , za = function() {
            function t(t) {
                this.hls = void 0,
                this.isVideoPlaybackQualityAvailable = !1,
                this.timer = void 0,
                this.media = null,
                this.lastTime = void 0,
                this.lastDroppedFrames = 0,
                this.lastDecodedFrames = 0,
                this.streamController = void 0,
                this.hls = t,
                this.registerListeners()
            }
            var e = t.prototype;
            return e.setStreamController = function(t) {
                this.streamController = t
            }
            ,
            e.registerListeners = function() {
                this.hls.on(S.MEDIA_ATTACHING, this.onMediaAttaching, this)
            }
            ,
            e.unregisterListeners = function() {
                this.hls.off(S.MEDIA_ATTACHING, this.onMediaAttaching, this)
            }
            ,
            e.destroy = function() {
                this.timer && clearInterval(this.timer),
                this.unregisterListeners(),
                this.isVideoPlaybackQualityAvailable = !1,
                this.media = null
            }
            ,
            e.onMediaAttaching = function(t, e) {
                var r = this.hls.config;
                if (r.capLevelOnFPSDrop) {
                    var i = e.media instanceof self.HTMLVideoElement ? e.media : null;
                    this.media = i,
                    i && "function" == typeof i.getVideoPlaybackQuality && (this.isVideoPlaybackQualityAvailable = !0),
                    self.clearInterval(this.timer),
                    this.timer = self.setInterval(this.checkFPSInterval.bind(this), r.fpsDroppedMonitoringPeriod)
                }
            }
            ,
            e.checkFPS = function(t, e, r) {
                var i = performance.now();
                if (e) {
                    if (this.lastTime) {
                        var n = i - this.lastTime
                          , a = r - this.lastDroppedFrames
                          , s = e - this.lastDecodedFrames
                          , o = 1e3 * a / n
                          , l = this.hls;
                        if (l.trigger(S.FPS_DROP, {
                            currentDropped: a,
                            currentDecoded: s,
                            totalDroppedFrames: r
                        }),
                        o > 0 && a > l.config.fpsDroppedMonitoringThreshold * s) {
                            var u = l.currentLevel;
                            w.warn("drop FPS ratio greater than max allowed value for currentLevel: " + u),
                            u > 0 && (-1 === l.autoLevelCapping || l.autoLevelCapping >= u) && (u -= 1,
                            l.trigger(S.FPS_DROP_LEVEL_CAPPING, {
                                level: u,
                                droppedLevel: l.currentLevel
                            }),
                            l.autoLevelCapping = u,
                            this.streamController.nextLevelSwitch())
                        }
                    }
                    this.lastTime = i,
                    this.lastDroppedFrames = r,
                    this.lastDecodedFrames = e
                }
            }
            ,
            e.checkFPSInterval = function() {
                var t = this.media;
                if (t)
                    if (this.isVideoPlaybackQualityAvailable) {
                        var e = t.getVideoPlaybackQuality();
                        this.checkFPS(t, e.totalVideoFrames, e.droppedVideoFrames)
                    } else
                        this.checkFPS(t, t.webkitDecodedFrameCount, t.webkitDroppedFrameCount)
            }
            ,
            t
        }()
          , Qa = "[eme]"
          , Ja = function() {
            function t(e) {
                this.hls = void 0,
                this.config = void 0,
                this.media = null,
                this.keyFormatPromise = null,
                this.keySystemAccessPromises = {},
                this._requestLicenseFailureCount = 0,
                this.mediaKeySessions = [],
                this.keyIdToKeySessionPromise = {},
                this.setMediaKeysQueue = t.CDMCleanupPromise ? [t.CDMCleanupPromise] : [],
                this.onMediaEncrypted = this._onMediaEncrypted.bind(this),
                this.onWaitingForKey = this._onWaitingForKey.bind(this),
                this.debug = w.debug.bind(w, Qa),
                this.log = w.log.bind(w, Qa),
                this.warn = w.warn.bind(w, Qa),
                this.error = w.error.bind(w, Qa),
                this.hls = e,
                this.config = e.config,
                this.registerListeners()
            }
            var e = t.prototype;
            return e.destroy = function() {
                this.unregisterListeners(),
                this.onMediaDetached();
                var t = this.config;
                t.requestMediaKeySystemAccessFunc = null,
                t.licenseXhrSetup = t.licenseResponseCallback = void 0,
                t.drmSystems = t.drmSystemOptions = {},
                this.hls = this.onMediaEncrypted = this.onWaitingForKey = this.keyIdToKeySessionPromise = null,
                this.config = null
            }
            ,
            e.registerListeners = function() {
                this.hls.on(S.MEDIA_ATTACHED, this.onMediaAttached, this),
                this.hls.on(S.MEDIA_DETACHED, this.onMediaDetached, this),
                this.hls.on(S.MANIFEST_LOADING, this.onManifestLoading, this),
                this.hls.on(S.MANIFEST_LOADED, this.onManifestLoaded, this)
            }
            ,
            e.unregisterListeners = function() {
                this.hls.off(S.MEDIA_ATTACHED, this.onMediaAttached, this),
                this.hls.off(S.MEDIA_DETACHED, this.onMediaDetached, this),
                this.hls.off(S.MANIFEST_LOADING, this.onManifestLoading, this),
                this.hls.off(S.MANIFEST_LOADED, this.onManifestLoaded, this)
            }
            ,
            e.getLicenseServerUrl = function(t) {
                var e = this.config
                  , r = e.drmSystems
                  , i = e.widevineLicenseUrl
                  , n = r[t];
                if (n)
                    return n.licenseUrl;
                if (t === q.WIDEVINE && i)
                    return i;
                throw new Error('no license server URL configured for key-system "' + t + '"')
            }
            ,
            e.getServerCertificateUrl = function(t) {
                var e = this.config.drmSystems[t];
                if (e)
                    return e.serverCertificateUrl;
                this.log('No Server Certificate in config.drmSystems["' + t + '"]')
            }
            ,
            e.attemptKeySystemAccess = function(t) {
                var e = this
                  , r = this.hls.levels
                  , i = function(t, e, r) {
                    return !!t && r.indexOf(t) === e
                }
                  , n = r.map((function(t) {
                    return t.audioCodec
                }
                )).filter(i)
                  , a = r.map((function(t) {
                    return t.videoCodec
                }
                )).filter(i);
                return n.length + a.length === 0 && a.push("avc1.42e01e"),
                new Promise((function(r, i) {
                    !function t(s) {
                        var o = s.shift();
                        e.getMediaKeysPromise(o, n, a).then((function(t) {
                            return r({
                                keySystem: o,
                                mediaKeys: t
                            })
                        }
                        )).catch((function(e) {
                            s.length ? t(s) : i(e instanceof rs ? e : new rs({
                                type: L.KEY_SYSTEM_ERROR,
                                details: A.KEY_SYSTEM_NO_ACCESS,
                                error: e,
                                fatal: !0
                            },e.message))
                        }
                        ))
                    }(t)
                }
                ))
            }
            ,
            e.requestMediaKeySystemAccess = function(t, e) {
                var r = this.config.requestMediaKeySystemAccessFunc;
                if ("function" != typeof r) {
                    var i = "Configured requestMediaKeySystemAccess is not a function " + r;
                    return null === it && "http:" === self.location.protocol && (i = "navigator.requestMediaKeySystemAccess is not available over insecure protocol " + location.protocol),
                    Promise.reject(new Error(i))
                }
                return r(t, e)
            }
            ,
            e.getMediaKeysPromise = function(t, e, r) {
                var i = this
                  , n = function(t, e, r, i) {
                    var n;
                    switch (t) {
                    case q.FAIRPLAY:
                        n = ["cenc", "sinf"];
                        break;
                    case q.WIDEVINE:
                    case q.PLAYREADY:
                        n = ["cenc"];
                        break;
                    case q.CLEARKEY:
                        n = ["cenc", "keyids"];
                        break;
                    default:
                        throw new Error("Unknown key-system: " + t)
                    }
                    return function(t, e, r, i) {
                        return [{
                            initDataTypes: t,
                            persistentState: i.persistentState || "optional",
                            distinctiveIdentifier: i.distinctiveIdentifier || "optional",
                            sessionTypes: i.sessionTypes || [i.sessionType || "temporary"],
                            audioCapabilities: e.map((function(t) {
                                return {
                                    contentType: 'audio/mp4; codecs="' + t + '"',
                                    robustness: i.audioRobustness || "",
                                    encryptionScheme: i.audioEncryptionScheme || null
                                }
                            }
                            )),
                            videoCapabilities: r.map((function(t) {
                                return {
                                    contentType: 'video/mp4; codecs="' + t + '"',
                                    robustness: i.videoRobustness || "",
                                    encryptionScheme: i.videoEncryptionScheme || null
                                }
                            }
                            ))
                        }]
                    }(n, e, r, i)
                }(t, e, r, this.config.drmSystemOptions)
                  , a = this.keySystemAccessPromises[t]
                  , s = null == a ? void 0 : a.keySystemAccess;
                if (!s) {
                    this.log('Requesting encrypted media "' + t + '" key-system access with config: ' + JSON.stringify(n)),
                    s = this.requestMediaKeySystemAccess(t, n);
                    var o = this.keySystemAccessPromises[t] = {
                        keySystemAccess: s
                    };
                    return s.catch((function(e) {
                        i.log('Failed to obtain access to key-system "' + t + '": ' + e)
                    }
                    )),
                    s.then((function(e) {
                        i.log('Access for key-system "' + e.keySystem + '" obtained');
                        var r = i.fetchServerCertificate(t);
                        return i.log('Create media-keys for "' + t + '"'),
                        o.mediaKeys = e.createMediaKeys().then((function(e) {
                            return i.log('Media-keys created for "' + t + '"'),
                            r.then((function(r) {
                                return r ? i.setMediaKeysServerCertificate(e, t, r) : e
                            }
                            ))
                        }
                        )),
                        o.mediaKeys.catch((function(e) {
                            i.error('Failed to create media-keys for "' + t + '"}: ' + e)
                        }
                        )),
                        o.mediaKeys
                    }
                    ))
                }
                return s.then((function() {
                    return a.mediaKeys
                }
                ))
            }
            ,
            e.createMediaKeySessionContext = function(t) {
                var e = t.decryptdata
                  , r = t.keySystem
                  , i = t.mediaKeys;
                this.log('Creating key-system session "' + r + '" keyId: ' + Lt(e.keyId || []));
                var n = i.createSession()
                  , a = {
                    decryptdata: e,
                    keySystem: r,
                    mediaKeys: i,
                    mediaKeysSession: n,
                    keyStatus: "status-pending"
                };
                return this.mediaKeySessions.push(a),
                a
            }
            ,
            e.renewKeySession = function(t) {
                var e = t.decryptdata;
                if (e.pssh) {
                    var r = this.createMediaKeySessionContext(t)
                      , i = this.getKeyIdString(e);
                    this.keyIdToKeySessionPromise[i] = this.generateRequestWithPreferredKeySession(r, "cenc", e.pssh, "expired")
                } else
                    this.warn("Could not renew expired session. Missing pssh initData.");
                this.removeSession(t)
            }
            ,
            e.getKeyIdString = function(t) {
                if (!t)
                    throw new Error("Could not read keyId of undefined decryptdata");
                if (null === t.keyId)
                    throw new Error("keyId is null");
                return Lt(t.keyId)
            }
            ,
            e.updateKeySession = function(t, e) {
                var r, i = t.mediaKeysSession;
                return this.log('Updating key-session "' + i.sessionId + '" for keyID ' + Lt((null == (r = t.decryptdata) ? void 0 : r.keyId) || []) + "\n      } (data length: " + (e ? e.byteLength : e) + ")"),
                i.update(e)
            }
            ,
            e.selectKeySystemFormat = function(t) {
                var e = Object.keys(t.levelkeys || {});
                return this.keyFormatPromise || (this.log("Selecting key-system from fragment (sn: " + t.sn + " " + t.type + ": " + t.level + ") key formats " + e.join(", ")),
                this.keyFormatPromise = this.getKeyFormatPromise(e)),
                this.keyFormatPromise
            }
            ,
            e.getKeyFormatPromise = function(t) {
                var e = this;
                return new Promise((function(r, i) {
                    var n = et(e.config)
                      , a = t.map($).filter((function(t) {
                        return !!t && -1 !== n.indexOf(t)
                    }
                    ));
                    return e.getKeySystemSelectionPromise(a).then((function(t) {
                        var e = t.keySystem
                          , n = tt(e);
                        n ? r(n) : i(new Error('Unable to find format for key-system "' + e + '"'))
                    }
                    )).catch(i)
                }
                ))
            }
            ,
            e.loadKey = function(t) {
                var e = this
                  , r = t.keyInfo.decryptdata
                  , i = this.getKeyIdString(r)
                  , n = "(keyId: " + i + ' format: "' + r.keyFormat + '" method: ' + r.method + " uri: " + r.uri + ")";
                this.log("Starting session for key " + n);
                var a = this.keyIdToKeySessionPromise[i];
                return a || (a = this.keyIdToKeySessionPromise[i] = this.getKeySystemForKeyPromise(r).then((function(i) {
                    var a = i.keySystem
                      , s = i.mediaKeys;
                    return e.throwIfDestroyed(),
                    e.log("Handle encrypted media sn: " + t.frag.sn + " " + t.frag.type + ": " + t.frag.level + " using key " + n),
                    e.attemptSetMediaKeys(a, s).then((function() {
                        e.throwIfDestroyed();
                        var t = e.createMediaKeySessionContext({
                            keySystem: a,
                            mediaKeys: s,
                            decryptdata: r
                        });
                        return e.generateRequestWithPreferredKeySession(t, "cenc", r.pssh, "playlist-key")
                    }
                    ))
                }
                ))).catch((function(t) {
                    return e.handleError(t)
                }
                )),
                a
            }
            ,
            e.throwIfDestroyed = function(t) {
                if (!this.hls)
                    throw new Error("invalid state")
            }
            ,
            e.handleError = function(t) {
                this.hls && (this.error(t.message),
                t instanceof rs ? this.hls.trigger(S.ERROR, t.data) : this.hls.trigger(S.ERROR, {
                    type: L.KEY_SYSTEM_ERROR,
                    details: A.KEY_SYSTEM_NO_KEYS,
                    error: t,
                    fatal: !0
                }))
            }
            ,
            e.getKeySystemForKeyPromise = function(t) {
                var e = this.getKeyIdString(t)
                  , r = this.keyIdToKeySessionPromise[e];
                if (!r) {
                    var i = $(t.keyFormat)
                      , n = i ? [i] : et(this.config);
                    return this.attemptKeySystemAccess(n)
                }
                return r
            }
            ,
            e.getKeySystemSelectionPromise = function(t) {
                if (t.length || (t = et(this.config)),
                0 === t.length)
                    throw new rs({
                        type: L.KEY_SYSTEM_ERROR,
                        details: A.KEY_SYSTEM_NO_CONFIGURED_LICENSE,
                        fatal: !0
                    },"Missing key-system license configuration options " + JSON.stringify({
                        drmSystems: this.config.drmSystems
                    }));
                return this.attemptKeySystemAccess(t)
            }
            ,
            e._onMediaEncrypted = function(t) {
                var e = this
                  , r = t.initDataType
                  , i = t.initData;
                if (this.debug('"' + t.type + '" event: init data type: "' + r + '"'),
                null !== i) {
                    var n, a;
                    if ("sinf" === r && this.config.drmSystems[q.FAIRPLAY]) {
                        var s = bt(new Uint8Array(i));
                        try {
                            var o = V(JSON.parse(s).sinf)
                              , l = Bt(new Uint8Array(o));
                            if (!l)
                                return;
                            n = l.subarray(8, 24),
                            a = q.FAIRPLAY
                        } catch (t) {
                            return void this.warn('Failed to parse sinf "encrypted" event message initData')
                        }
                    } else {
                        var u = function(t) {
                            if (!(t instanceof ArrayBuffer) || t.byteLength < 32)
                                return null;
                            var e = {
                                version: 0,
                                systemId: "",
                                kids: null,
                                data: null
                            }
                              , r = new DataView(t)
                              , i = r.getUint32(0);
                            if (t.byteLength !== i && i > 44)
                                return null;
                            if (1886614376 !== r.getUint32(4))
                                return null;
                            if (e.version = r.getUint32(8) >>> 24,
                            e.version > 1)
                                return null;
                            e.systemId = Lt(new Uint8Array(t,12,16));
                            var n = r.getUint32(28);
                            if (0 === e.version) {
                                if (i - 32 < n)
                                    return null;
                                e.data = new Uint8Array(t,32,n)
                            } else if (1 === e.version) {
                                e.kids = [];
                                for (var a = 0; a < n; a++)
                                    e.kids.push(new Uint8Array(t,32 + 16 * a,16))
                            }
                            return e
                        }(i);
                        if (null === u)
                            return;
                        0 === u.version && u.systemId === Z && u.data && (n = u.data.subarray(8, 24)),
                        a = function(t) {
                            if (t === Z)
                                return q.WIDEVINE
                        }(u.systemId)
                    }
                    if (a && n) {
                        for (var h, d = Lt(n), c = this.keyIdToKeySessionPromise, f = this.mediaKeySessions, g = c[d], v = function() {
                            var t = f[m]
                              , a = t.decryptdata;
                            if (a.pssh || !a.keyId)
                                return 0;
                            var s = Lt(a.keyId);
                            return d === s || -1 !== a.uri.replace(/-/g, "").indexOf(d) ? (g = c[s],
                            delete c[s],
                            a.pssh = new Uint8Array(i),
                            a.keyId = n,
                            g = c[d] = g.then((function() {
                                return e.generateRequestWithPreferredKeySession(t, r, i, "encrypted-event-key-match")
                            }
                            )),
                            1) : void 0
                        }, m = 0; m < f.length && (0 === (h = v()) || 1 !== h); m++)
                            ;
                        g || (g = c[d] = this.getKeySystemSelectionPromise([a]).then((function(t) {
                            var a, s = t.keySystem, o = t.mediaKeys;
                            e.throwIfDestroyed();
                            var l = new Xt("ISO-23001-7",d,null != (a = tt(s)) ? a : "");
                            return l.pssh = new Uint8Array(i),
                            l.keyId = n,
                            e.attemptSetMediaKeys(s, o).then((function() {
                                e.throwIfDestroyed();
                                var t = e.createMediaKeySessionContext({
                                    decryptdata: l,
                                    keySystem: s,
                                    mediaKeys: o
                                });
                                return e.generateRequestWithPreferredKeySession(t, r, i, "encrypted-event-no-match")
                            }
                            ))
                        }
                        ))),
                        g.catch((function(t) {
                            return e.handleError(t)
                        }
                        ))
                    }
                }
            }
            ,
            e._onWaitingForKey = function(t) {
                this.log('"' + t.type + '" event')
            }
            ,
            e.attemptSetMediaKeys = function(t, e) {
                var r = this
                  , i = this.setMediaKeysQueue.slice();
                this.log('Setting media-keys for "' + t + '"');
                var n = Promise.all(i).then((function() {
                    if (!r.media)
                        throw new Error("Attempted to set mediaKeys without media element attached");
                    return r.media.setMediaKeys(e)
                }
                ));
                return this.setMediaKeysQueue.push(n),
                n.then((function() {
                    r.log('Media-keys set for "' + t + '"'),
                    i.push(n),
                    r.setMediaKeysQueue = r.setMediaKeysQueue.filter((function(t) {
                        return -1 === i.indexOf(t)
                    }
                    ))
                }
                ))
            }
            ,
            e.generateRequestWithPreferredKeySession = function(t, e, r, i) {
                var n, a, s = this, o = null == (n = this.config.drmSystems) || null == (a = n[t.keySystem]) ? void 0 : a.generateRequest;
                if (o)
                    try {
                        var l = o.call(this.hls, e, r, t);
                        if (!l)
                            throw new Error("Invalid response from configured generateRequest filter");
                        e = l.initDataType,
                        r = t.decryptdata.pssh = l.initData ? new Uint8Array(l.initData) : null
                    } catch (t) {
                        var u;
                        if (this.warn(t.message),
                        null != (u = this.hls) && u.config.debug)
                            throw t
                    }
                if (null === r)
                    return this.log('Skipping key-session request for "' + i + '" (no initData)'),
                    Promise.resolve(t);
                var h = this.getKeyIdString(t.decryptdata);
                this.log('Generating key-session request for "' + i + '": ' + h + " (init data type: " + e + " length: " + (r ? r.byteLength : null) + ")");
                var d = new On
                  , c = t._onmessage = function(e) {
                    var r = t.mediaKeysSession;
                    if (r) {
                        var i = e.messageType
                          , n = e.message;
                        s.log('"' + i + '" message event for session "' + r.sessionId + '" message size: ' + n.byteLength),
                        "license-request" === i || "license-renewal" === i ? s.renewLicense(t, n).catch((function(t) {
                            s.handleError(t),
                            d.emit("error", t)
                        }
                        )) : "license-release" === i ? t.keySystem === q.FAIRPLAY && (s.updateKeySession(t, W("acknowledged")),
                        s.removeSession(t)) : s.warn('unhandled media key message type "' + i + '"')
                    } else
                        d.emit("error", new Error("invalid state"))
                }
                  , f = t._onkeystatuseschange = function(e) {
                    if (t.mediaKeysSession) {
                        s.onKeyStatusChange(t);
                        var r = t.keyStatus;
                        d.emit("keyStatus", r),
                        "expired" === r && (s.warn(t.keySystem + " expired for key " + h),
                        s.renewKeySession(t))
                    } else
                        d.emit("error", new Error("invalid state"))
                }
                ;
                t.mediaKeysSession.addEventListener("message", c),
                t.mediaKeysSession.addEventListener("keystatuseschange", f);
                var g = new Promise((function(t, e) {
                    d.on("error", e),
                    d.on("keyStatus", (function(r) {
                        r.startsWith("usable") ? t() : "output-restricted" === r ? e(new rs({
                            type: L.KEY_SYSTEM_ERROR,
                            details: A.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,
                            fatal: !1
                        },"HDCP level output restricted")) : "internal-error" === r ? e(new rs({
                            type: L.KEY_SYSTEM_ERROR,
                            details: A.KEY_SYSTEM_STATUS_INTERNAL_ERROR,
                            fatal: !0
                        },'key status changed to "' + r + '"')) : "expired" === r ? e(new Error("key expired while generating request")) : s.warn('unhandled key status change "' + r + '"')
                    }
                    ))
                }
                ));
                return t.mediaKeysSession.generateRequest(e, r).then((function() {
                    var e;
                    s.log('Request generated for key-session "' + (null == (e = t.mediaKeysSession) ? void 0 : e.sessionId) + '" keyId: ' + h)
                }
                )).catch((function(t) {
                    throw new rs({
                        type: L.KEY_SYSTEM_ERROR,
                        details: A.KEY_SYSTEM_NO_SESSION,
                        error: t,
                        fatal: !1
                    },"Error generating key-session request: " + t)
                }
                )).then((function() {
                    return g
                }
                )).catch((function(e) {
                    throw d.removeAllListeners(),
                    s.removeSession(t),
                    e
                }
                )).then((function() {
                    return d.removeAllListeners(),
                    t
                }
                ))
            }
            ,
            e.onKeyStatusChange = function(t) {
                var e = this;
                t.mediaKeysSession.keyStatuses.forEach((function(r, i) {
                    e.log('key status change "' + r + '" for keyStatuses keyId: ' + Lt("buffer"in i ? new Uint8Array(i.buffer,i.byteOffset,i.byteLength) : new Uint8Array(i)) + " session keyId: " + Lt(new Uint8Array(t.decryptdata.keyId || [])) + " uri: " + t.decryptdata.uri),
                    t.keyStatus = r
                }
                ))
            }
            ,
            e.fetchServerCertificate = function(t) {
                var e = this.config
                  , r = new (0,
                e.loader)(e)
                  , n = this.getServerCertificateUrl(t);
                return n ? (this.log('Fetching server certificate for "' + t + '"'),
                new Promise((function(a, s) {
                    var o = {
                        responseType: "arraybuffer",
                        url: n
                    }
                      , l = e.certLoadPolicy.default
                      , u = {
                        loadPolicy: l,
                        timeout: l.maxLoadTimeMs,
                        maxRetry: 0,
                        retryDelay: 0,
                        maxRetryDelay: 0
                    }
                      , h = {
                        onSuccess: function(t, e, r, i) {
                            a(t.data)
                        },
                        onError: function(e, r, a, l) {
                            s(new rs({
                                type: L.KEY_SYSTEM_ERROR,
                                details: A.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,
                                fatal: !0,
                                networkDetails: a,
                                response: i({
                                    url: o.url,
                                    data: void 0
                                }, e)
                            },'"' + t + '" certificate request failed (' + n + "). Status: " + e.code + " (" + e.text + ")"))
                        },
                        onTimeout: function(e, r, i) {
                            s(new rs({
                                type: L.KEY_SYSTEM_ERROR,
                                details: A.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,
                                fatal: !0,
                                networkDetails: i,
                                response: {
                                    url: o.url,
                                    data: void 0
                                }
                            },'"' + t + '" certificate request timed out (' + n + ")"))
                        },
                        onAbort: function(t, e, r) {
                            s(new Error("aborted"))
                        }
                    };
                    r.load(o, u, h)
                }
                ))) : Promise.resolve()
            }
            ,
            e.setMediaKeysServerCertificate = function(t, e, r) {
                var i = this;
                return new Promise((function(n, a) {
                    t.setServerCertificate(r).then((function(a) {
                        i.log("setServerCertificate " + (a ? "success" : "not supported by CDM") + " (" + (null == r ? void 0 : r.byteLength) + ') on "' + e + '"'),
                        n(t)
                    }
                    )).catch((function(t) {
                        a(new rs({
                            type: L.KEY_SYSTEM_ERROR,
                            details: A.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,
                            error: t,
                            fatal: !0
                        },t.message))
                    }
                    ))
                }
                ))
            }
            ,
            e.renewLicense = function(t, e) {
                var r = this;
                return this.requestLicense(t, new Uint8Array(e)).then((function(e) {
                    return r.updateKeySession(t, new Uint8Array(e)).catch((function(t) {
                        throw new rs({
                            type: L.KEY_SYSTEM_ERROR,
                            details: A.KEY_SYSTEM_SESSION_UPDATE_FAILED,
                            error: t,
                            fatal: !0
                        },t.message)
                    }
                    ))
                }
                ))
            }
            ,
            e.unpackPlayReadyKeyMessage = function(t, e) {
                var r = String.fromCharCode.apply(null, new Uint16Array(e.buffer));
                if (!r.includes("PlayReadyKeyMessage"))
                    return t.setRequestHeader("Content-Type", "text/xml; charset=utf-8"),
                    e;
                var i = (new DOMParser).parseFromString(r, "application/xml")
                  , n = i.querySelectorAll("HttpHeader");
                if (n.length > 0)
                    for (var a, s = 0, o = n.length; s < o; s++) {
                        var l, u, h = null == (l = (a = n[s]).querySelector("name")) ? void 0 : l.textContent, d = null == (u = a.querySelector("value")) ? void 0 : u.textContent;
                        h && d && t.setRequestHeader(h, d)
                    }
                var c = i.querySelector("Challenge")
                  , f = null == c ? void 0 : c.textContent;
                if (!f)
                    throw new Error("Cannot find <Challenge> in key message");
                return W(atob(f))
            }
            ,
            e.setupLicenseXHR = function(t, e, r, i) {
                var n = this
                  , a = this.config.licenseXhrSetup;
                return a ? Promise.resolve().then((function() {
                    if (!r.decryptdata)
                        throw new Error("Key removed");
                    return a.call(n.hls, t, e, r, i)
                }
                )).catch((function(s) {
                    if (!r.decryptdata)
                        throw s;
                    return t.open("POST", e, !0),
                    a.call(n.hls, t, e, r, i)
                }
                )).then((function(r) {
                    return t.readyState || t.open("POST", e, !0),
                    {
                        xhr: t,
                        licenseChallenge: r || i
                    }
                }
                )) : (t.open("POST", e, !0),
                Promise.resolve({
                    xhr: t,
                    licenseChallenge: i
                }))
            }
            ,
            e.requestLicense = function(t, e) {
                var r = this
                  , i = this.config.keyLoadPolicy.default;
                return new Promise((function(n, a) {
                    var s = r.getLicenseServerUrl(t.keySystem);
                    r.log("Sending license request to URL: " + s);
                    var o = new XMLHttpRequest;
                    o.responseType = "arraybuffer",
                    o.onreadystatechange = function() {
                        if (!r.hls || !t.mediaKeysSession)
                            return a(new Error("invalid state"));
                        if (4 === o.readyState)
                            if (200 === o.status) {
                                r._requestLicenseFailureCount = 0;
                                var l = o.response;
                                r.log("License received " + (l instanceof ArrayBuffer ? l.byteLength : l));
                                var u = r.config.licenseResponseCallback;
                                if (u)
                                    try {
                                        l = u.call(r.hls, o, s, t)
                                    } catch (t) {
                                        r.error(t)
                                    }
                                n(l)
                            } else {
                                var h = i.errorRetry
                                  , d = h ? h.maxNumRetry : 0;
                                if (r._requestLicenseFailureCount++,
                                r._requestLicenseFailureCount > d || o.status >= 400 && o.status < 500)
                                    a(new rs({
                                        type: L.KEY_SYSTEM_ERROR,
                                        details: A.KEY_SYSTEM_LICENSE_REQUEST_FAILED,
                                        fatal: !0,
                                        networkDetails: o,
                                        response: {
                                            url: s,
                                            data: void 0,
                                            code: o.status,
                                            text: o.statusText
                                        }
                                    },"License Request XHR failed (" + s + "). Status: " + o.status + " (" + o.statusText + ")"));
                                else {
                                    var c = d - r._requestLicenseFailureCount + 1;
                                    r.warn("Retrying license request, " + c + " attempts left"),
                                    r.requestLicense(t, e).then(n, a)
                                }
                            }
                    }
                    ,
                    t.licenseXhr && t.licenseXhr.readyState !== XMLHttpRequest.DONE && t.licenseXhr.abort(),
                    t.licenseXhr = o,
                    r.setupLicenseXHR(o, s, t, e).then((function(e) {
                        var i = e.xhr
                          , n = e.licenseChallenge;
                        t.keySystem == q.PLAYREADY && (n = r.unpackPlayReadyKeyMessage(i, n)),
                        i.send(n)
                    }
                    ))
                }
                ))
            }
            ,
            e.onMediaAttached = function(t, e) {
                if (this.config.emeEnabled) {
                    var r = e.media;
                    this.media = r,
                    r.addEventListener("encrypted", this.onMediaEncrypted),
                    r.addEventListener("waitingforkey", this.onWaitingForKey)
                }
            }
            ,
            e.onMediaDetached = function() {
                var e = this
                  , r = this.media
                  , i = this.mediaKeySessions;
                r && (r.removeEventListener("encrypted", this.onMediaEncrypted),
                r.removeEventListener("waitingforkey", this.onWaitingForKey),
                this.media = null),
                this._requestLicenseFailureCount = 0,
                this.setMediaKeysQueue = [],
                this.mediaKeySessions = [],
                this.keyIdToKeySessionPromise = {},
                Xt.clearKeyUriToKeyIdMap();
                var n = i.length;
                t.CDMCleanupPromise = Promise.all(i.map((function(t) {
                    return e.removeSession(t)
                }
                )).concat(null == r ? void 0 : r.setMediaKeys(null).catch((function(t) {
                    e.log("Could not clear media keys: " + t)
                }
                )))).then((function() {
                    n && (e.log("finished closing key sessions and clearing media keys"),
                    i.length = 0)
                }
                )).catch((function(t) {
                    e.log("Could not close sessions and clear media keys: " + t)
                }
                ))
            }
            ,
            e.onManifestLoading = function() {
                this.keyFormatPromise = null
            }
            ,
            e.onManifestLoaded = function(t, e) {
                var r = e.sessionKeys;
                if (r && this.config.emeEnabled && !this.keyFormatPromise) {
                    var i = r.reduce((function(t, e) {
                        return -1 === t.indexOf(e.keyFormat) && t.push(e.keyFormat),
                        t
                    }
                    ), []);
                    this.log("Selecting key-system from session-keys " + i.join(", ")),
                    this.keyFormatPromise = this.getKeyFormatPromise(i)
                }
            }
            ,
            e.removeSession = function(t) {
                var e = this
                  , r = t.mediaKeysSession
                  , i = t.licenseXhr;
                if (r) {
                    this.log("Remove licenses and keys and close session " + r.sessionId),
                    t._onmessage && (r.removeEventListener("message", t._onmessage),
                    t._onmessage = void 0),
                    t._onkeystatuseschange && (r.removeEventListener("keystatuseschange", t._onkeystatuseschange),
                    t._onkeystatuseschange = void 0),
                    i && i.readyState !== XMLHttpRequest.DONE && i.abort(),
                    t.mediaKeysSession = t.decryptdata = t.licenseXhr = void 0;
                    var n = this.mediaKeySessions.indexOf(t);
                    return n > -1 && this.mediaKeySessions.splice(n, 1),
                    r.remove().catch((function(t) {
                        e.log("Could not remove session: " + t)
                    }
                    )).then((function() {
                        return r.close()
                    }
                    )).catch((function(t) {
                        e.log("Could not close session: " + t)
                    }
                    ))
                }
            }
            ,
            t
        }();
        Ja.CDMCleanupPromise = void 0;
        var $a, Za, ts, es, rs = function(t) {
            function e(e, r) {
                var i;
                return (i = t.call(this, r) || this).data = void 0,
                e.error || (e.error = new Error(r)),
                i.data = e,
                e.err = e.error,
                i
            }
            return l(e, t),
            e
        }(c(Error));
        !function(t) {
            t.MANIFEST = "m",
            t.AUDIO = "a",
            t.VIDEO = "v",
            t.MUXED = "av",
            t.INIT = "i",
            t.CAPTION = "c",
            t.TIMED_TEXT = "tt",
            t.KEY = "k",
            t.OTHER = "o"
        }($a || ($a = {})),
        function(t) {
            t.DASH = "d",
            t.HLS = "h",
            t.SMOOTH = "s",
            t.OTHER = "o"
        }(Za || (Za = {})),
        function(t) {
            t.OBJECT = "CMCD-Object",
            t.REQUEST = "CMCD-Request",
            t.SESSION = "CMCD-Session",
            t.STATUS = "CMCD-Status"
        }(ts || (ts = {}));
        var is = ((es = {})[ts.OBJECT] = ["br", "d", "ot", "tb"],
        es[ts.REQUEST] = ["bl", "dl", "mtp", "nor", "nrr", "su"],
        es[ts.SESSION] = ["cid", "pr", "sf", "sid", "st", "v"],
        es[ts.STATUS] = ["bs", "rtp"],
        es)
          , ns = function t(e, r) {
            this.value = void 0,
            this.params = void 0,
            Array.isArray(e) && (e = e.map((function(e) {
                return e instanceof t ? e : new t(e)
            }
            ))),
            this.value = e,
            this.params = r
        }
          , as = function(t) {
            this.description = void 0,
            this.description = t
        }
          , ss = "Dict";
        function os(t, e, r, i) {
            return new Error("failed to " + t + ' "' + (n = e,
            (Array.isArray(n) ? JSON.stringify(n) : n instanceof Map ? "Map{}" : n instanceof Set ? "Set{}" : "object" == typeof n ? JSON.stringify(n) : String(n)) + '" as ') + r,{
                cause: i
            });
            var n
        }
        var ls = "Bare Item"
          , us = "Boolean"
          , hs = "Byte Sequence"
          , ds = "Decimal"
          , cs = "Integer"
          , fs = /[\x00-\x1f\x7f]+/
          , gs = "Token"
          , vs = "Key";
        function ms(t, e, r) {
            return os("serialize", t, e, r)
        }
        function ps(t) {
            if (!1 === ArrayBuffer.isView(t))
                throw ms(t, hs);
            return ":" + (e = t,
            btoa(String.fromCharCode.apply(String, e)) + ":");
            var e
        }
        function ys(t) {
            if (function(t) {
                return t < -999999999999999 || 999999999999999 < t
            }(t))
                throw ms(t, cs);
            return t.toString()
        }
        function Es(t, e) {
            if (t < 0)
                return -Es(-t, e);
            var r = Math.pow(10, e);
            if (Math.abs(t * r % 1 - .5) < Number.EPSILON) {
                var i = Math.floor(t * r);
                return (i % 2 == 0 ? i : i + 1) / r
            }
            return Math.round(t * r) / r
        }
        function Ts(t) {
            var e = Es(t, 3);
            if (Math.floor(Math.abs(e)).toString().length > 12)
                throw ms(t, ds);
            var r = e.toString();
            return r.includes(".") ? r : r + ".0"
        }
        var Ss = "String";
        function Ls(t) {
            var e, r = (e = t).description || e.toString().slice(7, -1);
            if (!1 === /^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(r))
                throw ms(r, gs);
            return r
        }
        function As(t) {
            switch (typeof t) {
            case "number":
                if (!y(t))
                    throw ms(t, ls);
                return Number.isInteger(t) ? ys(t) : Ts(t);
            case "string":
                return function(t) {
                    if (fs.test(t))
                        throw ms(t, Ss);
                    return '"' + t.replace(/\\/g, "\\\\").replace(/"/g, '\\"') + '"'
                }(t);
            case "symbol":
                return Ls(t);
            case "boolean":
                return function(t) {
                    if ("boolean" != typeof t)
                        throw ms(t, us);
                    return t ? "?1" : "?0"
                }(t);
            case "object":
                if (t instanceof Date)
                    return function(t) {
                        return "@" + ys(t.getTime() / 1e3)
                    }(t);
                if (t instanceof Uint8Array)
                    return ps(t);
                if (t instanceof as)
                    return Ls(t);
            default:
                throw ms(t, ls)
            }
        }
        function Rs(t) {
            if (!1 === /^[a-z*][a-z0-9\-_.*]*$/.test(t))
                throw ms(t, vs);
            return t
        }
        function ks(t) {
            return null == t ? "" : Object.entries(t).map((function(t) {
                var e = t[0]
                  , r = t[1];
                return !0 === r ? ";" + Rs(e) : ";" + Rs(e) + "=" + As(r)
            }
            )).join("")
        }
        function bs(t) {
            return t instanceof ns ? "" + As(t.value) + ks(t.params) : As(t)
        }
        function Ds(t, e) {
            var r;
            if (void 0 === e && (e = {
                whitespace: !0
            }),
            "object" != typeof t)
                throw ms(t, ss);
            var i = t instanceof Map ? t.entries() : Object.entries(t)
              , n = null != (r = e) && r.whitespace ? " " : "";
            return Array.from(i).map((function(t) {
                var e = t[0]
                  , r = t[1];
                r instanceof ns == 0 && (r = new ns(r));
                var i, n = Rs(e);
                return !0 === r.value ? n += ks(r.params) : (n += "=",
                Array.isArray(r.value) ? n += "(" + (i = r).value.map(bs).join(" ") + ")" + ks(i.params) : n += bs(r)),
                n
            }
            )).join("," + n)
        }
        var Is = function(t) {
            return "ot" === t || "sf" === t || "st" === t
        }
          , ws = function(t) {
            return "number" == typeof t ? y(t) : null != t && "" !== t && !1 !== t
        }
          , Cs = function(t) {
            return Math.round(t)
        }
          , _s = function(t) {
            return 100 * Cs(t / 100)
        }
          , xs = {
            br: Cs,
            d: Cs,
            bl: _s,
            dl: _s,
            mtp: _s,
            nor: function(t, e) {
                return null != e && e.baseUrl && (t = function(t, e) {
                    var r = new URL(t)
                      , i = new URL(e);
                    if (r.origin !== i.origin)
                        return t;
                    for (var n = r.pathname.split("/").slice(1), a = i.pathname.split("/").slice(1, -1); n[0] === a[0]; )
                        n.shift(),
                        a.shift();
                    for (; a.length; )
                        a.shift(),
                        n.unshift("..");
                    return n.join("/")
                }(t, e.baseUrl)),
                encodeURIComponent(t)
            },
            rtp: _s,
            tb: Cs
        };
        function Ps(t, e) {
            return void 0 === e && (e = {}),
            t ? function(t, e) {
                return Ds(t, e)
            }(function(t, e) {
                var r = {};
                if (null == t || "object" != typeof t)
                    return r;
                var i = Object.keys(t).sort()
                  , n = o({}, xs, null == e ? void 0 : e.formatters)
                  , a = null == e ? void 0 : e.filter;
                return i.forEach((function(i) {
                    if (null == a || !a(i)) {
                        var s = t[i]
                          , o = n[i];
                        o && (s = o(s, e)),
                        "v" === i && 1 === s || "pr" == i && 1 === s || ws(s) && (Is(i) && "string" == typeof s && (s = new as(s)),
                        r[i] = s)
                    }
                }
                )),
                r
            }(t, e), o({
                whitespace: !1
            }, e)) : ""
        }
        function Fs(t, e, r) {
            return o(t, function(t, e) {
                var r;
                if (void 0 === e && (e = {}),
                !t)
                    return {};
                var i = Object.entries(t)
                  , n = Object.entries(is).concat(Object.entries((null == (r = e) ? void 0 : r.customHeaderMap) || {}))
                  , a = i.reduce((function(t, e) {
                    var r, i = e[0], a = e[1], s = (null == (r = n.find((function(t) {
                        return t[1].includes(i)
                    }
                    ))) ? void 0 : r[0]) || ts.REQUEST;
                    return null != t[s] || (t[s] = {}),
                    t[s][i] = a,
                    t
                }
                ), {});
                return Object.entries(a).reduce((function(t, r) {
                    var i = r[0]
                      , n = r[1];
                    return t[i] = Ps(n, e),
                    t
                }
                ), {})
            }(e, r))
        }
        var Ms = "CMCD"
          , Os = /CMCD=[^&#]+/;
        function Ns(t, e, r) {
            var i = function(t, e) {
                if (void 0 === e && (e = {}),
                !t)
                    return "";
                var r = Ps(t, e);
                return Ms + "=" + encodeURIComponent(r)
            }(e, r);
            if (!i)
                return t;
            if (Os.test(t))
                return t.replace(Os, i);
            var n = t.includes("?") ? "&" : "?";
            return "" + t + n + i
        }
        var Us = function() {
            function t(t) {
                var e = this;
                this.hls = void 0,
                this.config = void 0,
                this.media = void 0,
                this.sid = void 0,
                this.cid = void 0,
                this.useHeaders = !1,
                this.includeKeys = void 0,
                this.initialized = !1,
                this.starved = !1,
                this.buffering = !0,
                this.audioBuffer = void 0,
                this.videoBuffer = void 0,
                this.onWaiting = function() {
                    e.initialized && (e.starved = !0),
                    e.buffering = !0
                }
                ,
                this.onPlaying = function() {
                    e.initialized || (e.initialized = !0),
                    e.buffering = !1
                }
                ,
                this.applyPlaylistData = function(t) {
                    try {
                        e.apply(t, {
                            ot: $a.MANIFEST,
                            su: !e.initialized
                        })
                    } catch (t) {
                        w.warn("Could not generate manifest CMCD data.", t)
                    }
                }
                ,
                this.applyFragmentData = function(t) {
                    try {
                        var r = t.frag
                          , i = e.hls.levels[r.level]
                          , n = e.getObjectType(r)
                          , a = {
                            d: 1e3 * r.duration,
                            ot: n
                        };
                        n !== $a.VIDEO && n !== $a.AUDIO && n != $a.MUXED || (a.br = i.bitrate / 1e3,
                        a.tb = e.getTopBandwidth(n) / 1e3,
                        a.bl = e.getBufferLength(n)),
                        e.apply(t, a)
                    } catch (t) {
                        w.warn("Could not generate segment CMCD data.", t)
                    }
                }
                ,
                this.hls = t;
                var r = this.config = t.config
                  , i = r.cmcd;
                null != i && (r.pLoader = this.createPlaylistLoader(),
                r.fLoader = this.createFragmentLoader(),
                this.sid = i.sessionId || function() {
                    try {
                        return crypto.randomUUID()
                    } catch (i) {
                        try {
                            var t = URL.createObjectURL(new Blob)
                              , e = t.toString();
                            return URL.revokeObjectURL(t),
                            e.slice(e.lastIndexOf("/") + 1)
                        } catch (t) {
                            var r = (new Date).getTime();
                            return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, (function(t) {
                                var e = (r + 16 * Math.random()) % 16 | 0;
                                return r = Math.floor(r / 16),
                                ("x" == t ? e : 3 & e | 8).toString(16)
                            }
                            ))
                        }
                    }
                }(),
                this.cid = i.contentId,
                this.useHeaders = !0 === i.useHeaders,
                this.includeKeys = i.includeKeys,
                this.registerListeners())
            }
            var e = t.prototype;
            return e.registerListeners = function() {
                var t = this.hls;
                t.on(S.MEDIA_ATTACHED, this.onMediaAttached, this),
                t.on(S.MEDIA_DETACHED, this.onMediaDetached, this),
                t.on(S.BUFFER_CREATED, this.onBufferCreated, this)
            }
            ,
            e.unregisterListeners = function() {
                var t = this.hls;
                t.off(S.MEDIA_ATTACHED, this.onMediaAttached, this),
                t.off(S.MEDIA_DETACHED, this.onMediaDetached, this),
                t.off(S.BUFFER_CREATED, this.onBufferCreated, this)
            }
            ,
            e.destroy = function() {
                this.unregisterListeners(),
                this.onMediaDetached(),
                this.hls = this.config = this.audioBuffer = this.videoBuffer = null,
                this.onWaiting = this.onPlaying = null
            }
            ,
            e.onMediaAttached = function(t, e) {
                this.media = e.media,
                this.media.addEventListener("waiting", this.onWaiting),
                this.media.addEventListener("playing", this.onPlaying)
            }
            ,
            e.onMediaDetached = function() {
                this.media && (this.media.removeEventListener("waiting", this.onWaiting),
                this.media.removeEventListener("playing", this.onPlaying),
                this.media = null)
            }
            ,
            e.onBufferCreated = function(t, e) {
                var r, i;
                this.audioBuffer = null == (r = e.tracks.audio) ? void 0 : r.buffer,
                this.videoBuffer = null == (i = e.tracks.video) ? void 0 : i.buffer
            }
            ,
            e.createData = function() {
                var t;
                return {
                    v: 1,
                    sf: Za.HLS,
                    sid: this.sid,
                    cid: this.cid,
                    pr: null == (t = this.media) ? void 0 : t.playbackRate,
                    mtp: this.hls.bandwidthEstimate / 1e3
                }
            }
            ,
            e.apply = function(t, e) {
                void 0 === e && (e = {}),
                o(e, this.createData());
                var r = e.ot === $a.INIT || e.ot === $a.VIDEO || e.ot === $a.MUXED;
                this.starved && r && (e.bs = !0,
                e.su = !0,
                this.starved = !1),
                null == e.su && (e.su = this.buffering);
                var i = this.includeKeys;
                i && (e = Object.keys(e).reduce((function(t, r) {
                    return i.includes(r) && (t[r] = e[r]),
                    t
                }
                ), {})),
                this.useHeaders ? (t.headers || (t.headers = {}),
                Fs(t.headers, e)) : t.url = Ns(t.url, e)
            }
            ,
            e.getObjectType = function(t) {
                var e = t.type;
                return "subtitle" === e ? $a.TIMED_TEXT : "initSegment" === t.sn ? $a.INIT : "audio" === e ? $a.AUDIO : "main" === e ? this.hls.audioTracks.length ? $a.VIDEO : $a.MUXED : void 0
            }
            ,
            e.getTopBandwidth = function(t) {
                var e, r = 0, i = this.hls;
                if (t === $a.AUDIO)
                    e = i.audioTracks;
                else {
                    var n = i.maxAutoLevel
                      , a = n > -1 ? n + 1 : i.levels.length;
                    e = i.levels.slice(0, a)
                }
                for (var s, o = g(e); !(s = o()).done; ) {
                    var l = s.value;
                    l.bitrate > r && (r = l.bitrate)
                }
                return r > 0 ? r : NaN
            }
            ,
            e.getBufferLength = function(t) {
                var e = this.hls.media
                  , r = t === $a.AUDIO ? this.audioBuffer : this.videoBuffer;
                return r && e ? 1e3 * Qr.bufferInfo(r, e.currentTime, this.config.maxBufferHole).len : NaN
            }
            ,
            e.createPlaylistLoader = function() {
                var t = this.config.pLoader
                  , e = this.applyPlaylistData
                  , r = t || this.config.loader;
                return function() {
                    function t(t) {
                        this.loader = void 0,
                        this.loader = new r(t)
                    }
                    var i = t.prototype;
                    return i.destroy = function() {
                        this.loader.destroy()
                    }
                    ,
                    i.abort = function() {
                        this.loader.abort()
                    }
                    ,
                    i.load = function(t, r, i) {
                        e(t),
                        this.loader.load(t, r, i)
                    }
                    ,
                    s(t, [{
                        key: "stats",
                        get: function() {
                            return this.loader.stats
                        }
                    }, {
                        key: "context",
                        get: function() {
                            return this.loader.context
                        }
                    }]),
                    t
                }()
            }
            ,
            e.createFragmentLoader = function() {
                var t = this.config.fLoader
                  , e = this.applyFragmentData
                  , r = t || this.config.loader;
                return function() {
                    function t(t) {
                        this.loader = void 0,
                        this.loader = new r(t)
                    }
                    var i = t.prototype;
                    return i.destroy = function() {
                        this.loader.destroy()
                    }
                    ,
                    i.abort = function() {
                        this.loader.abort()
                    }
                    ,
                    i.load = function(t, r, i) {
                        e(t),
                        this.loader.load(t, r, i)
                    }
                    ,
                    s(t, [{
                        key: "stats",
                        get: function() {
                            return this.loader.stats
                        }
                    }, {
                        key: "context",
                        get: function() {
                            return this.loader.context
                        }
                    }]),
                    t
                }()
            }
            ,
            t
        }()
          , Bs = function() {
            function t(t) {
                this.hls = void 0,
                this.log = void 0,
                this.loader = null,
                this.uri = null,
                this.pathwayId = ".",
                this.pathwayPriority = null,
                this.timeToLoad = 300,
                this.reloadTimer = -1,
                this.updated = 0,
                this.started = !1,
                this.enabled = !0,
                this.levels = null,
                this.audioTracks = null,
                this.subtitleTracks = null,
                this.penalizedPathways = {},
                this.hls = t,
                this.log = w.log.bind(w, "[content-steering]:"),
                this.registerListeners()
            }
            var e = t.prototype;
            return e.registerListeners = function() {
                var t = this.hls;
                t.on(S.MANIFEST_LOADING, this.onManifestLoading, this),
                t.on(S.MANIFEST_LOADED, this.onManifestLoaded, this),
                t.on(S.MANIFEST_PARSED, this.onManifestParsed, this),
                t.on(S.ERROR, this.onError, this)
            }
            ,
            e.unregisterListeners = function() {
                var t = this.hls;
                t && (t.off(S.MANIFEST_LOADING, this.onManifestLoading, this),
                t.off(S.MANIFEST_LOADED, this.onManifestLoaded, this),
                t.off(S.MANIFEST_PARSED, this.onManifestParsed, this),
                t.off(S.ERROR, this.onError, this))
            }
            ,
            e.startLoad = function() {
                if (this.started = !0,
                this.clearTimeout(),
                this.enabled && this.uri) {
                    if (this.updated) {
                        var t = 1e3 * this.timeToLoad - (performance.now() - this.updated);
                        if (t > 0)
                            return void this.scheduleRefresh(this.uri, t)
                    }
                    this.loadSteeringManifest(this.uri)
                }
            }
            ,
            e.stopLoad = function() {
                this.started = !1,
                this.loader && (this.loader.destroy(),
                this.loader = null),
                this.clearTimeout()
            }
            ,
            e.clearTimeout = function() {
                -1 !== this.reloadTimer && (self.clearTimeout(this.reloadTimer),
                this.reloadTimer = -1)
            }
            ,
            e.destroy = function() {
                this.unregisterListeners(),
                this.stopLoad(),
                this.hls = null,
                this.levels = this.audioTracks = this.subtitleTracks = null
            }
            ,
            e.removeLevel = function(t) {
                var e = this.levels;
                e && (this.levels = e.filter((function(e) {
                    return e !== t
                }
                )))
            }
            ,
            e.onManifestLoading = function() {
                this.stopLoad(),
                this.enabled = !0,
                this.timeToLoad = 300,
                this.updated = 0,
                this.uri = null,
                this.pathwayId = ".",
                this.levels = this.audioTracks = this.subtitleTracks = null
            }
            ,
            e.onManifestLoaded = function(t, e) {
                var r = e.contentSteering;
                null !== r && (this.pathwayId = r.pathwayId,
                this.uri = r.uri,
                this.started && this.startLoad())
            }
            ,
            e.onManifestParsed = function(t, e) {
                this.audioTracks = e.audioTracks,
                this.subtitleTracks = e.subtitleTracks
            }
            ,
            e.onError = function(t, e) {
                var r = e.errorAction;
                if ((null == r ? void 0 : r.action) === Sr && r.flags === kr) {
                    var i = this.levels
                      , n = this.pathwayPriority
                      , a = this.pathwayId;
                    if (e.context) {
                        var s = e.context
                          , o = s.groupId
                          , l = s.pathwayId
                          , u = s.type;
                        o && i ? a = this.getPathwayForGroupId(o, u, a) : l && (a = l)
                    }
                    a in this.penalizedPathways || (this.penalizedPathways[a] = performance.now()),
                    !n && i && (n = i.reduce((function(t, e) {
                        return -1 === t.indexOf(e.pathwayId) && t.push(e.pathwayId),
                        t
                    }
                    ), [])),
                    n && n.length > 1 && (this.updatePathwayPriority(n),
                    r.resolved = this.pathwayId !== a),
                    r.resolved || w.warn("Could not resolve " + e.details + ' ("' + e.error.message + '") with content-steering for Pathway: ' + a + " levels: " + (i ? i.length : i) + " priorities: " + JSON.stringify(n) + " penalized: " + JSON.stringify(this.penalizedPathways))
                }
            }
            ,
            e.filterParsedLevels = function(t) {
                this.levels = t;
                var e = this.getLevelsForPathway(this.pathwayId);
                if (0 === e.length) {
                    var r = t[0].pathwayId;
                    this.log("No levels found in Pathway " + this.pathwayId + '. Setting initial Pathway to "' + r + '"'),
                    e = this.getLevelsForPathway(r),
                    this.pathwayId = r
                }
                return e.length !== t.length ? (this.log("Found " + e.length + "/" + t.length + ' levels in Pathway "' + this.pathwayId + '"'),
                e) : t
            }
            ,
            e.getLevelsForPathway = function(t) {
                return null === this.levels ? [] : this.levels.filter((function(e) {
                    return t === e.pathwayId
                }
                ))
            }
            ,
            e.updatePathwayPriority = function(t) {
                var e;
                this.pathwayPriority = t;
                var r = this.penalizedPathways
                  , i = performance.now();
                Object.keys(r).forEach((function(t) {
                    i - r[t] > 3e5 && delete r[t]
                }
                ));
                for (var n = 0; n < t.length; n++) {
                    var a = t[n];
                    if (!(a in r)) {
                        if (a === this.pathwayId)
                            return;
                        var s = this.hls.nextLoadLevel
                          , o = this.hls.levels[s];
                        if ((e = this.getLevelsForPathway(a)).length > 0) {
                            this.log('Setting Pathway to "' + a + '"'),
                            this.pathwayId = a,
                            hr(e),
                            this.hls.trigger(S.LEVELS_UPDATED, {
                                levels: e
                            });
                            var l = this.hls.levels[s];
                            o && l && this.levels && (l.attrs["STABLE-VARIANT-ID"] !== o.attrs["STABLE-VARIANT-ID"] && l.bitrate !== o.bitrate && this.log("Unstable Pathways change from bitrate " + o.bitrate + " to " + l.bitrate),
                            this.hls.nextLoadLevel = s);
                            break
                        }
                    }
                }
            }
            ,
            e.getPathwayForGroupId = function(t, e, r) {
                for (var i = this.getLevelsForPathway(r).concat(this.levels || []), n = 0; n < i.length; n++)
                    if (e === De && i[n].hasAudioGroup(t) || e === Ie && i[n].hasSubtitleGroup(t))
                        return i[n].pathwayId;
                return r
            }
            ,
            e.clonePathways = function(t) {
                var e = this
                  , r = this.levels;
                if (r) {
                    var i = {}
                      , n = {};
                    t.forEach((function(t) {
                        var a = t.ID
                          , s = t["BASE-ID"]
                          , o = t["URI-REPLACEMENT"];
                        if (!r.some((function(t) {
                            return t.pathwayId === a
                        }
                        ))) {
                            var l = e.getLevelsForPathway(s).map((function(t) {
                                var e = new x(t.attrs);
                                e["PATHWAY-ID"] = a;
                                var r = e.AUDIO && e.AUDIO + "_clone_" + a
                                  , s = e.SUBTITLES && e.SUBTITLES + "_clone_" + a;
                                r && (i[e.AUDIO] = r,
                                e.AUDIO = r),
                                s && (n[e.SUBTITLES] = s,
                                e.SUBTITLES = s);
                                var l = Ks(t.uri, e["STABLE-VARIANT-ID"], "PER-VARIANT-URIS", o)
                                  , u = new er({
                                    attrs: e,
                                    audioCodec: t.audioCodec,
                                    bitrate: t.bitrate,
                                    height: t.height,
                                    name: t.name,
                                    url: l,
                                    videoCodec: t.videoCodec,
                                    width: t.width
                                });
                                if (t.audioGroups)
                                    for (var h = 1; h < t.audioGroups.length; h++)
                                        u.addGroupId("audio", t.audioGroups[h] + "_clone_" + a);
                                if (t.subtitleGroups)
                                    for (var d = 1; d < t.subtitleGroups.length; d++)
                                        u.addGroupId("text", t.subtitleGroups[d] + "_clone_" + a);
                                return u
                            }
                            ));
                            r.push.apply(r, l),
                            Gs(e.audioTracks, i, o, a),
                            Gs(e.subtitleTracks, n, o, a)
                        }
                    }
                    ))
                }
            }
            ,
            e.loadSteeringManifest = function(t) {
                var e, r = this, i = this.hls.config, n = i.loader;
                this.loader && this.loader.destroy(),
                this.loader = new n(i);
                try {
                    e = new self.URL(t)
                } catch (e) {
                    return this.enabled = !1,
                    void this.log("Failed to parse Steering Manifest URI: " + t)
                }
                if ("data:" !== e.protocol) {
                    var a = 0 | (this.hls.bandwidthEstimate || i.abrEwmaDefaultEstimate);
                    e.searchParams.set("_HLS_pathway", this.pathwayId),
                    e.searchParams.set("_HLS_throughput", "" + a)
                }
                var s = {
                    responseType: "json",
                    url: e.href
                }
                  , o = i.steeringManifestLoadPolicy.default
                  , l = o.errorRetry || o.timeoutRetry || {}
                  , u = {
                    loadPolicy: o,
                    timeout: o.maxLoadTimeMs,
                    maxRetry: l.maxNumRetry || 0,
                    retryDelay: l.retryDelayMs || 0,
                    maxRetryDelay: l.maxRetryDelayMs || 0
                }
                  , h = {
                    onSuccess: function(t, i, n, a) {
                        r.log('Loaded steering manifest: "' + e + '"');
                        var s = t.data;
                        if (1 === s.VERSION) {
                            r.updated = performance.now(),
                            r.timeToLoad = s.TTL;
                            var o = s["RELOAD-URI"]
                              , l = s["PATHWAY-CLONES"]
                              , u = s["PATHWAY-PRIORITY"];
                            if (o)
                                try {
                                    r.uri = new self.URL(o,e).href
                                } catch (t) {
                                    return r.enabled = !1,
                                    void r.log("Failed to parse Steering Manifest RELOAD-URI: " + o)
                                }
                            r.scheduleRefresh(r.uri || n.url),
                            l && r.clonePathways(l);
                            var h = {
                                steeringManifest: s,
                                url: e.toString()
                            };
                            r.hls.trigger(S.STEERING_MANIFEST_LOADED, h),
                            u && r.updatePathwayPriority(u)
                        } else
                            r.log("Steering VERSION " + s.VERSION + " not supported!")
                    },
                    onError: function(t, e, i, n) {
                        if (r.log("Error loading steering manifest: " + t.code + " " + t.text + " (" + e.url + ")"),
                        r.stopLoad(),
                        410 === t.code)
                            return r.enabled = !1,
                            void r.log("Steering manifest " + e.url + " no longer available");
                        var a = 1e3 * r.timeToLoad;
                        if (429 !== t.code)
                            r.scheduleRefresh(r.uri || e.url, a);
                        else {
                            var s = r.loader;
                            if ("function" == typeof (null == s ? void 0 : s.getResponseHeader)) {
                                var o = s.getResponseHeader("Retry-After");
                                o && (a = 1e3 * parseFloat(o))
                            }
                            r.log("Steering manifest " + e.url + " rate limited")
                        }
                    },
                    onTimeout: function(t, e, i) {
                        r.log("Timeout loading steering manifest (" + e.url + ")"),
                        r.scheduleRefresh(r.uri || e.url)
                    }
                };
                this.log("Requesting steering manifest: " + e),
                this.loader.load(s, u, h)
            }
            ,
            e.scheduleRefresh = function(t, e) {
                var r = this;
                void 0 === e && (e = 1e3 * this.timeToLoad),
                this.clearTimeout(),
                this.reloadTimer = self.setTimeout((function() {
                    var e, i = null == (e = r.hls) ? void 0 : e.media;
                    !i || i.ended ? r.scheduleRefresh(t, 1e3 * r.timeToLoad) : r.loadSteeringManifest(t)
                }
                ), e)
            }
            ,
            t
        }();
        function Gs(t, e, r, i) {
            t && Object.keys(e).forEach((function(n) {
                var a = t.filter((function(t) {
                    return t.groupId === n
                }
                )).map((function(t) {
                    var a = o({}, t);
                    return a.details = void 0,
                    a.attrs = new x(a.attrs),
                    a.url = a.attrs.URI = Ks(t.url, t.attrs["STABLE-RENDITION-ID"], "PER-RENDITION-URIS", r),
                    a.groupId = a.attrs["GROUP-ID"] = e[n],
                    a.attrs["PATHWAY-ID"] = i,
                    a
                }
                ));
                t.push.apply(t, a)
            }
            ))
        }
        function Ks(t, e, r, i) {
            var n, a = i.HOST, s = i.PARAMS, o = i[r];
            e && (n = null == o ? void 0 : o[e]) && (t = n);
            var l = new self.URL(t);
            return a && !n && (l.host = a),
            s && Object.keys(s).sort().forEach((function(t) {
                t && l.searchParams.set(t, s[t])
            }
            )),
            l.href
        }
        var Hs = /^age:\s*[\d.]+\s*$/im
          , Vs = function() {
            function t(t) {
                this.xhrSetup = void 0,
                this.requestTimeout = void 0,
                this.retryTimeout = void 0,
                this.retryDelay = void 0,
                this.config = null,
                this.callbacks = null,
                this.context = null,
                this.loader = null,
                this.stats = void 0,
                this.xhrSetup = t && t.xhrSetup || null,
                this.stats = new M,
                this.retryDelay = 0
            }
            var e = t.prototype;
            return e.destroy = function() {
                this.callbacks = null,
                this.abortInternal(),
                this.loader = null,
                this.config = null,
                this.context = null,
                this.xhrSetup = null,
                this.stats = null
            }
            ,
            e.abortInternal = function() {
                var t = this.loader;
                self.clearTimeout(this.requestTimeout),
                self.clearTimeout(this.retryTimeout),
                t && (t.onreadystatechange = null,
                t.onprogress = null,
                4 !== t.readyState && (this.stats.aborted = !0,
                t.abort()))
            }
            ,
            e.abort = function() {
                var t;
                this.abortInternal(),
                null != (t = this.callbacks) && t.onAbort && this.callbacks.onAbort(this.stats, this.context, this.loader)
            }
            ,
            e.load = function(t, e, r) {
                if (this.stats.loading.start)
                    throw new Error("Loader can only be used once.");
                this.stats.loading.start = self.performance.now(),
                this.context = t,
                this.config = e,
                this.callbacks = r,
                this.loadInternal()
            }
            ,
            e.loadInternal = function() {
                var t = this
                  , e = this.config
                  , r = this.context;
                if (e && r) {
                    var i = this.loader = new self.XMLHttpRequest
                      , n = this.stats;
                    n.loading.first = 0,
                    n.loaded = 0,
                    n.aborted = !1;
                    var a = this.xhrSetup;
                    a ? Promise.resolve().then((function() {
                        if (!t.stats.aborted)
                            return a(i, r.url)
                    }
                    )).catch((function(t) {
                        return i.open("GET", r.url, !0),
                        a(i, r.url)
                    }
                    )).then((function() {
                        t.stats.aborted || t.openAndSendXhr(i, r, e)
                    }
                    )).catch((function(e) {
                        t.callbacks.onError({
                            code: i.status,
                            text: e.message
                        }, r, i, n)
                    }
                    )) : this.openAndSendXhr(i, r, e)
                }
            }
            ,
            e.openAndSendXhr = function(t, e, r) {
                t.readyState || t.open("GET", e.url, !0);
                var i = e.headers
                  , n = r.loadPolicy
                  , a = n.maxTimeToFirstByteMs
                  , s = n.maxLoadTimeMs;
                if (i)
                    for (var o in i)
                        t.setRequestHeader(o, i[o]);
                e.rangeEnd && t.setRequestHeader("Range", "bytes=" + e.rangeStart + "-" + (e.rangeEnd - 1)),
                t.onreadystatechange = this.readystatechange.bind(this),
                t.onprogress = this.loadprogress.bind(this),
                t.responseType = e.responseType,
                self.clearTimeout(this.requestTimeout),
                r.timeout = a && y(a) ? a : s,
                this.requestTimeout = self.setTimeout(this.loadtimeout.bind(this), r.timeout),
                t.send()
            }
            ,
            e.readystatechange = function() {
                var t = this.context
                  , e = this.loader
                  , r = this.stats;
                if (t && e) {
                    var i = e.readyState
                      , n = this.config;
                    if (!r.aborted && i >= 2 && (0 === r.loading.first && (r.loading.first = Math.max(self.performance.now(), r.loading.start),
                    n.timeout !== n.loadPolicy.maxLoadTimeMs && (self.clearTimeout(this.requestTimeout),
                    n.timeout = n.loadPolicy.maxLoadTimeMs,
                    this.requestTimeout = self.setTimeout(this.loadtimeout.bind(this), n.loadPolicy.maxLoadTimeMs - (r.loading.first - r.loading.start)))),
                    4 === i)) {
                        self.clearTimeout(this.requestTimeout),
                        e.onreadystatechange = null,
                        e.onprogress = null;
                        var a = e.status
                          , s = "text" !== e.responseType;
                        if (a >= 200 && a < 300 && (s && e.response || null !== e.responseText)) {
                            r.loading.end = Math.max(self.performance.now(), r.loading.first);
                            var o = s ? e.response : e.responseText
                              , l = "arraybuffer" === e.responseType ? o.byteLength : o.length;
                            if (r.loaded = r.total = l,
                            r.bwEstimate = 8e3 * r.total / (r.loading.end - r.loading.first),
                            !this.callbacks)
                                return;
                            var u = this.callbacks.onProgress;
                            if (u && u(r, t, o, e),
                            !this.callbacks)
                                return;
                            var h = {
                                url: e.responseURL,
                                data: o,
                                code: a
                            };
                            this.callbacks.onSuccess(h, r, t, e)
                        } else {
                            var d = n.loadPolicy.errorRetry;
                            vr(d, r.retry, !1, {
                                url: t.url,
                                data: void 0,
                                code: a
                            }) ? this.retry(d) : (w.error(a + " while loading " + t.url),
                            this.callbacks.onError({
                                code: a,
                                text: e.statusText
                            }, t, e, r))
                        }
                    }
                }
            }
            ,
            e.loadtimeout = function() {
                var t, e = null == (t = this.config) ? void 0 : t.loadPolicy.timeoutRetry;
                if (vr(e, this.stats.retry, !0))
                    this.retry(e);
                else {
                    var r;
                    w.warn("timeout while loading " + (null == (r = this.context) ? void 0 : r.url));
                    var i = this.callbacks;
                    i && (this.abortInternal(),
                    i.onTimeout(this.stats, this.context, this.loader))
                }
            }
            ,
            e.retry = function(t) {
                var e = this.context
                  , r = this.stats;
                this.retryDelay = fr(t, r.retry),
                r.retry++,
                w.warn((status ? "HTTP Status " + status : "Timeout") + " while loading " + (null == e ? void 0 : e.url) + ", retrying " + r.retry + "/" + t.maxNumRetry + " in " + this.retryDelay + "ms"),
                this.abortInternal(),
                this.loader = null,
                self.clearTimeout(this.retryTimeout),
                this.retryTimeout = self.setTimeout(this.loadInternal.bind(this), this.retryDelay)
            }
            ,
            e.loadprogress = function(t) {
                var e = this.stats;
                e.loaded = t.loaded,
                t.lengthComputable && (e.total = t.total)
            }
            ,
            e.getCacheAge = function() {
                var t = null;
                if (this.loader && Hs.test(this.loader.getAllResponseHeaders())) {
                    var e = this.loader.getResponseHeader("age");
                    t = e ? parseFloat(e) : null
                }
                return t
            }
            ,
            e.getResponseHeader = function(t) {
                return this.loader && new RegExp("^" + t + ":\\s*[\\d.]+\\s*$","im").test(this.loader.getAllResponseHeaders()) ? this.loader.getResponseHeader(t) : null
            }
            ,
            t
        }()
          , Ys = /(\d+)-(\d+)\/(\d+)/
          , Ws = function() {
            function t(t) {
                this.fetchSetup = void 0,
                this.requestTimeout = void 0,
                this.request = null,
                this.response = null,
                this.controller = void 0,
                this.context = null,
                this.config = null,
                this.callbacks = null,
                this.stats = void 0,
                this.loader = null,
                this.fetchSetup = t.fetchSetup || js,
                this.controller = new self.AbortController,
                this.stats = new M
            }
            var e = t.prototype;
            return e.destroy = function() {
                this.loader = this.callbacks = this.context = this.config = this.request = null,
                this.abortInternal(),
                this.response = null,
                this.fetchSetup = this.controller = this.stats = null
            }
            ,
            e.abortInternal = function() {
                this.controller && !this.stats.loading.end && (this.stats.aborted = !0,
                this.controller.abort())
            }
            ,
            e.abort = function() {
                var t;
                this.abortInternal(),
                null != (t = this.callbacks) && t.onAbort && this.callbacks.onAbort(this.stats, this.context, this.response)
            }
            ,
            e.load = function(t, e, r) {
                var i = this
                  , n = this.stats;
                if (n.loading.start)
                    throw new Error("Loader can only be used once.");
                n.loading.start = self.performance.now();
                var a = function(t, e) {
                    var r = {
                        method: "GET",
                        mode: "cors",
                        credentials: "same-origin",
                        signal: e,
                        headers: new self.Headers(o({}, t.headers))
                    };
                    return t.rangeEnd && r.headers.set("Range", "bytes=" + t.rangeStart + "-" + String(t.rangeEnd - 1)),
                    r
                }(t, this.controller.signal)
                  , s = r.onProgress
                  , l = "arraybuffer" === t.responseType
                  , u = l ? "byteLength" : "length"
                  , h = e.loadPolicy
                  , d = h.maxTimeToFirstByteMs
                  , c = h.maxLoadTimeMs;
                this.context = t,
                this.config = e,
                this.callbacks = r,
                this.request = this.fetchSetup(t, a),
                self.clearTimeout(this.requestTimeout),
                e.timeout = d && y(d) ? d : c,
                this.requestTimeout = self.setTimeout((function() {
                    i.abortInternal(),
                    r.onTimeout(n, t, i.response)
                }
                ), e.timeout),
                self.fetch(this.request).then((function(a) {
                    i.response = i.loader = a;
                    var o = Math.max(self.performance.now(), n.loading.start);
                    if (self.clearTimeout(i.requestTimeout),
                    e.timeout = c,
                    i.requestTimeout = self.setTimeout((function() {
                        i.abortInternal(),
                        r.onTimeout(n, t, i.response)
                    }
                    ), c - (o - n.loading.start)),
                    !a.ok) {
                        var u = a.status
                          , h = a.statusText;
                        throw new Xs(h || "fetch, bad network response",u,a)
                    }
                    return n.loading.first = o,
                    n.total = function(t) {
                        var e = t.get("Content-Range");
                        if (e) {
                            var r = function(t) {
                                var e = Ys.exec(t);
                                if (e)
                                    return parseInt(e[2]) - parseInt(e[1]) + 1
                            }(e);
                            if (y(r))
                                return r
                        }
                        var i = t.get("Content-Length");
                        if (i)
                            return parseInt(i)
                    }(a.headers) || n.total,
                    s && y(e.highWaterMark) ? i.loadProgressively(a, n, t, e.highWaterMark, s) : l ? a.arrayBuffer() : "json" === t.responseType ? a.json() : a.text()
                }
                )).then((function(a) {
                    var o = i.response;
                    if (!o)
                        throw new Error("loader destroyed");
                    self.clearTimeout(i.requestTimeout),
                    n.loading.end = Math.max(self.performance.now(), n.loading.first);
                    var l = a[u];
                    l && (n.loaded = n.total = l);
                    var h = {
                        url: o.url,
                        data: a,
                        code: o.status
                    };
                    s && !y(e.highWaterMark) && s(n, t, a, o),
                    r.onSuccess(h, n, t, o)
                }
                )).catch((function(e) {
                    if (self.clearTimeout(i.requestTimeout),
                    !n.aborted) {
                        var a = e && e.code || 0
                          , s = e ? e.message : null;
                        r.onError({
                            code: a,
                            text: s
                        }, t, e ? e.details : null, n)
                    }
                }
                ))
            }
            ,
            e.getCacheAge = function() {
                var t = null;
                if (this.response) {
                    var e = this.response.headers.get("age");
                    t = e ? parseFloat(e) : null
                }
                return t
            }
            ,
            e.getResponseHeader = function(t) {
                return this.response ? this.response.headers.get(t) : null
            }
            ,
            e.loadProgressively = function(t, e, r, i, n) {
                void 0 === i && (i = 0);
                var a = new bi
                  , s = t.body.getReader();
                return function o() {
                    return s.read().then((function(s) {
                        if (s.done)
                            return a.dataLength && n(e, r, a.flush(), t),
                            Promise.resolve(new ArrayBuffer(0));
                        var l = s.value
                          , u = l.length;
                        return e.loaded += u,
                        u < i || a.dataLength ? (a.push(l),
                        a.dataLength >= i && n(e, r, a.flush(), t)) : n(e, r, l, t),
                        o()
                    }
                    )).catch((function() {
                        return Promise.reject()
                    }
                    ))
                }()
            }
            ,
            t
        }();
        function js(t, e) {
            return new self.Request(t.url,e)
        }
        var qs, Xs = function(t) {
            function e(e, r, i) {
                var n;
                return (n = t.call(this, e) || this).code = void 0,
                n.details = void 0,
                n.code = r,
                n.details = i,
                n
            }
            return l(e, t),
            e
        }(c(Error)), zs = /\s/, Qs = i(i({
            autoStartLoad: !0,
            startPosition: -1,
            defaultAudioCodec: void 0,
            debug: !1,
            capLevelOnFPSDrop: !1,
            capLevelToPlayerSize: !1,
            ignoreDevicePixelRatio: !1,
            preferManagedMediaSource: !0,
            initialLiveManifestSize: 1,
            maxBufferLength: 30,
            backBufferLength: 1 / 0,
            frontBufferFlushThreshold: 1 / 0,
            maxBufferSize: 6e7,
            maxBufferHole: .1,
            highBufferWatchdogPeriod: 2,
            nudgeOffset: .1,
            nudgeMaxRetry: 3,
            maxFragLookUpTolerance: .25,
            liveSyncDurationCount: 3,
            liveMaxLatencyDurationCount: 1 / 0,
            liveSyncDuration: void 0,
            liveMaxLatencyDuration: void 0,
            maxLiveSyncPlaybackRate: 1,
            liveDurationInfinity: !1,
            liveBackBufferLength: null,
            maxMaxBufferLength: 600,
            enableWorker: !0,
            workerPath: null,
            enableSoftwareAES: !0,
            startLevel: void 0,
            startFragPrefetch: !1,
            fpsDroppedMonitoringPeriod: 5e3,
            fpsDroppedMonitoringThreshold: .2,
            appendErrorMaxRetry: 3,
            loader: Vs,
            fLoader: void 0,
            pLoader: void 0,
            xhrSetup: void 0,
            licenseXhrSetup: void 0,
            licenseResponseCallback: void 0,
            abrController: Gr,
            bufferController: Jn,
            capLevelController: Xa,
            errorController: Dr,
            fpsController: za,
            stretchShortVideoTrack: !1,
            maxAudioFramesDrift: 1,
            forceKeyFrameOnDiscontinuity: !0,
            abrEwmaFastLive: 3,
            abrEwmaSlowLive: 9,
            abrEwmaFastVoD: 3,
            abrEwmaSlowVoD: 9,
            abrEwmaDefaultEstimate: 5e5,
            abrEwmaDefaultEstimateMax: 5e6,
            abrBandWidthFactor: .95,
            abrBandWidthUpFactor: .7,
            abrMaxWithRealBitrate: !1,
            maxStarvationDelay: 4,
            maxLoadingDelay: 4,
            minAutoBitrate: 0,
            emeEnabled: !1,
            widevineLicenseUrl: void 0,
            drmSystems: {},
            drmSystemOptions: {},
            requestMediaKeySystemAccessFunc: it,
            testBandwidth: !0,
            progressive: !1,
            lowLatencyMode: !0,
            cmcd: void 0,
            enableDateRangeMetadataCues: !0,
            enableEmsgMetadataCues: !0,
            enableID3MetadataCues: !0,
            useMediaCapabilities: !0,
            certLoadPolicy: {
                default: {
                    maxTimeToFirstByteMs: 8e3,
                    maxLoadTimeMs: 2e4,
                    timeoutRetry: null,
                    errorRetry: null
                }
            },
            keyLoadPolicy: {
                default: {
                    maxTimeToFirstByteMs: 8e3,
                    maxLoadTimeMs: 2e4,
                    timeoutRetry: {
                        maxNumRetry: 1,
                        retryDelayMs: 1e3,
                        maxRetryDelayMs: 2e4,
                        backoff: "linear"
                    },
                    errorRetry: {
                        maxNumRetry: 8,
                        retryDelayMs: 1e3,
                        maxRetryDelayMs: 2e4,
                        backoff: "linear"
                    }
                }
            },
            manifestLoadPolicy: {
                default: {
                    maxTimeToFirstByteMs: 1 / 0,
                    maxLoadTimeMs: 2e4,
                    timeoutRetry: {
                        maxNumRetry: 2,
                        retryDelayMs: 0,
                        maxRetryDelayMs: 0
                    },
                    errorRetry: {
                        maxNumRetry: 1,
                        retryDelayMs: 1e3,
                        maxRetryDelayMs: 8e3
                    }
                }
            },
            playlistLoadPolicy: {
                default: {
                    maxTimeToFirstByteMs: 1e4,
                    maxLoadTimeMs: 2e4,
                    timeoutRetry: {
                        maxNumRetry: 2,
                        retryDelayMs: 0,
                        maxRetryDelayMs: 0
                    },
                    errorRetry: {
                        maxNumRetry: 2,
                        retryDelayMs: 1e3,
                        maxRetryDelayMs: 8e3
                    }
                }
            },
            fragLoadPolicy: {
                default: {
                    maxTimeToFirstByteMs: 1e4,
                    maxLoadTimeMs: 12e4,
                    timeoutRetry: {
                        maxNumRetry: 4,
                        retryDelayMs: 0,
                        maxRetryDelayMs: 0
                    },
                    errorRetry: {
                        maxNumRetry: 6,
                        retryDelayMs: 1e3,
                        maxRetryDelayMs: 8e3
                    }
                }
            },
            steeringManifestLoadPolicy: {
                default: {
                    maxTimeToFirstByteMs: 1e4,
                    maxLoadTimeMs: 2e4,
                    timeoutRetry: {
                        maxNumRetry: 2,
                        retryDelayMs: 0,
                        maxRetryDelayMs: 0
                    },
                    errorRetry: {
                        maxNumRetry: 1,
                        retryDelayMs: 1e3,
                        maxRetryDelayMs: 8e3
                    }
                }
            },
            manifestLoadingTimeOut: 1e4,
            manifestLoadingMaxRetry: 1,
            manifestLoadingRetryDelay: 1e3,
            manifestLoadingMaxRetryTimeout: 64e3,
            levelLoadingTimeOut: 1e4,
            levelLoadingMaxRetry: 4,
            levelLoadingRetryDelay: 1e3,
            levelLoadingMaxRetryTimeout: 64e3,
            fragLoadingTimeOut: 2e4,
            fragLoadingMaxRetry: 6,
            fragLoadingRetryDelay: 1e3,
            fragLoadingMaxRetryTimeout: 64e3
        }, {
            cueHandler: {
                newCue: function(t, e, r, i) {
                    for (var n, a, s, o, l, u = [], h = self.VTTCue || self.TextTrackCue, d = 0; d < i.rows.length; d++)
                        if (s = !0,
                        o = 0,
                        l = "",
                        !(n = i.rows[d]).isEmpty()) {
                            for (var c, f = 0; f < n.chars.length; f++)
                                zs.test(n.chars[f].uchar) && s ? o++ : (l += n.chars[f].uchar,
                                s = !1);
                            n.cueStartTime = e,
                            e === r && (r += 1e-4),
                            o >= 16 ? o-- : o++;
                            var g = Da(l.trim())
                              , v = xa(e, r, g);
                            null != t && null != (c = t.cues) && c.getCueById(v) || ((a = new h(e,r,g)).id = v,
                            a.line = d + 1,
                            a.align = "left",
                            a.position = 10 + Math.min(80, 10 * Math.floor(8 * o / 32)),
                            u.push(a))
                        }
                    return t && u.length && (u.sort((function(t, e) {
                        return "auto" === t.line || "auto" === e.line ? 0 : t.line > 8 && e.line > 8 ? e.line - t.line : t.line - e.line
                    }
                    )),
                    u.forEach((function(e) {
                        return Oe(t, e)
                    }
                    ))),
                    u
                }
            },
            enableWebVTT: !0,
            enableIMSC1: !0,
            enableCEA708Captions: !0,
            captionsTextTrack1Label: "English",
            captionsTextTrack1LanguageCode: "en",
            captionsTextTrack2Label: "Spanish",
            captionsTextTrack2LanguageCode: "es",
            captionsTextTrack3Label: "Unknown CC",
            captionsTextTrack3LanguageCode: "",
            captionsTextTrack4Label: "Unknown CC",
            captionsTextTrack4LanguageCode: "",
            renderTextTracksNatively: !0
        }), {}, {
            subtitleStreamController: jn,
            subtitleTrackController: Xn,
            timelineController: Wa,
            audioStreamController: Yn,
            audioTrackController: Wn,
            emeController: Ja,
            cmcdController: Us,
            contentSteeringController: Bs
        });
        function Js(t) {
            return t && "object" == typeof t ? Array.isArray(t) ? t.map(Js) : Object.keys(t).reduce((function(e, r) {
                return e[r] = Js(t[r]),
                e
            }
            ), {}) : t
        }
        function $s(t) {
            var e = t.loader;
            e !== Ws && e !== Vs ? (w.log("[config]: Custom loader detected, cannot enable progressive streaming"),
            t.progressive = !1) : function() {
                if (self.fetch && self.AbortController && self.ReadableStream && self.Request)
                    try {
                        return new self.ReadableStream({}),
                        !0
                    } catch (t) {}
                return !1
            }() && (t.loader = Ws,
            t.progressive = !0,
            t.enableSoftwareAES = !0,
            w.log("[config]: Progressive streaming enabled, using FetchLoader"))
        }
        var Zs = function(t) {
            function e(e, r) {
                var i;
                return (i = t.call(this, e, "[level-controller]") || this)._levels = [],
                i._firstLevel = -1,
                i._maxAutoLevel = -1,
                i._startLevel = void 0,
                i.currentLevel = null,
                i.currentLevelIndex = -1,
                i.manualLevelIndex = -1,
                i.steering = void 0,
                i.onParsedComplete = void 0,
                i.steering = r,
                i._registerListeners(),
                i
            }
            l(e, t);
            var r = e.prototype;
            return r._registerListeners = function() {
                var t = this.hls;
                t.on(S.MANIFEST_LOADING, this.onManifestLoading, this),
                t.on(S.MANIFEST_LOADED, this.onManifestLoaded, this),
                t.on(S.LEVEL_LOADED, this.onLevelLoaded, this),
                t.on(S.LEVELS_UPDATED, this.onLevelsUpdated, this),
                t.on(S.FRAG_BUFFERED, this.onFragBuffered, this),
                t.on(S.ERROR, this.onError, this)
            }
            ,
            r._unregisterListeners = function() {
                var t = this.hls;
                t.off(S.MANIFEST_LOADING, this.onManifestLoading, this),
                t.off(S.MANIFEST_LOADED, this.onManifestLoaded, this),
                t.off(S.LEVEL_LOADED, this.onLevelLoaded, this),
                t.off(S.LEVELS_UPDATED, this.onLevelsUpdated, this),
                t.off(S.FRAG_BUFFERED, this.onFragBuffered, this),
                t.off(S.ERROR, this.onError, this)
            }
            ,
            r.destroy = function() {
                this._unregisterListeners(),
                this.steering = null,
                this.resetLevels(),
                t.prototype.destroy.call(this)
            }
            ,
            r.stopLoad = function() {
                this._levels.forEach((function(t) {
                    t.loadError = 0,
                    t.fragmentError = 0
                }
                )),
                t.prototype.stopLoad.call(this)
            }
            ,
            r.resetLevels = function() {
                this._startLevel = void 0,
                this.manualLevelIndex = -1,
                this.currentLevelIndex = -1,
                this.currentLevel = null,
                this._levels = [],
                this._maxAutoLevel = -1
            }
            ,
            r.onManifestLoading = function(t, e) {
                this.resetLevels()
            }
            ,
            r.onManifestLoaded = function(t, e) {
                var r = this.hls.config.preferManagedMediaSource
                  , i = []
                  , n = {}
                  , a = {}
                  , s = !1
                  , o = !1
                  , l = !1;
                e.levels.forEach((function(t) {
                    var e, u, h = t.attrs, d = t.audioCodec, c = t.videoCodec;
                    -1 !== (null == (e = d) ? void 0 : e.indexOf("mp4a.40.34")) && (qs || (qs = /chrome|firefox/i.test(navigator.userAgent)),
                    qs && (t.audioCodec = d = void 0)),
                    d && (t.audioCodec = d = he(d, r)),
                    0 === (null == (u = c) ? void 0 : u.indexOf("avc1")) && (c = t.videoCodec = function(t) {
                        var e = t.split(".");
                        if (e.length > 2) {
                            var r = e.shift() + ".";
                            return (r += parseInt(e.shift()).toString(16)) + ("000" + parseInt(e.shift()).toString(16)).slice(-4)
                        }
                        return t
                    }(c));
                    var f = t.width
                      , g = t.height
                      , v = t.unknownCodecs;
                    if (s || (s = !(!f || !g)),
                    o || (o = !!c),
                    l || (l = !!d),
                    !(null != v && v.length || d && !ie(d, "audio", r) || c && !ie(c, "video", r))) {
                        var m = h.CODECS
                          , p = h["FRAME-RATE"]
                          , y = h["HDCP-LEVEL"]
                          , E = h["PATHWAY-ID"]
                          , T = h.RESOLUTION
                          , S = h["VIDEO-RANGE"]
                          , L = (E || ".") + "-" + t.bitrate + "-" + T + "-" + p + "-" + m + "-" + S + "-" + y;
                        if (n[L])
                            if (n[L].uri === t.url || t.attrs["PATHWAY-ID"])
                                n[L].addGroupId("audio", h.AUDIO),
                                n[L].addGroupId("text", h.SUBTITLES);
                            else {
                                var A = a[L] += 1;
                                t.attrs["PATHWAY-ID"] = new Array(A + 1).join(".");
                                var R = new er(t);
                                n[L] = R,
                                i.push(R)
                            }
                        else {
                            var k = new er(t);
                            n[L] = k,
                            a[L] = 1,
                            i.push(k)
                        }
                    }
                }
                )),
                this.filterAndSortMediaOptions(i, e, s, o, l)
            }
            ,
            r.filterAndSortMediaOptions = function(t, e, r, i, n) {
                var a = this
                  , s = []
                  , o = []
                  , l = t;
                if ((r || i) && n && (l = l.filter((function(t) {
                    var e, r = t.videoCodec, i = t.videoRange, n = t.width, a = t.height;
                    return (!!r || !(!n || !a)) && !!(e = i) && Qe.indexOf(e) > -1
                }
                ))),
                0 !== l.length) {
                    if (e.audioTracks) {
                        var u = this.hls.config.preferManagedMediaSource;
                        to(s = e.audioTracks.filter((function(t) {
                            return !t.audioCodec || ie(t.audioCodec, "audio", u)
                        }
                        )))
                    }
                    e.subtitles && to(o = e.subtitles);
                    var h = l.slice(0);
                    l.sort((function(t, e) {
                        if (t.attrs["HDCP-LEVEL"] !== e.attrs["HDCP-LEVEL"])
                            return (t.attrs["HDCP-LEVEL"] || "") > (e.attrs["HDCP-LEVEL"] || "") ? 1 : -1;
                        if (r && t.height !== e.height)
                            return t.height - e.height;
                        if (t.frameRate !== e.frameRate)
                            return t.frameRate - e.frameRate;
                        if (t.videoRange !== e.videoRange)
                            return Qe.indexOf(t.videoRange) - Qe.indexOf(e.videoRange);
                        if (t.videoCodec !== e.videoCodec) {
                            var i = se(t.videoCodec)
                              , n = se(e.videoCodec);
                            if (i !== n)
                                return n - i
                        }
                        if (t.uri === e.uri && t.codecSet !== e.codecSet) {
                            var a = oe(t.codecSet)
                              , s = oe(e.codecSet);
                            if (a !== s)
                                return s - a
                        }
                        return t.averageBitrate !== e.averageBitrate ? t.averageBitrate - e.averageBitrate : 0
                    }
                    ));
                    var d = h[0];
                    if (this.steering && (l = this.steering.filterParsedLevels(l)).length !== h.length)
                        for (var c = 0; c < h.length; c++)
                            if (h[c].pathwayId === l[0].pathwayId) {
                                d = h[c];
                                break
                            }
                    this._levels = l;
                    for (var f = 0; f < l.length; f++)
                        if (l[f] === d) {
                            var g;
                            this._firstLevel = f;
                            var v = d.bitrate
                              , m = this.hls.bandwidthEstimate;
                            if (this.log("manifest loaded, " + l.length + " level(s) found, first bitrate: " + v),
                            void 0 === (null == (g = this.hls.userConfig) ? void 0 : g.abrEwmaDefaultEstimate)) {
                                var p = Math.min(v, this.hls.config.abrEwmaDefaultEstimateMax);
                                p > m && m === Qs.abrEwmaDefaultEstimate && (this.hls.bandwidthEstimate = p)
                            }
                            break
                        }
                    var y = n && !i
                      , E = {
                        levels: l,
                        audioTracks: s,
                        subtitleTracks: o,
                        sessionData: e.sessionData,
                        sessionKeys: e.sessionKeys,
                        firstLevel: this._firstLevel,
                        stats: e.stats,
                        audio: n,
                        video: i,
                        altAudio: !y && s.some((function(t) {
                            return !!t.url
                        }
                        ))
                    };
                    this.hls.trigger(S.MANIFEST_PARSED, E),
                    (this.hls.config.autoStartLoad || this.hls.forceStartLoad) && this.hls.startLoad(this.hls.config.startPosition)
                } else
                    Promise.resolve().then((function() {
                        if (a.hls) {
                            e.levels.length && a.warn("One or more CODECS in variant not supported: " + JSON.stringify(e.levels[0].attrs));
                            var t = new Error("no level with compatible codecs found in manifest");
                            a.hls.trigger(S.ERROR, {
                                type: L.MEDIA_ERROR,
                                details: A.MANIFEST_INCOMPATIBLE_CODECS_ERROR,
                                fatal: !0,
                                url: e.url,
                                error: t,
                                reason: t.message
                            })
                        }
                    }
                    ))
            }
            ,
            r.onError = function(t, e) {
                !e.fatal && e.context && e.context.type === be && e.context.level === this.level && this.checkRetry(e)
            }
            ,
            r.onFragBuffered = function(t, e) {
                var r = e.frag;
                if (void 0 !== r && r.type === we) {
                    var i = r.elementaryStreams;
                    if (!Object.keys(i).some((function(t) {
                        return !!i[t]
                    }
                    )))
                        return;
                    var n = this._levels[r.level];
                    null != n && n.loadError && (this.log("Resetting level error count of " + n.loadError + " on frag buffered"),
                    n.loadError = 0)
                }
            }
            ,
            r.onLevelLoaded = function(t, e) {
                var r, i, n = e.level, a = e.details, s = this._levels[n];
                if (!s)
                    return this.warn("Invalid level index " + n),
                    void (null != (i = e.deliveryDirectives) && i.skip && (a.deltaUpdateFailed = !0));
                n === this.currentLevelIndex ? (0 === s.fragmentError && (s.loadError = 0),
                this.playlistLoaded(n, e, s.details)) : null != (r = e.deliveryDirectives) && r.skip && (a.deltaUpdateFailed = !0)
            }
            ,
            r.loadPlaylist = function(e) {
                t.prototype.loadPlaylist.call(this);
                var r = this.currentLevelIndex
                  , i = this.currentLevel;
                if (i && this.shouldLoadPlaylist(i)) {
                    var n = i.uri;
                    if (e)
                        try {
                            n = e.addDirectives(n)
                        } catch (t) {
                            this.warn("Could not construct new URL with HLS Delivery Directives: " + t)
                        }
                    var a = i.attrs["PATHWAY-ID"];
                    this.log("Loading level index " + r + (void 0 !== (null == e ? void 0 : e.msn) ? " at sn " + e.msn + " part " + e.part : "") + " with" + (a ? " Pathway " + a : "") + " " + n),
                    this.clearTimer(),
                    this.hls.trigger(S.LEVEL_LOADING, {
                        url: n,
                        level: r,
                        pathwayId: i.attrs["PATHWAY-ID"],
                        id: 0,
                        deliveryDirectives: e || null
                    })
                }
            }
            ,
            r.removeLevel = function(t) {
                var e, r = this, i = this._levels.filter((function(e, i) {
                    return i !== t || (r.steering && r.steering.removeLevel(e),
                    e === r.currentLevel && (r.currentLevel = null,
                    r.currentLevelIndex = -1,
                    e.details && e.details.fragments.forEach((function(t) {
                        return t.level = -1
                    }
                    ))),
                    !1)
                }
                ));
                hr(i),
                this._levels = i,
                this.currentLevelIndex > -1 && null != (e = this.currentLevel) && e.details && (this.currentLevelIndex = this.currentLevel.details.fragments[0].level),
                this.hls.trigger(S.LEVELS_UPDATED, {
                    levels: i
                })
            }
            ,
            r.onLevelsUpdated = function(t, e) {
                var r = e.levels;
                this._levels = r
            }
            ,
            r.checkMaxAutoUpdated = function() {
                var t = this.hls
                  , e = t.autoLevelCapping
                  , r = t.maxAutoLevel
                  , i = t.maxHdcpLevel;
                this._maxAutoLevel !== r && (this._maxAutoLevel = r,
                this.hls.trigger(S.MAX_AUTO_LEVEL_UPDATED, {
                    autoLevelCapping: e,
                    levels: this.levels,
                    maxAutoLevel: r,
                    minAutoLevel: this.hls.minAutoLevel,
                    maxHdcpLevel: i
                }))
            }
            ,
            s(e, [{
                key: "levels",
                get: function() {
                    return 0 === this._levels.length ? null : this._levels
                }
            }, {
                key: "level",
                get: function() {
                    return this.currentLevelIndex
                },
                set: function(t) {
                    var e = this._levels;
                    if (0 !== e.length) {
                        if (t < 0 || t >= e.length) {
                            var r = new Error("invalid level idx")
                              , i = t < 0;
                            if (this.hls.trigger(S.ERROR, {
                                type: L.OTHER_ERROR,
                                details: A.LEVEL_SWITCH_ERROR,
                                level: t,
                                fatal: i,
                                error: r,
                                reason: r.message
                            }),
                            i)
                                return;
                            t = Math.min(t, e.length - 1)
                        }
                        var n = this.currentLevelIndex
                          , a = this.currentLevel
                          , s = a ? a.attrs["PATHWAY-ID"] : void 0
                          , o = e[t]
                          , l = o.attrs["PATHWAY-ID"];
                        if (this.currentLevelIndex = t,
                        this.currentLevel = o,
                        n !== t || !o.details || !a || s !== l) {
                            this.log("Switching to level " + t + " (" + (o.height ? o.height + "p " : "") + (o.videoRange ? o.videoRange + " " : "") + (o.codecSet ? o.codecSet + " " : "") + "@" + o.bitrate + ")" + (l ? " with Pathway " + l : "") + " from level " + n + (s ? " with Pathway " + s : ""));
                            var u = {
                                level: t,
                                attrs: o.attrs,
                                details: o.details,
                                bitrate: o.bitrate,
                                averageBitrate: o.averageBitrate,
                                maxBitrate: o.maxBitrate,
                                realBitrate: o.realBitrate,
                                width: o.width,
                                height: o.height,
                                codecSet: o.codecSet,
                                audioCodec: o.audioCodec,
                                videoCodec: o.videoCodec,
                                audioGroups: o.audioGroups,
                                subtitleGroups: o.subtitleGroups,
                                loaded: o.loaded,
                                loadError: o.loadError,
                                fragmentError: o.fragmentError,
                                name: o.name,
                                id: o.id,
                                uri: o.uri,
                                url: o.url,
                                urlId: 0,
                                audioGroupIds: o.audioGroupIds,
                                textGroupIds: o.textGroupIds
                            };
                            this.hls.trigger(S.LEVEL_SWITCHING, u);
                            var h = o.details;
                            if (!h || h.live) {
                                var d = this.switchParams(o.uri, null == a ? void 0 : a.details);
                                this.loadPlaylist(d)
                            }
                        }
                    }
                }
            }, {
                key: "manualLevel",
                get: function() {
                    return this.manualLevelIndex
                },
                set: function(t) {
                    this.manualLevelIndex = t,
                    void 0 === this._startLevel && (this._startLevel = t),
                    -1 !== t && (this.level = t)
                }
            }, {
                key: "firstLevel",
                get: function() {
                    return this._firstLevel
                },
                set: function(t) {
                    this._firstLevel = t
                }
            }, {
                key: "startLevel",
                get: function() {
                    if (void 0 === this._startLevel) {
                        var t = this.hls.config.startLevel;
                        return void 0 !== t ? t : this.hls.firstAutoLevel
                    }
                    return this._startLevel
                },
                set: function(t) {
                    this._startLevel = t
                }
            }, {
                key: "nextLoadLevel",
                get: function() {
                    return -1 !== this.manualLevelIndex ? this.manualLevelIndex : this.hls.nextAutoLevel
                },
                set: function(t) {
                    this.level = t,
                    -1 === this.manualLevelIndex && (this.hls.nextAutoLevel = t)
                }
            }]),
            e
        }(Ir);
        function to(t) {
            var e = {};
            t.forEach((function(t) {
                var r = t.groupId || "";
                t.id = e[r] = e[r] || 0,
                e[r]++
            }
            ))
        }
        var eo = function() {
            function t(t) {
                this.config = void 0,
                this.keyUriToKeyInfo = {},
                this.emeController = null,
                this.config = t
            }
            var e = t.prototype;
            return e.abort = function(t) {
                for (var e in this.keyUriToKeyInfo) {
                    var r = this.keyUriToKeyInfo[e].loader;
                    if (r) {
                        var i;
                        if (t && t !== (null == (i = r.context) ? void 0 : i.frag.type))
                            return;
                        r.abort()
                    }
                }
            }
            ,
            e.detach = function() {
                for (var t in this.keyUriToKeyInfo) {
                    var e = this.keyUriToKeyInfo[t];
                    (e.mediaKeySessionContext || e.decryptdata.isCommonEncryption) && delete this.keyUriToKeyInfo[t]
                }
            }
            ,
            e.destroy = function() {
                for (var t in this.detach(),
                this.keyUriToKeyInfo) {
                    var e = this.keyUriToKeyInfo[t].loader;
                    e && e.destroy()
                }
                this.keyUriToKeyInfo = {}
            }
            ,
            e.createKeyLoadError = function(t, e, r, i, n) {
                return void 0 === e && (e = A.KEY_LOAD_ERROR),
                new oi({
                    type: L.NETWORK_ERROR,
                    details: e,
                    fatal: !1,
                    frag: t,
                    response: n,
                    error: r,
                    networkDetails: i
                })
            }
            ,
            e.loadClear = function(t, e) {
                var r = this;
                if (this.emeController && this.config.emeEnabled)
                    for (var i = t.sn, n = t.cc, a = function() {
                        var t = e[s];
                        if (n <= t.cc && ("initSegment" === i || "initSegment" === t.sn || i < t.sn))
                            return r.emeController.selectKeySystemFormat(t).then((function(e) {
                                t.setKeyFormat(e)
                            }
                            )),
                            1
                    }, s = 0; s < e.length && !a(); s++)
                        ;
            }
            ,
            e.load = function(t) {
                var e = this;
                return !t.decryptdata && t.encrypted && this.emeController ? this.emeController.selectKeySystemFormat(t).then((function(r) {
                    return e.loadInternal(t, r)
                }
                )) : this.loadInternal(t)
            }
            ,
            e.loadInternal = function(t, e) {
                var r, i;
                e && t.setKeyFormat(e);
                var n = t.decryptdata;
                if (!n) {
                    var a = new Error(e ? "Expected frag.decryptdata to be defined after setting format " + e : "Missing decryption data on fragment in onKeyLoading");
                    return Promise.reject(this.createKeyLoadError(t, A.KEY_LOAD_ERROR, a))
                }
                var s = n.uri;
                if (!s)
                    return Promise.reject(this.createKeyLoadError(t, A.KEY_LOAD_ERROR, new Error('Invalid key URI: "' + s + '"')));
                var o, l = this.keyUriToKeyInfo[s];
                if (null != (r = l) && r.decryptdata.key)
                    return n.key = l.decryptdata.key,
                    Promise.resolve({
                        frag: t,
                        keyInfo: l
                    });
                if (null != (i = l) && i.keyLoadPromise)
                    switch (null == (o = l.mediaKeySessionContext) ? void 0 : o.keyStatus) {
                    case void 0:
                    case "status-pending":
                    case "usable":
                    case "usable-in-future":
                        return l.keyLoadPromise.then((function(e) {
                            return n.key = e.keyInfo.decryptdata.key,
                            {
                                frag: t,
                                keyInfo: l
                            }
                        }
                        ))
                    }
                switch (l = this.keyUriToKeyInfo[s] = {
                    decryptdata: n,
                    keyLoadPromise: null,
                    loader: null,
                    mediaKeySessionContext: null
                },
                n.method) {
                case "ISO-23001-7":
                case "SAMPLE-AES":
                case "SAMPLE-AES-CENC":
                case "SAMPLE-AES-CTR":
                    return "identity" === n.keyFormat ? this.loadKeyHTTP(l, t) : this.loadKeyEME(l, t);
                case "AES-128":
                    return this.loadKeyHTTP(l, t);
                default:
                    return Promise.reject(this.createKeyLoadError(t, A.KEY_LOAD_ERROR, new Error('Key supplied with unsupported METHOD: "' + n.method + '"')))
                }
            }
            ,
            e.loadKeyEME = function(t, e) {
                var r = {
                    frag: e,
                    keyInfo: t
                };
                if (this.emeController && this.config.emeEnabled) {
                    var i = this.emeController.loadKey(r);
                    if (i)
                        return (t.keyLoadPromise = i.then((function(e) {
                            return t.mediaKeySessionContext = e,
                            r
                        }
                        ))).catch((function(e) {
                            throw t.keyLoadPromise = null,
                            e
                        }
                        ))
                }
                return Promise.resolve(r)
            }
            ,
            e.loadKeyHTTP = function(t, e) {
                var r = this
                  , n = this.config
                  , a = new (0,
                n.loader)(n);
                return e.keyLoader = t.loader = a,
                t.keyLoadPromise = new Promise((function(s, o) {
                    var l = {
                        keyInfo: t,
                        frag: e,
                        responseType: "arraybuffer",
                        url: t.decryptdata.uri
                    }
                      , u = n.keyLoadPolicy.default
                      , h = {
                        loadPolicy: u,
                        timeout: u.maxLoadTimeMs,
                        maxRetry: 0,
                        retryDelay: 0,
                        maxRetryDelay: 0
                    }
                      , d = {
                        onSuccess: function(t, e, i, n) {
                            var a = i.frag
                              , l = i.keyInfo
                              , u = i.url;
                            if (!a.decryptdata || l !== r.keyUriToKeyInfo[u])
                                return o(r.createKeyLoadError(a, A.KEY_LOAD_ERROR, new Error("after key load, decryptdata unset or changed"), n));
                            l.decryptdata.key = a.decryptdata.key = new Uint8Array(t.data),
                            a.keyLoader = null,
                            l.loader = null,
                            s({
                                frag: a,
                                keyInfo: l
                            })
                        },
                        onError: function(t, n, a, s) {
                            r.resetLoader(n),
                            o(r.createKeyLoadError(e, A.KEY_LOAD_ERROR, new Error("HTTP Error " + t.code + " loading key " + t.text), a, i({
                                url: l.url,
                                data: void 0
                            }, t)))
                        },
                        onTimeout: function(t, i, n) {
                            r.resetLoader(i),
                            o(r.createKeyLoadError(e, A.KEY_LOAD_TIMEOUT, new Error("key loading timed out"), n))
                        },
                        onAbort: function(t, i, n) {
                            r.resetLoader(i),
                            o(r.createKeyLoadError(e, A.INTERNAL_ABORTED, new Error("key loading aborted"), n))
                        }
                    };
                    a.load(l, h, d)
                }
                ))
            }
            ,
            e.resetLoader = function(t) {
                var e = t.frag
                  , r = t.keyInfo
                  , i = t.url
                  , n = r.loader;
                e.keyLoader === n && (e.keyLoader = null,
                r.loader = null),
                delete this.keyUriToKeyInfo[i],
                n && n.destroy()
            }
            ,
            t
        }();
        function ro() {
            return self.SourceBuffer || self.WebKitSourceBuffer
        }
        function io() {
            if (!ee())
                return !1;
            var t = ro();
            return !t || t.prototype && "function" == typeof t.prototype.appendBuffer && "function" == typeof t.prototype.remove
        }
        var no = function() {
            function t(t, e, r, i) {
                this.config = void 0,
                this.media = null,
                this.fragmentTracker = void 0,
                this.hls = void 0,
                this.nudgeRetry = 0,
                this.stallReported = !1,
                this.stalled = null,
                this.moved = !1,
                this.seeking = !1,
                this.config = t,
                this.media = e,
                this.fragmentTracker = r,
                this.hls = i
            }
            var e = t.prototype;
            return e.destroy = function() {
                this.media = null,
                this.hls = this.fragmentTracker = null
            }
            ,
            e.poll = function(t, e) {
                var r = this.config
                  , i = this.media
                  , n = this.stalled;
                if (null !== i) {
                    var a = i.currentTime
                      , s = i.seeking
                      , o = this.seeking && !s
                      , l = !this.seeking && s;
                    if (this.seeking = s,
                    a === t)
                        if (l || o)
                            this.stalled = null;
                        else if (i.paused && !s || i.ended || 0 === i.playbackRate || !Qr.getBuffered(i).length)
                            this.nudgeRetry = 0;
                        else {
                            var u = Qr.bufferInfo(i, a, 0)
                              , h = u.nextStart || 0;
                            if (s) {
                                var d = u.len > 2
                                  , c = !h || e && e.start <= a || h - a > 2 && !this.fragmentTracker.getPartialFragment(a);
                                if (d || c)
                                    return;
                                this.moved = !1
                            }
                            if (!this.moved && null !== this.stalled) {
                                var f;
                                if (!(u.len > 0 || h))
                                    return;
                                var g = Math.max(h, u.start || 0) - a
                                  , v = this.hls.levels ? this.hls.levels[this.hls.currentLevel] : null
                                  , m = (null == v || null == (f = v.details) ? void 0 : f.live) ? 2 * v.details.targetduration : 2
                                  , p = this.fragmentTracker.getPartialFragment(a);
                                if (g > 0 && (g <= m || p))
                                    return void (i.paused || this._trySkipBufferHole(p))
                            }
                            var y = self.performance.now();
                            if (null !== n) {
                                var E = y - n;
                                if (s || !(E >= 250) || (this._reportStall(u),
                                this.media)) {
                                    var T = Qr.bufferInfo(i, a, r.maxBufferHole);
                                    this._tryFixBufferStall(T, E)
                                }
                            } else
                                this.stalled = y
                        }
                    else if (this.moved = !0,
                    s || (this.nudgeRetry = 0),
                    null !== n) {
                        if (this.stallReported) {
                            var S = self.performance.now() - n;
                            w.warn("playback not stuck anymore @" + a + ", after " + Math.round(S) + "ms"),
                            this.stallReported = !1
                        }
                        this.stalled = null
                    }
                }
            }
            ,
            e._tryFixBufferStall = function(t, e) {
                var r = this.config
                  , i = this.fragmentTracker
                  , n = this.media;
                if (null !== n) {
                    var a = n.currentTime
                      , s = i.getPartialFragment(a);
                    if (s && (this._trySkipBufferHole(s) || !this.media))
                        return;
                    (t.len > r.maxBufferHole || t.nextStart && t.nextStart - a < r.maxBufferHole) && e > 1e3 * r.highBufferWatchdogPeriod && (w.warn("Trying to nudge playhead over buffer-hole"),
                    this.stalled = null,
                    this._tryNudgeBuffer())
                }
            }
            ,
            e._reportStall = function(t) {
                var e = this.hls
                  , r = this.media;
                if (!this.stallReported && r) {
                    this.stallReported = !0;
                    var i = new Error("Playback stalling at @" + r.currentTime + " due to low buffer (" + JSON.stringify(t) + ")");
                    w.warn(i.message),
                    e.trigger(S.ERROR, {
                        type: L.MEDIA_ERROR,
                        details: A.BUFFER_STALLED_ERROR,
                        fatal: !1,
                        error: i,
                        buffer: t.len
                    })
                }
            }
            ,
            e._trySkipBufferHole = function(t) {
                var e = this.config
                  , r = this.hls
                  , i = this.media;
                if (null === i)
                    return 0;
                var n = i.currentTime
                  , a = Qr.bufferInfo(i, n, 0)
                  , s = n < a.start ? a.start : a.nextStart;
                if (s) {
                    var o = a.len <= e.maxBufferHole
                      , l = a.len > 0 && a.len < 1 && i.readyState < 3
                      , u = s - n;
                    if (u > 0 && (o || l)) {
                        if (u > e.maxBufferHole) {
                            var h = this.fragmentTracker
                              , d = !1;
                            if (0 === n) {
                                var c = h.getAppendedFrag(0, we);
                                c && s < c.end && (d = !0)
                            }
                            if (!d) {
                                var f = t || h.getAppendedFrag(n, we);
                                if (f) {
                                    for (var g = !1, v = f.end; v < s; ) {
                                        var m = h.getPartialFragment(v);
                                        if (!m) {
                                            g = !0;
                                            break
                                        }
                                        v += m.duration
                                    }
                                    if (g)
                                        return 0
                                }
                            }
                        }
                        var p = Math.max(s + .05, n + .1);
                        if (w.warn("skipping hole, adjusting currentTime from " + n + " to " + p),
                        this.moved = !0,
                        this.stalled = null,
                        i.currentTime = p,
                        t && !t.gap) {
                            var y = new Error("fragment loaded with buffer holes, seeking from " + n + " to " + p);
                            r.trigger(S.ERROR, {
                                type: L.MEDIA_ERROR,
                                details: A.BUFFER_SEEK_OVER_HOLE,
                                fatal: !1,
                                error: y,
                                reason: y.message,
                                frag: t
                            })
                        }
                        return p
                    }
                }
                return 0
            }
            ,
            e._tryNudgeBuffer = function() {
                var t = this.config
                  , e = this.hls
                  , r = this.media
                  , i = this.nudgeRetry;
                if (null !== r) {
                    var n = r.currentTime;
                    if (this.nudgeRetry++,
                    i < t.nudgeMaxRetry) {
                        var a = n + (i + 1) * t.nudgeOffset
                          , s = new Error("Nudging 'currentTime' from " + n + " to " + a);
                        w.warn(s.message),
                        r.currentTime = a,
                        e.trigger(S.ERROR, {
                            type: L.MEDIA_ERROR,
                            details: A.BUFFER_NUDGE_ON_STALL,
                            error: s,
                            fatal: !1
                        })
                    } else {
                        var o = new Error("Playhead still not moving while enough data buffered @" + n + " after " + t.nudgeMaxRetry + " nudges");
                        w.error(o.message),
                        e.trigger(S.ERROR, {
                            type: L.MEDIA_ERROR,
                            details: A.BUFFER_STALLED_ERROR,
                            error: o,
                            fatal: !0
                        })
                    }
                }
            }
            ,
            t
        }()
          , ao = function(t) {
            function e(e, r, i) {
                var n;
                return (n = t.call(this, e, r, i, "[stream-controller]", we) || this).audioCodecSwap = !1,
                n.gapController = null,
                n.level = -1,
                n._forceStartLoad = !1,
                n.altAudio = !1,
                n.audioOnly = !1,
                n.fragPlaying = null,
                n.onvplaying = null,
                n.onvseeked = null,
                n.fragLastKbps = 0,
                n.couldBacktrack = !1,
                n.backtrackFragment = null,
                n.audioCodecSwitch = !1,
                n.videoBuffer = null,
                n._registerListeners(),
                n
            }
            l(e, t);
            var r = e.prototype;
            return r._registerListeners = function() {
                var t = this.hls;
                t.on(S.MEDIA_ATTACHED, this.onMediaAttached, this),
                t.on(S.MEDIA_DETACHING, this.onMediaDetaching, this),
                t.on(S.MANIFEST_LOADING, this.onManifestLoading, this),
                t.on(S.MANIFEST_PARSED, this.onManifestParsed, this),
                t.on(S.LEVEL_LOADING, this.onLevelLoading, this),
                t.on(S.LEVEL_LOADED, this.onLevelLoaded, this),
                t.on(S.FRAG_LOAD_EMERGENCY_ABORTED, this.onFragLoadEmergencyAborted, this),
                t.on(S.ERROR, this.onError, this),
                t.on(S.AUDIO_TRACK_SWITCHING, this.onAudioTrackSwitching, this),
                t.on(S.AUDIO_TRACK_SWITCHED, this.onAudioTrackSwitched, this),
                t.on(S.BUFFER_CREATED, this.onBufferCreated, this),
                t.on(S.BUFFER_FLUSHED, this.onBufferFlushed, this),
                t.on(S.LEVELS_UPDATED, this.onLevelsUpdated, this),
                t.on(S.FRAG_BUFFERED, this.onFragBuffered, this)
            }
            ,
            r._unregisterListeners = function() {
                var t = this.hls;
                t.off(S.MEDIA_ATTACHED, this.onMediaAttached, this),
                t.off(S.MEDIA_DETACHING, this.onMediaDetaching, this),
                t.off(S.MANIFEST_LOADING, this.onManifestLoading, this),
                t.off(S.MANIFEST_PARSED, this.onManifestParsed, this),
                t.off(S.LEVEL_LOADED, this.onLevelLoaded, this),
                t.off(S.FRAG_LOAD_EMERGENCY_ABORTED, this.onFragLoadEmergencyAborted, this),
                t.off(S.ERROR, this.onError, this),
                t.off(S.AUDIO_TRACK_SWITCHING, this.onAudioTrackSwitching, this),
                t.off(S.AUDIO_TRACK_SWITCHED, this.onAudioTrackSwitched, this),
                t.off(S.BUFFER_CREATED, this.onBufferCreated, this),
                t.off(S.BUFFER_FLUSHED, this.onBufferFlushed, this),
                t.off(S.LEVELS_UPDATED, this.onLevelsUpdated, this),
                t.off(S.FRAG_BUFFERED, this.onFragBuffered, this)
            }
            ,
            r.onHandlerDestroying = function() {
                this._unregisterListeners(),
                t.prototype.onHandlerDestroying.call(this)
            }
            ,
            r.startLoad = function(t) {
                if (this.levels) {
                    var e = this.lastCurrentTime
                      , r = this.hls;
                    if (this.stopLoad(),
                    this.setInterval(100),
                    this.level = -1,
                    !this.startFragRequested) {
                        var i = r.startLevel;
                        -1 === i && (r.config.testBandwidth && this.levels.length > 1 ? (i = 0,
                        this.bitrateTest = !0) : i = r.firstAutoLevel),
                        r.nextLoadLevel = i,
                        this.level = r.loadLevel,
                        this.loadedmetadata = !1
                    }
                    e > 0 && -1 === t && (this.log("Override startPosition with lastCurrentTime @" + e.toFixed(3)),
                    t = e),
                    this.state = gi,
                    this.nextLoadPosition = this.startPosition = this.lastCurrentTime = t,
                    this.tick()
                } else
                    this._forceStartLoad = !0,
                    this.state = fi
            }
            ,
            r.stopLoad = function() {
                this._forceStartLoad = !1,
                t.prototype.stopLoad.call(this)
            }
            ,
            r.doTick = function() {
                switch (this.state) {
                case Ri:
                    var t = this.levels
                      , e = this.level
                      , r = null == t ? void 0 : t[e]
                      , i = null == r ? void 0 : r.details;
                    if (i && (!i.live || this.levelLastLoaded === r)) {
                        if (this.waitForCdnTuneIn(i))
                            break;
                        this.state = gi;
                        break
                    }
                    if (this.hls.nextLoadLevel !== this.level) {
                        this.state = gi;
                        break
                    }
                    break;
                case pi:
                    var n, a = self.performance.now(), s = this.retryDate;
                    if (!s || a >= s || null != (n = this.media) && n.seeking) {
                        var o = this.levels
                          , l = this.level
                          , u = null == o ? void 0 : o[l];
                        this.resetStartWhenNotLoaded(u || null),
                        this.state = gi
                    }
                }
                this.state === gi && this.doTickIdle(),
                this.onTickEnd()
            }
            ,
            r.onTickEnd = function() {
                t.prototype.onTickEnd.call(this),
                this.checkBuffer(),
                this.checkFragmentChanged()
            }
            ,
            r.doTickIdle = function() {
                var t = this.hls
                  , e = this.levelLastLoaded
                  , r = this.levels
                  , i = this.media;
                if (null !== e && (i || !this.startFragRequested && t.config.startFragPrefetch) && (!this.altAudio || !this.audioOnly)) {
                    var n = t.nextLoadLevel;
                    if (null != r && r[n]) {
                        var a = r[n]
                          , s = this.getMainFwdBufferInfo();
                        if (null !== s) {
                            var o = this.getLevelDetails();
                            if (o && this._streamEnded(s, o)) {
                                var l = {};
                                return this.altAudio && (l.type = "video"),
                                this.hls.trigger(S.BUFFER_EOS, l),
                                void (this.state = Si)
                            }
                            t.loadLevel !== n && -1 === t.manualLevel && this.log("Adapting to level " + n + " from level " + this.level),
                            this.level = t.nextLoadLevel = n;
                            var u = a.details;
                            if (!u || this.state === Ri || u.live && this.levelLastLoaded !== a)
                                return this.level = n,
                                void (this.state = Ri);
                            var h = s.len
                              , d = this.getMaxBufferLength(a.maxBitrate);
                            if (!(h >= d)) {
                                this.backtrackFragment && this.backtrackFragment.start > s.end && (this.backtrackFragment = null);
                                var c = this.backtrackFragment ? this.backtrackFragment.start : s.end
                                  , f = this.getNextFragment(c, u);
                                if (this.couldBacktrack && !this.fragPrevious && f && "initSegment" !== f.sn && this.fragmentTracker.getState(f) !== Wr) {
                                    var g, v = (null != (g = this.backtrackFragment) ? g : f).sn - u.startSN, m = u.fragments[v - 1];
                                    m && f.cc === m.cc && (f = m,
                                    this.fragmentTracker.removeFragment(m))
                                } else
                                    this.backtrackFragment && s.len && (this.backtrackFragment = null);
                                if (f && this.isLoopLoading(f, c)) {
                                    if (!f.gap) {
                                        var p = this.audioOnly && !this.altAudio ? O : N
                                          , y = (p === N ? this.videoBuffer : this.mediaBuffer) || this.media;
                                        y && this.afterBufferFlushed(y, p, we)
                                    }
                                    f = this.getNextFragmentLoopLoading(f, u, s, we, d)
                                }
                                f && (!f.initSegment || f.initSegment.data || this.bitrateTest || (f = f.initSegment),
                                this.loadFragment(f, a, c))
                            }
                        }
                    }
                }
            }
            ,
            r.loadFragment = function(e, r, i) {
                var n = this.fragmentTracker.getState(e);
                this.fragCurrent = e,
                n === Hr || n === Yr ? "initSegment" === e.sn ? this._loadInitSegment(e, r) : this.bitrateTest ? (this.log("Fragment " + e.sn + " of level " + e.level + " is being downloaded to test bitrate and will not be buffered"),
                this._loadBitrateTestFrag(e, r)) : (this.startFragRequested = !0,
                t.prototype.loadFragment.call(this, e, r, i)) : this.clearTrackerIfNeeded(e)
            }
            ,
            r.getBufferedFrag = function(t) {
                return this.fragmentTracker.getBufferedFrag(t, we)
            }
            ,
            r.followingBufferedFrag = function(t) {
                return t ? this.getBufferedFrag(t.end + .5) : null
            }
            ,
            r.immediateLevelSwitch = function() {
                this.abortCurrentFrag(),
                this.flushMainBuffer(0, Number.POSITIVE_INFINITY)
            }
            ,
            r.nextLevelSwitch = function() {
                var t = this.levels
                  , e = this.media;
                if (null != e && e.readyState) {
                    var r, i = this.getAppendedFrag(e.currentTime);
                    i && i.start > 1 && this.flushMainBuffer(0, i.start - 1);
                    var n = this.getLevelDetails();
                    if (null != n && n.live) {
                        var a = this.getMainFwdBufferInfo();
                        if (!a || a.len < 2 * n.targetduration)
                            return
                    }
                    if (!e.paused && t) {
                        var s = t[this.hls.nextLoadLevel]
                          , o = this.fragLastKbps;
                        r = o && this.fragCurrent ? this.fragCurrent.duration * s.maxBitrate / (1e3 * o) + 1 : 0
                    } else
                        r = 0;
                    var l = this.getBufferedFrag(e.currentTime + r);
                    if (l) {
                        var u = this.followingBufferedFrag(l);
                        if (u) {
                            this.abortCurrentFrag();
                            var h = u.maxStartPTS ? u.maxStartPTS : u.start
                              , d = u.duration
                              , c = Math.max(l.end, h + Math.min(Math.max(d - this.config.maxFragLookUpTolerance, d * (this.couldBacktrack ? .5 : .125)), d * (this.couldBacktrack ? .75 : .25)));
                            this.flushMainBuffer(c, Number.POSITIVE_INFINITY)
                        }
                    }
                }
            }
            ,
            r.abortCurrentFrag = function() {
                var t = this.fragCurrent;
                switch (this.fragCurrent = null,
                this.backtrackFragment = null,
                t && (t.abortRequests(),
                this.fragmentTracker.removeFragment(t)),
                this.state) {
                case vi:
                case mi:
                case pi:
                case Ei:
                case Ti:
                    this.state = gi
                }
                this.nextLoadPosition = this.getLoadPosition()
            }
            ,
            r.flushMainBuffer = function(e, r) {
                t.prototype.flushMainBuffer.call(this, e, r, this.altAudio ? "video" : null)
            }
            ,
            r.onMediaAttached = function(e, r) {
                t.prototype.onMediaAttached.call(this, e, r);
                var i = r.media;
                this.onvplaying = this.onMediaPlaying.bind(this),
                this.onvseeked = this.onMediaSeeked.bind(this),
                i.addEventListener("playing", this.onvplaying),
                i.addEventListener("seeked", this.onvseeked),
                this.gapController = new no(this.config,i,this.fragmentTracker,this.hls)
            }
            ,
            r.onMediaDetaching = function() {
                var e = this.media;
                e && this.onvplaying && this.onvseeked && (e.removeEventListener("playing", this.onvplaying),
                e.removeEventListener("seeked", this.onvseeked),
                this.onvplaying = this.onvseeked = null,
                this.videoBuffer = null),
                this.fragPlaying = null,
                this.gapController && (this.gapController.destroy(),
                this.gapController = null),
                t.prototype.onMediaDetaching.call(this)
            }
            ,
            r.onMediaPlaying = function() {
                this.tick()
            }
            ,
            r.onMediaSeeked = function() {
                var t = this.media
                  , e = t ? t.currentTime : null;
                y(e) && this.log("Media seeked to " + e.toFixed(3));
                var r = this.getMainFwdBufferInfo();
                null !== r && 0 !== r.len ? this.tick() : this.warn('Main forward buffer length on "seeked" event ' + (r ? r.len : "empty") + ")")
            }
            ,
            r.onManifestLoading = function() {
                this.log("Trigger BUFFER_RESET"),
                this.hls.trigger(S.BUFFER_RESET, void 0),
                this.fragmentTracker.removeAllFragments(),
                this.couldBacktrack = !1,
                this.startPosition = this.lastCurrentTime = this.fragLastKbps = 0,
                this.levels = this.fragPlaying = this.backtrackFragment = this.levelLastLoaded = null,
                this.altAudio = this.audioOnly = this.startFragRequested = !1
            }
            ,
            r.onManifestParsed = function(t, e) {
                var r, i, n = !1, a = !1;
                e.levels.forEach((function(t) {
                    var e = t.audioCodec;
                    e && (n = n || -1 !== e.indexOf("mp4a.40.2"),
                    a = a || -1 !== e.indexOf("mp4a.40.5"))
                }
                )),
                this.audioCodecSwitch = n && a && !("function" == typeof (null == (i = ro()) || null == (r = i.prototype) ? void 0 : r.changeType)),
                this.audioCodecSwitch && this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),
                this.levels = e.levels,
                this.startFragRequested = !1
            }
            ,
            r.onLevelLoading = function(t, e) {
                var r = this.levels;
                if (r && this.state === gi) {
                    var i = r[e.level];
                    (!i.details || i.details.live && this.levelLastLoaded !== i || this.waitForCdnTuneIn(i.details)) && (this.state = Ri)
                }
            }
            ,
            r.onLevelLoaded = function(t, e) {
                var r, i = this.levels, n = e.level, a = e.details, s = a.totalduration;
                if (i) {
                    this.log("Level " + n + " loaded [" + a.startSN + "," + a.endSN + "]" + (a.lastPartSn ? "[part-" + a.lastPartSn + "-" + a.lastPartIndex + "]" : "") + ", cc [" + a.startCC + ", " + a.endCC + "] duration:" + s);
                    var o = i[n]
                      , l = this.fragCurrent;
                    !l || this.state !== mi && this.state !== pi || l.level !== e.level && l.loader && this.abortCurrentFrag();
                    var u = 0;
                    if (a.live || null != (r = o.details) && r.live) {
                        var h;
                        if (this.checkLiveUpdate(a),
                        a.deltaUpdateFailed)
                            return;
                        u = this.alignPlaylists(a, o.details, null == (h = this.levelLastLoaded) ? void 0 : h.details)
                    }
                    if (o.details = a,
                    this.levelLastLoaded = o,
                    this.hls.trigger(S.LEVEL_UPDATED, {
                        details: a,
                        level: n
                    }),
                    this.state === Ri) {
                        if (this.waitForCdnTuneIn(a))
                            return;
                        this.state = gi
                    }
                    this.startFragRequested ? a.live && this.synchronizeToLiveEdge(a) : this.setStartPosition(a, u),
                    this.tick()
                } else
                    this.warn("Levels were reset while loading level " + n)
            }
            ,
            r._handleFragmentLoadProgress = function(t) {
                var e, r = t.frag, i = t.part, n = t.payload, a = this.levels;
                if (a) {
                    var s = a[r.level]
                      , o = s.details;
                    if (!o)
                        return this.warn("Dropping fragment " + r.sn + " of level " + r.level + " after level details were reset"),
                        void this.fragmentTracker.removeFragment(r);
                    var l = s.videoCodec
                      , u = o.PTSKnown || !o.live
                      , h = null == (e = r.initSegment) ? void 0 : e.data
                      , d = this._getAudioCodec(s)
                      , c = this.transmuxer = this.transmuxer || new Gn(this.hls,we,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this))
                      , f = i ? i.index : -1
                      , g = -1 !== f
                      , v = new Jr(r.level,r.sn,r.stats.chunkCount,n.byteLength,f,g)
                      , m = this.initPTS[r.cc];
                    c.push(n, h, d, l, r, i, o.totalduration, u, v, m)
                } else
                    this.warn("Levels were reset while fragment load was in progress. Fragment " + r.sn + " of level " + r.level + " will not be buffered")
            }
            ,
            r.onAudioTrackSwitching = function(t, e) {
                var r = this.altAudio;
                if (!e.url) {
                    if (this.mediaBuffer !== this.media) {
                        this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),
                        this.mediaBuffer = this.media;
                        var i = this.fragCurrent;
                        i && (this.log("Switching to main audio track, cancel main fragment load"),
                        i.abortRequests(),
                        this.fragmentTracker.removeFragment(i)),
                        this.resetTransmuxer(),
                        this.resetLoadingState()
                    } else
                        this.audioOnly && this.resetTransmuxer();
                    var n = this.hls;
                    r && (n.trigger(S.BUFFER_FLUSHING, {
                        startOffset: 0,
                        endOffset: Number.POSITIVE_INFINITY,
                        type: null
                    }),
                    this.fragmentTracker.removeAllFragments()),
                    n.trigger(S.AUDIO_TRACK_SWITCHED, e)
                }
            }
            ,
            r.onAudioTrackSwitched = function(t, e) {
                var r = e.id
                  , i = !!this.hls.audioTracks[r].url;
                if (i) {
                    var n = this.videoBuffer;
                    n && this.mediaBuffer !== n && (this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),
                    this.mediaBuffer = n)
                }
                this.altAudio = i,
                this.tick()
            }
            ,
            r.onBufferCreated = function(t, e) {
                var r, i, n = e.tracks, a = !1;
                for (var s in n) {
                    var o = n[s];
                    if ("main" === o.id) {
                        if (i = s,
                        r = o,
                        "video" === s) {
                            var l = n[s];
                            l && (this.videoBuffer = l.buffer)
                        }
                    } else
                        a = !0
                }
                a && r ? (this.log("Alternate track found, use " + i + ".buffered to schedule main fragment loading"),
                this.mediaBuffer = r.buffer) : this.mediaBuffer = this.media
            }
            ,
            r.onFragBuffered = function(t, e) {
                var r = e.frag
                  , i = e.part;
                if (!r || r.type === we) {
                    if (this.fragContextChanged(r))
                        return this.warn("Fragment " + r.sn + (i ? " p: " + i.index : "") + " of level " + r.level + " finished buffering, but was aborted. state: " + this.state),
                        void (this.state === Ti && (this.state = gi));
                    var n = i ? i.stats : r.stats;
                    this.fragLastKbps = Math.round(8 * n.total / (n.buffering.end - n.loading.first)),
                    "initSegment" !== r.sn && (this.fragPrevious = r),
                    this.fragBufferedComplete(r, i)
                }
            }
            ,
            r.onError = function(t, e) {
                var r;
                if (e.fatal)
                    this.state = Li;
                else
                    switch (e.details) {
                    case A.FRAG_GAP:
                    case A.FRAG_PARSING_ERROR:
                    case A.FRAG_DECRYPT_ERROR:
                    case A.FRAG_LOAD_ERROR:
                    case A.FRAG_LOAD_TIMEOUT:
                    case A.KEY_LOAD_ERROR:
                    case A.KEY_LOAD_TIMEOUT:
                        this.onFragmentOrKeyLoadError(we, e);
                        break;
                    case A.LEVEL_LOAD_ERROR:
                    case A.LEVEL_LOAD_TIMEOUT:
                    case A.LEVEL_PARSING_ERROR:
                        e.levelRetry || this.state !== Ri || (null == (r = e.context) ? void 0 : r.type) !== be || (this.state = gi);
                        break;
                    case A.BUFFER_APPEND_ERROR:
                    case A.BUFFER_FULL_ERROR:
                        if (!e.parent || "main" !== e.parent)
                            return;
                        if (e.details === A.BUFFER_APPEND_ERROR)
                            return void this.resetLoadingState();
                        this.reduceLengthAndFlushBuffer(e) && this.flushMainBuffer(0, Number.POSITIVE_INFINITY);
                        break;
                    case A.INTERNAL_EXCEPTION:
                        this.recoverWorkerError(e)
                    }
            }
            ,
            r.checkBuffer = function() {
                var t = this.media
                  , e = this.gapController;
                if (t && e && t.readyState) {
                    if (this.loadedmetadata || !Qr.getBuffered(t).length) {
                        var r = this.state !== gi ? this.fragCurrent : null;
                        e.poll(this.lastCurrentTime, r)
                    }
                    this.lastCurrentTime = t.currentTime
                }
            }
            ,
            r.onFragLoadEmergencyAborted = function() {
                this.state = gi,
                this.loadedmetadata || (this.startFragRequested = !1,
                this.nextLoadPosition = this.startPosition),
                this.tickImmediate()
            }
            ,
            r.onBufferFlushed = function(t, e) {
                var r = e.type;
                if (r !== O || this.audioOnly && !this.altAudio) {
                    var i = (r === N ? this.videoBuffer : this.mediaBuffer) || this.media;
                    this.afterBufferFlushed(i, r, we),
                    this.tick()
                }
            }
            ,
            r.onLevelsUpdated = function(t, e) {
                this.level > -1 && this.fragCurrent && (this.level = this.fragCurrent.level),
                this.levels = e.levels
            }
            ,
            r.swapAudioCodec = function() {
                this.audioCodecSwap = !this.audioCodecSwap
            }
            ,
            r.seekToStartPos = function() {
                var t = this.media;
                if (t) {
                    var e = t.currentTime
                      , r = this.startPosition;
                    if (r >= 0 && e < r) {
                        if (t.seeking)
                            return void this.log("could not seek to " + r + ", already seeking at " + e);
                        var i = Qr.getBuffered(t)
                          , n = (i.length ? i.start(0) : 0) - r;
                        n > 0 && (n < this.config.maxBufferHole || n < this.config.maxFragLookUpTolerance) && (this.log("adjusting start position by " + n + " to match buffer start"),
                        r += n,
                        this.startPosition = r),
                        this.log("seek to target start position " + r + " from current time " + e),
                        t.currentTime = r
                    }
                }
            }
            ,
            r._getAudioCodec = function(t) {
                var e = this.config.defaultAudioCodec || t.audioCodec;
                return this.audioCodecSwap && e && (this.log("Swapping audio codec"),
                e = -1 !== e.indexOf("mp4a.40.5") ? "mp4a.40.2" : "mp4a.40.5"),
                e
            }
            ,
            r._loadBitrateTestFrag = function(t, e) {
                var r = this;
                t.bitrateTest = !0,
                this._doFragLoad(t, e).then((function(i) {
                    var n = r.hls;
                    if (i && !r.fragContextChanged(t)) {
                        e.fragmentError = 0,
                        r.state = gi,
                        r.startFragRequested = !1,
                        r.bitrateTest = !1;
                        var a = t.stats;
                        a.parsing.start = a.parsing.end = a.buffering.start = a.buffering.end = self.performance.now(),
                        n.trigger(S.FRAG_LOADED, i),
                        t.bitrateTest = !1
                    }
                }
                ))
            }
            ,
            r._handleTransmuxComplete = function(t) {
                var e, r = "main", i = this.hls, n = t.remuxResult, a = t.chunkMeta, s = this.getCurrentContext(a);
                if (s) {
                    var o = s.frag
                      , l = s.part
                      , u = s.level
                      , h = n.video
                      , d = n.text
                      , c = n.id3
                      , f = n.initSegment
                      , g = u.details
                      , v = this.altAudio ? void 0 : n.audio;
                    if (this.fragContextChanged(o))
                        this.fragmentTracker.removeFragment(o);
                    else {
                        if (this.state = Ei,
                        f) {
                            if (null != f && f.tracks) {
                                var m = o.initSegment || o;
                                this._bufferInitSegment(u, f.tracks, m, a),
                                i.trigger(S.FRAG_PARSING_INIT_SEGMENT, {
                                    frag: m,
                                    id: r,
                                    tracks: f.tracks
                                })
                            }
                            var p = f.initPTS
                              , E = f.timescale;
                            y(p) && (this.initPTS[o.cc] = {
                                baseTime: p,
                                timescale: E
                            },
                            i.trigger(S.INIT_PTS_FOUND, {
                                frag: o,
                                id: r,
                                initPTS: p,
                                timescale: E
                            }))
                        }
                        if (h && g && "initSegment" !== o.sn) {
                            var T = g.fragments[o.sn - 1 - g.startSN]
                              , L = o.sn === g.startSN
                              , A = !T || o.cc > T.cc;
                            if (!1 !== n.independent) {
                                var R = h.startPTS
                                  , k = h.endPTS
                                  , b = h.startDTS
                                  , D = h.endDTS;
                                if (l)
                                    l.elementaryStreams[h.type] = {
                                        startPTS: R,
                                        endPTS: k,
                                        startDTS: b,
                                        endDTS: D
                                    };
                                else if (h.firstKeyFrame && h.independent && 1 === a.id && !A && (this.couldBacktrack = !0),
                                h.dropped && h.independent) {
                                    var I = this.getMainFwdBufferInfo()
                                      , w = (I ? I.end : this.getLoadPosition()) + this.config.maxBufferHole
                                      , C = h.firstKeyFramePTS ? h.firstKeyFramePTS : R;
                                    if (!L && w < C - this.config.maxBufferHole && !A)
                                        return void this.backtrack(o);
                                    A && (o.gap = !0),
                                    o.setElementaryStreamInfo(h.type, o.start, k, o.start, D, !0)
                                } else
                                    L && R > 2 && (o.gap = !0);
                                o.setElementaryStreamInfo(h.type, R, k, b, D),
                                this.backtrackFragment && (this.backtrackFragment = o),
                                this.bufferFragmentData(h, o, l, a, L || A)
                            } else {
                                if (!L && !A)
                                    return void this.backtrack(o);
                                o.gap = !0
                            }
                        }
                        if (v) {
                            var _ = v.startPTS
                              , x = v.endPTS
                              , P = v.startDTS
                              , F = v.endDTS;
                            l && (l.elementaryStreams[O] = {
                                startPTS: _,
                                endPTS: x,
                                startDTS: P,
                                endDTS: F
                            }),
                            o.setElementaryStreamInfo(O, _, x, P, F),
                            this.bufferFragmentData(v, o, l, a)
                        }
                        if (g && null != c && null != (e = c.samples) && e.length) {
                            var M = {
                                id: r,
                                frag: o,
                                details: g,
                                samples: c.samples
                            };
                            i.trigger(S.FRAG_PARSING_METADATA, M)
                        }
                        if (g && d) {
                            var N = {
                                id: r,
                                frag: o,
                                details: g,
                                samples: d.samples
                            };
                            i.trigger(S.FRAG_PARSING_USERDATA, N)
                        }
                    }
                } else
                    this.resetWhenMissingContext(a)
            }
            ,
            r._bufferInitSegment = function(t, e, r, i) {
                var n = this;
                if (this.state === Ei) {
                    this.audioOnly = !!e.audio && !e.video,
                    this.altAudio && !this.audioOnly && delete e.audio;
                    var a = e.audio
                      , s = e.video
                      , o = e.audiovideo;
                    if (a) {
                        var l = t.audioCodec
                          , u = navigator.userAgent.toLowerCase();
                        this.audioCodecSwitch && (l && (l = -1 !== l.indexOf("mp4a.40.5") ? "mp4a.40.2" : "mp4a.40.5"),
                        1 !== a.metadata.channelCount && -1 === u.indexOf("firefox") && (l = "mp4a.40.5")),
                        l && -1 !== l.indexOf("mp4a.40.5") && -1 !== u.indexOf("android") && "audio/mpeg" !== a.container && (l = "mp4a.40.2",
                        this.log("Android: force audio codec to " + l)),
                        t.audioCodec && t.audioCodec !== l && this.log('Swapping manifest audio codec "' + t.audioCodec + '" for "' + l + '"'),
                        a.levelCodec = l,
                        a.id = "main",
                        this.log("Init audio buffer, container:" + a.container + ", codecs[selected/level/parsed]=[" + (l || "") + "/" + (t.audioCodec || "") + "/" + a.codec + "]")
                    }
                    s && (s.levelCodec = t.videoCodec,
                    s.id = "main",
                    this.log("Init video buffer, container:" + s.container + ", codecs[level/parsed]=[" + (t.videoCodec || "") + "/" + s.codec + "]")),
                    o && this.log("Init audiovideo buffer, container:" + o.container + ", codecs[level/parsed]=[" + t.codecs + "/" + o.codec + "]"),
                    this.hls.trigger(S.BUFFER_CODECS, e),
                    Object.keys(e).forEach((function(t) {
                        var a = e[t].initSegment;
                        null != a && a.byteLength && n.hls.trigger(S.BUFFER_APPENDING, {
                            type: t,
                            data: a,
                            frag: r,
                            part: null,
                            chunkMeta: i,
                            parent: r.type
                        })
                    }
                    )),
                    this.tickImmediate()
                }
            }
            ,
            r.getMainFwdBufferInfo = function() {
                return this.getFwdBufferInfo(this.mediaBuffer ? this.mediaBuffer : this.media, we)
            }
            ,
            r.backtrack = function(t) {
                this.couldBacktrack = !0,
                this.backtrackFragment = t,
                this.resetTransmuxer(),
                this.flushBufferGap(t),
                this.fragmentTracker.removeFragment(t),
                this.fragPrevious = null,
                this.nextLoadPosition = t.start,
                this.state = gi
            }
            ,
            r.checkFragmentChanged = function() {
                var t = this.media
                  , e = null;
                if (t && t.readyState > 1 && !1 === t.seeking) {
                    var r = t.currentTime;
                    if (Qr.isBuffered(t, r) ? e = this.getAppendedFrag(r) : Qr.isBuffered(t, r + .1) && (e = this.getAppendedFrag(r + .1)),
                    e) {
                        this.backtrackFragment = null;
                        var i = this.fragPlaying
                          , n = e.level;
                        i && e.sn === i.sn && i.level === n || (this.fragPlaying = e,
                        this.hls.trigger(S.FRAG_CHANGED, {
                            frag: e
                        }),
                        i && i.level === n || this.hls.trigger(S.LEVEL_SWITCHED, {
                            level: n
                        }))
                    }
                }
            }
            ,
            s(e, [{
                key: "nextLevel",
                get: function() {
                    var t = this.nextBufferedFrag;
                    return t ? t.level : -1
                }
            }, {
                key: "currentFrag",
                get: function() {
                    var t = this.media;
                    return t ? this.fragPlaying || this.getAppendedFrag(t.currentTime) : null
                }
            }, {
                key: "currentProgramDateTime",
                get: function() {
                    var t = this.media;
                    if (t) {
                        var e = t.currentTime
                          , r = this.currentFrag;
                        if (r && y(e) && y(r.programDateTime)) {
                            var i = r.programDateTime + 1e3 * (e - r.start);
                            return new Date(i)
                        }
                    }
                    return null
                }
            }, {
                key: "currentLevel",
                get: function() {
                    var t = this.currentFrag;
                    return t ? t.level : -1
                }
            }, {
                key: "nextBufferedFrag",
                get: function() {
                    var t = this.currentFrag;
                    return t ? this.followingBufferedFrag(t) : null
                }
            }, {
                key: "forceStartLoad",
                get: function() {
                    return this._forceStartLoad
                }
            }]),
            e
        }(ki)
          , so = function() {
            function t(e) {
                void 0 === e && (e = {}),
                this.config = void 0,
                this.userConfig = void 0,
                this.coreComponents = void 0,
                this.networkControllers = void 0,
                this.started = !1,
                this._emitter = new On,
                this._autoLevelCapping = -1,
                this._maxHdcpLevel = null,
                this.abrController = void 0,
                this.bufferController = void 0,
                this.capLevelController = void 0,
                this.latencyController = void 0,
                this.levelController = void 0,
                this.streamController = void 0,
                this.audioTrackController = void 0,
                this.subtitleTrackController = void 0,
                this.emeController = void 0,
                this.cmcdController = void 0,
                this._media = null,
                this.url = null,
                this.triggeringException = void 0,
                I(e.debug || !1, "Hls instance");
                var r = this.config = function(t, e) {
                    if ((e.liveSyncDurationCount || e.liveMaxLatencyDurationCount) && (e.liveSyncDuration || e.liveMaxLatencyDuration))
                        throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");
                    if (void 0 !== e.liveMaxLatencyDurationCount && (void 0 === e.liveSyncDurationCount || e.liveMaxLatencyDurationCount <= e.liveSyncDurationCount))
                        throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');
                    if (void 0 !== e.liveMaxLatencyDuration && (void 0 === e.liveSyncDuration || e.liveMaxLatencyDuration <= e.liveSyncDuration))
                        throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');
                    var r = Js(t)
                      , n = ["TimeOut", "MaxRetry", "RetryDelay", "MaxRetryTimeout"];
                    return ["manifest", "level", "frag"].forEach((function(t) {
                        var i = ("level" === t ? "playlist" : t) + "LoadPolicy"
                          , a = void 0 === e[i]
                          , s = [];
                        n.forEach((function(n) {
                            var o = t + "Loading" + n
                              , l = e[o];
                            if (void 0 !== l && a) {
                                s.push(o);
                                var u = r[i].default;
                                switch (e[i] = {
                                    default: u
                                },
                                n) {
                                case "TimeOut":
                                    u.maxLoadTimeMs = l,
                                    u.maxTimeToFirstByteMs = l;
                                    break;
                                case "MaxRetry":
                                    u.errorRetry.maxNumRetry = l,
                                    u.timeoutRetry.maxNumRetry = l;
                                    break;
                                case "RetryDelay":
                                    u.errorRetry.retryDelayMs = l,
                                    u.timeoutRetry.retryDelayMs = l;
                                    break;
                                case "MaxRetryTimeout":
                                    u.errorRetry.maxRetryDelayMs = l,
                                    u.timeoutRetry.maxRetryDelayMs = l
                                }
                            }
                        }
                        )),
                        s.length && w.warn('hls.js config: "' + s.join('", "') + '" setting(s) are deprecated, use "' + i + '": ' + JSON.stringify(e[i]))
                    }
                    )),
                    i(i({}, r), e)
                }(t.DefaultConfig, e);
                this.userConfig = e,
                r.progressive && $s(r);
                var n = r.abrController
                  , a = r.bufferController
                  , s = r.capLevelController
                  , o = r.errorController
                  , l = r.fpsController
                  , u = new o(this)
                  , h = this.abrController = new n(this)
                  , d = this.bufferController = new a(this)
                  , c = this.capLevelController = new s(this)
                  , f = new l(this)
                  , g = new Fe(this)
                  , v = new qe(this)
                  , m = r.contentSteeringController
                  , p = m ? new m(this) : null
                  , y = this.levelController = new Zs(this,p)
                  , E = new jr(this)
                  , T = new eo(this.config)
                  , L = this.streamController = new ao(this,E,T);
                c.setStreamController(L),
                f.setStreamController(L);
                var A = [g, y, L];
                p && A.splice(1, 0, p),
                this.networkControllers = A;
                var R = [h, d, c, f, v, E];
                this.audioTrackController = this.createController(r.audioTrackController, A);
                var k = r.audioStreamController;
                k && A.push(new k(this,E,T)),
                this.subtitleTrackController = this.createController(r.subtitleTrackController, A);
                var b = r.subtitleStreamController;
                b && A.push(new b(this,E,T)),
                this.createController(r.timelineController, R),
                T.emeController = this.emeController = this.createController(r.emeController, R),
                this.cmcdController = this.createController(r.cmcdController, R),
                this.latencyController = this.createController(Xe, R),
                this.coreComponents = R,
                A.push(u);
                var D = u.onErrorOut;
                "function" == typeof D && this.on(S.ERROR, D, u)
            }
            t.isMSESupported = function() {
                return io()
            }
            ,
            t.isSupported = function() {
                return function() {
                    if (!io())
                        return !1;
                    var t = ee();
                    return "function" == typeof (null == t ? void 0 : t.isTypeSupported) && (["avc1.42E01E,mp4a.40.2", "av01.0.01M.08", "vp09.00.50.08"].some((function(e) {
                        return t.isTypeSupported(ae(e, "video"))
                    }
                    )) || ["mp4a.40.2", "fLaC"].some((function(e) {
                        return t.isTypeSupported(ae(e, "audio"))
                    }
                    )))
                }()
            }
            ,
            t.getMediaSource = function() {
                return ee()
            }
            ;
            var e = t.prototype;
            return e.createController = function(t, e) {
                if (t) {
                    var r = new t(this);
                    return e && e.push(r),
                    r
                }
                return null
            }
            ,
            e.on = function(t, e, r) {
                void 0 === r && (r = this),
                this._emitter.on(t, e, r)
            }
            ,
            e.once = function(t, e, r) {
                void 0 === r && (r = this),
                this._emitter.once(t, e, r)
            }
            ,
            e.removeAllListeners = function(t) {
                this._emitter.removeAllListeners(t)
            }
            ,
            e.off = function(t, e, r, i) {
                void 0 === r && (r = this),
                this._emitter.off(t, e, r, i)
            }
            ,
            e.listeners = function(t) {
                return this._emitter.listeners(t)
            }
            ,
            e.emit = function(t, e, r) {
                return this._emitter.emit(t, e, r)
            }
            ,
            e.trigger = function(t, e) {
                if (this.config.debug)
                    return this.emit(t, t, e);
                try {
                    return this.emit(t, t, e)
                } catch (e) {
                    if (w.error("An internal error happened while handling event " + t + '. Error message: "' + e.message + '". Here is a stacktrace:', e),
                    !this.triggeringException) {
                        this.triggeringException = !0;
                        var r = t === S.ERROR;
                        this.trigger(S.ERROR, {
                            type: L.OTHER_ERROR,
                            details: A.INTERNAL_EXCEPTION,
                            fatal: r,
                            event: t,
                            error: e
                        }),
                        this.triggeringException = !1
                    }
                }
                return !1
            }
            ,
            e.listenerCount = function(t) {
                return this._emitter.listenerCount(t)
            }
            ,
            e.destroy = function() {
                w.log("destroy"),
                this.trigger(S.DESTROYING, void 0),
                this.detachMedia(),
                this.removeAllListeners(),
                this._autoLevelCapping = -1,
                this.url = null,
                this.networkControllers.forEach((function(t) {
                    return t.destroy()
                }
                )),
                this.networkControllers.length = 0,
                this.coreComponents.forEach((function(t) {
                    return t.destroy()
                }
                )),
                this.coreComponents.length = 0;
                var t = this.config;
                t.xhrSetup = t.fetchSetup = void 0,
                this.userConfig = null
            }
            ,
            e.attachMedia = function(t) {
                w.log("attachMedia"),
                this._media = t,
                this.trigger(S.MEDIA_ATTACHING, {
                    media: t
                })
            }
            ,
            e.detachMedia = function() {
                w.log("detachMedia"),
                this.trigger(S.MEDIA_DETACHING, void 0),
                this._media = null
            }
            ,
            e.loadSource = function(t) {
                this.stopLoad();
                var e = this.media
                  , r = this.url
                  , i = this.url = p.buildAbsoluteURL(self.location.href, t, {
                    alwaysNormalize: !0
                });
                this._autoLevelCapping = -1,
                this._maxHdcpLevel = null,
                w.log("loadSource:" + i),
                e && r && (r !== i || this.bufferController.hasSourceTypes()) && (this.detachMedia(),
                this.attachMedia(e)),
                this.trigger(S.MANIFEST_LOADING, {
                    url: t
                })
            }
            ,
            e.startLoad = function(t) {
                void 0 === t && (t = -1),
                w.log("startLoad(" + t + ")"),
                this.started = !0,
                this.networkControllers.forEach((function(e) {
                    e.startLoad(t)
                }
                ))
            }
            ,
            e.stopLoad = function() {
                w.log("stopLoad"),
                this.started = !1,
                this.networkControllers.forEach((function(t) {
                    t.stopLoad()
                }
                ))
            }
            ,
            e.resumeBuffering = function() {
                this.started && this.networkControllers.forEach((function(t) {
                    "fragmentLoader"in t && t.startLoad(-1)
                }
                ))
            }
            ,
            e.pauseBuffering = function() {
                this.networkControllers.forEach((function(t) {
                    "fragmentLoader"in t && t.stopLoad()
                }
                ))
            }
            ,
            e.swapAudioCodec = function() {
                w.log("swapAudioCodec"),
                this.streamController.swapAudioCodec()
            }
            ,
            e.recoverMediaError = function() {
                w.log("recoverMediaError");
                var t = this._media;
                this.detachMedia(),
                t && this.attachMedia(t)
            }
            ,
            e.removeLevel = function(t) {
                this.levelController.removeLevel(t)
            }
            ,
            e.setAudioOption = function(t) {
                var e;
                return null == (e = this.audioTrackController) ? void 0 : e.setAudioOption(t)
            }
            ,
            e.setSubtitleOption = function(t) {
                var e;
                return null == (e = this.subtitleTrackController) || e.setSubtitleOption(t),
                null
            }
            ,
            s(t, [{
                key: "levels",
                get: function() {
                    var t = this.levelController.levels;
                    return t || []
                }
            }, {
                key: "currentLevel",
                get: function() {
                    return this.streamController.currentLevel
                },
                set: function(t) {
                    w.log("set currentLevel:" + t),
                    this.levelController.manualLevel = t,
                    this.streamController.immediateLevelSwitch()
                }
            }, {
                key: "nextLevel",
                get: function() {
                    return this.streamController.nextLevel
                },
                set: function(t) {
                    w.log("set nextLevel:" + t),
                    this.levelController.manualLevel = t,
                    this.streamController.nextLevelSwitch()
                }
            }, {
                key: "loadLevel",
                get: function() {
                    return this.levelController.level
                },
                set: function(t) {
                    w.log("set loadLevel:" + t),
                    this.levelController.manualLevel = t
                }
            }, {
                key: "nextLoadLevel",
                get: function() {
                    return this.levelController.nextLoadLevel
                },
                set: function(t) {
                    this.levelController.nextLoadLevel = t
                }
            }, {
                key: "firstLevel",
                get: function() {
                    return Math.max(this.levelController.firstLevel, this.minAutoLevel)
                },
                set: function(t) {
                    w.log("set firstLevel:" + t),
                    this.levelController.firstLevel = t
                }
            }, {
                key: "startLevel",
                get: function() {
                    var t = this.levelController.startLevel;
                    return -1 === t && this.abrController.forcedAutoLevel > -1 ? this.abrController.forcedAutoLevel : t
                },
                set: function(t) {
                    w.log("set startLevel:" + t),
                    -1 !== t && (t = Math.max(t, this.minAutoLevel)),
                    this.levelController.startLevel = t
                }
            }, {
                key: "capLevelToPlayerSize",
                get: function() {
                    return this.config.capLevelToPlayerSize
                },
                set: function(t) {
                    var e = !!t;
                    e !== this.config.capLevelToPlayerSize && (e ? this.capLevelController.startCapping() : (this.capLevelController.stopCapping(),
                    this.autoLevelCapping = -1,
                    this.streamController.nextLevelSwitch()),
                    this.config.capLevelToPlayerSize = e)
                }
            }, {
                key: "autoLevelCapping",
                get: function() {
                    return this._autoLevelCapping
                },
                set: function(t) {
                    this._autoLevelCapping !== t && (w.log("set autoLevelCapping:" + t),
                    this._autoLevelCapping = t,
                    this.levelController.checkMaxAutoUpdated())
                }
            }, {
                key: "bandwidthEstimate",
                get: function() {
                    var t = this.abrController.bwEstimator;
                    return t ? t.getEstimate() : NaN
                },
                set: function(t) {
                    this.abrController.resetEstimator(t)
                }
            }, {
                key: "ttfbEstimate",
                get: function() {
                    var t = this.abrController.bwEstimator;
                    return t ? t.getEstimateTTFB() : NaN
                }
            }, {
                key: "maxHdcpLevel",
                get: function() {
                    return this._maxHdcpLevel
                },
                set: function(t) {
                    (function(t) {
                        return ze.indexOf(t) > -1
                    }
                    )(t) && this._maxHdcpLevel !== t && (this._maxHdcpLevel = t,
                    this.levelController.checkMaxAutoUpdated())
                }
            }, {
                key: "autoLevelEnabled",
                get: function() {
                    return -1 === this.levelController.manualLevel
                }
            }, {
                key: "manualLevel",
                get: function() {
                    return this.levelController.manualLevel
                }
            }, {
                key: "minAutoLevel",
                get: function() {
                    var t = this.levels
                      , e = this.config.minAutoBitrate;
                    if (!t)
                        return 0;
                    for (var r = t.length, i = 0; i < r; i++)
                        if (t[i].maxBitrate >= e)
                            return i;
                    return 0
                }
            }, {
                key: "maxAutoLevel",
                get: function() {
                    var t, e = this.levels, r = this.autoLevelCapping, i = this.maxHdcpLevel;
                    if (t = -1 === r && null != e && e.length ? e.length - 1 : r,
                    i)
                        for (var n = t; n--; ) {
                            var a = e[n].attrs["HDCP-LEVEL"];
                            if (a && a <= i)
                                return n
                        }
                    return t
                }
            }, {
                key: "firstAutoLevel",
                get: function() {
                    return this.abrController.firstAutoLevel
                }
            }, {
                key: "nextAutoLevel",
                get: function() {
                    return this.abrController.nextAutoLevel
                },
                set: function(t) {
                    this.abrController.nextAutoLevel = t
                }
            }, {
                key: "playingDate",
                get: function() {
                    return this.streamController.currentProgramDateTime
                }
            }, {
                key: "mainForwardBufferInfo",
                get: function() {
                    return this.streamController.getMainFwdBufferInfo()
                }
            }, {
                key: "allAudioTracks",
                get: function() {
                    var t = this.audioTrackController;
                    return t ? t.allAudioTracks : []
                }
            }, {
                key: "audioTracks",
                get: function() {
                    var t = this.audioTrackController;
                    return t ? t.audioTracks : []
                }
            }, {
                key: "audioTrack",
                get: function() {
                    var t = this.audioTrackController;
                    return t ? t.audioTrack : -1
                },
                set: function(t) {
                    var e = this.audioTrackController;
                    e && (e.audioTrack = t)
                }
            }, {
                key: "allSubtitleTracks",
                get: function() {
                    var t = this.subtitleTrackController;
                    return t ? t.allSubtitleTracks : []
                }
            }, {
                key: "subtitleTracks",
                get: function() {
                    var t = this.subtitleTrackController;
                    return t ? t.subtitleTracks : []
                }
            }, {
                key: "subtitleTrack",
                get: function() {
                    var t = this.subtitleTrackController;
                    return t ? t.subtitleTrack : -1
                },
                set: function(t) {
                    var e = this.subtitleTrackController;
                    e && (e.subtitleTrack = t)
                }
            }, {
                key: "media",
                get: function() {
                    return this._media
                }
            }, {
                key: "subtitleDisplay",
                get: function() {
                    var t = this.subtitleTrackController;
                    return !!t && t.subtitleDisplay
                },
                set: function(t) {
                    var e = this.subtitleTrackController;
                    e && (e.subtitleDisplay = t)
                }
            }, {
                key: "lowLatencyMode",
                get: function() {
                    return this.config.lowLatencyMode
                },
                set: function(t) {
                    this.config.lowLatencyMode = t
                }
            }, {
                key: "liveSyncPosition",
                get: function() {
                    return this.latencyController.liveSyncPosition
                }
            }, {
                key: "latency",
                get: function() {
                    return this.latencyController.latency
                }
            }, {
                key: "maxLatency",
                get: function() {
                    return this.latencyController.maxLatency
                }
            }, {
                key: "targetLatency",
                get: function() {
                    return this.latencyController.targetLatency
                }
            }, {
                key: "drift",
                get: function() {
                    return this.latencyController.drift
                }
            }, {
                key: "forceStartLoad",
                get: function() {
                    return this.streamController.forceStartLoad
                }
            }], [{
                key: "version",
                get: function() {
                    return "1.5.7"
                }
            }, {
                key: "Events",
                get: function() {
                    return S
                }
            }, {
                key: "ErrorTypes",
                get: function() {
                    return L
                }
            }, {
                key: "ErrorDetails",
                get: function() {
                    return A
                }
            }, {
                key: "DefaultConfig",
                get: function() {
                    return t.defaultConfig ? t.defaultConfig : Qs
                },
                set: function(e) {
                    t.defaultConfig = e
                }
            }]),
            t
        }();
        return so.defaultConfig = void 0,
        so
    }
    ,
    "object" == typeof exports && "undefined" != typeof module ? module.exports = i() : "function" == typeof define && define.amd ? define(i) : (r = "undefined" != typeof globalThis ? globalThis : r || self).Hls = i()
}(!1);
function Alert(e, t) {
    let n = document.querySelector(".alert-overlay");
    n && n.remove();
    let a = document.createElement("div");
    document.body.append(a),
    a.className = "alert-overlay",
    a.onclick = function(e) {
        e.target === this && m()
    }
    ;
    let l = document.createElement("div");
    a.append(l),
    l.className = "alert-modal";
    let c = document.createElement("div");
    l.append(c),
    c.className = "alert-text",
    c.innerHTML = e;
    let o = document.createElement("div");
    l.append(o),
    o.className = "alert-footer";
    let r = document.createElement("button");
    function m() {
        a.remove()
    }
    o.append(r),
    r.className = "alert-button",
    r.innerHTML = "OK",
    r.onclick = () => {
        t && t(),
        m()
    }
}
;function Cinemar(options) {
    let player, ratio = window.outerWidth * window.outerHeight, deviceRatio = window.devicePixelRatio > 1 ? 2 : 1;
    const _ratioCor = .9
      , hq_ratio = 105e4;
    options.default_quality = ratio < 230400 * _ratioCor ? "360p" : ratio < 409920 * _ratioCor ? "480p" : ratio < 921600 * _ratioCor ? "720p HD" : "1080p HD",
    deviceRatio * ratio < hq_ratio && (options.forbidden_quality = "1080p FullHD"),
    Array.from || (Array.from = e => e.slice(""));
    let playlist = {
        playlist: [],
        voice_id: null,
        opened: !1,
        options: {
            searchListCount: 40
        },
        init(e) {
            this.parsePlaylist(e),
            this.clearPlayer(),
            this._wrapper = document.createElement("div"),
            document.querySelector("#oframeplayer").append(this._wrapper),
            this._wrapper.className = "playlist",
            this._wrapper.onclick = e => {
                e.target === this._wrapper && this.closeDropdown()
            }
            ,
            this.buildHTML(!0)
        },
        load(e, t) {
            return this.hidePlaylist = !!t,
            "object" == typeof e ? e : e.indexOf("/@x") >= 0 ? this.loadFromUrl(e) : 0 === e.indexOf("#2") ? this.loadFromString(e.substr(2)) : ""
        },
        loadFromUrl(e) {
            const t = new XMLHttpRequest;
            if (t.open("GET", e, !1),
            t.send(),
            200 === t.status) {
                let e = JSON.parse(t.responseText);
                if (e.error)
                    throw new Error("   .<br> : " + e.error);
                if (e.length)
                    return e;
                throw new Error(".  ")
            }
            throw new Error(" HTTP: " + t.status)
        },
        loadFromString(e) {
            return this.dm = e.substr(0, 2),
            this._ml = Math.pow(2, 5),
            this.readString(this.slice(e.substr(2)), 1, 5, 15, 12)
        },
        parsePlaylist(e, t) {
            t = t || null,
            e.forEach(( (e, i) => {
                if (void 0 !== e.folder) {
                    let i = {
                        id: e.pjs_id,
                        parent_id: t,
                        title: e.title
                    };
                    this.playlist.push(i),
                    this.parsePlaylist(e.folder, e.pjs_id)
                } else
                    e.file && this.playlist.push({
                        file_id: e.pjs_id,
                        src_id: e.src_id,
                        src: e.file,
                        dlink: e.dlink,
                        id: e.pjs_id,
                        parent_id: t,
                        title: e.title,
                        title2: e.title2,
                        voice_id: e.voice_id
                    })
            }
            ))
        },
        slice(e) {
            return e.split(String.fromCharCode(this.dm)).map((e => {
                let t = parseInt(e.slice(-1));
                return e.length > this._ml ? e.substr(2 * t, e.length - 3 * t - 1) + e.substr(0, t) : e
            }
            )).join(this.ex[17])
        },
        buildHTML(e) {
            let t = this.getCurrentItem();
            if (void 0 === t && (t = this.playlist.find((e => e.file_id))),
            !0 === e && (this.voice_id = t.voice_id),
            this.hidePlaylist)
                return;
            let i = [];
            this.buildGroup(t, (e => {
                i.unshift(e)
            }
            )),
            this._wrapper.innerHTML = "",
            this.groups = [],
            i.forEach(( (e, t) => {
                this.groups[t] = {};
                let i = e.find((e => e.active));
                this.groups[t].dom = document.createElement("div"),
                this._wrapper.append(this.groups[t].dom),
                this.groups[t].dom.className = "playlist-group",
                this.groups[t].dom.onclick = e => {
                    e.target === this.groups[t].dom && this.closeDropdown()
                }
                ;
                let o = document.createElement("button");
                if (this.groups[t].dom.append(o),
                o.className = "playlist-title",
                o.innerHTML = i.title,
                !(this.playlist.length > 1))
                    return void (o.disabled = !0);
                o.onclick = () => {
                    this.groups[t].opened ? this.closeDropdown() : this.openDropdown(t)
                }
                ;
                let s, r = document.createElement("div");
                if (this.groups[t].dom.append(r),
                r.className = "playlist-dropdown",
                e.forEach((e => {
                    e.dom = document.createElement("button"),
                    r.append(e.dom),
                    e.dom.type = "button",
                    e.dom.innerHTML = e.title,
                    e.active && (e.dom.className = "is-active",
                    s = e.dom),
                    e.dom.onclick = () => {
                        if (e.file_id)
                            player.api("play", "id:" + e.file_id),
                            this.voice_id = e.voice_id,
                            this.closeDropdown(),
                            this.buildHTML(),
                            e.dom.parentNode.querySelectorAll("button").forEach((e => {
                                e.className = ""
                            }
                            )),
                            e.dom.className = "is-active";
                        else if (e.dom.className)
                            this.closeDropdown();
                        else {
                            let i = this.findFileId(e);
                            player.api("find", i),
                            this.buildHTML(),
                            0 === t && this.groups.length > 1 ? this.openDropdown(1) : this.closeDropdown()
                        }
                    }
                }
                )),
                e.length > this.options.searchListCount) {
                    let t = document.createElement("input");
                    r.prepend(t),
                    t.type = "text",
                    t.placeholder = "...",
                    t.className = "playlist-search",
                    t.onkeyup = function(t) {
                        if (27 == t.keyCode && (this.value = ""),
                        this.value.trim()) {
                            let t = this.value.toLowerCase().trim();
                            e.forEach((e => {
                                e.title.toLowerCase().indexOf(t) >= 0 ? e.dom.removeAttribute("hidden") : e.dom.setAttribute("hidden", "")
                            }
                            ))
                        } else
                            e.forEach((e => e.dom.removeAttribute("hidden")))
                    }
                }
            }
            ))
        },
        readString(val, ...actions) {
            const padding = val.length % 4;
            return padding && (val += "=".repeat(4 - padding)),
            actions.forEach((v => eval(`val = ${this.ex[v]}(val)`))),
            val
        },
        buildGroup(e, t) {
            let i = [];
            this.playlist.filter((t => t.parent_id === e.parent_id)).forEach((t => {
                t.active = t.id === e.id,
                i.push(t)
            }
            )),
            t(i);
            let o = this.playlist.find((t => t.id === e.parent_id));
            void 0 !== o && this.buildGroup(o, t)
        },
        findFileId(e) {
            let t = this.playlist.filter((t => t.parent_id === e.id))
              , i = t.find((e => e.file_id));
            if (i) {
                let e = t.find((e => e.voice_id === this.voice_id));
                return e ? e.file_id : i.file_id
            }
            if (t.length)
                return this.findFileId(t[0]);
            Alert("Empty playlist")
        },
        closeDropdown(e) {
            this.groups.forEach((e => {
                e.dom.classList.remove("is-open"),
                e.opened = !1
            }
            )),
            !0 !== e && (this._wrapper.classList.remove("is-open"),
            this.opened = !1)
        },
        openDropdown(e) {
            this.opened && this.closeDropdown(!0),
            this.opened = !0,
            this.groups[e].opened = !0,
            this.groups[e].dom.classList.add("is-open"),
            this._wrapper.classList.add("is-open"),
            setTimeout(( () => {
                let t = this.groups[e].dom.querySelector("button.is-active");
                this.groups[e].dom.querySelector(".playlist-dropdown").scroll(0, t.offsetTop - this.groups[e].dom.clientHeight / 4)
            }
            ), 20)
        },
        getCurrentItem() {
            return this.playlist.find((e => e.file_id == player.api("playlist_id")))
        },
        playNext() {
            if (this.hidePlaylist)
                return;
            let e = this.getCurrentItem();
            if (!e)
                return;
            let t = this.playlist.filter((e => !e.file_id && e.parent_id));
            if (!t)
                return;
            let i = t.findIndex((t => t.id === e.parent_id));
            if (i >= 0 && t[i + 1]) {
                let e = this.playlist.filter((e => e.file_id && e.parent_id === t[i + 1].id));
                if (e) {
                    let t = e.find((e => e.voice_id === this.voice_id))
                      , i = t ? t.file_id : e[0].file_id;
                    player.api("play", "id:" + i),
                    this.buildHTML()
                }
            }
        },
        show() {
            this._wrapper.removeAttribute("hidden")
        },
        hide() {
            this._wrapper.setAttribute("hidden", "")
        },
        clearPlayer() {
            document.querySelectorAll('[id^="player_playlist"]').forEach((e => e.remove()))
        },
        ex: ["slice", "atob", "substr", "salt", "temp", "escape", "push", "this", "btoa", "pop", "JSON.stringify", "length", "JSON.parse", "forEach", "splice", "decodeURIComponent", "unshift", "", "clone", "insert"]
    }
      , storeTime = {
        init() {
            let e = "pljsplayfrom_" + location.host + options.cuid
              , t = localStorage.getItem(e);
            if (t && 0 == t.indexOf("{")) {
                let e = t.substr(1, t.indexOf("}") - 1);
                e = e.split("-");
                let i = e[e.length - 1]
                  , o = playlist.playlist.find((e => e.file_id == i));
                if (o) {
                    t = t.substr(t.indexOf("}") + 1);
                    let e = parseFloat(t.split("--")[0]);
                    if (e > 2) {
                        let t = document.createElement("button");
                        document.querySelector("#player").append(t),
                        t.className = "continue",
                        t.innerHTML = o.title2 + "  " + this.formatTime(e),
                        t.onclick = () => {
                            player.api("play", "id:" + i),
                            player.api("seek", e),
                            playlist.voice_id = o.voice_id,
                            playlist.buildHTML()
                        }
                    }
                }
            }
        },
        hide() {
            let e = document.querySelector(".continue");
            e && e.remove()
        },
        formatTime(e) {
            const t = Math.floor(e / 3600)
              , i = Math.floor(e % 3600 / 60)
              , o = Math.floor(e % 60)
              , s = i.toString().padStart(2, "0")
              , r = o.toString().padStart(2, "0");
            if (t > 0) {
                return `${t.toString().padStart(2, "0")}:${s}:${r}`
            }
            return `${s}:${r}`
        }
    }
      , download = {
        open(e) {
            this.buildHTML(e)
        },
        close() {
            this.wrapper.remove()
        },
        startDownload(e) {
            window.open(e.href)
        },
        buildHTML(e) {
            this.wrapper = document.createElement("div"),
            document.body.append(this.wrapper),
            this.wrapper.className = "download",
            this.wrapper.onclick = e => e.target === this.wrapper && this.close();
            let t = document.createElement("div");
            this.wrapper.append(t),
            t.className = "download-window";
            let i = document.createElement("div");
            t.append(i),
            i.className = "download-header",
            i.innerHTML = " ";
            let o = document.createElement("button");
            i.append(o),
            o.className = "download-close",
            o.onclick = () => this.close();
            let s = document.createElement("div");
            t.append(s),
            s.className = "download-content preload",
            fetch("/api/player/downPage", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    link: e,
                    fhq: deviceRatio * ratio > hq_ratio
                })
            }).then((e => e.json())).then((e => {
                s.classList.remove("preload"),
                e.error ? (Alert(e.error),
                this.wrapper.remove()) : e.forEach((e => {
                    let t = document.createElement("button");
                    s.append(t),
                    t.innerHTML = e.title,
                    e.hint && (t.innerHTML += `<span>${e.hint}</span>`),
                    t.onclick = () => this.startDownload(e)
                }
                ))
            }
            )).catch((e => Alert(e)))
        }
    };
	 
    window.download = () => download.open(playlist.getCurrentItem().dlink),
    window.nextSerie = () => playlist.playNext(),
    window.PlayerjsEvents = function(e, t, i) {
        "init" == e && (playlist.init(options.file),
        storeTime.init()),
        "ui" == e && ("1" === i ? playlist.show() : playlist.hide()),
        "click" == e && playlist.closeDropdown(),
        "finish" == e && playlist.playNext(),
        "start" == e && storeTime.hide()
    }
    ,
    options.id = "player",
    options.poster = options.poster ? options.poster : "/img/poster.jpg",
    options.continue = 0,
    options.vast_replace = {
        "{host}": options.host
    };
    try {
        options.file = playlist.load(options.file, options.hidePlaylist),
        options.file[0].folder && !options.hidePlaylist && (options.serial = !0),
        player = new Playerjs(options)
    } catch (e) {
        Alert("<br>" + e.message),
        console.error(e)
    }
    document.body.classList.remove("preload")
}